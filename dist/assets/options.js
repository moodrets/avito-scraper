var Nc=Object.defineProperty;var Ic=(e,t,n)=>t in e?Nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ft=(e,t,n)=>(Ic(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yo(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const nt={},hr=[],nn=()=>{},Fc=()=>!1,Lc=/^on[^a-z]/,Xs=e=>Lc.test(e),mo=e=>e.startsWith("onUpdate:"),mt=Object.assign,go=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Mc=Object.prototype.hasOwnProperty,Ke=(e,t)=>Mc.call(e,t),Te=Array.isArray,pr=e=>is(e)==="[object Map]",Ha=e=>is(e)==="[object Set]",Bc=e=>is(e)==="[object RegExp]",Pe=e=>typeof e=="function",pt=e=>typeof e=="string",vo=e=>typeof e=="symbol",at=e=>e!==null&&typeof e=="object",qa=e=>at(e)&&Pe(e.then)&&Pe(e.catch),Ja=Object.prototype.toString,is=e=>Ja.call(e),Rc=e=>is(e).slice(8,-1),Ya=e=>is(e)==="[object Object]",bo=e=>pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ss=yo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},jc=/-(\w)/g,kr=Qs(e=>e.replace(jc,(t,n)=>n?n.toUpperCase():"")),Kc=/\B([A-Z])/g,nr=Qs(e=>e.replace(Kc,"-$1").toLowerCase()),Wa=Qs(e=>e.charAt(0).toUpperCase()+e.slice(1)),di=Qs(e=>e?`on${Wa(e)}`:""),Jr=(e,t)=>!Object.is(e,t),yr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ms=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Oi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let zo;const Ei=()=>zo||(zo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cr(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=pt(r)?qc(r):Cr(r);if(s)for(const i in s)t[i]=s[i]}return t}else{if(pt(e))return e;if(at(e))return e}}const Uc=/;(?![^(]*\))/g,Vc=/:([^]+)/,Hc=/\/\*[^]*?\*\//g;function qc(e){const t={};return e.replace(Hc,"").split(Uc).forEach(n=>{if(n){const r=n.split(Vc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function _t(e){let t="";if(pt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=_t(e[n]);r&&(t+=r+" ")}else if(at(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Jc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yc=yo(Jc);function za(e){return!!e||e===""}const Ee=e=>pt(e)?e:e==null?"":Te(e)||at(e)&&(e.toString===Ja||!Pe(e.toString))?JSON.stringify(e,Ga,2):String(e),Ga=(e,t)=>t&&t.__v_isRef?Ga(e,t.value):pr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Ha(t)?{[`Set(${t.size})`]:[...t.values()]}:at(t)&&!Te(t)&&!Ya(t)?String(t):t;let Qt;class Xa{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Qt,!t&&Qt&&(this.index=(Qt.scopes||(Qt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Qt;try{return Qt=this,t()}finally{Qt=n}}}on(){Qt=this}off(){Qt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Wc(e){return new Xa(e)}function zc(e,t=Qt){t&&t.active&&t.effects.push(e)}function Gc(){return Qt}const _o=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Qa=e=>(e.w&In)>0,Za=e=>(e.n&In)>0,Xc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=In},Qc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const s=t[r];Qa(s)&&!Za(s)?s.delete(e):t[n++]=s,s.w&=~In,s.n&=~In}t.length=n}},Ai=new WeakMap;let Nr=0,In=1;const Pi=30;let Zt;const zn=Symbol(""),$i=Symbol("");class wo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,zc(this,r)}run(){if(!this.active)return this.fn();let t=Zt,n=$n;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Zt,Zt=this,$n=!0,In=1<<++Nr,Nr<=Pi?Xc(this):Go(this),this.fn()}finally{Nr<=Pi&&Qc(this),In=1<<--Nr,Zt=this.parent,$n=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Zt===this?this.deferStop=!0:this.active&&(Go(this),this.onStop&&this.onStop(),this.active=!1)}}function Go(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let $n=!0;const el=[];function Or(){el.push($n),$n=!1}function Er(){const e=el.pop();$n=e===void 0?!0:e}function Mt(e,t,n){if($n&&Zt){let r=Ai.get(e);r||Ai.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=_o()),tl(s)}}function tl(e,t){let n=!1;Nr<=Pi?Za(e)||(e.n|=In,n=!Qa(e)):n=!e.has(Zt),n&&(e.add(Zt),Zt.deps.push(e))}function wn(e,t,n,r,s,i){const o=Ai.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&Te(e)){const u=Number(r);o.forEach((c,p)=>{(p==="length"||p>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":Te(e)?bo(n)&&l.push(o.get("length")):(l.push(o.get(zn)),pr(e)&&l.push(o.get($i)));break;case"delete":Te(e)||(l.push(o.get(zn)),pr(e)&&l.push(o.get($i)));break;case"set":pr(e)&&l.push(o.get(zn));break}if(l.length===1)l[0]&&Ni(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);Ni(_o(u))}}function Ni(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&Xo(r);for(const r of n)r.computed||Xo(r)}function Xo(e,t){(e!==Zt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Zc=yo("__proto__,__v_isRef,__isVue"),nl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vo)),eu=xo(),tu=xo(!1,!0),nu=xo(!0),Qo=ru();function ru(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Je(this);for(let i=0,o=this.length;i<o;i++)Mt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Je)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Or();const r=Je(this)[t].apply(this,n);return Er(),r}}),e}function su(e){const t=Je(this);return Mt(t,"has",e),t.hasOwnProperty(e)}function xo(e=!1,t=!1){return function(r,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&i===(e?t?_u:al:t?ol:il).get(r))return r;const o=Te(r);if(!e){if(o&&Ke(Qo,s))return Reflect.get(Qo,s,i);if(s==="hasOwnProperty")return su}const l=Reflect.get(r,s,i);return(vo(s)?nl.has(s):Zc(s))||(e||Mt(r,"get",s),t)?l:kt(l)?o&&bo(s)?l:l.value:at(l)?e?ll(l):Fn(l):l}}const iu=rl(),ou=rl(!0);function rl(e=!1){return function(n,r,s,i){let o=n[r];if(Dr(o)&&kt(o)&&!kt(s))return!1;if(!e&&(!Bs(s)&&!Dr(s)&&(o=Je(o),s=Je(s)),!Te(n)&&kt(o)&&!kt(s)))return o.value=s,!0;const l=Te(n)&&bo(r)?Number(r)<n.length:Ke(n,r),u=Reflect.set(n,r,s,i);return n===Je(i)&&(l?Jr(s,o)&&wn(n,"set",r,s):wn(n,"add",r,s)),u}}function au(e,t){const n=Ke(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&wn(e,"delete",t,void 0),r}function lu(e,t){const n=Reflect.has(e,t);return(!vo(t)||!nl.has(t))&&Mt(e,"has",t),n}function cu(e){return Mt(e,"iterate",Te(e)?"length":zn),Reflect.ownKeys(e)}const sl={get:eu,set:iu,deleteProperty:au,has:lu,ownKeys:cu},uu={get:nu,set(e,t){return!0},deleteProperty(e,t){return!0}},fu=mt({},sl,{get:tu,set:ou}),ko=e=>e,Zs=e=>Reflect.getPrototypeOf(e);function ds(e,t,n=!1,r=!1){e=e.__v_raw;const s=Je(e),i=Je(t);n||(t!==i&&Mt(s,"get",t),Mt(s,"get",i));const{has:o}=Zs(s),l=r?ko:n?To:Yr;if(o.call(s,t))return l(e.get(t));if(o.call(s,i))return l(e.get(i));e!==s&&e.get(t)}function hs(e,t=!1){const n=this.__v_raw,r=Je(n),s=Je(e);return t||(e!==s&&Mt(r,"has",e),Mt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function ps(e,t=!1){return e=e.__v_raw,!t&&Mt(Je(e),"iterate",zn),Reflect.get(e,"size",e)}function Zo(e){e=Je(e);const t=Je(this);return Zs(t).has.call(t,e)||(t.add(e),wn(t,"add",e,e)),this}function ea(e,t){t=Je(t);const n=Je(this),{has:r,get:s}=Zs(n);let i=r.call(n,e);i||(e=Je(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Jr(t,o)&&wn(n,"set",e,t):wn(n,"add",e,t),this}function ta(e){const t=Je(this),{has:n,get:r}=Zs(t);let s=n.call(t,e);s||(e=Je(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&wn(t,"delete",e,void 0),i}function na(){const e=Je(this),t=e.size!==0,n=e.clear();return t&&wn(e,"clear",void 0,void 0),n}function ys(e,t){return function(r,s){const i=this,o=i.__v_raw,l=Je(o),u=t?ko:e?To:Yr;return!e&&Mt(l,"iterate",zn),o.forEach((c,p)=>r.call(s,u(c),u(p),i))}}function ms(e,t,n){return function(...r){const s=this.__v_raw,i=Je(s),o=pr(i),l=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=s[e](...r),p=n?ko:t?To:Yr;return!t&&Mt(i,"iterate",u?$i:zn),{next(){const{value:m,done:x}=c.next();return x?{value:m,done:x}:{value:l?[p(m[0]),p(m[1])]:p(m),done:x}},[Symbol.iterator](){return this}}}}function Dn(e){return function(...t){return e==="delete"?!1:this}}function du(){const e={get(i){return ds(this,i)},get size(){return ps(this)},has:hs,add:Zo,set:ea,delete:ta,clear:na,forEach:ys(!1,!1)},t={get(i){return ds(this,i,!1,!0)},get size(){return ps(this)},has:hs,add:Zo,set:ea,delete:ta,clear:na,forEach:ys(!1,!0)},n={get(i){return ds(this,i,!0)},get size(){return ps(this,!0)},has(i){return hs.call(this,i,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:ys(!0,!1)},r={get(i){return ds(this,i,!0,!0)},get size(){return ps(this,!0)},has(i){return hs.call(this,i,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:ys(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ms(i,!1,!1),n[i]=ms(i,!0,!1),t[i]=ms(i,!1,!0),r[i]=ms(i,!0,!0)}),[e,n,t,r]}const[hu,pu,yu,mu]=du();function Co(e,t){const n=t?e?mu:yu:e?pu:hu;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Ke(n,s)&&s in r?n:r,s,i)}const gu={get:Co(!1,!1)},vu={get:Co(!1,!0)},bu={get:Co(!0,!1)},il=new WeakMap,ol=new WeakMap,al=new WeakMap,_u=new WeakMap;function wu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xu(e){return e.__v_skip||!Object.isExtensible(e)?0:wu(Rc(e))}function Fn(e){return Dr(e)?e:Do(e,!1,sl,gu,il)}function ku(e){return Do(e,!1,fu,vu,ol)}function ll(e){return Do(e,!0,uu,bu,al)}function Do(e,t,n,r,s){if(!at(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=xu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return s.set(e,l),l}function mr(e){return Dr(e)?mr(e.__v_raw):!!(e&&e.__v_isReactive)}function Dr(e){return!!(e&&e.__v_isReadonly)}function Bs(e){return!!(e&&e.__v_isShallow)}function cl(e){return mr(e)||Dr(e)}function Je(e){const t=e&&e.__v_raw;return t?Je(t):e}function So(e){return Ms(e,"__v_skip",!0),e}const Yr=e=>at(e)?Fn(e):e,To=e=>at(e)?ll(e):e;function ul(e){$n&&Zt&&(e=Je(e),tl(e.dep||(e.dep=_o())))}function fl(e,t){e=Je(e);const n=e.dep;n&&Ni(n)}function kt(e){return!!(e&&e.__v_isRef===!0)}function rn(e){return Cu(e,!1)}function Cu(e,t){return kt(e)?e:new Du(e,t)}class Du{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Je(t),this._value=n?t:Yr(t)}get value(){return ul(this),this._value}set value(t){const n=this.__v_isShallow||Bs(t)||Dr(t);t=n?t:Je(t),Jr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Yr(t),fl(this))}}function ne(e){return kt(e)?e.value:e}const Su={get:(e,t,n)=>ne(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return kt(s)&&!kt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function dl(e){return mr(e)?e:new Proxy(e,Su)}class Tu{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new wo(t,()=>{this._dirty||(this._dirty=!0,fl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Je(this);return ul(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ou(e,t,n=!1){let r,s;const i=Pe(e);return i?(r=e,s=nn):(r=e.get,s=e.set),new Tu(r,s,i||!s,n)}function Nn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){ei(i,t,n)}return s}function sn(e,t,n,r){if(Pe(e)){const i=Nn(e,t,n,r);return i&&qa(i)&&i.catch(o=>{ei(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(sn(e[i],t,n,r));return s}function ei(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,l=n;for(;i;){const c=i.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,o,l)===!1)return}i=i.parent}const u=t.appContext.config.errorHandler;if(u){Nn(u,null,10,[e,o,l]);return}}Eu(e,n,s,r)}function Eu(e,t,n,r=!0){console.error(e)}let Wr=!1,Ii=!1;const wt=[];let cn=0;const gr=[];let pn=null,qn=0;const hl=Promise.resolve();let Oo=null;function Au(e){const t=Oo||hl;return e?t.then(this?e.bind(this):e):t}function Pu(e){let t=cn+1,n=wt.length;for(;t<n;){const r=t+n>>>1;zr(wt[r])<e?t=r+1:n=r}return t}function Eo(e){(!wt.length||!wt.includes(e,Wr&&e.allowRecurse?cn+1:cn))&&(e.id==null?wt.push(e):wt.splice(Pu(e.id),0,e),pl())}function pl(){!Wr&&!Ii&&(Ii=!0,Oo=hl.then(ml))}function $u(e){const t=wt.indexOf(e);t>cn&&wt.splice(t,1)}function Nu(e){Te(e)?gr.push(...e):(!pn||!pn.includes(e,e.allowRecurse?qn+1:qn))&&gr.push(e),pl()}function ra(e,t=Wr?cn+1:0){for(;t<wt.length;t++){const n=wt[t];n&&n.pre&&(wt.splice(t,1),t--,n())}}function yl(e){if(gr.length){const t=[...new Set(gr)];if(gr.length=0,pn){pn.push(...t);return}for(pn=t,pn.sort((n,r)=>zr(n)-zr(r)),qn=0;qn<pn.length;qn++)pn[qn]();pn=null,qn=0}}const zr=e=>e.id==null?1/0:e.id,Iu=(e,t)=>{const n=zr(e)-zr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function ml(e){Ii=!1,Wr=!0,wt.sort(Iu);const t=nn;try{for(cn=0;cn<wt.length;cn++){const n=wt[cn];n&&n.active!==!1&&Nn(n,null,14)}}finally{cn=0,wt.length=0,yl(),Wr=!1,Oo=null,(wt.length||gr.length)&&ml()}}function Fu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||nt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const p=`${o==="modelValue"?"model":o}Modifiers`,{number:m,trim:x}=r[p]||nt;x&&(s=n.map(S=>pt(S)?S.trim():S)),m&&(s=n.map(Oi))}let l,u=r[l=di(t)]||r[l=di(kr(t))];!u&&i&&(u=r[l=di(nr(t))]),u&&sn(u,e,6,s);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,sn(c,e,6,s)}}function gl(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},l=!1;if(!Pe(e)){const u=c=>{const p=gl(c,t,!0);p&&(l=!0,mt(o,p))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(at(e)&&r.set(e,null),null):(Te(i)?i.forEach(u=>o[u]=null):mt(o,i),at(e)&&r.set(e,o),o)}function ti(e,t){return!e||!Xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,nr(t))||Ke(e,t))}let Ct=null,vl=null;function Rs(e){const t=Ct;return Ct=e,vl=e&&e.type.__scopeId||null,t}function Dt(e,t=Ct,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&ha(-1);const i=Rs(t);let o;try{o=e(...s)}finally{Rs(i),r._d&&ha(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function hi(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:l,attrs:u,emit:c,render:p,renderCache:m,data:x,setupState:S,ctx:P,inheritAttrs:T}=e;let R,B;const E=Rs(e);try{if(n.shapeFlag&4){const N=s||r;R=ln(p.call(N,N,m,i,S,x,P)),B=u}else{const N=t;R=ln(N.length>1?N(i,{attrs:u,slots:l,emit:c}):N(i,null)),B=t.props?u:Lu(u)}}catch(N){jr.length=0,ei(N,e,1),R=Be(Ln)}let $=R;if(B&&T!==!1){const N=Object.keys(B),{shapeFlag:U}=$;N.length&&U&7&&(o&&N.some(mo)&&(B=Mu(B,o)),$=Zn($,B))}return n.dirs&&($=Zn($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),R=$,Rs(E),R}const Lu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xs(n))&&((t||(t={}))[n]=e[n]);return t},Mu=(e,t)=>{const n={};for(const r in e)(!mo(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Bu(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:l,patchFlag:u}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?sa(r,o,c):!!o;if(u&8){const p=t.dynamicProps;for(let m=0;m<p.length;m++){const x=p[m];if(o[x]!==r[x]&&!ti(c,x))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?sa(r,o,c):!0:!!o;return!1}function sa(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ti(n,i))return!0}return!1}function Ru({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const bl=e=>e.__isSuspense;function ju(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Nu(e)}const gs={};function Ts(e,t,n){return _l(e,t,n)}function _l(e,t,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=nt){var l;const u=Gc()===((l=bt)==null?void 0:l.scope)?bt:null;let c,p=!1,m=!1;if(kt(e)?(c=()=>e.value,p=Bs(e)):mr(e)?(c=()=>e,r=!0):Te(e)?(m=!0,p=e.some(N=>mr(N)||Bs(N)),c=()=>e.map(N=>{if(kt(N))return N.value;if(mr(N))return Yn(N);if(Pe(N))return Nn(N,u,2)})):Pe(e)?t?c=()=>Nn(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return x&&x(),sn(e,u,3,[S])}:c=nn,t&&r){const N=c;c=()=>Yn(N())}let x,S=N=>{x=E.onStop=()=>{Nn(N,u,4)}},P;if(Xr)if(S=nn,t?n&&sn(t,u,3,[c(),m?[]:void 0,S]):c(),s==="sync"){const N=$f();P=N.__watcherHandles||(N.__watcherHandles=[])}else return nn;let T=m?new Array(e.length).fill(gs):gs;const R=()=>{if(E.active)if(t){const N=E.run();(r||p||(m?N.some((U,J)=>Jr(U,T[J])):Jr(N,T)))&&(x&&x(),sn(t,u,3,[N,T===gs?void 0:m&&T[0]===gs?[]:T,S]),T=N)}else E.run()};R.allowRecurse=!!t;let B;s==="sync"?B=R:s==="post"?B=()=>vt(R,u&&u.suspense):(R.pre=!0,u&&(R.id=u.uid),B=()=>Eo(R));const E=new wo(c,B);t?n?R():T=E.run():s==="post"?vt(E.run.bind(E),u&&u.suspense):E.run();const $=()=>{E.stop(),u&&u.scope&&go(u.scope.effects,E)};return P&&P.push($),$}function Ku(e,t,n){const r=this.proxy,s=pt(e)?e.includes(".")?wl(r,e):()=>r[e]:e.bind(r,r);let i;Pe(t)?i=t:(i=t.handler,n=t);const o=bt;Sr(this);const l=_l(s,i.bind(r),n);return o?Sr(o):Gn(),l}function wl(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Yn(e,t){if(!at(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))Yn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Yn(e[n],t);else if(Ha(e)||pr(e))e.forEach(n=>{Yn(n,t)});else if(Ya(e))for(const n in e)Yn(e[n],t);return e}function Wt(e,t){const n=Ct;if(n===null)return e;const r=ii(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,l,u,c=nt]=t[i];o&&(Pe(o)&&(o={mounted:o,updated:o}),o.deep&&Yn(l),s.push({dir:o,instance:r,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function Un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let u=l.dir[r];u&&(Or(),sn(u,n,8,[e.el,l,e,t]),Er())}}function xl(e,t){e.shapeFlag&6&&e.component?xl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Bt(e,t){return Pe(e)?(()=>mt({name:e.name},t,{setup:e}))():e}const vr=e=>!!e.type.__asyncLoader,kl=e=>e.type.__isKeepAlive,Uu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=jl(),r=n.ctx;if(!r.renderer)return()=>{const E=t.default&&t.default();return E&&E.length===1?E[0]:E};const s=new Map,i=new Set;let o=null;const l=n.suspense,{renderer:{p:u,m:c,um:p,o:{createElement:m}}}=r,x=m("div");r.activate=(E,$,N,U,J)=>{const H=E.component;c(E,$,N,0,l),u(H.vnode,E,$,N,H,l,U,E.slotScopeIds,J),vt(()=>{H.isDeactivated=!1,H.a&&yr(H.a);const re=E.props&&E.props.onVnodeMounted;re&&Jt(re,H.parent,E)},l)},r.deactivate=E=>{const $=E.component;c(E,x,null,1,l),vt(()=>{$.da&&yr($.da);const N=E.props&&E.props.onVnodeUnmounted;N&&Jt(N,$.parent,E),$.isDeactivated=!0},l)};function S(E){pi(E),p(E,n,l,!0)}function P(E){s.forEach(($,N)=>{const U=ga($.type);U&&(!E||!E(U))&&T(N)})}function T(E){const $=s.get(E);!o||!cr($,o)?S($):o&&pi(o),s.delete(E),i.delete(E)}Ts(()=>[e.include,e.exclude],([E,$])=>{E&&P(N=>Ir(E,N)),$&&P(N=>!Ir($,N))},{flush:"post",deep:!0});let R=null;const B=()=>{R!=null&&s.set(R,yi(n.subTree))};return rr(B),Sl(B),os(()=>{s.forEach(E=>{const{subTree:$,suspense:N}=n,U=yi($);if(E.type===U.type&&E.key===U.key){pi(U);const J=U.component.da;J&&vt(J,N);return}S(E)})}),()=>{if(R=null,!t.default)return null;const E=t.default(),$=E[0];if(E.length>1)return o=null,E;if(!$o($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let N=yi($);const U=N.type,J=ga(vr(N)?N.type.__asyncResolved||{}:U),{include:H,exclude:re,max:k}=e;if(H&&(!J||!Ir(H,J))||re&&J&&Ir(re,J))return o=N,$;const _=N.key==null?U:N.key,V=s.get(_);return N.el&&(N=Zn(N),$.shapeFlag&128&&($.ssContent=N)),R=_,V?(N.el=V.el,N.component=V.component,N.transition&&xl(N,N.transition),N.shapeFlag|=512,i.delete(_),i.add(_)):(i.add(_),k&&i.size>parseInt(k,10)&&T(i.values().next().value)),N.shapeFlag|=256,o=N,bl($.type)?$:N}}},Vu=Uu;function Ir(e,t){return Te(e)?e.some(n=>Ir(n,t)):pt(e)?e.split(",").includes(t):Bc(e)?e.test(t):!1}function Hu(e,t){Cl(e,"a",t)}function qu(e,t){Cl(e,"da",t)}function Cl(e,t,n=bt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ni(t,r,n),n){let s=n.parent;for(;s&&s.parent;)kl(s.parent.vnode)&&Ju(r,t,n,s),s=s.parent}}function Ju(e,t,n,r){const s=ni(t,e,r,!0);Tl(()=>{go(r[t],s)},n)}function pi(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function yi(e){return e.shapeFlag&128?e.ssContent:e}function ni(e,t,n=bt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Or(),Sr(n);const l=sn(t,n,e,o);return Gn(),Er(),l});return r?s.unshift(i):s.push(i),i}}const kn=e=>(t,n=bt)=>(!Xr||e==="sp")&&ni(e,(...r)=>t(...r),n),Dl=kn("bm"),rr=kn("m"),Yu=kn("bu"),Sl=kn("u"),os=kn("bum"),Tl=kn("um"),Wu=kn("sp"),zu=kn("rtg"),Gu=kn("rtc");function Xu(e,t=bt){ni("ec",e,t)}const Qu=Symbol.for("v-ndc");function gn(e,t,n,r){let s;const i=n&&n[r];if(Te(e)||pt(e)){s=new Array(e.length);for(let o=0,l=e.length;o<l;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(at(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>t(o,l,void 0,i&&i[l]));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=t(e[c],c,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}function Ol(e,t,n={},r,s){if(Ct.isCE||Ct.parent&&vr(Ct.parent)&&Ct.parent.isCE)return t!=="default"&&(n.name=t),Be("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),se();const o=i&&El(i(n)),l=Lt(rt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function El(e){return e.some(t=>$o(t)?!(t.type===Ln||t.type===rt&&!El(t.children)):!0)?e:null}const Fi=e=>e?Kl(e)?ii(e)||e.proxy:Fi(e.parent):null,Rr=mt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fi(e.parent),$root:e=>Fi(e.root),$emit:e=>e.emit,$options:e=>Ao(e),$forceUpdate:e=>e.f||(e.f=()=>Eo(e.update)),$nextTick:e=>e.n||(e.n=Au.bind(e.proxy)),$watch:e=>Ku.bind(e)}),mi=(e,t)=>e!==nt&&!e.__isScriptSetup&&Ke(e,t),Zu={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const S=o[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(mi(r,t))return o[t]=1,r[t];if(s!==nt&&Ke(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Ke(c,t))return o[t]=3,i[t];if(n!==nt&&Ke(n,t))return o[t]=4,n[t];Li&&(o[t]=0)}}const p=Rr[t];let m,x;if(p)return t==="$attrs"&&Mt(e,"get",t),p(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==nt&&Ke(n,t))return o[t]=4,n[t];if(x=u.config.globalProperties,Ke(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return mi(s,t)?(s[t]=n,!0):r!==nt&&Ke(r,t)?(r[t]=n,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!n[o]||e!==nt&&Ke(e,o)||mi(t,o)||(l=i[0])&&Ke(l,o)||Ke(r,o)||Ke(Rr,o)||Ke(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ke(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ef(){return tf().slots}function tf(){const e=jl();return e.setupContext||(e.setupContext=Vl(e))}function ia(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Li=!0;function nf(e){const t=Ao(e),n=e.proxy,r=e.ctx;Li=!1,t.beforeCreate&&oa(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:l,provide:u,inject:c,created:p,beforeMount:m,mounted:x,beforeUpdate:S,updated:P,activated:T,deactivated:R,beforeDestroy:B,beforeUnmount:E,destroyed:$,unmounted:N,render:U,renderTracked:J,renderTriggered:H,errorCaptured:re,serverPrefetch:k,expose:_,inheritAttrs:V,components:j,directives:_e,filters:ue}=t;if(c&&rf(c,r,null),o)for(const he in o){const le=o[he];Pe(le)&&(r[he]=le.bind(n))}if(s){const he=s.call(n,n);at(he)&&(e.data=Fn(he))}if(Li=!0,i)for(const he in i){const le=i[he],We=Pe(le)?le.bind(n,n):Pe(le.get)?le.get.bind(n,n):nn,Ye=!Pe(le)&&Pe(le.set)?le.set.bind(n):nn,it=oi({get:We,set:Ye});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>it.value,set:qe=>it.value=qe})}if(l)for(const he in l)Al(l[he],r,n,he);if(u){const he=Pe(u)?u.call(n):u;Reflect.ownKeys(he).forEach(le=>{uf(le,he[le])})}p&&oa(p,e,"c");function be(he,le){Te(le)?le.forEach(We=>he(We.bind(n))):le&&he(le.bind(n))}if(be(Dl,m),be(rr,x),be(Yu,S),be(Sl,P),be(Hu,T),be(qu,R),be(Xu,re),be(Gu,J),be(zu,H),be(os,E),be(Tl,N),be(Wu,k),Te(_))if(_.length){const he=e.exposed||(e.exposed={});_.forEach(le=>{Object.defineProperty(he,le,{get:()=>n[le],set:We=>n[le]=We})})}else e.exposed||(e.exposed={});U&&e.render===nn&&(e.render=U),V!=null&&(e.inheritAttrs=V),j&&(e.components=j),_e&&(e.directives=_e)}function rf(e,t,n=nn){Te(e)&&(e=Mi(e));for(const r in e){const s=e[r];let i;at(s)?"default"in s?i=Os(s.from||r,s.default,!0):i=Os(s.from||r):i=Os(s),kt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function oa(e,t,n){sn(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Al(e,t,n,r){const s=r.includes(".")?wl(n,r):()=>n[r];if(pt(e)){const i=t[e];Pe(i)&&Ts(s,i)}else if(Pe(e))Ts(s,e.bind(n));else if(at(e))if(Te(e))e.forEach(i=>Al(i,t,n,r));else{const i=Pe(e.handler)?e.handler.bind(n):t[e.handler];Pe(i)&&Ts(s,i,e)}}function Ao(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(c=>js(u,c,o,!0)),js(u,t,o)),at(t)&&i.set(t,u),u}function js(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&js(e,i,n,!0),s&&s.forEach(o=>js(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=sf[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const sf={data:aa,props:la,emits:la,methods:Fr,computed:Fr,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:Fr,directives:Fr,watch:af,provide:aa,inject:of};function aa(e,t){return t?e?function(){return mt(Pe(e)?e.call(this,this):e,Pe(t)?t.call(this,this):t)}:t:e}function of(e,t){return Fr(Mi(e),Mi(t))}function Mi(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function At(e,t){return e?[...new Set([].concat(e,t))]:t}function Fr(e,t){return e?mt(Object.create(null),e,t):t}function la(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:mt(Object.create(null),ia(e),ia(t??{})):t}function af(e,t){if(!e)return t;if(!t)return e;const n=mt(Object.create(null),e);for(const r in t)n[r]=At(e[r],t[r]);return n}function Pl(){return{app:null,config:{isNativeTag:Fc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lf=0;function cf(e,t){return function(r,s=null){Pe(r)||(r=mt({},r)),s!=null&&!at(s)&&(s=null);const i=Pl(),o=new Set;let l=!1;const u=i.app={_uid:lf++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Nf,get config(){return i.config},set config(c){},use(c,...p){return o.has(c)||(c&&Pe(c.install)?(o.add(c),c.install(u,...p)):Pe(c)&&(o.add(c),c(u,...p))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,p){return p?(i.components[c]=p,u):i.components[c]},directive(c,p){return p?(i.directives[c]=p,u):i.directives[c]},mount(c,p,m){if(!l){const x=Be(r,s);return x.appContext=i,p&&t?t(x,c):e(x,c,m),l=!0,u._container=c,c.__vue_app__=u,ii(x.component)||x.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return i.provides[c]=p,u},runWithContext(c){Ks=u;try{return c()}finally{Ks=null}}};return u}}let Ks=null;function uf(e,t){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[e]=t}}function Os(e,t,n=!1){const r=bt||Ct;if(r||Ks){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ks._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Pe(t)?t.call(r&&r.proxy):t}}function ff(e,t,n,r=!1){const s={},i={};Ms(i,si,1),e.propsDefaults=Object.create(null),$l(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:ku(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function df(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,l=Je(s),[u]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const p=e.vnode.dynamicProps;for(let m=0;m<p.length;m++){let x=p[m];if(ti(e.emitsOptions,x))continue;const S=t[x];if(u)if(Ke(i,x))S!==i[x]&&(i[x]=S,c=!0);else{const P=kr(x);s[P]=Bi(u,l,P,S,e,!1)}else S!==i[x]&&(i[x]=S,c=!0)}}}else{$l(e,t,s,i)&&(c=!0);let p;for(const m in l)(!t||!Ke(t,m)&&((p=nr(m))===m||!Ke(t,p)))&&(u?n&&(n[m]!==void 0||n[p]!==void 0)&&(s[m]=Bi(u,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!Ke(t,m))&&(delete i[m],c=!0)}c&&wn(e,"set","$attrs")}function $l(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,l;if(t)for(let u in t){if(Ss(u))continue;const c=t[u];let p;s&&Ke(s,p=kr(u))?!i||!i.includes(p)?n[p]=c:(l||(l={}))[p]=c:ti(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=Je(n),c=l||nt;for(let p=0;p<i.length;p++){const m=i[p];n[m]=Bi(s,u,m,c[m],e,!Ke(c,m))}}return o}function Bi(e,t,n,r,s,i){const o=e[n];if(o!=null){const l=Ke(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Pe(u)){const{propsDefaults:c}=s;n in c?r=c[n]:(Sr(s),r=c[n]=u.call(null,t),Gn())}else r=u}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===nr(n))&&(r=!0))}return r}function Nl(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},l=[];let u=!1;if(!Pe(e)){const p=m=>{u=!0;const[x,S]=Nl(m,t,!0);mt(o,x),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!i&&!u)return at(e)&&r.set(e,hr),hr;if(Te(i))for(let p=0;p<i.length;p++){const m=kr(i[p]);ca(m)&&(o[m]=nt)}else if(i)for(const p in i){const m=kr(p);if(ca(m)){const x=i[p],S=o[m]=Te(x)||Pe(x)?{type:x}:mt({},x);if(S){const P=da(Boolean,S.type),T=da(String,S.type);S[0]=P>-1,S[1]=T<0||P<T,(P>-1||Ke(S,"default"))&&l.push(m)}}}const c=[o,l];return at(e)&&r.set(e,c),c}function ca(e){return e[0]!=="$"}function ua(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function fa(e,t){return ua(e)===ua(t)}function da(e,t){return Te(t)?t.findIndex(n=>fa(n,e)):Pe(t)&&fa(t,e)?0:-1}const Il=e=>e[0]==="_"||e==="$stable",Po=e=>Te(e)?e.map(ln):[ln(e)],hf=(e,t,n)=>{if(t._n)return t;const r=Dt((...s)=>Po(t(...s)),n);return r._c=!1,r},Fl=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Il(s))continue;const i=e[s];if(Pe(i))t[s]=hf(s,i,r);else if(i!=null){const o=Po(i);t[s]=()=>o}}},Ll=(e,t)=>{const n=Po(t);e.slots.default=()=>n},pf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Je(t),Ms(t,"_",n)):Fl(t,e.slots={})}else e.slots={},t&&Ll(e,t);Ms(e.slots,si,1)},yf=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=nt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:(mt(s,t),!n&&l===1&&delete s._):(i=!t.$stable,Fl(t,s)),o=t}else t&&(Ll(e,t),o={default:1});if(i)for(const l in s)!Il(l)&&!(l in o)&&delete s[l]};function Ri(e,t,n,r,s=!1){if(Te(e)){e.forEach((x,S)=>Ri(x,t&&(Te(t)?t[S]:t),n,r,s));return}if(vr(r)&&!s)return;const i=r.shapeFlag&4?ii(r.component)||r.component.proxy:r.el,o=s?null:i,{i:l,r:u}=e,c=t&&t.r,p=l.refs===nt?l.refs={}:l.refs,m=l.setupState;if(c!=null&&c!==u&&(pt(c)?(p[c]=null,Ke(m,c)&&(m[c]=null)):kt(c)&&(c.value=null)),Pe(u))Nn(u,l,12,[o,p]);else{const x=pt(u),S=kt(u);if(x||S){const P=()=>{if(e.f){const T=x?Ke(m,u)?m[u]:p[u]:u.value;s?Te(T)&&go(T,i):Te(T)?T.includes(i)||T.push(i):x?(p[u]=[i],Ke(m,u)&&(m[u]=p[u])):(u.value=[i],e.k&&(p[e.k]=u.value))}else x?(p[u]=o,Ke(m,u)&&(m[u]=o)):S&&(u.value=o,e.k&&(p[e.k]=o))};o?(P.id=-1,vt(P,n)):P()}}}const vt=ju;function mf(e){return gf(e)}function gf(e,t){const n=Ei();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:u,setText:c,setElementText:p,parentNode:m,nextSibling:x,setScopeId:S=nn,insertStaticContent:P}=e,T=(a,f,h,y=null,v=null,w=null,C=!1,A=null,L=!!f.dynamicChildren)=>{if(a===f)return;a&&!cr(a,f)&&(y=K(a),qe(a,v,w,!0),a=null),f.patchFlag===-2&&(L=!1,f.dynamicChildren=null);const{type:M,ref:W,shapeFlag:q}=f;switch(M){case ri:R(a,f,h,y);break;case Ln:B(a,f,h,y);break;case gi:a==null&&E(f,h,y,C);break;case rt:j(a,f,h,y,v,w,C,A,L);break;default:q&1?U(a,f,h,y,v,w,C,A,L):q&6?_e(a,f,h,y,v,w,C,A,L):(q&64||q&128)&&M.process(a,f,h,y,v,w,C,A,L,Y)}W!=null&&v&&Ri(W,a&&a.ref,w,f||a,!f)},R=(a,f,h,y)=>{if(a==null)r(f.el=l(f.children),h,y);else{const v=f.el=a.el;f.children!==a.children&&c(v,f.children)}},B=(a,f,h,y)=>{a==null?r(f.el=u(f.children||""),h,y):f.el=a.el},E=(a,f,h,y)=>{[a.el,a.anchor]=P(a.children,f,h,y,a.el,a.anchor)},$=({el:a,anchor:f},h,y)=>{let v;for(;a&&a!==f;)v=x(a),r(a,h,y),a=v;r(f,h,y)},N=({el:a,anchor:f})=>{let h;for(;a&&a!==f;)h=x(a),s(a),a=h;s(f)},U=(a,f,h,y,v,w,C,A,L)=>{C=C||f.type==="svg",a==null?J(f,h,y,v,w,C,A,L):k(a,f,v,w,C,A,L)},J=(a,f,h,y,v,w,C,A)=>{let L,M;const{type:W,props:q,shapeFlag:G,transition:Z,dirs:oe}=a;if(L=a.el=o(a.type,w,q&&q.is,q),G&8?p(L,a.children):G&16&&re(a.children,L,null,y,v,w&&W!=="foreignObject",C,A),oe&&Un(a,null,y,"created"),H(L,a,a.scopeId,C,y),q){for(const ve in q)ve!=="value"&&!Ss(ve)&&i(L,ve,null,q[ve],w,a.children,y,v,Re);"value"in q&&i(L,"value",null,q.value),(M=q.onVnodeBeforeMount)&&Jt(M,y,a)}oe&&Un(a,null,y,"beforeMount");const pe=(!v||v&&!v.pendingBranch)&&Z&&!Z.persisted;pe&&Z.beforeEnter(L),r(L,f,h),((M=q&&q.onVnodeMounted)||pe||oe)&&vt(()=>{M&&Jt(M,y,a),pe&&Z.enter(L),oe&&Un(a,null,y,"mounted")},v)},H=(a,f,h,y,v)=>{if(h&&S(a,h),y)for(let w=0;w<y.length;w++)S(a,y[w]);if(v){let w=v.subTree;if(f===w){const C=v.vnode;H(a,C,C.scopeId,C.slotScopeIds,v.parent)}}},re=(a,f,h,y,v,w,C,A,L=0)=>{for(let M=L;M<a.length;M++){const W=a[M]=A?Tn(a[M]):ln(a[M]);T(null,W,f,h,y,v,w,C,A)}},k=(a,f,h,y,v,w,C)=>{const A=f.el=a.el;let{patchFlag:L,dynamicChildren:M,dirs:W}=f;L|=a.patchFlag&16;const q=a.props||nt,G=f.props||nt;let Z;h&&Vn(h,!1),(Z=G.onVnodeBeforeUpdate)&&Jt(Z,h,f,a),W&&Un(f,a,h,"beforeUpdate"),h&&Vn(h,!0);const oe=v&&f.type!=="foreignObject";if(M?_(a.dynamicChildren,M,A,h,y,oe,w):C||le(a,f,A,null,h,y,oe,w,!1),L>0){if(L&16)V(A,f,q,G,h,y,v);else if(L&2&&q.class!==G.class&&i(A,"class",null,G.class,v),L&4&&i(A,"style",q.style,G.style,v),L&8){const pe=f.dynamicProps;for(let ve=0;ve<pe.length;ve++){const te=pe[ve],g=q[te],d=G[te];(d!==g||te==="value")&&i(A,te,g,d,v,a.children,h,y,Re)}}L&1&&a.children!==f.children&&p(A,f.children)}else!C&&M==null&&V(A,f,q,G,h,y,v);((Z=G.onVnodeUpdated)||W)&&vt(()=>{Z&&Jt(Z,h,f,a),W&&Un(f,a,h,"updated")},y)},_=(a,f,h,y,v,w,C)=>{for(let A=0;A<f.length;A++){const L=a[A],M=f[A],W=L.el&&(L.type===rt||!cr(L,M)||L.shapeFlag&70)?m(L.el):h;T(L,M,W,null,y,v,w,C,!0)}},V=(a,f,h,y,v,w,C)=>{if(h!==y){if(h!==nt)for(const A in h)!Ss(A)&&!(A in y)&&i(a,A,h[A],null,C,f.children,v,w,Re);for(const A in y){if(Ss(A))continue;const L=y[A],M=h[A];L!==M&&A!=="value"&&i(a,A,M,L,C,f.children,v,w,Re)}"value"in y&&i(a,"value",h.value,y.value)}},j=(a,f,h,y,v,w,C,A,L)=>{const M=f.el=a?a.el:l(""),W=f.anchor=a?a.anchor:l("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(A=A?A.concat(Z):Z),a==null?(r(M,h,y),r(W,h,y),re(f.children,h,W,v,w,C,A,L)):q>0&&q&64&&G&&a.dynamicChildren?(_(a.dynamicChildren,G,h,v,w,C,A),(f.key!=null||v&&f===v.subTree)&&Ml(a,f,!0)):le(a,f,h,W,v,w,C,A,L)},_e=(a,f,h,y,v,w,C,A,L)=>{f.slotScopeIds=A,a==null?f.shapeFlag&512?v.ctx.activate(f,h,y,C,L):ue(f,h,y,v,w,C,L):Ne(a,f,L)},ue=(a,f,h,y,v,w,C)=>{const A=a.component=Sf(a,y,v);if(kl(a)&&(A.ctx.renderer=Y),Tf(A),A.asyncDep){if(v&&v.registerDep(A,be),!a.el){const L=A.subTree=Be(Ln);B(null,L,f,h)}return}be(A,a,f,h,v,w,C)},Ne=(a,f,h)=>{const y=f.component=a.component;if(Bu(a,f,h))if(y.asyncDep&&!y.asyncResolved){he(y,f,h);return}else y.next=f,$u(y.update),y.update();else f.el=a.el,y.vnode=f},be=(a,f,h,y,v,w,C)=>{const A=()=>{if(a.isMounted){let{next:W,bu:q,u:G,parent:Z,vnode:oe}=a,pe=W,ve;Vn(a,!1),W?(W.el=oe.el,he(a,W,C)):W=oe,q&&yr(q),(ve=W.props&&W.props.onVnodeBeforeUpdate)&&Jt(ve,Z,W,oe),Vn(a,!0);const te=hi(a),g=a.subTree;a.subTree=te,T(g,te,m(g.el),K(g),a,v,w),W.el=te.el,pe===null&&Ru(a,te.el),G&&vt(G,v),(ve=W.props&&W.props.onVnodeUpdated)&&vt(()=>Jt(ve,Z,W,oe),v)}else{let W;const{el:q,props:G}=f,{bm:Z,m:oe,parent:pe}=a,ve=vr(f);if(Vn(a,!1),Z&&yr(Z),!ve&&(W=G&&G.onVnodeBeforeMount)&&Jt(W,pe,f),Vn(a,!0),q&&D){const te=()=>{a.subTree=hi(a),D(q,a.subTree,a,v,null)};ve?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=hi(a);T(null,te,h,y,a,v,w),f.el=te.el}if(oe&&vt(oe,v),!ve&&(W=G&&G.onVnodeMounted)){const te=f;vt(()=>Jt(W,pe,te),v)}(f.shapeFlag&256||pe&&vr(pe.vnode)&&pe.vnode.shapeFlag&256)&&a.a&&vt(a.a,v),a.isMounted=!0,f=h=y=null}},L=a.effect=new wo(A,()=>Eo(M),a.scope),M=a.update=()=>L.run();M.id=a.uid,Vn(a,!0),M()},he=(a,f,h)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,df(a,f.props,y,h),yf(a,f.children,h),Or(),ra(),Er()},le=(a,f,h,y,v,w,C,A,L=!1)=>{const M=a&&a.children,W=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Ye(M,q,h,y,v,w,C,A,L);return}else if(G&256){We(M,q,h,y,v,w,C,A,L);return}}Z&8?(W&16&&Re(M,v,w),q!==M&&p(h,q)):W&16?Z&16?Ye(M,q,h,y,v,w,C,A,L):Re(M,v,w,!0):(W&8&&p(h,""),Z&16&&re(q,h,y,v,w,C,A,L))},We=(a,f,h,y,v,w,C,A,L)=>{a=a||hr,f=f||hr;const M=a.length,W=f.length,q=Math.min(M,W);let G;for(G=0;G<q;G++){const Z=f[G]=L?Tn(f[G]):ln(f[G]);T(a[G],Z,h,null,v,w,C,A,L)}M>W?Re(a,v,w,!0,!1,q):re(f,h,y,v,w,C,A,L,q)},Ye=(a,f,h,y,v,w,C,A,L)=>{let M=0;const W=f.length;let q=a.length-1,G=W-1;for(;M<=q&&M<=G;){const Z=a[M],oe=f[M]=L?Tn(f[M]):ln(f[M]);if(cr(Z,oe))T(Z,oe,h,null,v,w,C,A,L);else break;M++}for(;M<=q&&M<=G;){const Z=a[q],oe=f[G]=L?Tn(f[G]):ln(f[G]);if(cr(Z,oe))T(Z,oe,h,null,v,w,C,A,L);else break;q--,G--}if(M>q){if(M<=G){const Z=G+1,oe=Z<W?f[Z].el:y;for(;M<=G;)T(null,f[M]=L?Tn(f[M]):ln(f[M]),h,oe,v,w,C,A,L),M++}}else if(M>G)for(;M<=q;)qe(a[M],v,w,!0),M++;else{const Z=M,oe=M,pe=new Map;for(M=oe;M<=G;M++){const Q=f[M]=L?Tn(f[M]):ln(f[M]);Q.key!=null&&pe.set(Q.key,M)}let ve,te=0;const g=G-oe+1;let d=!1,b=0;const O=new Array(g);for(M=0;M<g;M++)O[M]=0;for(M=Z;M<=q;M++){const Q=a[M];if(te>=g){qe(Q,v,w,!0);continue}let ee;if(Q.key!=null)ee=pe.get(Q.key);else for(ve=oe;ve<=G;ve++)if(O[ve-oe]===0&&cr(Q,f[ve])){ee=ve;break}ee===void 0?qe(Q,v,w,!0):(O[ee-oe]=M+1,ee>=b?b=ee:d=!0,T(Q,f[ee],h,null,v,w,C,A,L),te++)}const I=d?vf(O):hr;for(ve=I.length-1,M=g-1;M>=0;M--){const Q=oe+M,ee=f[Q],me=Q+1<W?f[Q+1].el:y;O[M]===0?T(null,ee,h,me,v,w,C,A,L):d&&(ve<0||M!==I[ve]?it(ee,h,me,2):ve--)}}},it=(a,f,h,y,v=null)=>{const{el:w,type:C,transition:A,children:L,shapeFlag:M}=a;if(M&6){it(a.component.subTree,f,h,y);return}if(M&128){a.suspense.move(f,h,y);return}if(M&64){C.move(a,f,h,Y);return}if(C===rt){r(w,f,h);for(let q=0;q<L.length;q++)it(L[q],f,h,y);r(a.anchor,f,h);return}if(C===gi){$(a,f,h);return}if(y!==2&&M&1&&A)if(y===0)A.beforeEnter(w),r(w,f,h),vt(()=>A.enter(w),v);else{const{leave:q,delayLeave:G,afterLeave:Z}=A,oe=()=>r(w,f,h),pe=()=>{q(w,()=>{oe(),Z&&Z()})};G?G(w,oe,pe):pe()}else r(w,f,h)},qe=(a,f,h,y=!1,v=!1)=>{const{type:w,props:C,ref:A,children:L,dynamicChildren:M,shapeFlag:W,patchFlag:q,dirs:G}=a;if(A!=null&&Ri(A,null,h,a,!0),W&256){f.ctx.deactivate(a);return}const Z=W&1&&G,oe=!vr(a);let pe;if(oe&&(pe=C&&C.onVnodeBeforeUnmount)&&Jt(pe,f,a),W&6)de(a.component,h,y);else{if(W&128){a.suspense.unmount(h,y);return}Z&&Un(a,null,f,"beforeUnmount"),W&64?a.type.remove(a,f,h,v,Y,y):M&&(w!==rt||q>0&&q&64)?Re(M,f,h,!1,!0):(w===rt&&q&384||!v&&W&16)&&Re(L,f,h),y&&Rt(a)}(oe&&(pe=C&&C.onVnodeUnmounted)||Z)&&vt(()=>{pe&&Jt(pe,f,a),Z&&Un(a,null,f,"unmounted")},h)},Rt=a=>{const{type:f,el:h,anchor:y,transition:v}=a;if(f===rt){ge(h,y);return}if(f===gi){N(a);return}const w=()=>{s(h),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(a.shapeFlag&1&&v&&!v.persisted){const{leave:C,delayLeave:A}=v,L=()=>C(h,w);A?A(a.el,w,L):L()}else w()},ge=(a,f)=>{let h;for(;a!==f;)h=x(a),s(a),a=h;s(f)},de=(a,f,h)=>{const{bum:y,scope:v,update:w,subTree:C,um:A}=a;y&&yr(y),v.stop(),w&&(w.active=!1,qe(C,a,f,h)),A&&vt(A,f),vt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Re=(a,f,h,y=!1,v=!1,w=0)=>{for(let C=w;C<a.length;C++)qe(a[C],f,h,y,v)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():x(a.anchor||a.el),z=(a,f,h)=>{a==null?f._vnode&&qe(f._vnode,null,null,!0):T(f._vnode||null,a,f,null,null,null,h),ra(),yl(),f._vnode=a},Y={p:T,um:qe,m:it,r:Rt,mt:ue,mc:re,pc:le,pbc:_,n:K,o:e};let X,D;return t&&([X,D]=t(Y)),{render:z,hydrate:X,createApp:cf(z,X)}}function Vn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ml(e,t,n=!1){const r=e.children,s=t.children;if(Te(r)&&Te(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Tn(s[i]),l.el=o.el),n||Ml(o,l)),l.type===ri&&(l.el=o.el)}}function vf(e){const t=e.slice(),n=[0];let r,s,i,o,l;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,e[n[l]]<c?i=l+1:o=l;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}const bf=e=>e.__isTeleport,rt=Symbol.for("v-fgt"),ri=Symbol.for("v-txt"),Ln=Symbol.for("v-cmt"),gi=Symbol.for("v-stc"),jr=[];let en=null;function se(e=!1){jr.push(en=e?null:[])}function _f(){jr.pop(),en=jr[jr.length-1]||null}let Gr=1;function ha(e){Gr+=e}function Bl(e){return e.dynamicChildren=Gr>0?en||hr:null,_f(),Gr>0&&en&&en.push(e),e}function ce(e,t,n,r,s,i){return Bl(F(e,t,n,r,s,i,!0))}function Lt(e,t,n,r,s){return Bl(Be(e,t,n,r,s,!0))}function $o(e){return e?e.__v_isVNode===!0:!1}function cr(e,t){return e.type===t.type&&e.key===t.key}const si="__vInternal",Rl=({key:e})=>e??null,Es=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?pt(e)||kt(e)||Pe(e)?{i:Ct,r:e,k:t,f:!!n}:e:null);function F(e,t=null,n=null,r=0,s=null,i=e===rt?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Rl(t),ref:t&&Es(t),scopeId:vl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ct};return l?(No(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=pt(n)?8:16),Gr>0&&!o&&en&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&en.push(u),u}const Be=wf;function wf(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Qu)&&(e=Ln),$o(e)){const l=Zn(e,t,!0);return n&&No(l,n),Gr>0&&!i&&en&&(l.shapeFlag&6?en[en.indexOf(e)]=l:en.push(l)),l.patchFlag|=-2,l}if(Af(e)&&(e=e.__vccOpts),t){t=xf(t);let{class:l,style:u}=t;l&&!pt(l)&&(t.class=_t(l)),at(u)&&(cl(u)&&!Te(u)&&(u=mt({},u)),t.style=Cr(u))}const o=pt(e)?1:bl(e)?128:bf(e)?64:at(e)?4:Pe(e)?2:0;return F(e,t,n,r,s,o,i,!0)}function xf(e){return e?cl(e)||si in e?mt({},e):e:null}function Zn(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,l=t?kf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Rl(l),ref:t&&t.ref?n&&s?Te(s)?s.concat(Es(t)):[s,Es(t)]:Es(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rt?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zn(e.ssContent),ssFallback:e.ssFallback&&Zn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Tt(e=" ",t=0){return Be(ri,null,e,t)}function Me(e="",t=!1){return t?(se(),Lt(Ln,null,e)):Be(Ln,null,e)}function ln(e){return e==null||typeof e=="boolean"?Be(Ln):Te(e)?Be(rt,null,e.slice()):typeof e=="object"?Tn(e):Be(ri,null,String(e))}function Tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zn(e)}function No(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),No(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(si in t)?t._ctx=Ct:s===3&&Ct&&(Ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Pe(t)?(t={default:t,_ctx:Ct},n=32):(t=String(t),r&64?(n=16,t=[Tt(t)]):n=8);e.children=t,e.shapeFlag|=n}function kf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=_t([t.class,r.class]));else if(s==="style")t.style=Cr([t.style,r.style]);else if(Xs(s)){const i=t[s],o=r[s];o&&i!==o&&!(Te(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Jt(e,t,n,r=null){sn(e,t,7,[n,r])}const Cf=Pl();let Df=0;function Sf(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Cf,i={uid:Df++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nl(r,s),emitsOptions:gl(r,s),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:r.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Fu.bind(null,i),e.ce&&e.ce(i),i}let bt=null;const jl=()=>bt||Ct;let Io,or,pa="__VUE_INSTANCE_SETTERS__";(or=Ei()[pa])||(or=Ei()[pa]=[]),or.push(e=>bt=e),Io=e=>{or.length>1?or.forEach(t=>t(e)):or[0](e)};const Sr=e=>{Io(e),e.scope.on()},Gn=()=>{bt&&bt.scope.off(),Io(null)};function Kl(e){return e.vnode.shapeFlag&4}let Xr=!1;function Tf(e,t=!1){Xr=t;const{props:n,children:r}=e.vnode,s=Kl(e);ff(e,n,s,t),pf(e,r);const i=s?Of(e,t):void 0;return Xr=!1,i}function Of(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=So(new Proxy(e.ctx,Zu));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?Vl(e):null;Sr(e),Or();const i=Nn(r,e,0,[e.props,s]);if(Er(),Gn(),qa(i)){if(i.then(Gn,Gn),t)return i.then(o=>{ya(e,o,t)}).catch(o=>{ei(o,e,0)});e.asyncDep=i}else ya(e,i,t)}else Ul(e,t)}function ya(e,t,n){Pe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:at(t)&&(e.setupState=dl(t)),Ul(e,n)}let ma;function Ul(e,t,n){const r=e.type;if(!e.render){if(!t&&ma&&!r.render){const s=r.template||Ao(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:u}=r,c=mt(mt({isCustomElement:i,delimiters:l},o),u);r.render=ma(s,c)}}e.render=r.render||nn}Sr(e),Or(),nf(e),Er(),Gn()}function Ef(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Mt(e,"get","$attrs"),t[n]}}))}function Vl(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Ef(e)},slots:e.slots,emit:e.emit,expose:t}}function ii(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(dl(So(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rr)return Rr[n](e)},has(t,n){return n in t||n in Rr}}))}function ga(e,t=!0){return Pe(e)?e.displayName||e.name:e.name||t&&e.__name}function Af(e){return Pe(e)&&"__vccOpts"in e}const oi=(e,t)=>Ou(e,t,Xr),Pf=Symbol.for("v-scx"),$f=()=>Os(Pf),Nf="3.3.4",If="http://www.w3.org/2000/svg",Jn=typeof document<"u"?document:null,va=Jn&&Jn.createElement("template"),Ff={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t?Jn.createElementNS(If,e):Jn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Jn.createTextNode(e),createComment:e=>Jn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{va.innerHTML=r?`<svg>${e}</svg>`:e;const l=va.content;if(r){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Lf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Mf(e,t,n){const r=e.style,s=pt(n);if(n&&!s){if(t&&!pt(t))for(const i in t)n[i]==null&&ji(r,i,"");for(const i in n)ji(r,i,n[i])}else{const i=r.display;s?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const ba=/\s*!important$/;function ji(e,t,n){if(Te(n))n.forEach(r=>ji(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Bf(e,t);ba.test(n)?e.setProperty(nr(r),n.replace(ba,""),"important"):e[r]=n}}const _a=["Webkit","Moz","ms"],vi={};function Bf(e,t){const n=vi[t];if(n)return n;let r=kr(t);if(r!=="filter"&&r in e)return vi[t]=r;r=Wa(r);for(let s=0;s<_a.length;s++){const i=_a[s]+r;if(i in e)return vi[t]=i}return t}const wa="http://www.w3.org/1999/xlink";function Rf(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(wa,t.slice(6,t.length)):e.setAttributeNS(wa,t,n);else{const i=Yc(t);n==null||i&&!za(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function jf(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const c=l==="OPTION"?e.getAttribute("value"):e.value,p=n??"";c!==p&&(e.value=p),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=za(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function ur(e,t,n,r){e.addEventListener(t,n,r)}function Kf(e,t,n,r){e.removeEventListener(t,n,r)}function Uf(e,t,n,r,s=null){const i=e._vei||(e._vei={}),o=i[t];if(r&&o)o.value=r;else{const[l,u]=Vf(t);if(r){const c=i[t]=Jf(r,s);ur(e,l,c,u)}else o&&(Kf(e,l,o,u),i[t]=void 0)}}const xa=/(?:Once|Passive|Capture)$/;function Vf(e){let t;if(xa.test(e)){t={};let r;for(;r=e.match(xa);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):nr(e.slice(2)),t]}let bi=0;const Hf=Promise.resolve(),qf=()=>bi||(Hf.then(()=>bi=0),bi=Date.now());function Jf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;sn(Yf(r,n.value),t,5,[r])};return n.value=e,n.attached=qf(),n}function Yf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const ka=/^on[a-z]/,Wf=(e,t,n,r,s=!1,i,o,l,u)=>{t==="class"?Lf(e,r,s):t==="style"?Mf(e,n,r):Xs(t)?mo(t)||Uf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):zf(e,t,r,s))?jf(e,t,r,i,o,l,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Rf(e,t,r,s))};function zf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&ka.test(t)&&Pe(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ka.test(t)&&pt(n)?!1:t in e}const Ca=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>yr(t,n):t};function Gf(e){e.target.composing=!0}function Da(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const zt={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e._assign=Ca(s);const i=r||s.props&&s.props.type==="number";ur(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Oi(l)),e._assign(l)}),n&&ur(e,"change",()=>{e.value=e.value.trim()}),t||(ur(e,"compositionstart",Gf),ur(e,"compositionend",Da),ur(e,"change",Da))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e._assign=Ca(i),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(s||e.type==="number")&&Oi(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Xf=["ctrl","shift","alt","meta"],Qf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xf.some(n=>e[`${n}Key`]&&!t.includes(n))},dt=(e,t)=>(n,...r)=>{for(let s=0;s<t.length;s++){const i=Qf[t[s]];if(i&&i(n,t))return}return e(n,...r)},Zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ed=(e,t)=>n=>{if(!("key"in n))return;const r=nr(n.key);if(t.some(s=>s===r||Zf[s]===r))return e(n)},td=mt({patchProp:Wf},Ff);let Sa;function nd(){return Sa||(Sa=mf(td))}const rd=(...e)=>{const t=nd().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=sd(r);if(!s)return;const i=t._component;!Pe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function sd(e){return pt(e)?document.querySelector(e):e}var id=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const od=Symbol();var Ta;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ta||(Ta={}));function ad(){const e=Wc(!0),t=e.run(()=>rn({}));let n=[],r=[];const s=So({install(i){s._a=i,i.provide(od,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!id?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const ld={key:0,class:"button-loader"},cd=F("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),ud=[cd],Pt=Bt({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=ef();return(r,s)=>(se(),ce("button",{class:_t(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(se(),ce("div",ld,ud)):Me("",!0),t.icon?(se(),ce("i",{key:1,class:_t([{"opacity-0":t.loading,"mr-2":ne(n).default},"font-icon"])},Ee(t.icon),3)):Me("",!0),ne(n).default?(se(),ce("span",{key:2,class:_t({"opacity-0":t.loading})},[Ol(r.$slots,"default")],2)):Me("",!0)],2))}});var En=(e=>(e.ProfilesSearch="profiles_search",e.ProfilesSaved="profiles_saved",e.ProfilesParsing="profiles_parsing",e.Settings="settings",e))(En||{});class fd{constructor(){Ft(this,"active",rn("profiles_search"));Ft(this,"list",[{value:"profiles_search",text:"Поиск продавцов",icon:"group_add"},{value:"profiles_parsing",text:"Парсинг продавцов",icon:"tune"},{value:"profiles_saved",text:"БД",icon:"people"}])}changeTab(t){this.active.value=t}}const un=new fd,st=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ht=Object.keys,St=Array.isArray;function Nt(e,t){return typeof t!="object"||ht(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||st.Promise||(st.Promise=Promise);const Qr=Object.getPrototypeOf,dd={}.hasOwnProperty;function Vt(e,t){return dd.call(e,t)}function Tr(e,t){typeof t=="function"&&(t=t(Qr(e))),(typeof Reflect>"u"?ht:Reflect.ownKeys)(t).forEach(n=>{bn(e,n,t[n])})}const Hl=Object.defineProperty;function bn(e,t,n,r){Hl(e,t,Nt(n&&Vt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function br(e){return{from:function(t){return e.prototype=Object.create(t.prototype),bn(e.prototype,"constructor",e),{extend:Tr.bind(null,e.prototype)}}}}const hd=Object.getOwnPropertyDescriptor;function Fo(e,t){let n;return hd(e,t)||(n=Qr(e))&&Fo(n,t)}const pd=[].slice;function Us(e,t,n){return pd.call(e,t,n)}function ql(e,t){return t(e)}function Lr(e){if(!e)throw new Error("Assertion Failed")}function Jl(e){st.setImmediate?setImmediate(e):setTimeout(e,0)}function Yl(e,t){return e.reduce((n,r,s)=>{var i=t(r,s);return i&&(n[i[0]]=i[1]),n},{})}function _n(e,t){if(Vt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,s=t.length;r<s;++r){var i=_n(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:_n(l,t.substr(o+1))}}function on(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Lr(typeof n!="string"&&"length"in n);for(var r=0,s=t.length;r<s;++r)on(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),l=t.substr(i+1);if(l==="")n===void 0?St(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&Vt(e,o)||(u=e[o]={}),on(u,l,n)}}else n===void 0?St(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Wl(e){var t={};for(var n in e)Vt(e,n)&&(t[n]=e[n]);return t}const yd=[].concat;function zl(e){return yd.apply([],e)}const Gl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(zl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>st[e]),md=Gl.map(e=>st[e]);Yl(Gl,e=>[e,!0]);let On=null;function as(e){On=typeof WeakMap<"u"&&new WeakMap;const t=Ki(e);return On=null,t}function Ki(e){if(!e||typeof e!="object")return e;let t=On&&On.get(e);if(t)return t;if(St(e)){t=[],On&&On.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Ki(e[n]))}else if(md.indexOf(e.constructor)>=0)t=e;else{const i=Qr(e);for(var s in t=i===Object.prototype?{}:Object.create(i),On&&On.set(e,t),e)Vt(e,s)&&(t[s]=Ki(e[s]))}return t}const{toString:gd}={};function Ui(e){return gd.call(e).slice(8,-1)}const Vi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",vd=typeof Vi=="symbol"?function(e){var t;return e!=null&&(t=e[Vi])&&t.apply(e)}:function(){return null},fr={};function mn(e){var t,n,r,s;if(arguments.length===1){if(St(e))return e.slice();if(this===fr&&typeof e=="string")return[e];if(s=vd(e)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Lo=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var fn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xl(e,t){fn=e,Ql=t}var Ql=()=>!0;const bd=!new Error("").stack;function sr(){if(bd)try{throw sr.arguments,new Error}catch(e){return e}return new Error}function Hi(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Ql).map(r=>`
`+r).join("")):""}var Zl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zl),_d={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _r(e,t){this._e=sr(),this.name=e,this.message=t}function ec(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Vs(e,t,n,r){this._e=sr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ec(e,t)}function Kr(e,t){this._e=sr(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=ec(e,t)}br(_r).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Hi(this._e,2))}},toString:function(){return this.name+": "+this.message}}),br(Vs).from(_r),br(Kr).from(_r);var Bo=Mo.reduce((e,t)=>(e[t]=t+"Error",e),{});const wd=_r;var Se=Mo.reduce((e,t)=>{var n=t+"Error";function r(s,i){this._e=sr(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=_d[t]||n,this.inner=null)}return br(r).from(wd),e[t]=r,e},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Oa=Zl.reduce((e,t)=>(e[t+"Error"]=Se[t],e),{}),As=Mo.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Se[t]),e),{});function Qe(){}function Zr(e){return e}function xd(e,t){return e==null||e===Zr?t:function(n){return t(e(n))}}function er(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function kd(e,t){return e===Qe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?er(r,this.onsuccess):r),s&&(this.onerror=this.onerror?er(s,this.onerror):s),i!==void 0?i:n}}function Cd(e,t){return e===Qe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?er(n,this.onsuccess):n),r&&(this.onerror=this.onerror?er(r,this.onerror):r)}}function Dd(e,t){return e===Qe?t:function(n){var r=e.apply(this,arguments);Nt(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?er(s,this.onsuccess):s),i&&(this.onerror=this.onerror?er(i,this.onerror):i),r===void 0?o===void 0?void 0:o:Nt(r,o)}}function Sd(e,t){return e===Qe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ro(e,t){return e===Qe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}As.ModifyError=Vs,As.DexieError=_r,As.BulkError=Kr;var es={};const tc=100,[qi,Hs,Ji]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Qr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Qr(t),e]})(),nc=Hs&&Hs.then,Ps=qi&&qi.constructor,jo=!!Ji;var Yi=!1,Td=Ji?()=>{Ji.then(vs)}:st.setImmediate?setImmediate.bind(null,vs):st.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{vs(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(vs,0)},Ur=function(e,t){Mr.push([e,t]),qs&&(Td(),qs=!1)},Wi=!0,qs=!0,Xn=[],$s=[],zi=null,Gi=Zr,wr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pa,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Pa(e[0],e[1])}catch{}})}},xe=wr,Mr=[],Qn=0,Ns=[];function fe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Qe,this._lib=!1;var t=this._PSD=xe;if(fn&&(this._stackHolder=sr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==es)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qi(this,this._value))}this._state=null,this._value=null,++t.ref,sc(this,e)}const Xi={get:function(){var e=xe,t=Js;function n(r,s){var i=!e.global&&(e!==xe||t!==Js);const o=i&&!xn();var l=new fe((u,c)=>{Ko(this,new rc(Ys(r,e,i,o),Ys(s,e,i,o),u,c,e))});return fn&&ac(l,this),l}return n.prototype=es,n},set:function(e){bn(this,"then",e&&e.prototype===es?Xi:{get:function(){return e},set:Xi.set})}};function rc(e,t,n,r,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=s}function sc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&ls();n&&typeof n.then=="function"?sc(e,(s,i)=>{n instanceof fe?n._then(s,i):n.then(s,i)}):(e._state=!0,e._value=n,ic(e)),r&&cs()}},Qi.bind(null,e))}catch(n){Qi(e,n)}}function Qi(e,t){if($s.push(t),e._state===null){var n=e._lib&&ls();t=Gi(t),e._state=!1,e._value=t,fn&&t!==null&&typeof t=="object"&&!t._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){s&&s(o)}}(()=>{var r=Fo(t,"stack");t._promise=e,bn(t,"stack",{get:()=>Yi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Xn.some(s=>s._value===r._value)||Xn.push(r)}(e),ic(e),n&&cs()}}function ic(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ko(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),Qn===0&&(++Qn,Ur(()=>{--Qn==0&&Uo()},[]))}function Ko(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Qn,Ur(Od,[n,e,t])}else e._listeners.push(t)}function Od(e,t,n){try{zi=t;var r,s=t._value;t._state?r=e(s):($s.length&&($s=[]),r=e(s),$s.indexOf(s)===-1&&function(i){for(var o=Xn.length;o;)if(Xn[--o]._value===i._value)return void Xn.splice(o,1)}(t)),n.resolve(r)}catch(i){n.reject(i)}finally{zi=null,--Qn==0&&Uo(),--n.psd.ref||n.psd.finalize()}}function oc(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var s,i,o=e._value;o!=null?(s=o.name||"Error",i=o.message||o,r=Hi(o,0)):(s=o,i=""),t.push(s+(i?": "+i:"")+r)}return fn&&((r=Hi(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&oc(e._prev,t,n)),t}function ac(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function vs(){ls()&&cs()}function ls(){var e=Wi;return Wi=!1,qs=!1,e}function cs(){var e,t,n;do for(;Mr.length>0;)for(e=Mr,Mr=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Mr.length>0);Wi=!0,qs=!0}function Uo(){var e=Xn;Xn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ns.slice(0),n=t.length;n;)t[--n]()}function bs(e){return new fe(es,!1,e)}function ot(e,t){var n=xe;return function(){var r=ls(),s=xe;try{return Bn(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Bn(s,!1),r&&cs()}}}Tr(fe.prototype,{then:Xi,_then:function(e,t){Ko(this,new rc(null,null,e,t,xe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):bs(r)):this.then(null,r=>r&&r.name===t?n(r):bs(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),bs(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Yi=!0;var e=oc(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Yi=!1}}},timeout:function(e,t){return e<1/0?new fe((n,r)=>{var s=setTimeout(()=>r(new Se.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&bn(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),wr.env=lc(),Tr(fe,{all:function(){var e=mn.apply(null,arguments).map(_s);return new fe(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((s,i)=>fe.resolve(s).then(o=>{e[i]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof fe)return e;if(e&&typeof e.then=="function")return new fe((n,r)=>{e.then(n,r)});var t=new fe(es,!0,e);return ac(t,zi),t},reject:bs,race:function(){var e=mn.apply(null,arguments).map(_s);return new fe((t,n)=>{e.map(r=>fe.resolve(r).then(t,n))})},PSD:{get:()=>xe,set:e=>xe=e},totalEchoes:{get:()=>Js},newPSD:Mn,usePSD:Pr,scheduler:{get:()=>Ur,set:e=>{Ur=e}},rejectionMapper:{get:()=>Gi,set:e=>{Gi=e}},follow:(e,t)=>new fe((n,r)=>Mn((s,i)=>{var o=xe;o.unhandleds=[],o.onunhandled=i,o.finalize=er(function(){(function(l){function u(){l(),Ns.splice(Ns.indexOf(u),1)}Ns.push(u),++Qn,Ur(()=>{--Qn==0&&Uo()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Ps&&(Ps.allSettled&&bn(fe,"allSettled",function(){const e=mn.apply(null,arguments).map(_s);return new fe(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((s,i)=>fe.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Ps.any&&typeof AggregateError<"u"&&bn(fe,"any",function(){const e=mn.apply(null,arguments).map(_s);return new fe((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach((i,o)=>fe.resolve(i).then(l=>t(l),l=>{s[o]=l,--r||n(new AggregateError(s))}))})}));const xt={awaits:0,echoes:0,id:0};var Ed=0,Is=[],_i=0,Js=0,Ad=0;function Mn(e,t,n,r){var s=xe,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Ad;var o=wr.env;i.env=jo?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject,nthen:Ea(o.nthen,i),gthen:Ea(o.gthen,i)}:{},t&&Nt(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Pr(i,e,n,r);return i.ref===0&&i.finalize(),l}function Ar(){return xt.id||(xt.id=++Ed),++xt.awaits,xt.echoes+=tc,xt.id}function xn(){return!!xt.awaits&&(--xt.awaits==0&&(xt.id=0),xt.echoes=xt.awaits*tc,!0)}function _s(e){return xt.echoes&&e&&e.constructor===Ps?(Ar(),e.then(t=>(xn(),t),t=>(xn(),yt(t)))):e}function Pd(e){++Js,xt.echoes&&--xt.echoes!=0||(xt.echoes=xt.id=0),Is.push(xe),Bn(e,!0)}function $d(){var e=Is[Is.length-1];Is.pop(),Bn(e,!1)}function Bn(e,t){var n=xe;if((t?!xt.echoes||_i++&&e===xe:!_i||--_i&&e===xe)||cc(t?Pd.bind(null,e):$d),e!==xe&&(xe=e,n===wr&&(wr.env=lc()),jo)){var r=wr.env.Promise,s=e.env;Hs.then=s.nthen,r.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(st,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function lc(){var e=st.Promise;return jo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(st,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Hs.then,gthen:e.prototype.then}:{}}function Pr(e,t,n,r,s){var i=xe;try{return Bn(e,!0),t(n,r,s)}finally{Bn(i,!1)}}function cc(e){nc.call(qi,e)}function Ys(e,t,n,r){return typeof e!="function"?e:function(){var s=xe;n&&Ar(),Bn(t,!0);try{return e.apply(this,arguments)}finally{Bn(s,!1),r&&cc(xn)}}}function Ea(e,t){return function(n,r){return e.call(this,Ys(n,t),Ys(r,t))}}(""+nc).indexOf("[native code]")===-1&&(Ar=xn=Qe);const Aa="unhandledrejection";function Pa(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,s={promise:t,reason:e};if(st.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Aa,!0,!0),Nt(r,s)):st.CustomEvent&&Nt(r=new CustomEvent(Aa,{detail:s}),s),r&&st.dispatchEvent&&(dispatchEvent(r),!st.PromiseRejectionEvent&&st.onunhandledrejection))try{st.onunhandledrejection(r)}catch{}fn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var yt=fe.reject;function Zi(e,t,n,r){if(e.idbdb&&(e._state.openComplete||xe.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===Bo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Zi(e,t,n,r))):yt(i)}return s._promise(t,(i,o)=>Mn(()=>(xe.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(e._state.openComplete)return yt(new Se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return yt(new Se.DatabaseClosed);e.open().catch(Qe)}return e._state.dbReadyPromise.then(()=>Zi(e,t,n,r))}const $a="3.2.4",Wn=String.fromCharCode(65535),eo=-1/0,hn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",uc="String expected.",Vr=[],ai=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Nd=ai,Id=ai,fc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),li="__dbnames",wi="readonly",xi="readwrite";function tr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const dc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ws(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=as(t))[e],t)}class Fd{_trans(t,n,r){const s=this._tx||xe.trans,i=this.name;function o(u,c,p){if(!p.schema[i])throw new Se.NotFound("Table "+i+" not part of transaction");return n(p.idbtrans,p)}const l=ls();try{return s&&s.db===this.db?s===xe.trans?s._promise(t,o,r):Mn(()=>s._promise(t,o,r),{trans:s,transless:xe.transless||xe}):Zi(this.db,t,[this.name],o)}finally{l&&cs()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(s=>this.hook.reading.fire(s))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(St(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ht(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(p=>c.keyPath.indexOf(p)>=0)&&c.keyPath.every(p=>n.indexOf(p)>=0))[0];if(r&&this.db._maxKey!==Wn)return this.where(r.name).equals(r.keyPath.map(c=>t[c]));!r&&fn&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(c,p){try{return i.cmp(c,p)===0}catch{return!1}}const[l,u]=n.reduce(([c,p],m)=>{const x=s[m],S=t[m];return[c||x,c||!x?tr(p,x&&x.multi?P=>{const T=_n(P,m);return St(T)&&T.some(R=>o(S,R))}:P=>o(S,_n(P,m))):p]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,St(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const s=Object.create(t.prototype);for(var i in r)if(Vt(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Nt(this,t)})}add(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=t;return s&&r&&(i=ws(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?fe.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{on(t,s,o)}catch{}return o})}update(t,n){if(typeof t!="object"||St(t))return this.where(":id").equals(t).modify(n);{const r=_n(t,this.schema.primKey.keyPath);if(r===void 0)return yt(new Se.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ht(n).forEach(s=>{on(t,s,n[s])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=t;return s&&r&&(i=ws(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?fe.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{on(t,s,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?fe.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:dc})).then(t=>t.numFailures?fe.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&s)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let p=u&&l?t.map(ws(u)):t;return this.core.mutate({trans:o,type:"add",keys:s,values:p,wantResults:i}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return i?x:S;throw new Kr(`${this.name}.bulkAdd(): ${m} of ${c} operations failed`,P)})})}bulkPut(t,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&s)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let p=u&&l?t.map(ws(u)):t;return this.core.mutate({trans:o,type:"put",keys:s,values:p,wantResults:i}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return i?x:S;throw new Kr(`${this.name}.bulkPut(): ${m} of ${c} operations failed`,P)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new Kr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function Hr(e){var t={},n=function(o,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[o].subscribe.apply(null,c),e}if(typeof o=="string")return t[o]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(o,l,u){if(typeof o!="object"){var c;l||(l=Sd),u||(u=Qe);var p={subscribers:[],fire:u,subscribe:function(m){p.subscribers.indexOf(m)===-1&&(p.subscribers.push(m),p.fire=l(p.fire,m))},unsubscribe:function(m){p.subscribers=p.subscribers.filter(function(x){return x!==m}),p.fire=p.subscribers.reduce(l,u)}};return t[o]=n[o]=p,p}ht(c=o).forEach(function(m){var x=c[m];if(St(x))i(m,c[m][0],c[m][1]);else{if(x!=="asap")throw new Se.InvalidArgument("Invalid event config");var S=i(m,Zr,function(){for(var P=arguments.length,T=new Array(P);P--;)T[P]=arguments[P];S.subscribers.forEach(function(R){Jl(function(){R.apply(null,T)})})})}})}}function $r(e,t){return br(t).from({prototype:e}),t}function ar(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ki(e,t){e.filter=tr(e.filter,t)}function Ci(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>tr(r(),t()):t,e.justLimit=n&&!r}function Fs(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Na(e,t,n){const r=Fs(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function xs(e,t,n,r){const s=e.replayFilter?tr(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},o=(l,u,c)=>{if(!s||s(u,c,x=>u.stop(x),x=>u.fail(x))){var p=u.primaryKey,m=""+p;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(p)),Vt(i,m)||(i[m]=!0,t(l,u,c))}};return Promise.all([e.or._iterate(o,n),Ia(Na(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Ia(Na(e,r,n),tr(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Ia(e,t,n,r){var s=ot(r?(i,o,l)=>n(r(i),o,l):n);return e.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();t&&!t(i,l=>o=l,l=>{i.stop(l),o=Qe},l=>{i.fail(l),o=Qe})||s(i.value,i,l=>o=l),o()})})}function $t(e,t){try{const n=Fa(e),r=Fa(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(s,i){const o=s.length,l=i.length,u=o<l?o:l;for(let c=0;c<u;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return o===l?0:o<l?-1:1}(La(e),La(t));case"Array":return function(s,i){const o=s.length,l=i.length,u=o<l?o:l;for(let c=0;c<u;++c){const p=$t(s[c],i[c]);if(p!==0)return p}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Fa(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Ui(e);return n==="ArrayBuffer"?"binary":n}function La(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Ld{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,yt.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,yt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=tr(n.algorithm,t)}_iterate(t,n){return xs(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Nt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>xs(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,s=r.table.core;if(ar(r,!0))return s.count({trans:n,query:{index:Fs(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return xs(r,()=>(++i,!1),n,s).then(()=>i)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),s=r[0],i=r.length-1;function o(c,p){return p?o(c[r[p]],p-1):c[s]}var l=this._ctx.dir==="next"?1:-1;function u(c,p){var m=o(c,i),x=o(p,i);return m<x?-l:m>x?l:0}return this.toArray(function(c){return c.sort(u)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ar(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=Fs(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return xs(r,i=>s.push(i),n,r.table.core).then(()=>s)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ar(n)?Ci(n,()=>{var r=t;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):Ci(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ci(this._ctx,()=>{var n=t;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(t,n){return ki(this._ctx,function(r,s,i){return!t(r.value)||(s(i),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return ki(this._ctx,function(s){return t(s.value)}),n=this._ctx,r=t,n.isMatch=tr(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.primaryKey,s)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ar(n,!0)&&n.limit>0)return this._read(s=>{var i=Fs(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return ki(this._ctx,function(s){var i=s.primaryKey.toString(),o=Vt(r,i);return r[i]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var s;if(typeof t=="function")s=t;else{var i=ht(t),o=i.length;s=function(T){for(var R=!1,B=0;B<o;++B){var E=i[B],$=t[E];_n(T,E)!==$&&(on(T,E,$),R=!0)}return R}}const l=n.table.core,{outbound:u,extractKey:c}=l.schema.primaryKey,p=this.db._options.modifyChunkSize||200,m=[];let x=0;const S=[],P=(T,R)=>{const{failures:B,numFailures:E}=R;x+=T-E;for(let $ of ht(B))m.push(B[$])};return this.clone().primaryKeys().then(T=>{const R=B=>{const E=Math.min(p,T.length-B);return l.getMany({trans:r,keys:T.slice(B,B+E),cache:"immutable"}).then($=>{const N=[],U=[],J=u?[]:null,H=[];for(let k=0;k<E;++k){const _=$[k],V={value:as(_),primKey:T[B+k]};s.call(V,V.value,V)!==!1&&(V.value==null?H.push(T[B+k]):u||$t(c(_),c(V.value))===0?(U.push(V.value),u&&J.push(T[B+k])):(H.push(T[B+k]),N.push(V.value)))}const re=ar(n)&&n.limit===1/0&&(typeof t!="function"||t===Di)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&l.mutate({trans:r,type:"add",values:N}).then(k=>{for(let _ in k.failures)H.splice(parseInt(_),1);P(N.length,k)})).then(()=>(U.length>0||re&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:J,values:U,criteria:re,changeSpec:typeof t!="function"&&t}).then(k=>P(U.length,k))).then(()=>(H.length>0||re&&t===Di)&&l.mutate({trans:r,type:"delete",keys:H,criteria:re}).then(k=>P(H.length,k))).then(()=>T.length>B+E&&R(B+p))})};return R(0).then(()=>{if(m.length>0)throw new Vs("Error modifying one or more objects",m,x,S);return T.length})})})}delete(){var t=this._ctx,n=t.range;return ar(t)&&(t.isPrimKey&&!Id||n.type===3)?this._write(r=>{const{primaryKey:s}=t.table.core.schema,i=n;return t.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:u,results:c,numFailures:p})=>{if(p)throw new Vs("Could not delete some values",Object.keys(l).map(m=>l[m]),o-p);return o-p}))}):this.modify(Di)}}const Di=(e,t)=>t.value=null;function Md(e,t){return e<t?-1:e===t?0:1}function Bd(e,t){return e>t?-1:e===t?0:1}function Ut(e,t,n){var r=e instanceof pc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function lr(e){return new e.Collection(e,()=>hc("")).limit(0)}function Rd(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),l=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;s(e[u],c)<0&&(l=u)}return o<r.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function ks(e,t,n,r){var s,i,o,l,u,c,p,m=n.length;if(!n.every(T=>typeof T=="string"))return Ut(e,uc);function x(T){s=function(B){return B==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(T),i=function(B){return B==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(T),o=T==="next"?Md:Bd;var R=n.map(function(B){return{lower:i(B),upper:s(B)}}).sort(function(B,E){return o(B.lower,E.lower)});l=R.map(function(B){return B.upper}),u=R.map(function(B){return B.lower}),c=T,p=T==="next"?"":r}x("next");var S=new e.Collection(e,()=>Sn(l[0],u[m-1]+r));S._ondirectionchange=function(T){x(T)};var P=0;return S._addAlgorithm(function(T,R,B){var E=T.key;if(typeof E!="string")return!1;var $=i(E);if(t($,u,P))return!0;for(var N=null,U=P;U<m;++U){var J=Rd(E,$,l[U],u[U],o,c);J===null&&N===null?P=U+1:(N===null||o(N,J)>0)&&(N=J)}return R(N!==null?function(){T.continue(N+p)}:B),!1}),S}function Sn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function hc(e){return{type:1,lower:e,upper:e}}class pc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||s)&&(!r||!s)?lr(this):new this.Collection(this,()=>Sn(t,n,!r,!s))}catch{return Ut(this,hn)}}equals(t){return t==null?Ut(this,hn):new this.Collection(this,()=>hc(t))}above(t){return t==null?Ut(this,hn):new this.Collection(this,()=>Sn(t,void 0,!0))}aboveOrEqual(t){return t==null?Ut(this,hn):new this.Collection(this,()=>Sn(t,void 0,!1))}below(t){return t==null?Ut(this,hn):new this.Collection(this,()=>Sn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Ut(this,hn):new this.Collection(this,()=>Sn(void 0,t))}startsWith(t){return typeof t!="string"?Ut(this,uc):this.between(t,t+Wn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):ks(this,(n,r)=>n.indexOf(r[0])===0,[t],Wn)}equalsIgnoreCase(t){return ks(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=mn.apply(fr,arguments);return t.length===0?lr(this):ks(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=mn.apply(fr,arguments);return t.length===0?lr(this):ks(this,(n,r)=>r.some(s=>n.indexOf(s)===0),t,Wn)}anyOf(){const t=mn.apply(fr,arguments);let n=this._cmp;try{t.sort(n)}catch{return Ut(this,hn)}if(t.length===0)return lr(this);const r=new this.Collection(this,()=>Sn(t[0],t[t.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let s=0;return r._addAlgorithm((i,o,l)=>{const u=i.key;for(;n(u,t[s])>0;)if(++s,s===t.length)return o(l),!1;return n(u,t[s])===0||(o(()=>{i.continue(t[s])}),!1)}),r}notEqual(t){return this.inAnyRange([[eo,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=mn.apply(fr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ut(this,hn)}const n=t.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[eo,s]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,l=this._max;if(t.length===0)return lr(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&s(E[0],E[1])<=0))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);const u=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let p,m=s;function x(E,$){return m(E[0],$[0])}try{p=t.reduce(function(E,$){let N=0,U=E.length;for(;N<U;++N){const J=E[N];if(r($[0],J[1])<0&&r($[1],J[0])>0){J[0]=o(J[0],$[0]),J[1]=l(J[1],$[1]);break}}return N===U&&E.push($),E},[]),p.sort(x)}catch{return Ut(this,hn)}let S=0;const P=c?E=>s(E,p[S][1])>0:E=>s(E,p[S][1])>=0,T=u?E=>i(E,p[S][0])>0:E=>i(E,p[S][0])>=0;let R=P;const B=new this.Collection(this,()=>Sn(p[0][0],p[p.length-1][1],!u,!c));return B._ondirectionchange=E=>{E==="next"?(R=P,m=s):(R=T,m=i),p.sort(x)},B._addAlgorithm((E,$,N)=>{for(var U=E.key;R(U);)if(++S,S===p.length)return $(N),!1;return!!function(J){return!P(J)&&!T(J)}(U)||(this._cmp(U,p[S][1])===0||this._cmp(U,p[S][0])===0||$(()=>{m===s?E.continue(p[S][0]):E.continue(p[S][1])}),!1)}),B}startsWithAnyOf(){const t=mn.apply(fr,arguments);return t.every(n=>typeof n=="string")?t.length===0?lr(this):this.inAnyRange(t.map(n=>[n,n+Wn])):Ut(this,"startsWithAnyOf() only works with strings")}}function an(e){return ot(function(t){return ts(t),e(t.target.error),!1})}function ts(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const ns="storagemutated",An="x-storagemutated-1",Rn=Hr(null,ns);class jd{_lock(){return Lr(!xe.global),++this._reculock,this._reculock!==1||xe.global||(xe.lockOwnerFor=this),this}_unlock(){if(Lr(!xe.global),--this._reculock==0)for(xe.global||(xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Pr(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&xe.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Lr(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(r);case"MissingAPIError":throw new Se.MissingAPI(r.message,r);default:throw new Se.OpenFailed(r)}if(!this.active)throw new Se.TransactionInactive;return Lr(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ot(s=>{ts(s),this._reject(t.error)}),t.onabort=ot(s=>{ts(s),this.active&&this._reject(new Se.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=ot(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Rn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return yt(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new Se.TransactionInactive);if(this._locked())return new fe((i,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(i,o)},xe])});if(r)return Mn(()=>{var i=new fe((o,l)=>{this._lock();const u=n(o,l,this);u&&u.then&&u.then(o,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new fe((i,o)=>{var l=n(i,o,this);l&&l.then&&l.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=fe.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new fe((o,l)=>{r.then(u=>n._waitingQueue.push(ot(o.bind(null,u))),u=>n._waitingQueue.push(ot(l.bind(null,u)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Vt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Se.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,r,this);return s.core=this.db.core.table(t),n[t]=s,s}}function to(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+yc(t)}}function yc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function mc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Yl(n,r=>[r.name,r])}}let rs=e=>{try{return e.only([[]]),rs=()=>[[]],[[]]}catch{return rs=()=>Wn,Wn}};function no(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>_n(r,t)}(e):t=>_n(t,e)}function Ma(e){return[].slice.call(e)}let Kd=0;function qr(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Ud(e,t,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:p,lowerOpen:m,upperOpen:x}=u;return c===void 0?p===void 0?null:t.upperBound(p,!!x):p===void 0?t.lowerBound(c,!!m):t.bound(c,p,!!m,!!x)}const{schema:s,hasGetAll:i}=function(u,c){const p=Ma(u.objectStoreNames);return{schema:{name:u.name,tables:p.map(m=>c.objectStore(m)).map(m=>{const{keyPath:x,autoIncrement:S}=m,P=St(x),T=x==null,R={},B={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:P,keyPath:x,autoIncrement:S,unique:!0,extractKey:no(x)},indexes:Ma(m.indexNames).map(E=>m.index(E)).map(E=>{const{name:$,unique:N,multiEntry:U,keyPath:J}=E,H={name:$,compound:St(J),keyPath:J,unique:N,multiEntry:U,extractKey:no(J)};return R[qr(J)]=H,H}),getIndexByKeyPath:E=>R[qr(E)]};return R[":id"]=B.primaryKey,x!=null&&(R[qr(x)]=B.primaryKey),B})},hasGetAll:p.length>0&&"getAll"in c.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=s.tables.map(u=>function(c){const p=c.name;return{name:p,schema:c,mutate:function({trans:m,type:x,keys:S,values:P,range:T}){return new Promise((R,B)=>{R=ot(R);const E=m.objectStore(p),$=E.keyPath==null,N=x==="put"||x==="add";if(!N&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);const{length:U}=S||P||{length:1};if(S&&P&&S.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});let J;const H=[],re=[];let k=0;const _=j=>{++k,ts(j)};if(x==="deleteRange"){if(T.type===4)return R({numFailures:k,failures:re,results:[],lastResult:void 0});T.type===3?H.push(J=E.clear()):H.push(J=E.delete(r(T)))}else{const[j,_e]=N?$?[P,S]:[P,null]:[S,null];if(N)for(let ue=0;ue<U;++ue)H.push(J=_e&&_e[ue]!==void 0?E[x](j[ue],_e[ue]):E[x](j[ue])),J.onerror=_;else for(let ue=0;ue<U;++ue)H.push(J=E[x](j[ue])),J.onerror=_}const V=j=>{const _e=j.target.result;H.forEach((ue,Ne)=>ue.error!=null&&(re[Ne]=ue.error)),R({numFailures:k,failures:re,results:x==="delete"?S:H.map(ue=>ue.result),lastResult:_e})};J.onerror=j=>{_(j),V(j)},J.onsuccess=V})},getMany:({trans:m,keys:x})=>new Promise((S,P)=>{S=ot(S);const T=m.objectStore(p),R=x.length,B=new Array(R);let E,$=0,N=0;const U=H=>{const re=H.target;B[re._pos]=re.result,++N===$&&S(B)},J=an(P);for(let H=0;H<R;++H)x[H]!=null&&(E=T.get(x[H]),E._pos=H,E.onsuccess=U,E.onerror=J,++$);$===0&&S(B)}),get:({trans:m,key:x})=>new Promise((S,P)=>{S=ot(S);const T=m.objectStore(p).get(x);T.onsuccess=R=>S(R.target.result),T.onerror=an(P)}),query:function(m){return x=>new Promise((S,P)=>{S=ot(S);const{trans:T,values:R,limit:B,query:E}=x,$=B===1/0?void 0:B,{index:N,range:U}=E,J=T.objectStore(p),H=N.isPrimaryKey?J:J.index(N.name),re=r(U);if(B===0)return S({result:[]});if(m){const k=R?H.getAll(re,$):H.getAllKeys(re,$);k.onsuccess=_=>S({result:_.target.result}),k.onerror=an(P)}else{let k=0;const _=R||!("openKeyCursor"in H)?H.openCursor(re):H.openKeyCursor(re),V=[];_.onsuccess=j=>{const _e=_.result;return _e?(V.push(R?_e.value:_e.primaryKey),++k===B?S({result:V}):void _e.continue()):S({result:V})},_.onerror=an(P)}})}(i),openCursor:function({trans:m,values:x,query:S,reverse:P,unique:T}){return new Promise((R,B)=>{R=ot(R);const{index:E,range:$}=S,N=m.objectStore(p),U=E.isPrimaryKey?N:N.index(E.name),J=P?T?"prevunique":"prev":T?"nextunique":"next",H=x||!("openKeyCursor"in U)?U.openCursor(r($),J):U.openKeyCursor(r($),J);H.onerror=an(B),H.onsuccess=ot(re=>{const k=H.result;if(!k)return void R(null);k.___id=++Kd,k.done=!1;const _=k.continue.bind(k);let V=k.continuePrimaryKey;V&&(V=V.bind(k));const j=k.advance.bind(k),_e=()=>{throw new Error("Cursor not stopped")};k.trans=m,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=ot(B),k.next=function(){let ue=1;return this.start(()=>ue--?this.continue():this.stop()).then(()=>this)},k.start=ue=>{const Ne=new Promise((he,le)=>{he=ot(he),H.onerror=an(le),k.fail=le,k.stop=We=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=_e,he(We)}}),be=()=>{if(H.result)try{ue()}catch(he){k.fail(he)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=ot(he=>{H.onsuccess=be,be()}),k.continue=_,k.continuePrimaryKey=V,k.advance=j,be(),Ne},R(k)},B)})},count({query:m,trans:x}){const{index:S,range:P}=m;return new Promise((T,R)=>{const B=x.objectStore(p),E=S.isPrimaryKey?B:B.index(S.name),$=r(P),N=$?E.count($):E.count();N.onsuccess=ot(U=>T(U.target.result)),N.onerror=an(R)})}}}(u)),l={};return o.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:rs(t),schema:s}}function ro({_novip:e},t){const n=t.db,r=function(s,i,{IDBKeyRange:o,indexedDB:l},u){return{dbcore:function(p,m){return m.reduce((x,{create:S})=>({...x,...S(x)}),p)}(Ud(i,o,u),s.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(s=>{const i=s.name;e.core.schema.tables.some(o=>o.name===i)&&(s.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=s.core))})}function Ws({_novip:e},t,n,r){n.forEach(s=>{const i=r[s];t.forEach(o=>{const l=Fo(o,s);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?bn(o,s,{get(){return this.table(s)},set(u){Hl(this,s,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new e.Table(s,i))})})}function so({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Vd(e,t){return e._cfg.version-t._cfg.version}function Hd(e,t,n,r){const s=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),l=xe.transless||xe;Mn(()=>{xe.trans=i,xe.transless=l,t===0?(ht(s).forEach(u=>{Si(n,u,s[u].primKey,s[u].indexes)}),ro(e,n),fe.follow(()=>e.on.populate.fire(i)).catch(o)):function({_novip:u},c,p,m){const x=[],S=u._versions;let P=u._dbSchema=oo(u,u.idbdb,m),T=!1;const R=S.filter(E=>E._cfg.version>=c);function B(){return x.length?fe.resolve(x.shift()(p.idbtrans)).then(B):fe.resolve()}return R.forEach(E=>{x.push(()=>{const $=P,N=E._cfg.dbschema;ao(u,$,m),ao(u,N,m),P=u._dbSchema=N;const U=gc($,N);U.add.forEach(H=>{Si(m,H[0],H[1].primKey,H[1].indexes)}),U.change.forEach(H=>{if(H.recreate)throw new Se.Upgrade("Not yet support for changing primary key");{const re=m.objectStore(H.name);H.add.forEach(k=>io(re,k)),H.change.forEach(k=>{re.deleteIndex(k.name),io(re,k)}),H.del.forEach(k=>re.deleteIndex(k))}});const J=E._cfg.contentUpgrade;if(J&&E._cfg.version>c){ro(u,m),p._memoizedTables={},T=!0;let H=Wl(N);U.del.forEach(V=>{H[V]=$[V]}),so(u,[u.Transaction.prototype]),Ws(u,[u.Transaction.prototype],ht(H),H),p.schema=H;const re=Lo(J);let k;re&&Ar();const _=fe.follow(()=>{if(k=J(p),k&&re){var V=xn.bind(null,null);k.then(V,V)}});return k&&typeof k.then=="function"?fe.resolve(k):_.then(()=>k)}}),x.push($=>{(!T||!Nd)&&function(N,U){[].slice.call(U.db.objectStoreNames).forEach(J=>N[J]==null&&U.db.deleteObjectStore(J))}(E._cfg.dbschema,$),so(u,[u.Transaction.prototype]),Ws(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),p.schema=u._dbSchema})}),B().then(()=>{var E,$;$=m,ht(E=P).forEach(N=>{$.db.objectStoreNames.contains(N)||Si($,N,E[N].primKey,E[N].indexes)})})}(e,t,i,n).catch(o)})}function gc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!ai)o.recreate=!0,n.change.push(o);else{const l=s.idxByName,u=i.idxByName;let c;for(c in l)u[c]||o.del.push(c);for(c in u){const p=l[c],m=u[c];p?p.src!==m.src&&o.change.push(m):o.add.push(m)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function Si(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>io(s,i)),s}function io(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function oo(e,t,n){const r={};return Us(t.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const l=to(yc(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),u=[];for(let p=0;p<i.indexNames.length;++p){const m=i.index(i.indexNames[p]);o=m.keyPath;var c=to(m.name,o,!!m.unique,!!m.multiEntry,!1,o&&typeof o!="string",!1);u.push(c)}r[s]=mc(s,l,u)}),r}function ao({_novip:e},t,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const u=o.indexNames[l],c=o.index(u).keyPath,p=typeof c=="string"?c:"["+Us(c).join("+")+"]";if(t[i]){const m=t[i].idxByName[p];m&&(m.name=u,delete t[i].idxByName[p],t[i].idxByName[u]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&st.WorkerGlobalScope&&st instanceof st.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class qd{_parseStoresSpec(t,n){ht(t).forEach(r=>{if(t[r]!==null){var s=t[r].split(",").map((o,l)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return to(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),St(c),l===0)}),i=s.shift();if(i.multi)throw new Se.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),n[r]=mc(r,i,s)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Nt(this._cfg.storesSource,t):t;const r=n._versions,s={};let i={};return r.forEach(o=>{Nt(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,so(n,[n._allTables,n,n.Transaction.prototype]),Ws(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ht(i),i),n._storeNames=ht(i),this}upgrade(t){return this._cfg.contentUpgrade=Ro(this._cfg.contentUpgrade||Qe,t),this}}function Vo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ut(li,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ho(e){return e&&typeof e.databases=="function"}function lo(e){return Mn(function(){return xe.letThrough=!0,e()})}function Jd(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Yd(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?yt(t.dbOpenError):e);fn&&(t.openCanceller._stackHolder=sr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function s(){if(t.openCanceller!==r)throw new Se.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,o=null,l=!1;return fe.race([r,(typeof navigator>"u"?fe.resolve():Jd()).then(()=>new fe((u,c)=>{if(s(),!n)throw new Se.MissingAPI;const p=e.name,m=t.autoSchema?n.open(p):n.open(p,Math.round(10*e.verno));if(!m)throw new Se.MissingAPI;m.onerror=an(c),m.onblocked=ot(e._fireOnBlocked),m.onupgradeneeded=ot(x=>{if(o=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=ts,o.abort(),m.result.close();const P=n.deleteDatabase(p);P.onsuccess=P.onerror=ot(()=>{c(new Se.NoSuchDatabase(`Database ${p} doesnt exist`))})}else{o.onerror=an(c);var S=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;l=S<1,e._novip.idbdb=m.result,Hd(e,S/10,o,c)}},c),m.onsuccess=ot(()=>{o=null;const x=e._novip.idbdb=m.result,S=Us(x.objectStoreNames);if(S.length>0)try{const T=x.transaction((P=S).length===1?P[0]:P,"readonly");t.autoSchema?function({_novip:R},B,E){R.verno=B.version/10;const $=R._dbSchema=oo(0,B,E);R._storeNames=Us(B.objectStoreNames,0),Ws(R,[R._allTables],ht($),$)}(e,x,T):(ao(e,e._dbSchema,T),function(R,B){const E=gc(oo(0,R.idbdb,B),R._dbSchema);return!(E.add.length||E.change.some($=>$.add.length||$.change.length))}(e,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ro(e,T)}catch{}var P;Vr.push(e),x.onversionchange=ot(T=>{t.vcFired=!0,e.on("versionchange").fire(T)}),x.onclose=ot(T=>{e.on("close").fire(T)}),l&&function({indexedDB:T,IDBKeyRange:R},B){!Ho(T)&&B!==li&&Vo(T,R).put({name:B}).catch(Qe)}(e._deps,p),u()},c)}))]).then(()=>(s(),t.onReadyBeingFired=[],fe.resolve(lo(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(Ro,Qe);return t.onReadyBeingFired=[],fe.resolve(lo(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),yt(u)}).finally(()=>{t.openComplete=!0,i()})}function co(e){var t=i=>e.next(i),n=s(t),r=s(i=>e.throw(i));function s(i){return o=>{var l=i(o),u=l.value;return l.done?u:u&&typeof u.then=="function"?u.then(n,r):St(u)?Promise.all(u).then(n,r):n(u)}}return s(t)()}function Wd(e,t,n){var r=arguments.length;if(r<2)throw new Se.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[e,zl(s),n]}function vc(e,t,n,r,s){return fe.resolve().then(()=>{const i=xe.transless||xe,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(m){return m.name===Bo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>vc(e,t,n,null,s))):yt(m)}const u=Lo(s);let c;u&&Ar();const p=fe.follow(()=>{if(c=s.call(o,o),c)if(u){var m=xn.bind(null,null);c.then(m,m)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=co(c))},l);return(c&&typeof c.then=="function"?fe.resolve(c).then(m=>o.active?m:yt(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):p.then(()=>c)).then(m=>(r&&o._resolve(),o._completion.then(()=>m))).catch(m=>(o._reject(m),yt(m)))})}function Cs(e,t,n){const r=St(e)?e.slice():[e];for(let s=0;s<n;++s)r.push(t);return r}const zd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(p,m,x){const S=qr(p),P=s[S]=s[S]||[],T=p==null?0:typeof p=="string"?1:p.length,R=m>0,B={...x,isVirtual:R,keyTail:m,keyLength:T,extractKey:no(p),unique:!R&&x.unique};return P.push(B),B.isPrimaryKey||i.push(B),T>1&&o(T===2?p[0]:p.slice(0,T-1),m+1,x),P.sort((E,$)=>E.keyTail-$.keyTail),B}const l=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(const p of r.indexes)o(p.keyPath,0,p);function u(p){const m=p.query.index;return m.isVirtual?{...p,query:{index:m,range:(x=p.query.range,S=m.keyTail,{type:x.type===1?2:x.type,lower:Cs(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:Cs(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0})}}:p;var x,S}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(p){const m=s[qr(p)];return m&&m[0]}},count:p=>n.count(u(p)),query:p=>n.query(u(p)),openCursor(p){const{keyTail:m,isVirtual:x,keyLength:S}=p.query.index;return x?n.openCursor(u(p)).then(P=>P&&function(T){return Object.create(T,{continue:{value:function(B){B!=null?T.continue(Cs(B,p.reverse?e.MAX_KEY:e.MIN_KEY,m)):p.unique?T.continue(T.key.slice(0,S).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,m)):T.continue()}},continuePrimaryKey:{value(B,E){T.continuePrimaryKey(Cs(B,e.MAX_KEY,m),E)}},primaryKey:{get:()=>T.primaryKey},key:{get(){const B=T.key;return S===1?B[0]:B.slice(0,S)}},value:{get:()=>T.value}})}(P)):n.openCursor(p)}}}}}};function qo(e,t,n,r){return n=n||{},r=r||"",ht(e).forEach(s=>{if(Vt(t,s)){var i=e[s],o=t[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const l=Ui(i);l!==Ui(o)?n[r+s]=t[s]:l==="Object"?qo(i,o,n,r+s+"."):i!==o&&(n[r+s]=t[s])}else i!==o&&(n[r+s]=t[s])}else n[r+s]=void 0}),ht(t).forEach(s=>{Vt(e,s)||(n[r+s]=t[s])}),n}const Gd={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=xe.trans,{deleting:l,creating:u,updating:c}=o.table(t).hook;switch(i.type){case"add":if(u.fire===Qe)break;return o._promise("readwrite",()=>p(i),!0);case"put":if(u.fire===Qe&&c.fire===Qe)break;return o._promise("readwrite",()=>p(i),!0);case"delete":if(l.fire===Qe)break;return o._promise("readwrite",()=>p(i),!0);case"deleteRange":if(l.fire===Qe)break;return o._promise("readwrite",()=>function(x){return m(x.trans,x.range,1e4)}(i),!0)}return n.mutate(i);function p(x){const S=xe.trans,P=x.keys||function(T,R){return R.type==="delete"?R.keys:R.keys||R.values.map(T.extractKey)}(r,x);if(!P)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?{...x,keys:P}:{...x}).type!=="delete"&&(x.values=[...x.values]),x.keys&&(x.keys=[...x.keys]),function(T,R,B){return R.type==="add"?Promise.resolve([]):T.getMany({trans:R.trans,keys:B,cache:"immutable"})}(n,x,P).then(T=>{const R=P.map((B,E)=>{const $=T[E],N={onerror:null,onsuccess:null};if(x.type==="delete")l.fire.call(N,B,$,S);else if(x.type==="add"||$===void 0){const U=u.fire.call(N,B,x.values[E],S);B==null&&U!=null&&(B=U,x.keys[E]=B,r.outbound||on(x.values[E],r.keyPath,B))}else{const U=qo($,x.values[E]),J=c.fire.call(N,U,B,$,S);if(J){const H=x.values[E];Object.keys(J).forEach(re=>{Vt(H,re)?H[re]=J[re]:on(H,re,J[re])})}}return N});return n.mutate(x).then(({failures:B,results:E,numFailures:$,lastResult:N})=>{for(let U=0;U<P.length;++U){const J=E?E[U]:P[U],H=R[U];J==null?H.onerror&&H.onerror(B[U]):H.onsuccess&&H.onsuccess(x.type==="put"&&T[U]?x.values[U]:J)}return{failures:B,results:E,numFailures:$,lastResult:N}}).catch(B=>(R.forEach(E=>E.onerror&&E.onerror(B)),Promise.reject(B)))})}function m(x,S,P){return n.query({trans:x,values:!1,query:{index:r,range:S},limit:P}).then(({result:T})=>p({type:"delete",keys:T,trans:x}).then(R=>R.numFailures>0?Promise.reject(R.failures[0]):T.length<P?{failures:[],numFailures:0,lastResult:void 0}:m(x,{...S,lower:T[T.length-1],lowerOpen:!0},P)))}}}}})};function bc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)$t(t.keys[s],e[i])===0&&(r.push(n?as(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch{return null}}const Xd={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=bc(r.keys,r.trans._cache,r.cache==="clone");return s?fe.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?as(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Jo(e){return!("from"in e)}const yn=function(e,t){if(!this){const n=new yn;return e&&"d"in e&&Nt(n,e),n}Nt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function ss(e,t,n){const r=$t(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Jo(e))return Nt(e,{from:t,to:n,d:1});const s=e.l,i=e.r;if($t(n,e.from)<0)return s?ss(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ba(e);if($t(t,e.to)>0)return i?ss(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ba(e);$t(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),$t(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&zs(e,s),i&&o&&zs(e,i)}function zs(e,t){Jo(t)||function n(r,{from:s,to:i,l:o,r:l}){ss(r,s,i),o&&n(r,o),l&&n(r,l)}(e,t)}function Qd(e,t){const n=uo(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=uo(e);let o=i.next(s.from),l=o.value;for(;!r.done&&!o.done;){if($t(l.from,s.to)<=0&&$t(l.to,s.from)>=0)return!0;$t(s.from,l.from)<0?s=(r=n.next(l.from)).value:l=(o=i.next(s.from)).value}return!1}function uo(e){let t=Jo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&$t(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||$t(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ba(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o={...e},l=e[s];e.from=l.from,e.to=l.to,e[s]=l[s],o[s]=l[i],e[i]=o,o.d=Ra(o)}e.d=Ra(e)}function Ra({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Tr(yn.prototype,{add(e){return zs(this,e),this},addKey(e){return ss(this,e,e),this},addKeys(e){return e.forEach(t=>ss(this,t,t)),this},[Vi](){return uo(this)}});const Zd={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new yn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const s=e.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:l,outbound:u}=o,c={...s,mutate:x=>{const S=x.trans,P=S.mutatedParts||(S.mutatedParts={}),T=J=>{const H=`idb://${t}/${r}/${J}`;return P[H]||(P[H]=new yn)},R=T(""),B=T(":dels"),{type:E}=x;let[$,N]=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[[],x.values]:[];const U=x.trans._cache;return s.mutate(x).then(J=>{if(St($)){E!=="delete"&&($=J.results),R.addKeys($);const H=bc($,U);H||E==="add"||B.addKeys($),(H||N)&&function(re,k,_,V){function j(_e){const ue=re(_e.name||"");function Ne(he){return he!=null?_e.extractKey(he):null}const be=he=>_e.multiEntry&&St(he)?he.forEach(le=>ue.addKey(le)):ue.addKey(he);(_||V).forEach((he,le)=>{const We=_&&Ne(_[le]),Ye=V&&Ne(V[le]);$t(We,Ye)!==0&&(We!=null&&be(We),Ye!=null&&be(Ye))})}k.indexes.forEach(j)}(T,i,H,N)}else if($){const H={from:$.lower,to:$.upper};B.add(H),R.add(H)}else R.add(n),B.add(n),i.indexes.forEach(H=>T(H.name).add(n));return J})}},p=({query:{index:x,range:S}})=>{var P,T;return[x,new yn((P=S.lower)!==null&&P!==void 0?P:e.MIN_KEY,(T=S.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},m={get:x=>[o,new yn(x.key)],getMany:x=>[o,new yn().addKeys(x.keys)],count:p,query:p,openCursor:p};return ht(m).forEach(x=>{c[x]=function(S){const{subscr:P}=xe;if(P){const T=N=>{const U=`idb://${t}/${r}/${N}`;return P[U]||(P[U]=new yn)},R=T(""),B=T(":dels"),[E,$]=m[x](S);if(T(E.name||"").add($),!E.isPrimaryKey){if(x!=="count"){const N=x==="query"&&u&&S.values&&s.query({...S,values:!1});return s[x].apply(this,arguments).then(U=>{if(x==="query"){if(u&&S.values)return N.then(({result:H})=>(R.addKeys(H),U));const J=S.values?U.result.map(l):U.result;S.values?R.addKeys(J):B.addKeys(J)}else if(x==="openCursor"){const J=U,H=S.values;return J&&Object.create(J,{key:{get:()=>(B.addKey(J.primaryKey),J.key)},primaryKey:{get(){const re=J.primaryKey;return B.addKey(re),re}},value:{get:()=>(H&&R.addKey(J.primaryKey),J.value)}})}return U})}B.add(n)}}return s[x].apply(this,arguments)}}),c}}}};class ut{constructor(t,n){this._middlewares={},this.verno=0;const r=ut.dependencies;this._options=n={addons:ut.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Qe,dbReadyPromise:null,cancelOpen:Qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new fe(l=>{i.dbReadyResolve=l}),i.openCanceller=new fe((l,u)=>{i.cancelOpen=u}),this._state=i,this.name=t,this.on=Hr(this,"populate","blocked","versionchange","close",{ready:[Ro,Qe]}),this.on.ready.subscribe=ql(this.on.ready.subscribe,l=>(u,c)=>{ut.vip(()=>{const p=this._state;if(p.openComplete)p.dbOpenError||fe.resolve().then(u),c&&l(u);else if(p.onReadyBeingFired)p.onReadyBeingFired.push(u),c&&l(u);else{l(u);const m=this;c||l(function x(){m.on.ready.unsubscribe(u),m.on.ready.unsubscribe(x)})}})}),this.Collection=(o=this,$r(Ld.prototype,function(l,u){this.db=o;let c=dc,p=null;if(u)try{c=u()}catch(P){p=P}const m=l._ctx,x=m.table,S=x.hook.reading.fire;this._ctx={table:x,index:m.index,isPrimKey:!m.index||x.schema.primKey.keyPath&&m.index===x.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:m.or,valueMapper:S!==Zr?S:null}})),this.Table=function(l){return $r(Fd.prototype,function(u,c,p){this.db=l,this._tx=p,this.name=u,this.schema=c,this.hook=l._allTables[u]?l._allTables[u].hook:Hr(null,{creating:[kd,Qe],reading:[xd,Zr],updating:[Dd,Qe],deleting:[Cd,Qe]})})}(this),this.Transaction=function(l){return $r(jd.prototype,function(u,c,p,m,x){this.db=l,this.mode=u,this.storeNames=c,this.schema=p,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Hr(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe((S,P)=>{this._resolve=S,this._reject=P}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},S=>{var P=this.active;return this.active=!1,this.on.error.fire(S),this.parent?this.parent._reject(S):P&&this.idbtrans&&this.idbtrans.abort(),yt(S)})})}(this),this.Version=function(l){return $r(qd.prototype,function(u){this.db=l,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return $r(pc.prototype,function(u,c,p){this.db=l,this._ctx={table:u,index:c===":id"?null:c,or:p};const m=l._deps.indexedDB;if(!m)throw new Se.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(x,S)=>m.cmp(S,x),this._max=(x,S)=>m.cmp(x,S)>0?x:S,this._min=(x,S)=>m.cmp(x,S)<0?x:S,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=rs(n.IDBKeyRange),this._createTransaction=(l,u,c,p)=>new this.Transaction(l,u,c,this._options.chromeTransactionDurability,p),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Vr.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(l))},this.use(zd),this.use(Gd),this.use(Zd),this.use(Xd),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new Se.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(s=>s._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Vd),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?t():new fe((n,r)=>{if(this._state.openComplete)return r(new Se.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Se.DatabaseClosed);this.open().catch(Qe)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:s}){s&&this.unuse({stack:t,name:s});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:r??10,name:s}),i.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Yd(this)}_close(){const t=this._state,n=Vr.indexOf(this);if(n>=0&&Vr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new fe(r=>{t.dbReadyResolve=r}),t.openCanceller=new fe((r,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Se.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new fe((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=ot(()=>{(function({indexedDB:l,IDBKeyRange:u},c){!Ho(l)&&c!==li&&Vo(l,u).delete(c).catch(Qe)})(this._deps,this.name),r()}),o.onerror=an(s),o.onblocked=this._fireOnBlocked};if(t)throw new Se.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ht(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Wd.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let s=xe.trans;s&&s.db===this&&t.indexOf("!")===-1||(s=null);const i=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(c=>{var p=c instanceof this.Table?c.name:c;if(typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),t=="r"||t===wi)o=wi;else{if(t!="rw"&&t!=xi)throw new Se.InvalidArgument("Invalid transaction mode: "+t);o=xi}if(s){if(s.mode===wi&&o===xi){if(!i)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new Se.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(p,m)=>{m(c)}):yt(c)}const u=vc.bind(null,this,o,l,s,r);return s?s._promise(o,u,"lock"):xe.trans?Pr(xe.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!Vt(this._allTables,t))throw new Se.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const eh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class th{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[eh](){return this}}function _c(e,t){return ht(t).forEach(n=>{zs(e[n]||(e[n]=new yn),t[n])}),e}function nh(e){let t,n=!1;const r=new th(s=>{const i=Lo(e);let o=!1,l={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Rn.storagemutated.unsubscribe(S)}};s.start&&s.start(c);let p=!1,m=!1;function x(){return ht(u).some(T=>l[T]&&Qd(l[T],u[T]))}const S=T=>{_c(l,T),x()&&P()},P=()=>{if(p||o)return;l={};const T={},R=function(B){i&&Ar();const E=()=>Mn(e,{subscr:B,trans:null}),$=xe.trans?Pr(xe.transless,E):E();return i&&$.then(xn,xn),$}(T);m||(Rn(ns,S),m=!0),p=!0,Promise.resolve(R).then(B=>{n=!0,t=B,p=!1,o||(x()?P():(l={},u=T,s.next&&s.next(B)))},B=>{p=!1,n=!1,s.error&&s.error(B),c.unsubscribe()})};return P(),c});return r.hasValue=()=>n,r.getValue=()=>t,r}let fo;try{fo={indexedDB:st.indexedDB||st.mozIndexedDB||st.webkitIndexedDB||st.msIndexedDB,IDBKeyRange:st.IDBKeyRange||st.webkitIDBKeyRange}}catch{fo={indexedDB:null,IDBKeyRange:null}}const Hn=ut;function Ls(e){let t=vn;try{vn=!0,Rn.storagemutated.fire(e)}finally{vn=t}}Tr(Hn,{...As,delete:e=>new Hn(e,{addons:[]}).delete(),exists:e=>new Hn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Ho(t)?Promise.resolve(t.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==li)):Vo(t,n).toCollection().primaryKeys()}(Hn.dependencies).then(e)}catch{return yt(new Se.MissingAPI)}},defineClass:()=>function(e){Nt(this,e)},ignoreTransaction:e=>xe.trans?Pr(xe.transless,e):e(),vip:lo,async:function(e){return function(){try{var t=co(e.apply(this,arguments));return t&&typeof t.then=="function"?t:fe.resolve(t)}catch(n){return yt(n)}}},spawn:function(e,t,n){try{var r=co(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:fe.resolve(r)}catch(s){return yt(s)}},currentTransaction:{get:()=>xe.trans||null},waitFor:function(e,t){const n=fe.resolve(typeof e=="function"?Hn.ignoreTransaction(e):e).timeout(t||6e4);return xe.trans?xe.trans.waitFor(n):n},Promise:fe,debug:{get:()=>fn,set:e=>{Xl(e,e==="dexie"?()=>!0:fc)}},derive:br,extend:Nt,props:Tr,override:ql,Events:Hr,on:Rn,liveQuery:nh,extendObservabilitySet:_c,getByKeyPath:_n,setByKeyPath:on,delByKeyPath:function(e,t){typeof t=="string"?on(e,t,void 0):"length"in t&&[].map.call(t,function(n){on(e,n,void 0)})},shallowClone:Wl,deepClone:as,getObjectDiff:qo,cmp:$t,asap:Jl,minKey:eo,addons:[],connections:Vr,errnames:Bo,dependencies:fo,semVer:$a,version:$a.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Hn.maxKey=rs(Hn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rn(ns,e=>{if(!vn){let t;ai?(t=document.createEvent("CustomEvent"),t.initCustomEvent(An,!0,!0,e)):t=new CustomEvent(An,{detail:e}),vn=!0,dispatchEvent(t),vn=!1}}),addEventListener(An,({detail:e})=>{vn||Ls(e)}));let vn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(An);typeof e.unref=="function"&&e.unref(),Rn(ns,t=>{vn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ls(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Rn(ns,t=>{try{vn||(typeof localStorage<"u"&&localStorage.setItem(An,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:An,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===An){const n=JSON.parse(t.newValue);n&&Ls(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===An&&Ls(t.changedParts)})}fe.rejectionMapper=function(e,t){if(!e||e instanceof _r||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Oa[e.name])return e;var n=new Oa[e.name](t||e.message,e);return"stack"in e&&bn(n,"stack",{get:function(){return this.inner.stack}}),n},Xl(fn,fc);const ct=new ut("avito_scraper");function rh(e=1){ct.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,profileInfoList:`
            ++id,
            &url,
            name,
            comment,
            marked,
            *reviewsList
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class sh{constructor(t){Ft(this,"canvas",null);Ft(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var u,c;const s={...this.settings,...r,type:t},i=(u=this.canvas)==null?void 0:u.querySelector(`.${this.settings.groupContainerClass}.position-${s.position}`),o=this.createToast(n,s);if(i)return i.append(o),o;const l=this.createContainer(s);return l.append(o),(c=this.canvas)==null||c.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),s=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...s),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const i=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(i),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const Ue=new sh({hideOnClick:!0,position:"bottom-right"});var Ve=(e=>(e.ReviewsFilterSaved="Фильтр сохранен",e.ReviewsFilterSaveError="Не удалось сохранить фильтр",e.ReviewsFilterCleared="Фильтр сброшен",e.ReviewsFilterClearError="Не удалось удалить фильтр из базы",e.ReviewsFilterGetError="Не удалось достать фильтр из базы",e.ReviewsFilterAllLinksParsed="Все ссылки уже прошли парсинг",e.ReviewsFilterSimilarLinks="В фильтре присутствуют одинаковые ссылки",e.ParsingReviewsCanceled="Парсинг отзывов отменен",e.ParsingReviewsStarted="Парсинг отзывов запущен",e.ParsingReviewsFinished="Парсинг отзывов завершен",e.TabOpenError="Не удалось открыть ссылку",e.ProfileCreated="Профиль добавлен в базу",e.ProfileCreateError="Не удалось сохранить профиль в базу",e.ProfileEdited="Профиль успешно обновлен",e.ProfileEditeError="Не удалось обновить профиль",e.ProfileDeleted="Профиль успешно удален",e.ProfileDeleteError="Не удалось удалить профиль",e.ProfileLinkCopied="Ссылка скопирована в буффер",e.ProfileLinkAddedInReviewsFilter="Ссылка профиля вставлена в форму фильтра",e.ProfileInfoListAddedInDB="Список профилей сохранен",e.ProfileInfoListRemovedFromDB="Список профилей очищен",e.InfoCopied="Информация скопирована в буффер",e.InfoNotFound="Информация не найдена",e.ResultsNotFound="Результаты не найдены",e.ProductNameCopied="Название товара скопировано в буффер",e.WaitOpenPage="Ожидаем открытия следующей страницы ...",e.DBExportSuccess="Экпорт базы успешно завершен",e.DBExportError="Не удалось экспортировать базу",e.DBImportError="Не удалось импортировать базу",e.DBImportSuccess="Импорт базы успешно завершен",e.DBDropSuccess="База данных успешно удалена",e.DBDropError="Не удалось удалить базу данных",e.ProfilesParsingEnded="Поиск продавцов завершен",e.ProfilesParsingError="Поиск продавцов завершен неудачно",e))(Ve||{});function ja(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function xr(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ka(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}async function wc(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(s,i){i.status==="complete"&&s===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function Ua(){let t=(await chrome.tabs.query({})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function ih(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Yo(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("Ошибка при копировании в буффер",n)}t.remove()}function oh(e,t){return Math.floor(Math.random()*(t-e+1))+e}class ah{constructor(){Ft(this,"list",rn([]));Ft(this,"state",Fn({contentModalData:[],contentModalVisible:!1,viewAllButtonVisible:!1,viewMoreThanButtonVisible:!1,removeInfoListButtonVisible:!1}))}pushProfileInfo(t){this.list.value.push(t)}pushResultsByUrl(t,n){const r=this.list.value.find(s=>s.url===t);r&&(r.reviewsList=n,this.sortResults(r,"product_name_asc"))}sortResults(t,n){if(t.reviewsList){t.reviewsSortedBy=n;let r=JSON.parse(JSON.stringify(t.reviewsList));n==="product_name_asc"&&r.sort((s,i)=>s.productName.localeCompare(i.productName)),n==="product_name_desc"&&r.sort((s,i)=>i.productName.localeCompare(s.productName)),n==="rating_desc"&&r.sort((s,i)=>s.rating>i.rating?-1:s.rating<i.rating?1:0),n==="rating_asc"&&r.sort((s,i)=>s.rating>i.rating?1:s.rating<i.rating?-1:0),n==="date_desc"&&r.sort((s,i)=>s.date>i.date?-1:s.date<i.date?1:0),n==="date_asc"&&r.sort((s,i)=>s.date>i.date?1:s.date<i.date?-1:0),n==="delivery_desc"&&r.sort((s,i)=>Number(i.delivery)-Number(s.delivery)),n==="delivery_asc"&&r.sort((s,i)=>Number(s.delivery)-Number(i.delivery)),t.reviewsList=r}}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}
`,n+=`${xr(t.parsingDate)}



`,this.sortResults(t,"product_name_asc"),(r=t.reviewsList)==null||r.forEach(s=>{let i=new Date(s.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(i);n+=`${s.productName}~${o}${s.delivery?"~Delivery":""}
`}),n&&(Yo(n),Ue.show("success",Ve.InfoCopied))}getMoreThanResults(t=5){let n=[],r=new Map;this.list.value.forEach(i=>{var o;(o=i.reviewsList)==null||o.forEach(l=>{if(r.has(l.productName)){let u=r.get(l.productName);if(u){let c=[...u,{...l,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`,count:0}];r.set(l.productName,c)}}else r.set(l.productName,[{...l,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`,count:0}])})}),r.forEach((i,o)=>{i.length>=t&&(i[0]&&(i[0].count=i.length),n.push(i[0]))}),r.clear();let s=JSON.parse(JSON.stringify(n));return s.sort((i,o)=>i.count>o.count?-1:i.count<o.count?1:0),n=s,n}getAllResults(){let t=[];this.list.value.forEach(r=>{var s;(s=r.reviewsList)==null||s.forEach(i=>{t.push({...i,color:r.color,info:`${r.name} / ${r.rating} / ${r.reviewsCount} / ${r.subscribers} / ${r.deliveryInfo}`,count:0})})});let n=JSON.parse(JSON.stringify(t));return n.sort((r,s)=>r.productName.localeCompare(s.productName)),t=n,t}async apiProfileCheckInDB(t){let n=await ct.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiCreateInfoList(){try{let t=JSON.parse(JSON.stringify(this.list.value));t.length&&(ct.profileInfoList.clear(),ct.profileInfoList.bulkAdd(t),Ue.show("success",Ve.ProfileInfoListAddedInDB))}catch(t){console.log(t)}finally{}}async apiGetInfoList(){try{const t=await ct.profileInfoList.toArray();if(t.length)return t}catch(t){console.log(t)}finally{}return[]}async apiRemoveInfoList(){try{await ct.profileInfoList.clear(),Ue.show("success",Ve.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiRemoveInfoListOnlyUnmarked(){try{let n=(await ct.profileInfoList.filter(r=>r.marked===!1).toArray()).map(r=>r.id);await ct.profileInfoList.bulkDelete(n),Ue.show("warning",Ve.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers,activeAdds:n.activeAdds,completedAdds:n.completedAdds}]};const s=await ct.savedProfiles.add(r);t.id=s,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,Ue.show("success",Ve.ProfileCreated)}catch(n){console.log(n),Ue.show("error",Ve.ProfileCreateError)}finally{}}}const Oe=new ah,lh={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},ch={class:"centered py-3 flex flex-wrap items-center gap-3"},uh={class:"flex items-center gap-3 ml-auto"},fh=Bt({__name:"Header",setup(e){async function t(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getAllResults()}async function n(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getMoreThanResults()}async function r(){window.confirm("Удаляем список профилей ?")&&(Oe.list.value=[],Oe.apiRemoveInfoList())}return(s,i)=>(se(),ce("header",lh,[F("div",ch,[(se(!0),ce(rt,null,gn(ne(un).list,o=>(se(),Lt(Pt,{key:o.value,icon:o.icon,class:_t([ne(un).active.value===o.value?"ring-2 ring-white":""]),onClick:l=>ne(un).changeTab(o.value)},{default:Dt(()=>[Tt(Ee(o.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),F("div",uh,[ne(Oe).state.viewAllButtonVisible&&ne(Oe).list.value.length>1?(se(),Lt(Pt,{key:0,theme:"success",type:"button",icon:"remove_red_eye",onClick:dt(t,["stop","prevent"])},{default:Dt(()=>[Tt("Все результаты")]),_:1},8,["onClick"])):Me("",!0),ne(Oe).state.viewMoreThanButtonVisible&&ne(Oe).list.value.length>1?(se(),Lt(Pt,{key:1,theme:"success",type:"button",icon:"remove_red_eye",onClick:dt(n,["stop","prevent"])},{default:Dt(()=>[Tt(" >= 5")]),_:1},8,["onClick"])):Me("",!0),ne(Oe).state.removeInfoListButtonVisible&&ne(Oe).list.value.length?(se(),Lt(Pt,{key:2,theme:"danger",type:"button",icon:"delete_sweep",onClick:dt(r,["stop","prevent"])},null,8,["onClick"])):Me("",!0)]),Be(Pt,{theme:"info",type:"button",icon:"settings",class:_t(["ml-auto",[ne(un).active.value===ne(En).Settings?"ring-2 ring-white":""]]),onClick:i[0]||(i[0]=o=>ne(un).changeTab(ne(En).Settings))},null,8,["class"])])]))}}),dh={class:"switch"},hh=["tabindex","checked"],ph=["tabindex","checked"],yh=F("div",{class:"switch__label"},null,-1),mh=Bt({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,s)=>(se(),ce("div",dh,[r.type==="checkbox"?(se(),ce("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,hh)):Me("",!0),r.type==="radio"?(se(),ce("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,ph)):Me("",!0),yh]))}});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xc={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(gh,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return Y}});var s={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},i={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:s.days,minView:s.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function l(){let{tagName:D="div",className:a="",innerHtml:f="",id:h="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=document.createElement(D);return a&&v.classList.add(...a.split(" ")),h&&(v.id=h),f&&(v.innerHTML=f),y&&u(v,y),v}function u(D,a){for(let[f,h]of Object.entries(a))h!==void 0&&D.setAttribute(f,h);return D}function c(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function p(D){let a=D.getHours(),{hours:f,dayPeriod:h}=m(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:x(a),hours12:f,dayPeriod:h,fullHours12:x(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function m(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function x(D){return D<10?"0"+D:D}function S(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function P(){let D=[];for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return f.forEach(y=>{if(typeof y=="object")for(let v in y)y[v]&&D.push(v);else y&&D.push(y)}),D.join(" ")}function T(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.days;if(!D||!a)return!1;let h=p(D),y=p(a);return{[s.days]:h.date===y.date&&h.month===y.month&&h.year===y.year,[s.months]:h.month===y.month&&h.year===y.year,[s.years]:h.year===y.year}[f]}function R(D,a,f){let h=E(D,!1).getTime(),y=E(a,!1).getTime();return f?h>=y:h>y}function B(D,a){return!R(D,a,!0)}function E(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||$(f),f}function $(D){return D.setHours(0,0,0,0),D}function N(D,a,f){D.length?D.forEach(h=>{h.addEventListener(a,f)}):D.addEventListener(a,f)}function U(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:U(D.parentNode,a))}function J(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),h=1;h<a;h++)f[h-1]=arguments[h];return f.filter(y=>y).forEach(y=>{for(let[v,w]of Object.entries(y))if(w!==void 0&&w.toString()==="[object Object]"){let C=D[v]!==void 0?D[v].toString():void 0,A=w.toString(),L=Array.isArray(w)?[]:{};D[v]=D[v]?C!==A?L:D[v]:L,H(D[v],w)}else D[v]=w}),D}function re(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function _(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class V{constructor(){let{type:a,date:f,dp:h,opts:y,body:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),_(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),_(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),_(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),_(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),_(this,"onChangeFocusDate",w=>{if(!w)return void(this.focused&&this.removeFocus());let C=T(w,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),_(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=h,this.opts=y,this.body=v,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:h,date:y}=p(this.date),v=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":h,"data-date":y,...v}})}_getClassName(){var a,f;let h=new Date,{selectOtherMonths:y,selectOtherYears:v}=this.opts,{minDate:w,maxDate:C}=this.dp,{day:A}=p(this.date),L=this._isOutOfMinMaxRange(),M=(a=this.customData)===null||a===void 0?void 0:a.disabled,W=P("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(h,this.date,this.type),"-min-date-":w&&T(w,this.date,this.type),"-max-date-":C&&T(C,this.date,this.type)}),q="";switch(this.type){case s.days:q=P({"-weekend-":this.dp.isWeekend(A),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||L||M});break;case s.months:q=P({"-disabled-":L||M});break;case s.years:q=P({"-other-decade-":this.isOtherDecade,"-disabled-":L||this.isOtherDecade&&!v||M})}return P(W,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:h,date:y}=p(this.date),{showOtherMonths:v,showOtherYears:w}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case s.days:return!v&&this.isOtherMonth?"":y;case s.months:return this.dp.locale[this.opts.monthsField][h];case s.years:return!w&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:h,date:y}=this,{month:v,year:w,date:C}=p(y),A=h===s.days,L=h===s.years,M=!!a&&new Date(w,L?a.getMonth():v,A?C:a.getDate()),W=!!f&&new Date(w,L?f.getMonth():v,A?C:f.getDate());return a&&f?B(M,a)||R(W,f):a?B(M,a):f?R(W,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,h=P({"-in-range-":a&&f&&(y=this.date,v=a,w=f,R(y,v)&&B(y,w)),"-range-from-":a&&T(this.date,a,this.type),"-range-to-":f&&T(this.date,f,this.type)});var y,v,w;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),h&&this.$cell.classList.add(...h.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function j(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let _e={[s.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${s.days}-"></div>`,[s.months]:`<div class="air-datepicker-body--cells -${s.months}-"></div>`,[s.years]:`<div class="air-datepicker-body--cells -${s.years}-"></div>`};const ue=".air-datepicker-cell";class Ne{constructor(a){let{dp:f,type:h,opts:y}=a;j(this,"handleClick",v=>{let w=v.target.closest(ue).adpCell;if(w.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(w.date,w.type);C?this.dp._handleAlreadySelectedDates(C,w.date):this.dp.selectDate(w.date)}),j(this,"handleDayNameClick",v=>{let w=v.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(w),datepicker:this.dp})}),j(this,"onChangeCurrentView",v=>{v!==this.type?this.hide():(this.show(),this.render())}),j(this,"onMouseOverCell",v=>{let w=U(v.target,ue);this.dp.setFocusDate(!!w&&w.adpCell.date)}),j(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),j(this,"onClickBody",v=>{let{onClickDayName:w}=this.opts,C=v.target;C.closest(ue)&&this.handleClick(v),w&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(v)}),j(this,"onMouseDown",v=>{this.pressed=!0;let w=U(v.target,ue),C=w&&w.adpCell;T(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),j(this,"onMouseMove",v=>{if(!this.pressed||!this.dp.isMinViewReached)return;v.preventDefault();let w=U(v.target,ue),C=w&&w.adpCell,{selectedDates:A,rangeDateTo:L,rangeDateFrom:M}=this.dp;if(!C||C.isDisabled)return;let{date:W}=C;if(A.length===2){if(this.rangeFromFocused&&!R(W,L)){let{hours:q,minutes:G}=p(M);W.setHours(q),W.setMinutes(G),this.dp.rangeDateFrom=W,this.dp.replaceDate(M,W)}if(this.rangeToFocused&&!B(W,M)){let{hours:q,minutes:G}=p(L);W.setHours(q),W.setMinutes(G),this.dp.rangeDateTo=W,this.dp.replaceDate(L,W)}}}),j(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),j(this,"onChangeViewDate",(v,w)=>{if(!this.isVisible)return;let C=S(v),A=S(w);switch(this.dp.currentView){case s.days:if(T(v,w,s.months))return;break;case s.months:if(T(v,w,s.years))return;break;case s.years:if(C[0]===A[0]&&C[1]===A[1])return}this.render()}),j(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(v=>{this.$cells.appendChild(v.render())})}),this.dp=f,this.type=h,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===s.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;N(this.$el,"mouseover",this.onMouseOverCell),N(this.$el,"mouseout",this.onMouseOutCell),N(this.$el,"click",this.onClickBody),a&&f&&(N(this.$el,"mousedown",this.onMouseDown),N(this.$el,"mousemove",this.onMouseMove),N(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:_e[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",h=this.dp.isWeekend,{onClickDayName:y}=this.opts,v=a,w=0;for(;w<7;){let C=v%7;f+=`<div class="${P("air-datepicker-body--day-name",{[s.cssClassWeekend]:h(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,w++,v++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,h=c(a),{year:y,month:v}=p(a),w=new Date(y,v,1),C=new Date(y,v,h),A=w.getDay()-f,L=6-C.getDay()+f;A=A<0?A+7:A,L=L>6?L-7:L;let M=function(pe,ve){let{year:te,month:g,date:d}=p(pe);return new Date(te,g,d-ve)}(w,A),W=h+A+L,q=M.getDate(),{year:G,month:Z}=p(M),oe=0;for(;oe<W;){let pe=new Date(G,Z,q+oe);this._generateCell(pe),oe++}}_generateCell(a){let{type:f,dp:h,opts:y}=this,v=new V({type:f,dp:h,opts:y,date:a,body:this});return this.cells.push(v),v}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=S(this.dp.viewDate),f=a[0]-1,h=a[1]+1,y=f;for(;y<=h;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case s.days:this._generateDayCells();break;case s.months:this._generateMonthCells();break;case s.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView)}}function be(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class he{constructor(a){let{dp:f,opts:h}=a;be(this,"onClickNav",y=>{let v=U(y.target,".air-datepicker-nav--action");if(!v)return;let w=v.dataset.action;this.dp[w]()}),be(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),be(this,"update",()=>{let{prevHtml:y,nextHtml:v}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=v,this._resetNavStatus(),this.render(),this.handleNavStatus()}),be(this,"renderDelay",()=>{setTimeout(this.render)}),be(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,v){for(let w in v)v[w]?y.classList.add(w):y.classList.remove(w)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=h,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(s.eventChangeTime,this.render))}destroy(){this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(s.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,h=f.navTitles[a.currentView];return typeof h=="function"?h(a):a.formatDate(a.viewDate,h)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:h}=this.dp;if(!f&&!h||!a)return;let{year:y,month:v}=this.dp.parsedViewDate,w=!!f&&p(f),C=!!h&&p(h);switch(this.dp.currentView){case s.days:f&&w.month>=v&&w.year>=y&&this._disableNav("prev"),h&&C.month<=v&&C.year<=y&&this._disableNav("next");break;case s.months:f&&w.year>=y&&this._disableNav("prev"),h&&C.year<=y&&this._disableNav("next");break;case s.years:{let A=S(this.dp.viewDate);f&&w.year>=A[0]&&this._disableNav("prev"),h&&C.year<=A[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,h=new Array(f>1?f-1:0),y=1;y<f;y++)h[y-1]=arguments[y];a.length?a.forEach(v=>{v.classList.remove(...h)}):a.classList.remove(...h)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var le={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class We{constructor(a){let{dp:f,opts:h}=a;this.dp=f,this.opts=h,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let h=f;typeof f=="string"&&le[f]&&(h=le[f]);let y=this.createButton(h);h.onClick&&this.attachEventToButton(y,h.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:h,tagName:y="button",attrs:v={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:P("air-datepicker-button",h),attrs:v})}render(){this.generateButtons()}}function Ye(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class it{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ye(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Ye(this,"onChangeSelectedDate",y=>{let{date:v,updateTime:w=!1}=y;v&&(this.setMinMaxTime(v),this.setCurrentTime(!!w&&v),this.addTimeToDate(v))}),Ye(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Ye(this,"onChangeInputRange",y=>{let v=y.target;this[v.getAttribute("name")]=v.value,this.updateText(),this.dp.trigger(s.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Ye(this,"onMouseEnterLeave",y=>{let v=y.target.getAttribute("name"),w=this.$minutesText;v==="hours"&&(w=this.$hoursText),w.classList.toggle("-focus-")}),Ye(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Ye(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:h}=this.dp.locale;h&&(h.match(k("h"))||h.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),N(this.$ranges,a,this.onChangeInputRange),N(this.$ranges,"mouseenter",this.onMouseEnterLeave),N(this.$ranges,"mouseleave",this.onMouseEnterLeave),N(this.$ranges,"focus",this.onFocus),N(this.$ranges,"mousedown",this.onFocus),N(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:P("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:h,minutes:y,minHours:v,minMinutes:w,maxHours:C,maxMinutes:A,dayPeriod:L,opts:{hoursStep:M,minutesStep:W}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${x(h)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${x(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${L}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${v}" max="${C}" step="${M}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${w}" max="${A}" step="${W}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:h}=this.dp;f&&T(a,f)&&this.setMinTimeFromMinDate(f),h&&T(a,h)&&this.setMaxTimeFromMaxDate(h)}}setCurrentTime(a){let{hours:f,minutes:h}=a?p(a):this;this.hours=J(f,this.minHours,this.maxHours),this.minutes=J(h,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:h,maxMinutes:y}=this.opts;this.minHours=J(a,0,23),this.minMinutes=J(f,0,59),this.maxHours=J(h,0,23),this.maxMinutes=J(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){u(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,u(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=x(this.displayHours),this.$minutesText.innerHTML=x(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:h}=m(a);this.displayHours=this.ampm?f:a,this.dayPeriod=h}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function qe(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Rt{constructor(a){let{dp:f,opts:h}=a;qe(this,"pressedKeys",new Set),qe(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,v)=>v.up()]])),qe(this,"handleHotKey",y=>{let v=this.hotKeys.get(y),w=p(this.getInitialFocusDate());v(w,this.dp);let{year:C,month:A,date:L}=w,M=c(new Date(C,A));M<L&&(L=M);let W=this.dp.getClampedDate(new Date(C,A,L));this.dp.setFocusDate(W,{viewDateTransition:!0})}),qe(this,"isHotKeyPressed",()=>{let y=!1,v=this.pressedKeys.size,w=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(A=>{y||v!==A.length||(y=A.every(w)&&C)});else{if(v!==C.length)continue;y=C.every(w)&&C}}return y}),qe(this,"isArrow",y=>y>=37&&y<=40),qe(this,"onKeyDown",y=>{let{key:v,which:w}=y,{dp:C,dp:{focusDate:A},opts:L}=this;this.registerKey(v);let M=this.isHotKeyPressed();if(M)return y.preventDefault(),void this.handleHotKey(M);if(this.isArrow(w))return y.preventDefault(),void this.focusNextCell(v);if(v==="Enter"){if(C.currentView!==L.minView)return void C.down();if(A){let W=C._checkIfDateIsSelected(A);return void(W?C._handleAlreadySelectedDates(W,A):C.selectDate(A))}}v==="Escape"&&this.dp.hide()}),qe(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=h,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:h,parsedViewDate:{year:y,month:v}}=this.dp,w=a||h[h.length-1];if(!w)switch(f){case s.days:w=new Date(y,v,new Date().getDate());break;case s.months:w=new Date(y,v,1);break;case s.years:w=new Date(y,0,1)}return w}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:h}=this.dp,{days:y,months:v,years:w}=s,C=p(f),A=C.year,L=C.month,M=C.date;switch(a){case"ArrowLeft":h===y&&(M-=1),h===v&&(L-=1),h===w&&(A-=1);break;case"ArrowUp":h===y&&(M-=7),h===v&&(L-=3),h===w&&(A-=4);break;case"ArrowRight":h===y&&(M+=1),h===v&&(L+=1),h===w&&(A+=1);break;case"ArrowDown":h===y&&(M+=7),h===v&&(L+=3),h===w&&(A+=4)}let W=this.dp.getClampedDate(new Date(A,L,M));this.dp.setFocusDate(W,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ge={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),h=1;h<a;h++)f[h-1]=arguments[h];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function de(D,a,f){return(a=function(h){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(h,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Re="",K="",z=!1;class Y{static buildGlobalContainer(a){z=!0,Re=l({className:a,id:a}),o("body").appendChild(Re)}constructor(a,f){var h=this;if(de(this,"viewIndexes",[s.days,s.months,s.years]),de(this,"next",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(w,C+1,1));break;case s.months:this.setViewDate(new Date(w+1,C,1));break;case s.years:this.setViewDate(new Date(w+10,0,1))}}),de(this,"prev",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(w,C-1,1));break;case s.months:this.setViewDate(new Date(w-1,C,1));break;case s.years:this.setViewDate(new Date(w-10,0,1))}}),de(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),de(this,"setPosition",function(w){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(w=w||h.opts.position)=="function")return void(h.customHide=w({$datepicker:h.$datepicker,$target:h.$el,$pointer:h.$pointer,isViewChange:C,done:h._finishHide}));let A,L,{isMobile:M}=h.opts,W=h.$el.getBoundingClientRect(),q=h.$el.getBoundingClientRect(),G=h.$datepicker.offsetParent,Z=h.$el.offsetParent,oe=h.$datepicker.getBoundingClientRect(),pe=w.split(" "),ve=window.scrollY,te=window.scrollX,g=h.opts.offset,d=pe[0],b=pe[1];if(M)h.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:h.$el.offsetTop,left:h.$el.offsetLeft,width:W.width,height:h.$el.offsetHeight},ve=0,te=0),G!==Z&&G!==document.body){let O=G.getBoundingClientRect();q={top:W.top-O.top,left:W.left-O.left,width:W.width,height:W.height},ve=0,te=0}switch(d){case"top":A=q.top-oe.height-g;break;case"right":L=q.left+q.width+g;break;case"bottom":A=q.top+q.height+g;break;case"left":L=q.left-oe.width-g}switch(b){case"top":A=q.top;break;case"right":L=q.left+q.width-oe.width;break;case"bottom":A=q.top+q.height-oe.height;break;case"left":L=q.left;break;case"center":/left|right/.test(d)?A=q.top+q.height/2-oe.height/2:L=q.left+q.width/2-oe.width/2}h.$datepicker.style.cssText=`left: ${L+te}px; top: ${A+ve}px`}}),de(this,"_setInputValue",()=>{let{opts:w,$altField:C,locale:{dateFormat:A}}=this,{altFieldDateFormat:L,altField:M}=w;M&&C&&(C.value=this._getInputValue(L)),this.$el.value=this._getInputValue(A)}),de(this,"_getInputValue",w=>{let{selectedDates:C,opts:A}=this,{multipleDates:L,multipleDatesSeparator:M}=A;if(!C.length)return"";let W=typeof w=="function",q=W?w(L?C:C[0]):C.map(G=>this.formatDate(G,w));return q=W?q:q.join(M),q}),de(this,"_checkIfDateIsSelected",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.days,A=!1;return h.selectedDates.some(L=>{let M=T(w,L,C);return A=M&&L,M}),A}),de(this,"_scheduleCallAfterTransition",w=>{this._cancelScheduledCall(),w&&w(!1),this._onTransitionEnd=()=>{w&&w(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),de(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),de(this,"setViewDate",w=>{if(!((w=re(w))instanceof Date)||T(w,this.viewDate))return;let C=this.viewDate;this.viewDate=w;let{onChangeViewDate:A}=this.opts;if(A){let{month:L,year:M}=this.parsedViewDate;A({month:L,year:M,decade:this.curDecade})}this.trigger(s.eventChangeViewDate,w,C)}),de(this,"setFocusDate",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!w||(w=re(w))instanceof Date)&&(h.focusDate=w,h.opts.range&&w&&h._handleRangeOnFocus(),h.trigger(s.eventChangeFocusDate,w,C))}),de(this,"setCurrentView",w=>{if(this.viewIndexes.includes(w)){if(this.currentView=w,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(s.eventChangeCurrentView,w),!this.views[w]){let C=this.views[w]=new Ne({dp:this,opts:this.opts,type:w});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(w)}}),de(this,"_updateLastSelectedDate",w=>{this.lastSelectedDate=w,this.trigger(s.eventChangeLastSelectedDate,w)}),de(this,"destroy",()=>{let{showEvent:w,isMobile:C}=this.opts,A=this.$datepicker.parentNode;A&&A.removeChild(this.$datepicker),this.$el.removeEventListener(w,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),de(this,"update",w=>{let C=H({},this.opts);H(this.opts,w);let{timepicker:A,buttons:L,range:M,selectedDates:W,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&W&&this.selectDate(W),w.view&&this.setCurrentView(w.view),this._setInputValue(),C.range&&!M?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&M&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!A?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&A&&this._addTimepicker(),!C.buttons&&L?this._addButtons():C.buttons&&!L?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&L&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===s.days&&this.views[this.currentView].renderDayNames())}),de(this,"isOtherMonth",w=>{let{month:C}=p(w);return C!==this.parsedViewDate.month}),de(this,"isOtherYear",w=>{let{year:C}=p(w);return C!==this.parsedViewDate.year}),de(this,"isOtherDecade",w=>{let{year:C}=p(w),[A,L]=S(this.viewDate);return C<A||C>L}),de(this,"_onChangeSelectedDate",w=>{let{silent:C}=w;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),de(this,"_onChangeFocusedDate",function(w){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!w)return;let A=!1;C&&(A=h.isOtherMonth(w)||h.isOtherYear(w)||h.isOtherDecade(w)),A&&h.setViewDate(w)}),de(this,"_onChangeTime",w=>{let{hours:C,minutes:A}=w,L=new Date,{lastSelectedDate:M,opts:{onSelect:W}}=this,q=M;M||(q=L);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(A),M?(this._setInputValue(),W&&this._triggerOnSelect()):this.selectDate(q))}),de(this,"_onFocus",w=>{this.visible||this.show()}),de(this,"_onBlur",w=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),de(this,"_onMouseDown",w=>{this.inFocus=!0}),de(this,"_onMouseUp",w=>{this.inFocus=!1,this.$el.focus()}),de(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),de(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),de(this,"isWeekend",w=>this.opts.weekends.includes(w)),de(this,"getClampedDate",w=>{let{minDate:C,maxDate:A}=this,L=w;return A&&R(w,A)?L=A:C&&B(w,C)&&(L=C),L}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=H({},i,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:v}=this.opts;v||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=re(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:h,isMobile:y,selectedDates:v,keyboardNav:w,onlyTimepicker:C}}=this,A=o("body");(!z||z&&Re&&!A.contains(Re))&&!h&&this.elIsInput&&!this.$customContainer&&Y.buildGlobalContainer(Y.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(h||this._bindEvents(),w&&!C&&(this.keyboardNav=new Rt({dp:this,opts:a}))),v&&this.selectDate(v,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Re.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:h,buttons:y,timepicker:v,position:w,classes:C,onlyTimepicker:A,isMobile:L}}=this;this._buildBaseHtml(),this.elIsInput&&(h||this._setPositionClasses(w)),!h&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),A&&this.$datepicker.classList.add("-only-timepicker-"),L&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Ne({dp:this,type:this.currentView,opts:a}),this.nav=new he({dp:this,opts:a}),v&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&re(a),this.maxDate=!!f&&re(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new it({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new We({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(s.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(s.eventChangeFocusDate,this._onChangeFocusedDate),this.on(s.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,h;this.elIsInput?a?(f=this.$datepicker,(h=this.$el).parentNode.insertBefore(f,h.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:h,timepicker:y,onlyTimepicker:v,timeFormat:w,dateTimeSeparator:C}=this.opts;var A;this.locale=(A=a,JSON.parse(JSON.stringify(A))),f&&(this.locale.dateFormat=f),w!==void 0&&w!==""&&(this.locale.timeFormat=w);let{timeFormat:L}=this.locale;if(h!==""&&(this.locale.firstDay=h),y&&typeof f!="function"){let M=L?C:"";this.locale.dateFormat=[this.locale.dateFormat,L||""].join(M)}v&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],h=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...h.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:h}=this;h&&R(a,h)&&this.setViewDate(h),f&&B(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=re(a),!(a instanceof Date))return;let h=f,y=this.locale,v=p(a),w=v.dayPeriod,C=S(a),A=Y.replacer,L={T:a.getTime(),m:v.minutes,mm:v.fullMinutes,h:v.hours12,hh:v.fullHours12,H:v.hours,HH:v.fullHours,aa:w,AA:w.toUpperCase(),E:y.daysShort[v.day],EEEE:y.days[v.day],d:v.date,dd:v.fullDate,M:v.month+1,MM:v.fullMonth,MMM:y.monthsShort[v.month],MMMM:y.months[v.month],yy:v.year.toString().slice(-2),yyyy:v.year,yyyy1:C[0],yyyy2:C[1]};for(let[M,W]of Object.entries(L))h=A(h,k(M),W);return h}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:v,selectedDates:w}=this,{updateTime:C}=h,{moveToOtherMonthsOnSelect:A,moveToOtherYearsOnSelect:L,multipleDates:M,range:W,autoClose:q}=this.opts,G=w.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,h)}),new Promise(Z=>{setTimeout(Z)});if((a=re(a))instanceof Date){if(y===s.days&&a.getMonth()!==v.month&&A&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===s.years&&a.getFullYear()!==v.year&&L&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),M&&!W){if(G===M)return;this._checkIfDateIsSelected(a)||w.push(a)}else if(W)switch(G){case 1:w.push(a),this.rangeDateTo||(this.rangeDateTo=a),R(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,silent:h==null?void 0:h.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(M||W?W&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,h=this;if((a=re(a))instanceof Date)return f.some((y,v)=>{if(T(y,a))return f.splice(v,1),h.selectedDates.length?h._updateLastSelectedDate(h.selectedDates[h.selectedDates.length-1]):(h.rangeDateFrom="",h.rangeDateTo="",h._updateLastSelectedDate(!1)),this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let h=this.selectedDates.find(v=>T(v,a,this.currentView)),y=this.selectedDates.indexOf(h);y<0||T(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,h=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&h||!y&&!h)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:h,locale:y,opts:{onSelect:v,multipleDates:w,range:C}}=this,A=w||C,L=typeof y.dateFormat=="function";h.length&&(a=h.map(E),f=L?w?y.dateFormat(a):a.map(M=>y.dateFormat(M)):a.map(M=>this.formatDate(M,y.dateFormat))),v({date:A?a:a[0],formattedDate:A?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:h,toggleSelected:y}=this.opts;h?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=re(a||this.focusDate||this.viewDate))instanceof Date))return;let h=f==="up"?this.viewIndex+1:this.viewIndex-1;h>2&&(h=2),h<0&&(h=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[h])}_handleRangeOnFocus(){this.selectedDates.length===1&&(R(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.day;if(!((a=re(a))instanceof Date))return;let{year:h,month:y,date:v}=p(a),w=`[data-year="${h}"]`,C=`[data-month="${y}"]`,A={[s.day]:`${w}${C}[data-date="${v}"]`,[s.month]:`${w}${C}`,[s.year]:`${w}`};return this.views[this.currentView].$el.querySelector(A[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return p(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return S(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===s.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===s.days}get $container(){return this.$customContainer||Re}static replacer(a,f,h){return a.replace(f,function(y,v,w,C){return v+h+C})}}var X;return de(Y,"defaults",i),de(Y,"version","3.3.5"),de(Y,"defaultGlobalContainerId","air-datepicker-global-container"),X=Y.prototype,Object.assign(X,ge),r.default}()})})(xc);var bh=xc.exports;const Va=vh(bh);class _h{constructor(){Ft(this,"fields",Fn({profilesLinks:[{url:"",status:"new",highlight:!1}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,deliveryOnly:!1}));Ft(this,"openedTab",rn({}))}get profileLinkNew(){return this.fields.profilesLinks.find(t=>t.status==="new")}get profileLinkHighlighted(){return this.fields.profilesLinks.find(t=>t.highlight)}profileLinkGetByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}profileLinkPushNew(t=""){this.fields.profilesLinks.push({url:t,status:"new",highlight:!1})}profileLinksRemoveEmpty(){this.fields.profilesLinks.forEach((t,n,r)=>{t.url===""&&r.splice(n,1)})}profileLinkRemove(t){this.fields.profilesLinks.splice(t,1),this.profileLinksHighlightDuplicates()}profileLinksHighlightDuplicates(){this.fields.profilesLinks.forEach((t,n,r)=>{let s=r.filter(i=>i.url===t.url&&t.url!=="");t.highlight=s.length>1})}profileLinkSetInfo(t,n){const r=this.profileLinkGetByUrl(t);r&&(r.info=n)}profileLinksPasteMultiple(t,n){let r=n.value.split(" ");if(r=r.filter(s=>s!==""),r.length>1){r.forEach((s,i)=>{i===0?t.url=s.trim():this.profileLinkPushNew(s.trim())});return}t.url=n.value.trim()}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.deliveryOnly=t.deliveryOnly,this.fields.productName=t.productName,t}catch(t){console.log(t),Ue.show("error",Ve.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new",highlight:!1}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.deliveryOnly=!1,await this.apiRemoveFilter()}async parsingStart(){try{if(this.profileLinkNew){const t=this.fields.profilesLinks.map(r=>r.url);Oe.list.value=Oe.list.value.filter(r=>t.includes(r.url)||r.marked);const n=await wc(this.profileLinkNew.url);this.openedTab.value=n,n.id&&chrome.tabs.sendMessage(n.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.profileLinkNew.url})}else Ue.show("warning",Ve.ReviewsFilterAllLinksParsed)}catch{Ue.show("error",Ve.TabOpenError)}}async apiRemoveFilter(){try{await ct.reviewsFilter.where("key").equals("reviewsFilter").delete(),Ue.show("warning",Ve.ReviewsFilterCleared)}catch(t){console.log(t),Ue.show("warning",Ve.ReviewsFilterClearError)}}async apiGetFilter(){const t=await ct.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ka(t.dateFrom),t.dateTo=Ka(t.dateTo),(await ct.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?ct.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):ct.reviewsFilter.add({...t,key:"reviewsFilter"}),Ue.show("success",Ve.ReviewsFilterSaved)}catch(t){console.log(t),Ue.show("error",Ve.ReviewsFilterSaveError)}}}const $e=new _h,wh=["onSubmit"],xh={class:"grid grid-cols-4 gap-5"},kh={class:"col-span-4"},Ch=F("div",{class:"text-sm font-medium mb-2"},"Ссылки на профили",-1),Dh={class:"flex items-center gap-4"},Sh={class:"flex-none select-none"},Th={key:0,class:"font-icon text-3xl block text-green-400"},Oh={key:1,class:"font-icon text-3xl block text-red-400"},Eh={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Ah={key:3,class:"font-icon text-3xl block text-gray-400"},Ph=["onUpdate:modelValue","onInput"],$h={key:0,class:"flex-none cursor-pointer select-none"},Nh=["onClick"],Ih={class:"flex-none cursor-pointer select-none ml-auto"},Fh=["innerHTML"],Lh=F("div",{class:"mb-2 text-sm font-medium"},"Дата от",-1),Mh=F("div",{class:"mb-2 text-sm font-medium"},"Дата до",-1),Bh={class:"col-span-2"},Rh=F("div",{class:"mb-2 text-sm font-medium"},"Название товара",-1),jh=F("div",{class:"mb-2 text-sm font-medium"},"Рейтинг от",-1),Kh=F("div",{class:"mb-2 text-sm font-medium"},"Рейтинг до",-1),Uh={class:"col-span-4 select-none"},Vh={class:"inline-block"},Hh=F("div",{class:"mb-3 text-sm font-medium"},"Только с доставкой",-1),qh={class:"flex items-center gap-4 mt-10"},Jh=Bt({__name:"ProfilesParseFilter",setup(e){const t={dateFrom:null,dateTo:null},n={autoClose:!0,onSelect:({formattedDate:l,datepicker:u})=>{u.$el.id==="dateFrom"&&($e.fields.dateFrom=l),u.$el.id==="dateTo"&&($e.fields.dateTo=l)}};function r(l,u){$e.profileLinksPasteMultiple(l,u.target),$e.profileLinksHighlightDuplicates(),l.status="new",l.info=""}async function s(){window.confirm("Сбросить фильтр ?")&&($e.resetFields(),t.dateFrom.selectDate(ja()),t.dateTo.selectDate(new Date),Oe.list.value=Oe.list.value.filter(l=>l.marked),Oe.apiRemoveInfoListOnlyUnmarked())}async function i(){if($e.profileLinkHighlighted){Ue.show("error",Ve.ReviewsFilterSimilarLinks);return}$e.apiCreateFilter(),Oe.apiCreateInfoList()}async function o(){if($e.profileLinkHighlighted){Ue.show("error",Ve.ReviewsFilterSimilarLinks);return}$e.parsingStart()}return rr(()=>{t.dateFrom=new Va("#dateFrom",n),t.dateTo=new Va("#dateTo",n),t.dateFrom.selectDate(ja()),t.dateTo.selectDate(new Date),setTimeout(async()=>{const l=await $e.apiGetFilter();l&&(t.dateFrom.selectDate(l.dateFrom),t.dateTo.selectDate(l.dateTo))},0)}),os(()=>{t.dateFrom.destroy(),t.dateTo.destroy()}),(l,u)=>(se(),ce("form",{class:"pb-14 transition-opacity duration-300 delay-100",onSubmit:dt(o,["prevent"])},[F("div",xh,[F("div",kh,[Ch,(se(!0),ce(rt,null,gn(ne($e).fields.profilesLinks,(c,p)=>(se(),ce("div",{key:p,class:_t(p>0?"mt-5":"")},[F("div",Dh,[F("div",Sh,[c.status==="success"?(se(),ce("i",Th,"check_circle")):Me("",!0),c.status==="error"?(se(),ce("i",Oh,"cancel")):Me("",!0),c.status==="wait"?(se(),ce("i",Eh,"rotate_right")):Me("",!0),c.status==="new"?(se(),ce("i",Ah,"watch_later")):Me("",!0)]),Wt(F("input",{"onUpdate:modelValue":m=>c.url=m,tabindex:"1",type:"search",required:"",class:_t(["text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",{"ring-4 ring-red-400":c.highlight}]),onInput:m=>r(c,m)},null,42,Ph),[[zt,c.url]]),ne($e).fields.profilesLinks.length>1?(se(),ce("div",$h,[F("i",{class:"font-icon text-3xl block text-red-400",onClick:m=>ne($e).profileLinkRemove(p)},"remove_circle_outline",8,Nh)])):Me("",!0),F("div",Ih,[F("i",{class:"font-icon text-3xl block text-green-400",onClick:u[0]||(u[0]=m=>ne($e).profileLinkPushNew())},"add_circle_outline")])]),c.info?(se(),ce("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:c.info},null,8,Fh)):Me("",!0)],2))),128))]),F("div",null,[Lh,Wt(F("input",{"onUpdate:modelValue":u[1]||(u[1]=c=>ne($e).fields.dateFrom=c),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne($e).fields.dateFrom]])]),F("div",null,[Mh,Wt(F("input",{"onUpdate:modelValue":u[2]||(u[2]=c=>ne($e).fields.dateTo=c),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne($e).fields.dateTo]])]),F("div",Bh,[Rh,Wt(F("input",{"onUpdate:modelValue":u[3]||(u[3]=c=>ne($e).fields.productName=c),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne($e).fields.productName]])]),F("div",null,[jh,Wt(F("input",{"onUpdate:modelValue":u[4]||(u[4]=c=>ne($e).fields.ratingFrom=c),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne($e).fields.ratingFrom]])]),F("div",null,[Kh,Wt(F("input",{"onUpdate:modelValue":u[5]||(u[5]=c=>ne($e).fields.ratingTo=c),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne($e).fields.ratingTo]])]),F("div",Uh,[F("label",Vh,[Hh,Be(mh,{tabindex:6,modelValue:ne($e).fields.deliveryOnly,"onUpdate:modelValue":u[6]||(u[6]=c=>ne($e).fields.deliveryOnly=c)},null,8,["modelValue"])])])]),F("div",qh,[Be(Pt,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:Dt(()=>[Tt("Начать парсинг")]),_:1}),Be(Pt,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:dt(i,["stop","prevent"])},{default:Dt(()=>[Tt("Сохранить фильтр")]),_:1},8,["onClick"]),Be(Pt,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:dt(s,["stop","prevent"])},{default:Dt(()=>[Tt("Сбросить фильтр")]),_:1},8,["onClick"])])],40,wh))}}),Yh=["onKeydown"],kc=Bt({__name:"Modal",props:{width:{default:"580px"}},emits:["close"],setup(e,{emit:t}){const n=e,r=rn();function s(o){const l=o.target;!l.classList.contains("app-modal__body")&&!l.closest(".app-modal__body")&&i()}function i(){t("close")}return os(()=>{document.body.classList.remove("overflow-hidden")}),rr(()=>{var o;(o=r==null?void 0:r.value)==null||o.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(o,l)=>(se(),ce("div",{ref_key:"modalRef",ref:r,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-60 z-100 overflow-y-scroll p-10 flex",onClick:s,onKeydown:ed(i,["esc"])},[F("div",{class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-10 m-auto max-w-full min-h-[100px] break-all",style:Cr({width:n.width})},[F("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:i},"close"),Ol(o.$slots,"default")],4)],40,Yh))}}),Pn=Bt({__name:"SortHeading",props:{currentSortType:{default:""},sortTypes:{default:()=>[]},label:{default:""}},emits:["sort"],setup(e,{emit:t}){const n=e,r=oi(()=>!!(n.sortTypes.includes(n.currentSortType)&&n.currentSortType.includes("asc")));function s(){n.currentSortType.includes("desc")?t("sort",n.sortTypes.find(i=>i.includes("asc"))):t("sort",n.sortTypes.find(i=>i.includes("desc")))}return(i,o)=>(se(),ce("div",{class:"flex items-center cursor-pointer select-none whitespace-nowrap",onClick:s},[F("div",{class:_t(["font-icon mr-2",[{"text-cyan-400":n.sortTypes.includes(n.currentSortType)},{"rotate-180":r.value}]])},"sort",2),F("div",null,Ee(n.label),1)]))}}),Wh={key:0,class:"pb-10"},zh=["onClick"],Gh={class:"min-w-0 flex-1"},Xh={class:"flex items-center gap-4 mb-4"},Qh=["onClick"],Zh={key:0,class:"text-[16px] text-sky-300 font-medium italic"},ep={class:"flex flex-wrap items-center gap-x-4 gap-y-2 text-[16px] font-medium"},tp={class:"text-orange-300"},np={class:"text-yellow-300"},rp={class:"text-teal-300"},sp={class:"text-rose-300"},ip={class:"text-amber-300"},op={key:0,class:"text-lime-300"},ap={key:1,class:"text-gray-300"},lp={class:"flex-none flex items-center gap-4"},cp={key:0,class:"flex-none"},up=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"storage",-1),fp=[up],dp=["onClick"],hp=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"cloud_upload",-1),pp=[hp],yp=["onClick"],mp=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"content_copy",-1),gp=[mp],vp=["onClick"],bp={class:"font-icon text-3xl drop-shadow-xl"},_p={key:0,class:"text-[14px] px-4 p-5"},wp={key:0,class:"mb-8"},xp=F("div",{class:"mb-3 opacity-80"},"Комментарий:",-1),kp=["onUpdate:modelValue"],Cp={key:0},Dp={class:"mb-8 font-bold text-xl"},Sp={class:"w-full relative"},Tp={class:"text-[16px] sticky top-[64px] bg-gray-600"},Op={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ep={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ap={class:"text-left px-4 py-2 border border-white border-opacity-50"},Pp={class:"text-left px-4 py-2 border border-white border-opacity-50"},$p={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Np={class:"px-4 py-2 border border-white border-opacity-50"},Ip={class:"flex-none flex items-center"},Fp={class:"text-base font-medium mr-1"},Lp={class:"text-[18px] font-icon text-yellow-400"},Mp={class:"px-4 py-2 border border-white border-opacity-50"},Bp={class:"flex items-center gap-4"},Rp=["onClick"],jp={class:"px-4 py-2 border border-white border-opacity-50"},Kp={key:2,class:"text-xl font-bold text-red-300"},Up=["title"],Vp=["onClick"],Hp={key:0},qp={key:1},Jp={key:1,class:"text-center text-xl font-bold"},Yp={key:1,class:"text-center text-xl font-bold pb-10"},Wp=Bt({__name:"ProfilesInfoList",setup(e){function t(){Oe.state.contentModalVisible=!1,Oe.state.contentModalData=[]}function n(c){Yo(c),Ue.show("success",Ve.ProductNameCopied)}function r(c,p){Oe.sortResults(c,p)}function s(c){c.opened===void 0&&(c.opened=!0),c.opened=!c.opened}function i(c){c.url&&window.open(c.url,"_blank")}function o(c){c.marked=!c.marked}async function l(c){Oe.apiProfileCreate(c)}async function u(c){Oe.copyItemInfo(c)}return os(()=>{Oe.state.viewAllButtonVisible=!1,Oe.state.viewMoreThanButtonVisible=!1,Oe.state.removeInfoListButtonVisible=!1}),rr(async()=>{Oe.state.viewAllButtonVisible=!0,Oe.state.viewMoreThanButtonVisible=!0,Oe.state.removeInfoListButtonVisible=!0,Oe.list.value.forEach(async c=>{await Oe.apiProfileCheckInDB(c)}),Oe.list.value.length===1&&(Oe.list.value[0].opened=!0)}),(c,p)=>ne(Oe).list.value.length?(se(),ce("div",Wh,[(se(!0),ce(rt,null,gn(ne(Oe).list.value,m=>{var x;return se(),ce("div",{key:m.url,class:_t(["relative rounded-xl shadow-xl bg-gray-600 text-[16px] mb-3",m.opened?"ring ring-blue-400":""])},[F("div",{class:"relative flex items-start p-4 select-none cursor-pointer rounded-xl",style:Cr({"background-image":`linear-gradient(45deg, rgb(75 85 99) 0%, rgb(75 85 99) 70%, ${m.color.bg} 100%)`}),onClick:S=>s(m)},[F("div",Gh,[F("div",Xh,[F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:dt(S=>i(m),["stop"])},Ee(m.name),9,Qh),m.comment?(se(),ce("div",Zh,Ee(m.comment),1)):Me("",!0)]),F("div",ep,[F("div",tp,Ee(m.rating),1),F("div",np,Ee(m.reviewsCount),1),F("div",rp,Ee(m.subscribers),1),F("div",sp,Ee(m.deliveryInfo),1),F("div",ip,"Активные - "+Ee(m.activeAdds),1),m.completedAdds?(se(),ce("div",op,"Завершенные - "+Ee(m.completedAdds),1)):Me("",!0),m.savedDate?(se(),ce("div",ap,Ee(m.savedDate?ne(xr)(m.savedDate):""),1)):Me("",!0)])]),F("div",lp,[m.existsInDataBase?(se(),ce("div",cp,fp)):(se(),ce("div",{key:1,class:"flex-none ml-auto",onClick:dt(S=>l(m),["stop"])},pp,8,dp)),F("div",{class:"flex-none",onClick:dt(S=>u(m),["stop"])},gp,8,yp),F("div",{class:"flex-none",onClick:dt(S=>o(m),["stop"])},[F("div",bp,Ee(m.marked?"bookmark":"bookmark_border"),1)],8,vp)])],12,zh),m.opened?(se(),ce("div",_p,[m.existsInDataBase?Me("",!0):(se(),ce("div",wp,[xp,Wt(F("input",{"onUpdate:modelValue":S=>m.comment=S,type:"search",required:"",class:"text-base w-1/4 max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,kp),[[zt,m.comment]])])),(x=m.reviewsList)!=null&&x.length?(se(),ce(rt,{key:1},[m.opened?(se(),ce("div",Cp,[F("div",Dp,[F("div",null,[Tt("Найдено отзывов - "),F("strong",null,Ee(m.reviewsList.length),1)])]),F("table",Sp,[F("tr",Tp,[F("th",Op,[Be(Pn,{"sort-types":["date_desc","date_asc"],"current-sort-type":m.reviewsSortedBy,label:"Дата",onSort:S=>r(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Ep,[Be(Pn,{"sort-types":["rating_desc","rating_asc"],"current-sort-type":m.reviewsSortedBy,label:"Оценка",onSort:S=>r(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Ap,[Be(Pn,{"sort-types":["product_name_desc","product_name_asc"],"current-sort-type":m.reviewsSortedBy,label:"Название товара",onSort:S=>r(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Pp,[Be(Pn,{"sort-types":["delivery_desc","delivery_asc"],"current-sort-type":m.reviewsSortedBy,label:"Доставка",onSort:S=>r(m,S)},null,8,["current-sort-type","onSort"])])]),(se(!0),ce(rt,null,gn(m.reviewsList,(S,P)=>{var T;return se(),ce("tr",{key:m.reviewsSortedBy+P,class:"text-[14px] hover:bg-gray-600"},[F("td",$p,Ee((T=ne(xr)(S.date))==null?void 0:T.slice(0,10)),1),F("td",Np,[F("div",Ip,[F("div",Fp,"("+Ee(S.rating)+") - ",1),(se(!0),ce(rt,null,gn(S.rating,R=>(se(),ce("div",Lp,"star"))),256))])]),F("td",Mp,[F("div",Bp,[F("div",{class:"font-icon text-green-400 cursor-pointer",onClick:dt(R=>n(S.productName),["stop"])},"content_copy",8,Rp),F("div",null,Ee(S.productName),1)])]),F("td",jp,[F("strong",{class:_t(S.delivery?"text-green-400":"text-red-400")},Ee(S.delivery?"Да":"Нет"),3)])])}),128))])])):Me("",!0)],64)):(se(),ce("div",Kp,"Результатов не найдено"))])):Me("",!0)],2)}),128)),ne(Oe).state.contentModalVisible?(se(),Lt(kc,{key:0,width:"800px",onClose:t},{default:Dt(()=>[ne(Oe).state.contentModalData.length?(se(!0),ce(rt,{key:0},gn(ne(Oe).state.contentModalData,m=>{var x;return se(),ce("div",{class:"flex text-sm items-center gap-2 py-0.5 px-1 mb-[2px] mr-5 font-medium",style:Cr({"background-color":m.color.bg,color:m.color.text}),title:m.info},[F("i",{class:"font-icon text-xl cursor-pointer drop-shadow-xl",onClick:S=>n(m.productName)},"content_copy",8,Vp),F("div",null,Ee(m.productName),1),m.count?Me("",!0):(se(),ce("div",Hp,Ee((x=ne(xr)(m.date))==null?void 0:x.slice(0,10)),1)),m.count?(se(),ce("strong",qp,"("+Ee(m.count)+")",1)):Me("",!0)],12,Up)}),256)):(se(),ce("div",Jp,"Результаты не найдены"))]),_:1})):Me("",!0)])):(se(),ce("div",Yp,"Результаты не найдены"))}}),zp=Bt({__name:"ProfilesParsedPage",setup(e){return(t,n)=>(se(),ce(rt,null,[Be(Jh),Be(Wp)],64))}});class Gp{constructor(){Ft(this,"list",rn([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Oe.list.value.find(s=>s.url===t),r=await ct.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let s=JSON.parse(JSON.stringify(n)),i=r[0];i.parsingResults.unshift({parsingDate:s.parsingDate,rating:s.rating,reviewsCount:s.reviewsCount,deliveryInfo:s.deliveryInfo,subscribers:s.subscribers,activeAdds:s.activeAdds,completedAdds:s.completedAdds});const o=await ct.savedProfiles.put(i)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){return t===0&&n===0?await ct.savedProfiles.toArray():[]}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await ct.savedProfiles.put(n))Ue.show("success",Ve.ProfileEdited);else throw new Error}catch{Ue.show("error",Ve.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await ct.savedProfiles.delete(t.id),Ue.show("success",Ve.ProfileDeleted)}catch(n){console.log(n),Ue.show("error",Ve.ProfileDeleteError)}finally{}}}const ft=new Gp;class Xp{constructor(){Ft(this,"openedTab",rn({}));Ft(this,"state",Fn({loading:!1,currentPage:0,profilesListSortType:"name_asc",profilesList:[]}));Ft(this,"pagesRange",oi(()=>{let t=this.fields.pagesRange.split("-"),n=+t[0],r=+t[1];return{start:n,end:r}}));Ft(this,"fields",Fn({reviewsCount:100,categoryUrl:"",profileName:"",pagesRange:"1-20"}))}async parsingStart(){const t=await wc(this.fields.categoryUrl);this.openedTab.value=t,t.id&&chrome.tabs.sendMessage(t.id,{action:"profiles-parsing-start",profilesFilterFields:this.fields,currentUrl:this.fields.categoryUrl})}sortProfileList(t="name_asc"){this.state.profilesListSortType=t;let n=JSON.parse(JSON.stringify(this.state.profilesList));t==="name_desc"&&n.sort((r,s)=>s.name.localeCompare(r.name)),t==="name_asc"&&n.sort((r,s)=>r.name.localeCompare(s.name)),t==="rating_desc"&&n.sort((r,s)=>r.rating>s.rating?-1:r.rating<s.rating?1:0),t==="rating_asc"&&n.sort((r,s)=>r.rating>s.rating?1:r.rating<s.rating?-1:0),t==="reviews_desc"&&n.sort((r,s)=>r.reviewsCount>s.reviewsCount?-1:r.reviewsCount<s.reviewsCount?1:0),t==="reviews_asc"&&n.sort((r,s)=>r.reviewsCount>s.reviewsCount?1:r.reviewsCount<s.reviewsCount?-1:0),t==="db_exist_desc"&&n.sort((r,s)=>Number(s.existsInDataBase)-Number(r.existsInDataBase)),t==="db_exist_asc"&&n.sort((r,s)=>Number(r.existsInDataBase)-Number(s.existsInDataBase)),this.state.profilesList=[],setTimeout(()=>{this.state.profilesList=[...n]},0)}async checkProfilesInDB(){let t=await ft.apiGetList();this.state.profilesList.forEach(n=>{let r=n.url.split("/")[4];if(r){let s=t.find(i=>i.url.includes(r));s&&s.name===n.name&&(n.existsInDataBase=!0)}})}pushProfileList(t){let n=[...t,...this.state.profilesList];n=new Set(n.map(r=>JSON.stringify(r))),n=[...n].map(r=>JSON.parse(r)),this.state.profilesList=n,this.sortProfileList(),this.checkProfilesInDB()}clearProfilesList(){window.confirm("Удаляем список продавцов ?")&&(this.state.profilesList=[])}}const Xe=new Xp,Qp={class:"grid grid-cols-4 gap-5"},Zp={class:"col-span-4"},ey=F("div",{class:"mb-2 text-sm font-medium"},"Страница категории",-1),ty={class:"flex items-center gap-4"},ny={key:0,class:"font-icon text-3xl block text-green-400 animate-spin"},ry={key:1,class:"flex-none font-medium text-[16px]"},sy={class:"text-green-400"},iy=F("div",{class:"mb-2 text-sm font-medium"},"Количество отзывов профиля",-1),oy=F("div",{class:"mb-2 text-sm font-medium"},"Диапазон страниц (формат 1-20)",-1),ay=F("div",{class:"mb-2 text-sm font-medium"},"Имя профиля",-1),ly={class:"flex items-center gap-4 mt-10"},cy=Bt({__name:"ProfilesSearchFilter",setup(e){async function t(){Xe.parsingStart()}return(n,r)=>(se(),ce("form",{class:_t(["pb-14",{"pointer-events-none":ne(Xe).state.loading}]),onSubmit:r[5]||(r[5]=dt(s=>t(),["prevent"]))},[F("div",Qp,[F("div",Zp,[ey,F("div",ty,[ne(Xe).state.loading?(se(),ce("i",ny,"rotate_right")):Me("",!0),ne(Xe).state.currentPage>0?(se(),ce("div",ry,[F("strong",sy,Ee(ne(Xe).state.currentPage),1),Tt(" - "+Ee(ne(Xe).pagesRange.value.end),1)])):Me("",!0),Wt(F("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>ne(Xe).fields.categoryUrl=s),type:"text",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne(Xe).fields.categoryUrl]])])]),F("div",null,[iy,Wt(F("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>ne(Xe).fields.reviewsCount=s),type:"number",min:"0",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne(Xe).fields.reviewsCount]])]),F("div",null,[oy,Wt(F("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>ne(Xe).fields.pagesRange=s),required:"",type:"text",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne(Xe).fields.pagesRange]])]),F("div",null,[ay,Wt(F("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>ne(Xe).fields.profileName=s),type:"text",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,ne(Xe).fields.profileName]])])]),F("div",ly,[Be(Pt,{theme:"success",type:"submit",icon:"find_in_page"},{default:Dt(()=>[Tt("Начать поиск")]),_:1}),Be(Pt,{theme:"danger",type:"button",icon:"delete_sweep",onClick:r[4]||(r[4]=s=>ne(Xe).clearProfilesList())},{default:Dt(()=>[Tt("Очистить список")]),_:1})])],34))}}),uy={key:0,class:"pb-14"},fy={class:"mb-8 font-bold text-xl"},dy={class:"w-full relative"},hy={class:"text-[16px] sticky top-[64px] bg-gray-600"},py={class:"text-left px-4 py-2 border border-white border-opacity-50"},yy={class:"text-left px-4 py-2 border border-white border-opacity-50"},my={class:"text-left px-4 py-2 border border-white border-opacity-50"},gy={class:"text-left px-4 py-2 border border-white border-opacity-50"},vy={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},by={class:"flex items-center gap-4"},_y=["onClick"],wy=["href"],xy={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},ky={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Cy={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Dy=Bt({__name:"ProfilesSearchedList",setup(e){function t(r){Xe.sortProfileList(r)}function n(r){$e.profileLinkPushNew(r.url),$e.profileLinksHighlightDuplicates(),$e.profileLinksRemoveEmpty(),Ue.show("success",Ve.ProfileLinkAddedInReviewsFilter)}return(r,s)=>ne(Xe).state.profilesList.length?(se(),ce("div",uy,[F("div",fy,[F("div",null,[Tt("Найдено продавцов - "),F("strong",null,Ee(ne(Xe).state.profilesList.length),1)])]),F("table",dy,[F("tr",hy,[F("th",py,[Be(Pn,{label:"Имя","sort-types":["name_desc","name_asc"],"current-sort-type":ne(Xe).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",yy,[Be(Pn,{label:"Рейтинг","sort-types":["rating_desc","rating_asc"],"current-sort-type":ne(Xe).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",my,[Be(Pn,{label:"Отзывы","sort-types":["reviews_desc","reviews_asc"],"current-sort-type":ne(Xe).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",gy,[Be(Pn,{label:"Найден в базе","sort-types":["db_exist_desc","db_exist_asc"],"current-sort-type":ne(Xe).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])])]),(se(!0),ce(rt,null,gn(ne(Xe).state.profilesList,i=>(se(),ce("tr",{key:i.name,class:"text-[14px] hover:bg-gray-600"},[F("td",vy,[F("div",by,[F("i",{class:"font-icon text-3xl text-amber-400 cursor-pointer",onClick:o=>n(i)},"add_to_photos",8,_y),F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",target:"_blank",href:i.url},Ee(i.name),9,wy)])]),F("td",xy,Ee(i.rating),1),F("td",ky,Ee(i.reviewsCount),1),F("td",Cy,[F("strong",{class:_t(i.existsInDataBase?"text-green-400":"text-red-400")},Ee(i.existsInDataBase?"Да":"Нет"),3)])]))),128))])])):Me("",!0)}}),Sy=Bt({__name:"ProfilesSearchPage",setup(e){return(t,n)=>(se(),ce(rt,null,[Be(cy),Be(Dy)],64))}});const Ty=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Oy={},Ey=F("svg",{class:"spinner",viewBox:"0 0 50 50"},[F("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),Ay=[Ey];function Py(e,t){return se(),ce("div",null,Ay)}const Cc=Ty(Oy,[["render",Py]]),$y={key:0,class:"flex justify-center"},Ny=["onClick"],Iy={class:"min-w-0 flex-1"},Fy={class:"flex items-center gap-4 mb-4"},Ly=["onClick"],My={key:0,class:"text-[16px] text-sky-300 font-medium italic"},By={class:"flex flex-wrap items-center gap-4 text-[16px] font-medium"},Ry={class:"text-orange-300"},jy={class:"text-yellow-300"},Ky={class:"text-teal-300"},Uy={class:"text-rose-300"},Vy={class:"text-amber-300"},Hy={key:0,class:"text-lime-300"},qy={class:"text-gray-300"},Jy={class:"flex-none flex items-center gap-4"},Yy=["onClick"],Wy=F("i",{class:"font-icon text-3xl text-amber-400"},"add_to_photos",-1),zy=[Wy],Gy=["onClick"],Xy=F("i",{class:"font-icon text-3xl text-green-400"},"edit",-1),Qy=[Xy],Zy=["onClick"],em=F("i",{class:"font-icon text-3xl text-sky-400"},"content_copy",-1),tm=[em],nm=["onClick"],rm=F("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),sm=[rm],im={key:0,class:"text-[14px] px-4 p-5"},om={key:0,class:"w-full"},am=F("tr",null,[F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Дата парсинга"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Рейтинг"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Отзывы"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Подписки"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Продаж с доставкой"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Активные"),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Завершенные")],-1),lm={class:"text-left px-4 py-2 border border-white border-opacity-50"},cm={class:"text-left px-4 py-2 border border-white border-opacity-50"},um={class:"text-left px-4 py-2 border border-white border-opacity-50"},fm={class:"text-left px-4 py-2 border border-white border-opacity-50"},dm={class:"text-left px-4 py-2 border border-white border-opacity-50"},hm={class:"text-left px-4 py-2 border border-white border-opacity-50"},pm={class:"text-left px-4 py-2 border border-white border-opacity-50"},ym={key:1,class:"text-center text-xl font-medium"},mm={key:2,class:"text-center text-xl font-bold"},gm={key:0},vm={class:"text-2xl font-bold mb-5 pr-10"},bm={class:"mb-6"},_m=F("div",{class:"mb-2 text-sm font-medium"},"Комментарий",-1),wm=Bt({__name:"ProfilesSavedPage",setup(e){const t=rn(!1),n=rn(null),r=rn(!1);function s(x){x.url&&window.open(x.url,"_blank")}function i(x){x.url&&(Yo(x.url),Ue.show("success",Ve.ProfileLinkCopied))}function o(x){x.opened=!x.opened}function l(){t.value=!1,n.value=null}function u(x){t.value=!0,n.value=x}function c(x){$e.profileLinkPushNew(x.url),$e.profileLinksHighlightDuplicates(),$e.profileLinksRemoveEmpty(),Ue.show("success",Ve.ProfileLinkAddedInReviewsFilter)}async function p(x){ft.apiProfileUpdate(x),t.value=!1,n.value=null}async function m(x){window.confirm(`Удаляем "${x.name}" ?`)&&x.id&&(await ft.apiProfileDelete(x),setTimeout(async()=>{ft.list.value=await ft.apiGetList()},0))}return rr(async()=>{setTimeout(async()=>{ft.list.value=await ft.apiGetList()},0)}),Dl(()=>{ft.list.value.forEach(x=>x.opened=!1)}),(x,S)=>(se(),ce(rt,null,[r.value?(se(),ce("div",$y,[Be(Cc,{class:"w-10 h-10 flex-none"})])):ne(ft).list.value.length?(se(!0),ce(rt,{key:1},gn(ne(ft).list.value,P=>{var T,R,B,E,$,N,U,J,H,re;return se(),ce("div",{key:P.id,class:_t([P.opened?"ring ring-blue-400":"","rounded-xl bg-gray-600 shadow-xl mb-3"])},[F("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:k=>o(P)},[F("div",Iy,[F("div",Fy,[F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:dt(k=>s(P),["stop"])},Ee(P.name),9,Ly),P.comment?(se(),ce("div",My,Ee(P.comment),1)):Me("",!0)]),F("div",By,[F("div",Ry,Ee((T=ne(ft).getLastParsingInfo(P))==null?void 0:T.rating),1),F("div",jy,Ee((R=ne(ft).getLastParsingInfo(P))==null?void 0:R.reviewsCount),1),F("div",Ky,Ee((B=ne(ft).getLastParsingInfo(P))==null?void 0:B.subscribers),1),F("div",Uy,Ee((E=ne(ft).getLastParsingInfo(P))==null?void 0:E.deliveryInfo),1),F("div",Vy,"Активные - "+Ee(($=ne(ft).getLastParsingInfo(P))==null?void 0:$.activeAdds),1),(N=ne(ft).getLastParsingInfo(P))!=null&&N.completedAdds?(se(),ce("div",Hy,"Завершенные - "+Ee((U=ne(ft).getLastParsingInfo(P))==null?void 0:U.completedAdds),1)):Me("",!0),F("div",qy,Ee((J=ne(ft).getLastParsingInfo(P))!=null&&J.parsingDate?ne(xr)((H=ne(ft).getLastParsingInfo(P))==null?void 0:H.parsingDate):""),1)])]),F("div",Jy,[F("div",{class:"flex-none ml-auto",onClick:dt(k=>c(P),["stop"])},zy,8,Yy),F("div",{class:"flex-none ml-auto",onClick:dt(k=>u(P),["stop"])},Qy,8,Gy),F("div",{class:"flex-none",onClick:dt(k=>i(P),["stop"])},tm,8,Zy),F("div",{class:"flex-none",onClick:dt(k=>m(P),["stop"])},sm,8,nm)])],8,Ny),P.opened?(se(),ce("div",im,[(re=P.parsingResults)!=null&&re.length?(se(),ce("table",om,[am,(se(!0),ce(rt,null,gn(P.parsingResults,k=>(se(),ce("tr",null,[F("td",lm,Ee(ne(xr)(k.parsingDate)),1),F("td",cm,Ee(k.rating),1),F("td",um,Ee(k.reviewsCount),1),F("td",fm,Ee(k.subscribers),1),F("td",dm,Ee(k.deliveryInfo),1),F("td",hm,Ee(k.activeAdds),1),F("td",pm,Ee(k.completedAdds||ne(Ve).InfoNotFound),1)]))),256))])):(se(),ce("div",ym,"Парсинги не найдены"))])):Me("",!0)],2)}),128)):(se(),ce("div",mm,"Ничего не найдено")),t.value?(se(),Lt(kc,{key:3,onClose:l},{default:Dt(()=>[n.value?(se(),ce("div",gm,[F("form",{onSubmit:S[1]||(S[1]=dt(P=>p(n.value),["prevent"]))},[F("div",vm,Ee(n.value.name),1),F("div",bm,[_m,Wt(F("input",{"onUpdate:modelValue":S[0]||(S[0]=P=>n.value.comment=P),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[zt,n.value.comment]])]),F("div",null,[Be(Pt,{type:"submit",theme:"success"},{default:Dt(()=>[Tt("Сохранить")]),_:1})])],32)])):Me("",!0)]),_:1})):Me("",!0)],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function jn(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{c(r.next(p))}catch(m){o(m)}}function u(p){try{c(r.throw(p))}catch(m){o(m)}}function c(p){p.done?i(p.value):s(p.value).then(l,u)}c((r=r.apply(e,t||[])).next())})}function tn(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(p){return u([c,p])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(p){c=[6,p],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function xm(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function km(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var s=r[n];t[s.name]=s.schema}return t}function Dc(e,t){return new Promise(function(n,r){var s=new FileReader;s.onabort=function(i){return r(new Error("file read aborted"))},s.onerror=function(i){return r(i.target.error)},s.onload=function(i){return n(i.target.result)},t==="binary"?s.readAsArrayBuffer(e):s.readAsText(e)})}function Sc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ci=Wo(function(e,t){(function(n,r){e.exports=r()})(ho,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(K)}function r(K,z,Y,X,D,a,f){try{var h=K[a](f),y=h.value}catch(v){Y(v);return}h.done?z(y):Promise.resolve(y).then(X,D)}function s(K){return function(){var z=this,Y=arguments;return new Promise(function(X,D){var a=K.apply(z,Y);function f(y){r(a,X,D,f,h,"next",y)}function h(y){r(a,X,D,f,h,"throw",y)}f(void 0)})}}function i(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function o(K,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,z,Y){return z&&o(K.prototype,z),Y&&o(K,Y),K}function u(K,z,Y){return z in K?Object.defineProperty(K,z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):K[z]=Y,K}function c(K,z){var Y=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);z&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),Y.push.apply(Y,X)}return Y}function p(K){for(var z=1;z<arguments.length;z++){var Y=arguments[z]!=null?arguments[z]:{};z%2?c(Object(Y),!0).forEach(function(X){u(K,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(Y)):c(Object(Y)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(Y,X))})}return K}function m(K,z){return P(K)||R(K,z)||E()}function x(K){return S(K)||T(K)||B()}function S(K){if(Array.isArray(K)){for(var z=0,Y=new Array(K.length);z<K.length;z++)Y[z]=K[z];return Y}}function P(K){if(Array.isArray(K))return K}function T(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function R(K,z){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var Y=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),h;!(X=(h=f.next()).done)&&(Y.push(h.value),!(z&&Y.length===z));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return Y}}function B(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $=function K(z){i(this,K),this.p=new Promise(z)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(K,z){var Y=this;return new $(function(X,D){Y.p.then(function(a){X(K?K(a):a)}).catch(function(a){return z?z(a):Promise.reject(a)}).then(X,D)})},$.prototype.catch=function(K){return this.then(null,K)},$.resolve=function(K){return new $(function(z){z(K)})},$.reject=function(K){return new $(function(z,Y){Y(K)})},["all","race"].forEach(function(K){$[K]=function(z){return new $(function(Y,X){Promise[K](z.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(Y,X)})}});var N={},U=N.toString,J={}.hasOwnProperty,H=Object.getPrototypeOf,re=J.toString;function k(K,z){return ue(K)&&typeof K.then=="function"&&(!z||typeof K.catch=="function")}function _(K){return U.call(K).slice(8,-1)}function V(K,z){if(!K||n(K)!=="object")return!1;var Y=H(K);if(!Y)return z===null;var X=J.call(Y,"constructor")&&Y.constructor;return typeof X!="function"?z===null:z===X||z!==null&&re.call(X)===re.call(z)||typeof z=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===z.__typeson__type__}function j(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object):!0}function _e(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object)||_e(z):!0}function ue(K){return K&&n(K)==="object"}function Ne(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function be(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function he(K,z){if(z==="")return K;var Y=z.indexOf(".");if(Y>-1){var X=K[be(z.slice(0,Y))];return X===void 0?void 0:he(X,z.slice(Y+1))}return K[be(z)]}function le(K,z,Y){if(z==="")return Y;var X=z.indexOf(".");if(X>-1){var D=K[be(z.slice(0,X))];return le(D,z.slice(X+1),Y)}return K[be(z)]=Y,K}function We(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Ye=Object.keys,it=Array.isArray,qe={}.hasOwnProperty,Rt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ge(K,z){if(K.keypath==="")return-1;var Y=K.keypath.match(/\./g)||0,X=z.keypath.match(/\./g)||0;return Y&&(Y=Y.length),X&&(X=X.length),Y>X?-1:Y<X?1:K.keypath<z.keypath?-1:K.keypath>z.keypath}var de=function(){function K(z){i(this,K),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(Y,X,D,a){a=p({},this.options,{},a,{stringification:!0});var f=this.encapsulate(Y,null,a);return it(f)?JSON.stringify(f[0],X,D):f.then(function(h){return JSON.stringify(h,X,D)})}},{key:"stringifySync",value:function(Y,X,D,a){return this.stringify(Y,X,D,p({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(Y,X,D,a){return this.stringify(Y,X,D,p({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(Y,X,D){return D=p({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(Y,X),D)}},{key:"parseSync",value:function(Y,X,D){return this.parse(Y,X,p({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(Y,X,D){return this.parse(Y,X,p({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(Y,X,D)}},{key:"rootTypeName",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(Y,X,D)}},{key:"encapsulate",value:function(Y,X,D){D=p({sync:!0},this.options,{},D);var a=D,f=a.sync,h=this,y={},v=[],w=[],C=[],A="cyclic"in D?D.cyclic:!0,L=D,M=L.encapsulateObserver,W=pe("",Y,A,X||{},C);function q(te){var g=Object.values(y);if(D.iterateNone)return g.length?g[0]:K.getJSONType(te);if(g.length){if(D.returnTypeNames)return x(new Set(g));!te||!j(te)||qe.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else ue(te)&&qe.call(te,"$types")&&(te={$:te,$types:!0});return D.returnTypeNames?!1:te}function G(te,g){return Z.apply(this,arguments)}function Z(){return Z=s(regeneratorRuntime.mark(function te(g,d){var b;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(d.map(function(Q){return Q[1].p}));case 2:return b=I.sent,I.next=5,Promise.all(b.map(function(){var Q=s(regeneratorRuntime.mark(function ee(me){var ae,Ce,Ie,Fe,ze,He,je,Ze,et,Ae,gt,ye,ie,ke;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(ae=[],Ce=d.splice(0,1),Ie=m(Ce,1),Fe=Ie[0],ze=m(Fe,7),He=ze[0],je=ze[2],Ze=ze[3],et=ze[4],Ae=ze[5],gt=ze[6],ye=pe(He,me,je,Ze,ae,!0,gt),ie=V(ye,$),!(He&&ie)){De.next=11;break}return De.next=8,ye.p;case 8:return ke=De.sent,et[Ae]=ke,De.abrupt("return",G(g,ae));case 11:return He?et[Ae]=ye:ie?g=ye.p:g=ye,De.abrupt("return",G(g,ae));case 13:case"end":return De.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return I.abrupt("return",g);case 6:case"end":return I.stop()}},te)})),Z.apply(this,arguments)}function oe(te,g,d){Object.assign(te,g);var b=Rt.map(function(O){var I=te[O];return delete te[O],I});d(),Rt.forEach(function(O,I){te[O]=b[I]})}function pe(te,g,d,b,O,I,Q){var ee,me={},ae=n(g),Ce=M?function(ie){var ke=Q||b.type||K.getJSONType(g);M(Object.assign(ie||me,{keypath:te,value:g,cyclic:d,stateObj:b,promisesData:O,resolvingTypesonPromise:I,awaitingTypesonPromise:V(g,$)},{type:ke}))}:null;if(["string","boolean","number","undefined"].includes(ae))return g===void 0||ae==="number"&&(isNaN(g)||g===-1/0||g===1/0)?(b.replaced?ee=g:ee=ve(te,g,b,O,!1,I,Ce),ee!==g&&(me={replaced:ee})):ee=g,Ce&&Ce(),ee;if(g===null)return Ce&&Ce(),g;if(d&&!b.iterateIn&&!b.iterateUnsetNumeric&&g&&n(g)==="object"){var Ie=v.indexOf(g);if(Ie<0)d===!0&&(v.push(g),w.push(te));else return y[te]="#",Ce&&Ce({cyclicKeypath:w[Ie]}),"#"+w[Ie]}var Fe=j(g),ze=it(g),He=(Fe||ze)&&(!h.plainObjectReplacers.length||b.replaced)||b.iterateIn?g:ve(te,g,b,O,Fe||ze,null,Ce),je;if(He!==g?(ee=He,me={replaced:He}):te===""&&V(g,$)?(O.push([te,g,d,b,void 0,void 0,b.type]),ee=g):ze&&b.iterateIn!=="object"||b.iterateIn==="array"?(je=new Array(g.length),me={clone:je}):!["function","symbol"].includes(n(g))&&!("toJSON"in g)&&!V(g,$)&&!V(g,Promise)&&!V(g,ArrayBuffer)||Fe||b.iterateIn==="object"?(je={},b.addLength&&(je.length=g.length),me={clone:je}):ee=g,Ce&&Ce(),D.iterateNone)return je||ee;if(!je)return ee;if(b.iterateIn){var Ze=function(ke){var we={ownKeys:qe.call(g,ke)};oe(b,we,function(){var De=te+(te?".":"")+Ne(ke),Le=pe(De,g[ke],!!d,b,O,I);V(Le,$)?O.push([De,Le,!!d,b,je,ke,b.type]):Le!==void 0&&(je[ke]=Le)})};for(var et in g)Ze(et);Ce&&Ce({endIterateIn:!0,end:!0})}else Ye(g).forEach(function(ie){var ke=te+(te?".":"")+Ne(ie),we={ownKeys:!0};oe(b,we,function(){var De=pe(ke,g[ie],!!d,b,O,I);V(De,$)?O.push([ke,De,!!d,b,je,ie,b.type]):De!==void 0&&(je[ie]=De)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(b.iterateUnsetNumeric){for(var Ae=g.length,gt=function(ke){if(!(ke in g)){var we=te+(te?".":"")+ke,De={ownKeys:!1};oe(b,De,function(){var Le=pe(we,void 0,!!d,b,O,I);V(Le,$)?O.push([we,Le,!!d,b,je,ke,b.type]):Le!==void 0&&(je[ke]=Le)})}},ye=0;ye<Ae;ye++)gt(ye);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return je}function ve(te,g,d,b,O,I,Q){for(var ee=O?h.plainObjectReplacers:h.nonplainObjectReplacers,me=ee.length;me--;){var ae=ee[me];if(ae.test(g,d)){var Ce=ae.type;if(h.revivers[Ce]){var Ie=y[te];y[te]=Ie?[Ce].concat(Ie):Ce}if(Object.assign(d,{type:Ce,replaced:!0}),(f||!ae.replaceAsync)&&!ae.replace)return Q&&Q({typeDetected:!0}),pe(te,g,A&&"readonly",d,b,I,Ce);Q&&Q({replacing:!0});var Fe=f||!ae.replaceAsync?"replace":"replaceAsync";return pe(te,ae[Fe](g,d),A&&"readonly",d,b,I,Ce)}}return g}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(W,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(W)]:f?q(W):Promise.resolve(q(W))}},{key:"encapsulateSync",value:function(Y,X,D){return this.encapsulate(Y,X,p({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(Y,X,D){return this.encapsulate(Y,X,p({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(Y,X){var D=Y&&Y.$types;if(!D)return Y;if(D===!0)return Y.$;X=p({sync:!0},this.options,{},X);var a=X,f=a.sync,h=[],y={},v=!0;D.$&&j(D.$)&&(Y=Y.$,D=D.$,v=!1);var w=this;function C(Z,oe){var pe=w.revivers[Z]||[],ve=m(pe,1),te=ve[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?oe:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](oe,y)}function A(){var Z=[];if(Object.entries(D).forEach(function(oe){var pe=m(oe,2),ve=pe[0],te=pe[1];te!=="#"&&[].concat(te).forEach(function(g){var d=w.revivers[g]||[null,{}],b=m(d,2),O=b[1].plain;O&&(Z.push({keypath:ve,type:g}),delete D[ve])})}),!!Z.length)return Z.sort(ge).reduce(function oe(pe,ve){var te=ve.keypath,g=ve.type;if(k(pe))return pe.then(function(O){return oe(O,{keypath:te,type:g})});var d=he(Y,te);if(d=C(g,d),V(d,$))return d.then(function(O){var I=le(Y,te,O);I===O&&(Y=I)});var b=le(Y,te,d);b===d&&(Y=b)},void 0)}var L=[];function M(Z,oe,pe,ve,te){if(!(v&&Z==="$types")){var g=D[Z],d=it(oe);if(d||j(oe)){var b=d?new Array(oe.length):{};for(Ye(oe).forEach(function(Ie){var Fe=M(Z+(Z?".":"")+Ne(Ie),oe[Ie],pe||b,b,Ie),ze=function(je){return V(je,Re)?b[Ie]=void 0:je!==void 0&&(b[Ie]=je),je};V(Fe,$)?L.push(Fe.then(function(He){return ze(He)})):ze(Fe)}),oe=b;h.length;){var O=m(h[0],4),I=O[0],Q=O[1],ee=O[2],me=O[3],ae=he(I,Q);if(ae!==void 0)ee[me]=ae;else break;h.splice(0,1)}}if(!g)return oe;if(g==="#"){var Ce=he(pe,oe.slice(1));return Ce===void 0&&h.push([pe,oe.slice(1),ve,te]),Ce}return[].concat(g).reduce(function Ie(Fe,ze){return V(Fe,$)?Fe.then(function(He){return Ie(He,ze)}):C(ze,Fe)},oe)}}function W(Z){return V(Z,Re)?void 0:Z}var q=A(),G;return V(q,$)?G=q.then(function(){return Y}):(G=M("",Y,null),L.length&&(G=$.resolve(G).then(function(Z){return $.all([Z].concat(L))}).then(function(Z){var oe=m(Z,1),pe=oe[0];return pe}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(G,$)?G.p.then(W):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?W(G):Promise.resolve(W(G))}},{key:"reviveSync",value:function(Y,X){return this.revive(Y,p({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Y,X){return this.revive(Y,p({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Y,X){return X=X||{},[].concat(Y).forEach(function D(a){var f=this;if(it(a))return a.map(function(h){return D.call(f,h)});a&&Ye(a).forEach(function(h){if(h==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(h))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[h],v=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,w=v.filter(function(pe){return pe.type===h});if(w.length&&(v.splice(v.indexOf(w[0]),1),delete this.revivers[h],delete this.types[h]),typeof y=="function"){var C=y;y={test:function(ve){return ve&&ve.constructor===C},replace:function(ve){return p({},ve)},revive:function(ve){return Object.assign(Object.create(C.prototype),ve)}}}else if(it(y)){var A=y,L=m(A,3),M=L[0],W=L[1],q=L[2];y={test:M,replace:W,revive:q}}if(!(!y||!y.test)){var G={type:h,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var oe={};y.revive&&(oe.revive=y.revive.bind(y)),y.reviveAsync&&(oe.reviveAsync=y.reviveAsync.bind(y)),this.revivers[h]=[oe,{plain:y.testPlainObjects}]}this.types[h]=y}},this)},this),this}}]),K}(),Re=function K(){i(this,K)};return Re.__typeson__type__="TypesonUndefined",de.Undefined=Re,de.Promise=$,de.isThenable=k,de.toStringTag=_,de.hasConstructorOf=V,de.isObject=ue,de.isPlainObject=j,de.isUserObject=_e,de.escapeKeyPathComponent=Ne,de.unescapeKeyPathComponent=be,de.getByKeyPath=he,de.getJSONType=We,de.JSON_TYPES=["null","boolean","number","string","array","object"],de})}),Cm=Wo(function(e,t){(function(n,r){e.exports=r()})(ho,function(){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function r(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function s(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function i(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function o(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),b.push.apply(b,O)}return b}function l(g){return function(b){if(Array.isArray(b))return u(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||function(b,O){if(b){if(typeof b=="string")return u(b,O);var I=Object.prototype.toString.call(b).slice(8,-1);if(I==="Object"&&b.constructor&&(I=b.constructor.name),I==="Map"||I==="Set")return Array.from(b);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return u(b,O)}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(g)}function p(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function m(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function x(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function S(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable})),b.push.apply(b,O)}return b}function P(g){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?S(Object(b),!0).forEach(function(O){x(g,O,b[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(b)):S(Object(b)).forEach(function(O){Object.defineProperty(g,O,Object.getOwnPropertyDescriptor(b,O))})}return g}function T(g,d){return function(O){if(Array.isArray(O))return O}(g)||function(O,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var Q=[],ee=!0,me=!1,ae=void 0;try{for(var Ce,Ie=O[Symbol.iterator]();!(ee=(Ce=Ie.next()).done)&&(Q.push(Ce.value),!I||Q.length!==I);ee=!0);}catch(Fe){me=!0,ae=Fe}finally{try{ee||Ie.return==null||Ie.return()}finally{if(me)throw ae}}return Q}}(g,d)||B(g,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R(g){return function(b){if(Array.isArray(b))return E(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||B(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(g,d){if(g){if(typeof g=="string")return E(g,d);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?E(g,d):void 0}}function E(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}var $=function g(d){p(this,g),this.p=new Promise(d)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(g,d){var b=this;return new $(function(O,I){b.p.then(function(Q){O(g?g(Q):Q)}).catch(function(Q){return d?d(Q):Promise.reject(Q)}).then(O,I)})},$.prototype.catch=function(g){return this.then(null,g)},$.resolve=function(g){return new $(function(d){d(g)})},$.reject=function(g){return new $(function(d,b){b(g)})},["all","race"].forEach(function(g){$[g]=function(d){return new $(function(b,O){Promise[g](d.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(b,O)})}});var N={}.toString,U={}.hasOwnProperty,J=Object.getPrototypeOf,H=U.toString;function re(g,d){return j(g)&&typeof g.then=="function"&&(!d||typeof g.catch=="function")}function k(g){return N.call(g).slice(8,-1)}function _(g,d){if(!g||c(g)!=="object")return!1;var b=J(g);if(!b)return d===null;var O=U.call(b,"constructor")&&b.constructor;return typeof O!="function"?d===null:d===O||d!==null&&H.call(O)===H.call(d)||typeof d=="function"&&typeof O.__typeson__type__=="string"&&O.__typeson__type__===d.__typeson__type__}function V(g){return!(!g||k(g)!=="Object")&&(!J(g)||_(g,Object))}function j(g){return g&&c(g)==="object"}function _e(g){return g.replace(/~/g,"~0").replace(/\./g,"~1")}function ue(g){return g.replace(/~1/g,".").replace(/~0/g,"~")}function Ne(g,d){if(d==="")return g;var b=d.indexOf(".");if(b>-1){var O=g[ue(d.slice(0,b))];return O===void 0?void 0:Ne(O,d.slice(b+1))}return g[ue(d)]}function be(g,d,b){if(d==="")return b;var O=d.indexOf(".");return O>-1?be(g[ue(d.slice(0,O))],d.slice(O+1),b):(g[ue(d)]=b,g)}function he(g,d,b){return b?d?d(g):g:(g&&g.then||(g=Promise.resolve(g)),d?g.then(d):g)}var le=Object.keys,We=Array.isArray,Ye={}.hasOwnProperty,it=["type","replaced","iterateIn","iterateUnsetNumeric"];function qe(g){return function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];try{return Promise.resolve(g.apply(this,d))}catch(O){return Promise.reject(O)}}}function Rt(g,d){if(g.keypath==="")return-1;var b=g.keypath.match(/\./g)||0,O=d.keypath.match(/\./g)||0;return b&&(b=b.length),O&&(O=O.length),b>O?-1:b<O?1:g.keypath<d.keypath?-1:g.keypath>d.keypath}var ge=function(){function g(d){p(this,g),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(b,O,I){return O&&m(b.prototype,O),I&&m(b,I),b}(g,[{key:"stringify",value:function(b,O,I,Q){Q=P(P(P({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(b,null,Q);return We(ee)?JSON.stringify(ee[0],O,I):ee.then(function(me){return JSON.stringify(me,O,I)})}},{key:"stringifySync",value:function(b,O,I,Q){return this.stringify(b,O,I,P(P({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(b,O,I,Q){return this.stringify(b,O,I,P(P({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(b,O,I){return I=P(P(P({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(b,O),I)}},{key:"parseSync",value:function(b,O,I){return this.parse(b,O,P(P({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(b,O,I){return this.parse(b,O,P(P({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(b,O){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(b,O,I)}},{key:"rootTypeName",value:function(b,O){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(b,O,I)}},{key:"encapsulate",value:function(b,O,I){var Q=qe(function(ye,ie){return he(Promise.all(ie.map(function(ke){return ke[1].p})),function(ke){return he(Promise.all(ke.map(qe(function(we){var De=!1,Le=[],jt=T(ie.splice(0,1),1),lt=T(jt[0],7),It=lt[0],Ht=lt[2],Ge=lt[3],qt=lt[4],tt=lt[5],Kt=lt[6],Ot=Ae(It,we,Ht,Ge,Le,!0,Kt),Gt=_(Ot,$);return function(ui,us){var ir=ui();return ir&&ir.then?ir.then(us):us(ir)}(function(){if(It&&Gt)return he(Ot.p,function(Xt){return qt[tt]=Xt,De=!0,Q(ye,Le)})},function(Xt){return De?Xt:(It?qt[tt]=Ot:ye=Gt?Ot.p:Ot,Q(ye,Le))})}))),function(){return ye})})}),ee=(I=P(P({sync:!0},this.options),I)).sync,me=this,ae={},Ce=[],Ie=[],Fe=[],ze=!("cyclic"in I)||I.cyclic,He=I.encapsulateObserver,je=Ae("",b,ze,O||{},Fe);function Ze(ye){var ie=Object.values(ae);if(I.iterateNone)return ie.length?ie[0]:g.getJSONType(ye);if(ie.length){if(I.returnTypeNames)return R(new Set(ie));ye&&V(ye)&&!Ye.call(ye,"$types")?ye.$types=ae:ye={$:ye,$types:{$:ae}}}else j(ye)&&Ye.call(ye,"$types")&&(ye={$:ye,$types:!0});return!I.returnTypeNames&&ye}function et(ye,ie,ke){Object.assign(ye,ie);var we=it.map(function(De){var Le=ye[De];return delete ye[De],Le});ke(),it.forEach(function(De,Le){ye[De]=we[Le]})}function Ae(ye,ie,ke,we,De,Le,jt){var lt,It={},Ht=c(ie),Ge=He?function(Cn){var Et=jt||we.type||g.getJSONType(ie);He(Object.assign(Cn||It,{keypath:ye,value:ie,cyclic:ke,stateObj:we,promisesData:De,resolvingTypesonPromise:Le,awaitingTypesonPromise:_(ie,$)},{type:Et}))}:null;if(["string","boolean","number","undefined"].includes(Ht))return ie===void 0||Number.isNaN(ie)||ie===Number.NEGATIVE_INFINITY||ie===Number.POSITIVE_INFINITY?(lt=we.replaced?ie:gt(ye,ie,we,De,!1,Le,Ge))!==ie&&(It={replaced:lt}):lt=ie,Ge&&Ge(),lt;if(ie===null)return Ge&&Ge(),ie;if(ke&&!we.iterateIn&&!we.iterateUnsetNumeric&&ie&&c(ie)==="object"){var qt=Ce.indexOf(ie);if(!(qt<0))return ae[ye]="#",Ge&&Ge({cyclicKeypath:Ie[qt]}),"#"+Ie[qt];ke===!0&&(Ce.push(ie),Ie.push(ye))}var tt,Kt=V(ie),Ot=We(ie),Gt=(Kt||Ot)&&(!me.plainObjectReplacers.length||we.replaced)||we.iterateIn?ie:gt(ye,ie,we,De,Kt||Ot,null,Ge);if(Gt!==ie?(lt=Gt,It={replaced:Gt}):ye===""&&_(ie,$)?(De.push([ye,ie,ke,we,void 0,void 0,we.type]),lt=ie):Ot&&we.iterateIn!=="object"||we.iterateIn==="array"?(tt=new Array(ie.length),It={clone:tt}):(["function","symbol"].includes(c(ie))||"toJSON"in ie||_(ie,$)||_(ie,Promise)||_(ie,ArrayBuffer))&&!Kt&&we.iterateIn!=="object"?lt=ie:(tt={},we.addLength&&(tt.length=ie.length),It={clone:tt}),Ge&&Ge(),I.iterateNone)return tt||lt;if(!tt)return lt;if(we.iterateIn){var Xt=function(Et){var dn={ownKeys:Ye.call(ie,Et)};et(we,dn,function(){var Kn=ye+(ye?".":"")+_e(Et),fs=Ae(Kn,ie[Et],!!ke,we,De,Le);_(fs,$)?De.push([Kn,fs,!!ke,we,tt,Et,we.type]):fs!==void 0&&(tt[Et]=fs)})};for(var ui in ie)Xt(ui);Ge&&Ge({endIterateIn:!0,end:!0})}else le(ie).forEach(function(Cn){var Et=ye+(ye?".":"")+_e(Cn);et(we,{ownKeys:!0},function(){var dn=Ae(Et,ie[Cn],!!ke,we,De,Le);_(dn,$)?De.push([Et,dn,!!ke,we,tt,Cn,we.type]):dn!==void 0&&(tt[Cn]=dn)})}),Ge&&Ge({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var us=ie.length,ir=function(Et){if(!(Et in ie)){var dn=ye+(ye?".":"")+Et;et(we,{ownKeys:!1},function(){var Kn=Ae(dn,void 0,!!ke,we,De,Le);_(Kn,$)?De.push([dn,Kn,!!ke,we,tt,Et,we.type]):Kn!==void 0&&(tt[Et]=Kn)})}},fi=0;fi<us;fi++)ir(fi);Ge&&Ge({endIterateUnsetNumeric:!0,end:!0})}return tt}function gt(ye,ie,ke,we,De,Le,jt){for(var lt=De?me.plainObjectReplacers:me.nonplainObjectReplacers,It=lt.length;It--;){var Ht=lt[It];if(Ht.test(ie,ke)){var Ge=Ht.type;if(me.revivers[Ge]){var qt=ae[ye];ae[ye]=qt?[Ge].concat(qt):Ge}return Object.assign(ke,{type:Ge,replaced:!0}),!ee&&Ht.replaceAsync||Ht.replace?(jt&&jt({replacing:!0}),Ae(ye,Ht[ee||!Ht.replaceAsync?"replace":"replaceAsync"](ie,ke),ze&&"readonly",ke,we,Le,Ge)):(jt&&jt({typeDetected:!0}),Ae(ye,ie,ze&&"readonly",ke,we,Le,Ge))}}return ie}return Fe.length?ee&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(je,Fe)).then(Ze):!ee&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&ee?[Ze(je)]:ee?Ze(je):Promise.resolve(Ze(je))}},{key:"encapsulateSync",value:function(b,O,I){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(b,O,I){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(b,O){var I=b&&b.$types;if(!I)return b;if(I===!0)return b.$;var Q=(O=P(P({sync:!0},this.options),O)).sync,ee=[],me={},ae=!0;I.$&&V(I.$)&&(b=b.$,I=I.$,ae=!1);var Ce=this;function Ie(Ze,et){var Ae=T(Ce.revivers[Ze]||[],1)[0];if(!Ae)throw new Error("Unregistered type: "+Ze);return Q&&!("revive"in Ae)?et:Ae[Q&&Ae.revive?"revive":!Q&&Ae.reviveAsync?"reviveAsync":"revive"](et,me)}var Fe=[];function ze(Ze){return _(Ze,de)?void 0:Ze}var He,je=function(){var et=[];if(Object.entries(I).forEach(function(Ae){var gt=T(Ae,2),ye=gt[0],ie=gt[1];ie!=="#"&&[].concat(ie).forEach(function(ke){T(Ce.revivers[ke]||[null,{}],2)[1].plain&&(et.push({keypath:ye,type:ke}),delete I[ye])})}),et.length)return et.sort(Rt).reduce(function Ae(gt,ye){var ie=ye.keypath,ke=ye.type;if(re(gt))return gt.then(function(Le){return Ae(Le,{keypath:ie,type:ke})});var we=Ne(b,ie);if(_(we=Ie(ke,we),$))return we.then(function(Le){var jt=be(b,ie,Le);jt===Le&&(b=jt)});var De=be(b,ie,we);De===we&&(b=De)},void 0)}();return _(je,$)?He=je.then(function(){return b}):(He=function Ze(et,Ae,gt,ye,ie){if(!ae||et!=="$types"){var ke=I[et],we=We(Ae);if(we||V(Ae)){var De=we?new Array(Ae.length):{};for(le(Ae).forEach(function(tt){var Kt=Ze(et+(et?".":"")+_e(tt),Ae[tt],gt||De,De,tt),Ot=function(Xt){return _(Xt,de)?De[tt]=void 0:Xt!==void 0&&(De[tt]=Xt),Xt};_(Kt,$)?Fe.push(Kt.then(function(Gt){return Ot(Gt)})):Ot(Kt)}),Ae=De;ee.length;){var Le=T(ee[0],4),jt=Le[0],lt=Le[1],It=Le[2],Ht=Le[3],Ge=Ne(jt,lt);if(Ge===void 0)break;It[Ht]=Ge,ee.splice(0,1)}}if(!ke)return Ae;if(ke==="#"){var qt=Ne(gt,Ae.slice(1));return qt===void 0&&ee.push([gt,Ae.slice(1),ye,ie]),qt}return[].concat(ke).reduce(function tt(Kt,Ot){return _(Kt,$)?Kt.then(function(Gt){return tt(Gt,Ot)}):Ie(Ot,Kt)},Ae)}}("",b,null),Fe.length&&(He=$.resolve(He).then(function(Ze){return $.all([Ze].concat(Fe))}).then(function(Ze){return T(Ze,1)[0]}))),re(He)?Q&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(He,$)?He.p.then(ze):He:!Q&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?ze(He):Promise.resolve(ze(He))}},{key:"reviveSync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"reviveAsync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"register",value:function(b,O){return O=O||{},[].concat(b).forEach(function I(Q){var ee=this;if(We(Q))return Q.map(function(me){return I.call(ee,me)});Q&&le(Q).forEach(function(me){if(me==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(me))throw new TypeError("Plain JSON object types are reserved as type names");var ae=Q[me],Ce=ae&&ae.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ie=Ce.filter(function(et){return et.type===me});if(Ie.length&&(Ce.splice(Ce.indexOf(Ie[0]),1),delete this.revivers[me],delete this.types[me]),typeof ae=="function"){var Fe=ae;ae={test:function(Ae){return Ae&&Ae.constructor===Fe},replace:function(Ae){return P({},Ae)},revive:function(Ae){return Object.assign(Object.create(Fe.prototype),Ae)}}}else if(We(ae)){var ze=T(ae,3);ae={test:ze[0],replace:ze[1],revive:ze[2]}}if(ae&&ae.test){var He={type:me,test:ae.test.bind(ae)};ae.replace&&(He.replace=ae.replace.bind(ae)),ae.replaceAsync&&(He.replaceAsync=ae.replaceAsync.bind(ae));var je=typeof O.fallback=="number"?O.fallback:O.fallback?0:Number.POSITIVE_INFINITY;if(ae.testPlainObjects?this.plainObjectReplacers.splice(je,0,He):this.nonplainObjectReplacers.splice(je,0,He),ae.revive||ae.reviveAsync){var Ze={};ae.revive&&(Ze.revive=ae.revive.bind(ae)),ae.reviveAsync&&(Ze.reviveAsync=ae.reviveAsync.bind(ae)),this.revivers[me]=[Ze,{plain:ae.testPlainObjects}]}this.types[me]=ae}},this)},this),this}}]),g}(),de=function g(){p(this,g)};de.__typeson__type__="TypesonUndefined",ge.Undefined=de,ge.Promise=$,ge.isThenable=re,ge.toStringTag=k,ge.hasConstructorOf=_,ge.isObject=j,ge.isPlainObject=V,ge.isUserObject=function g(d){if(!d||k(d)!=="Object")return!1;var b=J(d);return!b||_(d,Object)||g(b)},ge.escapeKeyPathComponent=_e,ge.unescapeKeyPathComponent=ue,ge.getByKeyPath=Ne,ge.getJSONType=function(d){return d===null?"null":Array.isArray(d)?"array":c(d)},ge.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Re={userObject:{test:function(d,b){return ge.isUserObject(d)},replace:function(d){return function(O){for(var I=1;I<arguments.length;I++){var Q=arguments[I]!=null?arguments[I]:{};I%2?o(Object(Q),!0).forEach(function(ee){i(O,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(O,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return O}({},d)},revive:function(d){return d}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(d,b){return!!Array.isArray(d)&&(Object.keys(d).some(function(O){return String(Number.parseInt(O))!==O})&&(b.iterateIn="object",b.addLength=!0),!0)},replace:function(d,b){return b.iterateUnsetNumeric=!0,d},revive:function(d){if(Array.isArray(d))return d;var b=[];return Object.keys(d).forEach(function(O){var I=d[O];b[O]=I}),b}}},{sparseUndefined:{test:function(d,b){return d===void 0&&b.ownKeys===!1},replace:function(d){return 0},revive:function(d){}}}],z={undef:{test:function(d,b){return d===void 0&&(b.ownKeys||!("ownKeys"in b))},replace:function(d){return 0},revive:function(d){return new ge.Undefined}}},Y={StringObject:{test:function(d){return ge.toStringTag(d)==="String"&&n(d)==="object"},replace:function(d){return String(d)},revive:function(d){return new String(d)}},BooleanObject:{test:function(d){return ge.toStringTag(d)==="Boolean"&&n(d)==="object"},replace:function(d){return!!d},revive:function(d){return new Boolean(d)}},NumberObject:{test:function(d){return ge.toStringTag(d)==="Number"&&n(d)==="object"},replace:function(d){return Number(d)},revive:function(d){return new Number(d)}}},X=[{nan:{test:function(d){return Number.isNaN(d)},replace:function(d){return"NaN"},revive:function(d){return Number.NaN}}},{infinity:{test:function(d){return d===Number.POSITIVE_INFINITY},replace:function(d){return"Infinity"},revive:function(d){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(d){return d===Number.NEGATIVE_INFINITY},replace:function(d){return"-Infinity"},revive:function(d){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(d){return ge.toStringTag(d)==="Date"},replace:function(d){var b=d.getTime();return Number.isNaN(b)?"NaN":b},revive:function(d){return d==="NaN"?new Date(Number.NaN):new Date(d)}}},a={regexp:{test:function(d){return ge.toStringTag(d)==="RegExp"},replace:function(d){return{source:d.source,flags:(d.global?"g":"")+(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.sticky?"y":"")+(d.unicode?"u":"")}},revive:function(d){var b=d.source,O=d.flags;return new RegExp(b,O)}}},f={map:{test:function(d){return ge.toStringTag(d)==="Map"},replace:function(d){return l(d.entries())},revive:function(d){return new Map(d)}}},h={set:{test:function(d){return ge.toStringTag(d)==="Set"},replace:function(d){return l(d.values())},revive:function(d){return new Set(d)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Uint8Array(256),w=0;w<y.length;w++)v[y.charCodeAt(w)]=w;var C=function(d,b,O){O==null&&(O=d.byteLength);for(var I=new Uint8Array(d,b||0,O),Q=I.length,ee="",me=0;me<Q;me+=3)ee+=y[I[me]>>2],ee+=y[(3&I[me])<<4|I[me+1]>>4],ee+=y[(15&I[me+1])<<2|I[me+2]>>6],ee+=y[63&I[me+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},A=function(d){var b,O,I,Q,ee=d.length,me=.75*d.length,ae=0;d[d.length-1]==="="&&(me--,d[d.length-2]==="="&&me--);for(var Ce=new ArrayBuffer(me),Ie=new Uint8Array(Ce),Fe=0;Fe<ee;Fe+=4)b=v[d.charCodeAt(Fe)],O=v[d.charCodeAt(Fe+1)],I=v[d.charCodeAt(Fe+2)],Q=v[d.charCodeAt(Fe+3)],Ie[ae++]=b<<2|O>>4,Ie[ae++]=(15&O)<<4|I>>2,Ie[ae++]=(3&I)<<6|63&Q;return Ce},L={arraybuffer:{test:function(d){return ge.toStringTag(d)==="ArrayBuffer"},replace:function(d,b){b.buffers||(b.buffers=[]);var O=b.buffers.indexOf(d);return O>-1?{index:O}:(b.buffers.push(d),C(d))},revive:function(d,b){if(b.buffers||(b.buffers=[]),n(d)==="object")return b.buffers[d.index];var O=A(d);return b.buffers.push(O),O}}},M=typeof self>"u"?ho:self,W={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(g){var d=g,b=M[d];b&&(W[g.toLowerCase()]={test:function(I){return ge.toStringTag(I)===d},replace:function(I,Q){var ee=I.buffer,me=I.byteOffset,ae=I.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:me,length:ae}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:me,length:ae})},revive:function(I,Q){Q.buffers||(Q.buffers=[]);var ee,me=I.byteOffset,ae=I.length,Ce=I.encoded,Ie=I.index;return"index"in I?ee=Q.buffers[Ie]:(ee=A(Ce),Q.buffers.push(ee)),new b(ee,me,ae)}})});var q={dataview:{test:function(d){return ge.toStringTag(d)==="DataView"},replace:function(d,b){var O=d.buffer,I=d.byteOffset,Q=d.byteLength;b.buffers||(b.buffers=[]);var ee=b.buffers.indexOf(O);return ee>-1?{index:ee,byteOffset:I,byteLength:Q}:(b.buffers.push(O),{encoded:C(O),byteOffset:I,byteLength:Q})},revive:function(d,b){b.buffers||(b.buffers=[]);var O,I=d.byteOffset,Q=d.byteLength,ee=d.encoded,me=d.index;return"index"in d?O=b.buffers[me]:(O=A(ee),b.buffers.push(O)),new DataView(O,I,Q)}}},G={IntlCollator:{test:function(d){return ge.hasConstructorOf(d,Intl.Collator)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.Collator(d.locale,d)}},IntlDateTimeFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.DateTimeFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.DateTimeFormat(d.locale,d)}},IntlNumberFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.NumberFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.NumberFormat(d.locale,d)}}};function Z(g){for(var d=new Uint8Array(g.length),b=0;b<g.length;b++)d[b]=g.charCodeAt(b);return d.buffer}var oe={file:{test:function(d){return ge.toStringTag(d)==="File"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad File access: "+b.status);return{type:d.type,stringContents:b.responseText,name:d.name,lastModified:d.lastModified}},revive:function(d){var b=d.name,O=d.type,I=d.stringContents,Q=d.lastModified;return new File([Z(I)],b,{type:O,lastModified:Q})},replaceAsync:function(d){return new ge.Promise(function(b,O){var I=new FileReader;I.addEventListener("load",function(){b({type:d.type,stringContents:I.result,name:d.name,lastModified:d.lastModified})}),I.addEventListener("error",function(){O(I.error)}),I.readAsBinaryString(d)})}}},pe={bigint:{test:function(d){return typeof d=="bigint"},replace:function(d){return String(d)},revive:function(d){return BigInt(d)}}},ve={bigintObject:{test:function(d){return n(d)==="object"&&ge.hasConstructorOf(d,BigInt)},replace:function(d){return String(d)},revive:function(d){return new Object(BigInt(d))}}},te={cryptokey:{test:function(d){return ge.toStringTag(d)==="CryptoKey"&&d.extractable},replaceAsync:function(d){return new ge.Promise(function(b,O){crypto.subtle.exportKey("jwk",d).catch(function(I){O(I)}).then(function(I){b({jwk:I,algorithm:d.algorithm,usages:d.usages})})})},revive:function(d){var b=d.jwk,O=d.algorithm,I=d.usages;return crypto.subtle.importKey("jwk",b,O,!0,I)}}};return[Re,z,K,Y,X,D,a,{imagedata:{test:function(d){return ge.toStringTag(d)==="ImageData"},replace:function(d){return{array:l(d.data),width:d.width,height:d.height}},revive:function(d){return new ImageData(new Uint8ClampedArray(d.array),d.width,d.height)}}},{imagebitmap:{test:function(d){return ge.toStringTag(d)==="ImageBitmap"||d&&d.dataset&&d.dataset.toStringTag==="ImageBitmap"},replace:function(d){var b=document.createElement("canvas");return b.getContext("2d").drawImage(d,0,0),b.toDataURL()},revive:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){O.drawImage(I,0,0)}),I.src=d,b},reviveAsync:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){O.drawImage(I,0,0)}),I.src=d,createImageBitmap(b)}}},oe,{file:oe.file,filelist:{test:function(d){return ge.toStringTag(d)==="FileList"},replace:function(d){for(var b=[],O=0;O<d.length;O++)b[O]=d.item(O);return b},revive:function(d){return new(function(){function b(){r(this,b),this._files=arguments[0],this.length=this._files.length}return function(I,Q,ee){return Q&&s(I.prototype,Q),ee&&s(I,ee),I}(b,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),b}())(d)}}},{blob:{test:function(d){return ge.toStringTag(d)==="Blob"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad Blob access: "+b.status);return{type:d.type,stringContents:b.responseText}},revive:function(d){var b=d.type,O=d.stringContents;return new Blob([Z(O)],{type:b})},replaceAsync:function(d){return new ge.Promise(function(b,O){var I=new FileReader;I.addEventListener("load",function(){b({type:d.type,stringContents:I.result})}),I.addEventListener("error",function(){O(I.error)}),I.readAsBinaryString(d)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?h:[],typeof ArrayBuffer=="function"?L:[],typeof Uint8Array=="function"?W:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[pe,ve]:[])})}),dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Br=new Uint8Array(256);for(var Ds=0;Ds<dr.length;Ds++)Br[dr.codePointAt(Ds)]=Ds;var po=function(t,n,r){r==null&&(r=t.byteLength);for(var s=new Uint8Array(t,n||0,r),i=s.length,o="",l=0;l<i;l+=3)o+=dr[s[l]>>2],o+=dr[(s[l]&3)<<4|s[l+1]>>4],o+=dr[(s[l+1]&15)<<2|s[l+2]>>6],o+=dr[s[l+2]&63];return i%3===2?o=o.slice(0,-1)+"=":i%3===1&&(o=o.slice(0,-2)+"=="),o},Tc=function(t){var n=t.length,r=t.length*.75,s=0,i,o,l,u;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),p=new Uint8Array(c),m=0;m<n;m+=4)i=Br[t.codePointAt(m)],o=Br[t.codePointAt(m+1)],l=Br[t.codePointAt(m+2)],u=Br[t.codePointAt(m+3)],p[s++]=i<<2|o>>4,p[s++]=(o&15)<<4|l>>2,p[s++]=(l&3)<<6|u&63;return c},Dm=typeof self>"u"?global:self,Oc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=Dm[t];n&&(Oc[e.toLowerCase()+"2"]={test:function(r){return ci.toStringTag(r)===t},replace:function(r){var s=r.buffer,i=r.byteOffset,o=r.length;return{buffer:s,byteOffset:i,length:o}},revive:function(r){var s=r.buffer,i=r.byteOffset,o=r.length;return new n(s,i,o)}})});var Sm={arraybuffer:{test:function(e){return ci.toStringTag(e)==="ArrayBuffer"},replace:function(e){return po(e,0,e.byteLength)},revive:function(e){var t=Tc(e);return t}}},Yt=new ci().register(Cm),Tm="FileReaderSync"in self,Gs=[],Ti=0;Yt.register([Sm,Oc,{blob2:{test:function(e){return ci.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Tm){var t=Sc(e,"binary"),n=po(t,0,t.byteLength);return{type:e.type,data:n}}else{Gs.push(e);var r={type:e.type,data:{start:Ti,end:Ti+e.size}};return Ti+=e.size,r}},finalize:function(e,t){e.data=po(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Tc(n)],{type:t})}}}]);Yt.mustFinalize=function(){return Gs.length>0};Yt.finalize=function(e){return jn(void 0,void 0,void 0,function(){var t,n,r,s,i,o,l,u,c,p;return tn(this,function(m){switch(m.label){case 0:return[4,Dc(new Blob(Gs),"binary")];case 1:if(t=m.sent(),e){for(n=0,r=e;n<r.length;n++)if(s=r[n],s.$types){i=s.$types,o=i.$,o&&(i=i.$);for(l in i)u=i[l],c=Yt.types[u],c&&c.finalize&&(p=ut.getByKeyPath(s,o?"$."+l:l),c.finalize(p,t.slice(p.start,p.end)))}}return Gs=[],[2]}})})};var Om=2e3;function Ec(e,t){return jn(this,void 0,void 0,function(){function n(){return jn(this,void 0,void 0,function(){var c,p,m,x,S,P,T,R,B;return tn(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function($){return $.count()}))];case 1:c=E.sent(),c.forEach(function($,N){return s[N].rowCount=$}),u.totalRows=c.reduce(function($,N){return $+N}),p=JSON.stringify(o,void 0,i?2:void 0),m=p.lastIndexOf("]"),x=p.substring(0,m),r.push(x),S=t.filter,P=function($){var N,U,J,H,re,k,_,V,j,_e,ue,Ne;return tn(this,function(be){switch(be.label){case 0:N=e.table($),U=N.schema.primKey,J=!!U.keyPath,H=t.numRowsPerChunk||Om,re=J?{tableName:N.name,inbound:!0,rows:[]}:{tableName:N.name,inbound:!1,rows:[]},k=JSON.stringify(re,void 0,i?2:void 0),i&&(k=k.split(`
`).join(`
    `)),_=k.lastIndexOf("]"),r.push(k.substring(0,_)),V=null,j=0,_e=!0,ue=function(){var he,le,We,Ye,ge,it,qe,Rt,ge;return tn(this,function(de){switch(de.label){case 0:return l&&ut.ignoreTransaction(function(){return l(u)}),he=V==null?N.limit(H):N.where(":id").above(V).limit(H),[4,he.toArray()];case 1:return le=de.sent(),le.length===0?[2,"break"]:(V!=null&&j>0&&(r.push(","),i&&r.push(`
      `)),_e=le.length===H,J?(We=S?le.filter(function(Re){return S($,Re)}):le,Ye=We.map(function(Re){return Yt.encapsulate(Re)}),Yt.mustFinalize()?[4,ut.waitFor(Yt.finalize(Ye))]:[3,3]):[3,4]);case 2:de.sent(),de.label=3;case 3:return ge=JSON.stringify(Ye,void 0,i?2:void 0),i&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),j=We.length,V=le.length>0?ut.getByKeyPath(le[le.length-1],U.keyPath):null,[3,8];case 4:return[4,he.primaryKeys()];case 5:return it=de.sent(),qe=it.map(function(Re,K){return[Re,le[K]]}),S&&(qe=qe.filter(function(Re){var K=Re[0],z=Re[1];return S($,z,K)})),Rt=qe.map(function(Re){return Yt.encapsulate(Re)}),Yt.mustFinalize()?[4,ut.waitFor(Yt.finalize(Rt))]:[3,7];case 6:de.sent(),de.label=7;case 7:ge=JSON.stringify(Rt,void 0,i?2:void 0),i&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),j=qe.length,V=it.length>0?it[it.length-1]:null,de.label=8;case 8:return u.completedRows+=le.length,[2]}})},be.label=1;case 1:return _e?[5,ue()]:[3,3];case 2:return Ne=be.sent(),Ne==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(_)),u.completedTables+=1,u.completedTables<u.totalTables&&r.push(","),[2]}})},T=0,R=s,E.label=2;case 2:return T<R.length?(B=R[T].name,[5,P(B)]):[3,5];case 3:E.sent(),E.label=4;case 4:return T++,[3,2];case 5:return r.push(p.substr(m)),u.done=!0,l&&ut.ignoreTransaction(function(){return l(u)}),[2]}})})}var r,s,i,o,l,u;return tn(this,function(c){switch(c.label){case 0:t=t||{},r=[],s=e.tables.map(function(p){return{name:p.name,schema:xm(p),rowCount:0}}),i=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:s,data:[]}},l=t.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return Yt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var Em=1,Am={Stream:function(){}},Pm=Wo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new S(k)},n.CParser=S,n.CStream=T,n.createStream=P,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var s={textNode:void 0,numberNode:""},i=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var u in n.STATE)n.STATE[n.STATE[u]]=u;o=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function _(){this.__proto__=k}return _.prototype=k,new _}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var _=[];for(var V in k)k.hasOwnProperty(V)&&_.push(V);return _});function p(k){var _=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var j in s){var _e=k[j]===void 0?0:k[j].length;if(_e>_)switch(j){case"text":closeText(k);break;default:U(k,"Max buffer length exceeded: "+j)}V=Math.max(V,_e)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+k.position}function m(k){for(var _ in s)k[_]=s[_]}var x=/[\\"\n]/g;function S(k){if(!(this instanceof S))return new S(k);var _=this;m(_),_.bufferCheckPosition=n.MAX_BUFFER_LENGTH,_.q=_.c=_.p="",_.opt=k||{},_.closed=_.closedRoot=_.sawRoot=!1,_.tag=_.error=null,_.state=o.BEGIN,_.stack=new Array,_.position=_.column=0,_.line=1,_.slashed=!1,_.unicodeI=0,_.unicodeS=null,_.depth=0,R(_,"onready")}S.prototype={end:function(){J(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Am.Stream}catch{l=function(){}}function P(k){return new T(k)}function T(k){if(!(this instanceof T))return new T(k);this._parser=new S(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var _=this;l.apply(_),this._parser.onend=function(){_.emit("end")},this._parser.onerror=function(V){_.emit("error",V),_._parser.error=null},i.forEach(function(V){Object.defineProperty(_,"on"+V,{get:function(){return _._parser["on"+V]},set:function(j){if(!j)return _.removeAllListeners(V),_._parser["on"+V]=j,j;_.on(V,j)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(l.prototype,{constructor:{value:T}}),T.prototype.write=function(k){k=new Buffer(k);for(var _=0;_<k.length;_++){var V=k[_];if(this.bytes_remaining>0){for(var j=0;j<this.bytes_remaining;j++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+j]=k[j];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,_=_+j-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+_>k.length){for(var _e=0;_e<=k.length-1-_;_e++)this.temp_buffs[this.bytes_in_sequence][_e]=k[_+_e];return this.bytes_remaining=_+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(_,_+this.bytes_in_sequence).toString(),_=_+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ue=_;ue<k.length&&!(k[ue]>=128);ue++);this.string=k.slice(_,ue).toString(),this._parser.write(this.string),this.emit("data",this.string),_=ue-1}},T.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},T.prototype.on=function(k,_){var V=this;return!V._parser["on"+k]&&i.indexOf(k)!==-1&&(V._parser["on"+k]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,k),V.emit.apply(V,j)}),l.prototype.on.call(V,k,_)},T.prototype.destroy=function(){m(this._parser),this.emit("close")};function R(k,_,V){n.INFO&&console.log("-- emit",_,V),k[_]&&k[_](V)}function B(k,_,V){E(k),R(k,_,V)}function E(k,_){k.textNode=N(k.opt,k.textNode),k.textNode!==void 0&&R(k,_||"onvalue",k.textNode),k.textNode=void 0}function $(k){k.numberNode&&R(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function N(k,_){return _===void 0||(k.trim&&(_=_.trim()),k.normalize&&(_=_.replace(/\s+/g," "))),_}function U(k,_){return E(k),_+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,_=new Error(_),k.error=_,R(k,"onerror",_),k}function J(k){return(k.state!==o.VALUE||k.depth!==0)&&U(k,"Unexpected end"),E(k),k.c="",k.closed=!0,R(k,"onend"),S.call(k,k.opt),k}function H(k){return k===c.carriageReturn||k===c.lineFeed||k===c.space||k===c.tab}function re(k){var _=this;if(this.error)throw this.error;if(_.closed)return U(_,"Cannot write after close. Assign an onready handler.");if(k===null)return J(_);var V=0,j=k.charCodeAt(0),_e=_.p;for(n.DEBUG&&console.log("write -> ["+k+"]");j&&(_e=j,_.c=j=k.charCodeAt(V++),_e!==j?_.p=_e:_e=_.p,!!j);)switch(n.DEBUG&&console.log(V,j,n.STATE[_.state]),_.position++,j===c.lineFeed?(_.line++,_.column=0):_.column++,_.state){case o.BEGIN:j===c.openBrace?_.state=o.OPEN_OBJECT:j===c.openBracket?_.state=o.OPEN_ARRAY:H(j)||U(_,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(j))continue;if(_.state===o.OPEN_KEY)_.stack.push(o.CLOSE_KEY);else if(j===c.closeBrace){R(_,"onopenobject"),this.depth++,R(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_OBJECT);j===c.doubleQuote?_.state=o.STRING:U(_,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(j))continue;_.state,o.CLOSE_KEY,j===c.colon?(_.state===o.CLOSE_OBJECT?(_.stack.push(o.CLOSE_OBJECT),E(_,"onopenobject"),this.depth++):E(_,"onkey"),_.state=o.VALUE):j===c.closeBrace?(B(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE):j===c.comma?(_.state===o.CLOSE_OBJECT&&_.stack.push(o.CLOSE_OBJECT),E(_),_.state=o.OPEN_KEY):U(_,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(j))continue;if(_.state===o.OPEN_ARRAY)if(R(_,"onopenarray"),this.depth++,_.state=o.VALUE,j===c.closeBracket){R(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_ARRAY);j===c.doubleQuote?_.state=o.STRING:j===c.openBrace?_.state=o.OPEN_OBJECT:j===c.openBracket?_.state=o.OPEN_ARRAY:j===c.t?_.state=o.TRUE:j===c.f?_.state=o.FALSE:j===c.n?_.state=o.NULL:j===c.minus?_.numberNode+="-":c._0<=j&&j<=c._9?(_.numberNode+=String.fromCharCode(j),_.state=o.NUMBER_DIGIT):U(_,"Bad value");continue;case o.CLOSE_ARRAY:if(j===c.comma)_.stack.push(o.CLOSE_ARRAY),E(_,"onvalue"),_.state=o.VALUE;else if(j===c.closeBracket)B(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;else{if(H(j))continue;U(_,"Bad array")}continue;case o.STRING:_.textNode===void 0&&(_.textNode="");var ue=V-1,Ne=_.slashed,be=_.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,j,n.STATE[_.state],Ne);be>0;)if(_.unicodeS+=String.fromCharCode(j),j=k.charCodeAt(V++),_.position++,be===4?(_.textNode+=String.fromCharCode(parseInt(_.unicodeS,16)),be=0,ue=V-1):be++,!j)break e;if(j===c.doubleQuote&&!Ne){_.state=_.stack.pop()||o.VALUE,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}if(j===c.backslash&&!Ne&&(Ne=!0,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue,j=k.charCodeAt(V++),_.position++,!j))break;if(Ne){if(Ne=!1,j===c.n?_.textNode+=`
`:j===c.r?_.textNode+="\r":j===c.t?_.textNode+="	":j===c.f?_.textNode+="\f":j===c.b?_.textNode+="\b":j===c.u?(be=1,_.unicodeS=""):_.textNode+=String.fromCharCode(j),j=k.charCodeAt(V++),_.position++,ue=V-1,j)continue;break}x.lastIndex=V;var he=x.exec(k);if(he===null){V=k.length+1,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}if(V=he.index+1,j=k.charCodeAt(he.index),!j){_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}}_.slashed=Ne,_.unicodeI=be;continue;case o.TRUE:j===c.r?_.state=o.TRUE2:U(_,"Invalid true started with t"+j);continue;case o.TRUE2:j===c.u?_.state=o.TRUE3:U(_,"Invalid true started with tr"+j);continue;case o.TRUE3:j===c.e?(R(_,"onvalue",!0),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid true started with tru"+j);continue;case o.FALSE:j===c.a?_.state=o.FALSE2:U(_,"Invalid false started with f"+j);continue;case o.FALSE2:j===c.l?_.state=o.FALSE3:U(_,"Invalid false started with fa"+j);continue;case o.FALSE3:j===c.s?_.state=o.FALSE4:U(_,"Invalid false started with fal"+j);continue;case o.FALSE4:j===c.e?(R(_,"onvalue",!1),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid false started with fals"+j);continue;case o.NULL:j===c.u?_.state=o.NULL2:U(_,"Invalid null started with n"+j);continue;case o.NULL2:j===c.l?_.state=o.NULL3:U(_,"Invalid null started with nu"+j);continue;case o.NULL3:j===c.l?(R(_,"onvalue",null),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid null started with nul"+j);continue;case o.NUMBER_DECIMAL_POINT:j===c.period?(_.numberNode+=".",_.state=o.NUMBER_DIGIT):U(_,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:c._0<=j&&j<=c._9?_.numberNode+=String.fromCharCode(j):j===c.period?(_.numberNode.indexOf(".")!==-1&&U(_,"Invalid number has two dots"),_.numberNode+="."):j===c.e||j===c.E?((_.numberNode.indexOf("e")!==-1||_.numberNode.indexOf("E")!==-1)&&U(_,"Invalid number has two exponential"),_.numberNode+="e"):j===c.plus||j===c.minus?(_e===c.e||_e===c.E||U(_,"Invalid symbol in number"),_.numberNode+=String.fromCharCode(j)):($(_),V--,_.state=_.stack.pop()||o.VALUE);continue;default:U(_,"Unknown state: "+_.state)}return _.position>=_.bufferCheckPosition&&p(_),_}})(t)});function $m(e){var t=0,n=Nm(!0),r={pullAsync:function(s){return jn(this,void 0,void 0,function(){var i,o,l;return tn(this,function(u){switch(u.label){case 0:return i=e.slice(t,t+s),t+=s,[4,Dc(i,"text")];case 1:return o=u.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(s){var i=e.slice(t,t+s);t+=s;var o=Sc(i,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Nm(e){var t=Pm.parser(),n=0,r,s=[],i,o,l=!1,u=!1;return t.onopenobject=function(c){var p={};p.incomplete=!0,r||(r=p),i&&(s.push([o,i,u]),e&&(u?i.push(p):i[o]=p)),i=p,o=c,u=!1,++n},t.onkey=function(c){return o=c},t.onvalue=function(c){return u?i.push(c):i[o]=c},t.oncloseobject=function(){var c;if(delete i.incomplete,o=null,--n===0)l=!0;else{var p=i;c=s.pop(),o=c[0],i=c[1],u=c[2],e||(u?i.push(p):i[o]=p)}},t.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),i&&(s.push([o,i,u]),e&&(u?i.push(c):i[o]=c)),i=c,u=!0,o=null,++n},t.onclosearray=function(){var c;if(delete i.incomplete,o=null,--n===0)l=!0;else{var p=i;c=s.pop(),o=c[0],i=c[1],u=c[2],e||(u?i.push(p):i[o]=p)}},{write:function(c){return t.write(c),r},done:function(){return l}}}var Ac=1024;function Im(e,t){return jn(this,void 0,void 0,function(){var n,r,s,i;return tn(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Ac*1024,[4,$c(e,n)];case 1:return r=o.sent(),s=r.result.data,i=new ut(s.databaseName),i.version(s.databaseVersion).stores(km(s)),[4,Pc(i,r,t)];case 2:return o.sent(),[2,i]}})})}function Pc(e,t,n){return jn(this,void 0,void 0,function(){function r(){return jn(this,void 0,void 0,function(){var P,T,R,B,E;return tn(this,function($){switch($.label){case 0:P=function(N){var U,J,H,re,k,_,V,j,_e,ue,Ne,be;return tn(this,function(he){switch(he.label){case 0:if(!N.rows)return[2,"break"];if(!N.rows.incomplete&&N.rows.length===0)return[2,"continue"];if(c&&ut.ignoreTransaction(function(){return c(p)}),U=N.tableName,J=e.table(U),H=u.tables.filter(function(le){return le.name===U})[0].schema,!J){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(N.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=J.schema.primKey.src)throw new Error("Primary key differs for table ".concat(N.tableName,". "));for(re=N.rows,k=[],_=0;_<re.length&&(V=re[_],!V.incomplete);_++)k.push(Yt.revive(V));return j=n.filter,_e=j?N.inbound?k.filter(function(le){return j(U,le)}):k.filter(function(le){var We=le[0],Ye=le[1];return j(U,Ye,We)}):k,ue=N.inbound?[void 0,_e]:[_e.map(function(le){return le[0]}),k.map(function(le){return le[1]})],Ne=ue[0],be=ue[1],n.overwriteValues?[4,J.bulkPut(be,Ne)]:[3,2];case 1:return he.sent(),[3,4];case 2:return[4,J.bulkAdd(be,Ne)];case 3:he.sent(),he.label=4;case 4:return p.completedRows+=k.length,k.incomplete||(p.completedTables+=1),re.splice(0,k.length),[2]}})},T=0,R=u.data,$.label=1;case 1:return T<R.length?(B=R[T],[5,P(B)]):[3,4];case 2:if(E=$.sent(),E==="break")return[3,4];$.label=3;case 3:return T++,[3,1];case 4:for(;u.data.length>0&&u.data[0].rows&&!u.data[0].rows.incomplete;)u.data.splice(0,1);return!i.done()&&!i.eof()?l?(i.pullSync(s),[3,7]):[3,5]:[3,8];case 5:return[4,ut.waitFor(i.pullAsync(s))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var s,i,o,l,u,c,p,m,x,S;return tn(this,function(P){switch(P.label){case 0:return n=n||{},s=n.chunkSizeBytes||Ac*1024,[4,$c(t,s)];case 1:if(i=P.sent(),o=i.result,l="FileReaderSync"in self,u=o.data,!n.acceptNameDiff&&e.name!==u.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(u.databaseName));if(!n.acceptVersionDiff&&e.verno!==u.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(u.databaseVersion));if(c=n.progressCallback,p={done:!1,completedRows:0,completedTables:0,totalRows:u.tables.reduce(function(T,R){return T+R.rowCount},0),totalTables:u.tables.length},c&&ut.ignoreTransaction(function(){return c(p)}),!n.clearTablesBeforeImport)return[3,5];m=0,x=e.tables,P.label=2;case 2:return m<x.length?(S=x[m],[4,S.clear()]):[3,5];case 3:P.sent(),P.label=4;case 4:return m++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return P.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:P.sent(),P.label=9;case 9:return p.done=!0,c&&ut.ignoreTransaction(function(){return c(p)}),[2]}})})}function $c(e,t){return jn(this,void 0,void 0,function(){var n,r;return tn(this,function(s){switch(s.label){case 0:n="slice"in e?$m(e):e,s.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return s.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Em)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}ut.prototype.export=function(e){return Ec(this,e)};ut.prototype.import=function(e,t){return Pc(this,e,t)};ut.import=function(e,t){return Im(e,t)};const Fm={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},Lm=F("div",{class:"text-2xl font-bold mb-6"},"База данных",-1),Mm={class:"flex flex-wrap items-center gap-5"},Bm=F("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),Rm=F("span",{class:"pointer-events-none"},"Импорт",-1),jm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},Km=F("div",{class:"text-2xl font-bold mb-6 text-red-400"},"Осторожно!",-1),Um={class:"flex flex-wrap items-center gap-5"},Vm=Bt({__name:"SettingsPage",setup(e){const t=Fn({dbLoading:!1});oi(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("Удаляем базу данных ?"))try{await ct.close(),window.indexedDB.deleteDatabase("avito_scraper"),Ue.show("error",Ve.DBDropSuccess),window.location.reload()}catch{Ue.show("error",Ve.DBDropError)}}async function r(){window.confirm("Чистим хранилище ?")&&(await chrome.storage.local.clear(),window.location.reload())}async function s(){t.dbLoading=!0;try{const l=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,u=await Ec(ct),c=new Blob([u],{type:"text/json"}),p=document.createElement("a");p.href=URL.createObjectURL(c),p.download=l,p.click(),p.remove(),Ue.show("success",Ve.DBExportSuccess)}catch{Ue.show("error",Ve.DBExportError)}finally{t.dbLoading=!1}}return(i,o)=>(se(),ce(rt,null,[F("div",Fm,[t.dbLoading?(se(),Lt(Cc,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):Me("",!0),Lm,F("div",Mm,[Be(Pt,{theme:"success",icon:"cloud_upload"},{default:Dt(()=>[Bm,Rm]),_:1}),Be(Pt,{theme:"info",icon:"cloud_download",onClick:s},{default:Dt(()=>[Tt("Экспорт")]),_:1})])]),F("div",jm,[Km,F("div",Um,[Be(Pt,{theme:"danger",icon:"delete_sweep",onClick:dt(r,["stop"])},{default:Dt(()=>[Tt("Очистить localStorage")]),_:1},8,["onClick"]),Be(Pt,{theme:"danger",icon:"delete_forever",onClick:dt(n,["stop"])},{default:Dt(()=>[Tt("Очистить IndexedDB")]),_:1},8,["onClick"])])])],64))}}),Hm={class:"centered"},qm=Bt({__name:"App",setup(e){const t=rn(!1);return rr(async()=>{rh(),chrome.runtime.onMessage.addListener(async({message:n,action:r,status:s,currentUrl:i,data:o})=>{if(s&&n&&Ue.show(s,n),r==="reviews-parsing-started"){const l=$e.profileLinkGetByUrl(i);l&&(l.status="wait")}if(r==="reviews-parsing-ended"){if(s==="success"){Oe.pushResultsByUrl(i,o),ft.pushParsingResult(i);const l=$e.profileLinkGetByUrl(i);l&&(l.status="success")}if(s==="error"){const l=$e.profileLinkGetByUrl(i);l&&(l.status="error")}if($e.profileLinkNew){const l=Ue.show("success",Ve.WaitOpenPage,{duration:172800});await ih(oh(2,10)*1e3),Ue.drop(l),$e.parsingStart()}else Ue.show("success",Ve.ParsingReviewsFinished,{duration:172800}),un.changeTab(En.ProfilesParsing),Ua()}if(r==="profile-info"){Oe.list.value.push(o);let l=`
                ${o.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.deliveryInfo}&nbsp;&nbsp;/&nbsp;&nbsp;
                Активные ${o.activeAdds}
                ${o.completedAdds?"&nbsp;&nbsp;/&nbsp;&nbsp; Завершенные "+o.completedAdds:""}
            `;$e.profileLinkSetInfo(i,l)}r==="profiles-parsing-started"&&s==="success"&&(Xe.state.loading=!0),r==="profiles-parsing-current-page"&&s==="success"&&(Xe.state.currentPage=o),r==="profiles-parsing-ended"&&(s==="success"&&(Xe.state.loading=!1,Ue.show("success",Ve.ProfilesParsingEnded,{duration:172800}),Ua(),Xe.pushProfileList(o)),s==="error"&&(Xe.state.loading=!1,Ue.show("error",Ve.ProfilesParsingError,{duration:172800})))}),document.fonts.onloadingdone=()=>{t.value=!0},Oe.list.value=await Oe.apiGetInfoList(),setTimeout(()=>{$e.setFilterFromDB()},0)}),(n,r)=>(se(),ce("div",{class:_t(["app-wrapper transition-opacity duration-200 delay-100",t.value?"opacity-100":"opacity-0"])},[Be(fh),F("main",Hm,[(se(),Lt(Vu,null,[ne(un).active.value===ne(En).ProfilesSearch?(se(),Lt(Sy,{key:0})):Me("",!0),ne(un).active.value===ne(En).ProfilesParsing?(se(),Lt(zp,{key:1})):Me("",!0)],1024)),ne(un).active.value===ne(En).ProfilesSaved?(se(),Lt(wm,{key:0})):Me("",!0),ne(un).active.value===ne(En).Settings?(se(),Lt(Vm,{key:1})):Me("",!0)])],2))}}),Jm=ad();rd(qm).use(Jm).mount("#options");

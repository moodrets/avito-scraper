var Fc=Object.defineProperty;var Lc=(e,t,n)=>t in e?Fc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kt=(e,t,n)=>(Lc(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mo(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const tt={},pr=[],rn=()=>{},Mc=()=>!1,Bc=/^on[^a-z]/,Zs=e=>Bc.test(e),go=e=>e.startsWith("onUpdate:"),mt=Object.assign,vo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Rc=Object.prototype.hasOwnProperty,Ke=(e,t)=>Rc.call(e,t),Te=Array.isArray,yr=e=>os(e)==="[object Map]",Ja=e=>os(e)==="[object Set]",jc=e=>os(e)==="[object RegExp]",$e=e=>typeof e=="function",pt=e=>typeof e=="string",bo=e=>typeof e=="symbol",at=e=>e!==null&&typeof e=="object",Ya=e=>at(e)&&$e(e.then)&&$e(e.catch),Wa=Object.prototype.toString,os=e=>Wa.call(e),Kc=e=>os(e).slice(8,-1),za=e=>os(e)==="[object Object]",_o=e=>pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ts=mo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ei=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Uc=/-(\w)/g,Cr=ei(e=>e.replace(Uc,(t,n)=>n?n.toUpperCase():"")),Vc=/\B([A-Z])/g,rr=ei(e=>e.replace(Vc,"-$1").toLowerCase()),Ga=ei(e=>e.charAt(0).toUpperCase()+e.slice(1)),hi=ei(e=>e?`on${Ga(e)}`:""),Yr=(e,t)=>!Object.is(e,t),mr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Bs=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ei=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Go;const Pi=()=>Go||(Go=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sr(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=pt(r)?Yc(r):Sr(r);if(s)for(const i in s)t[i]=s[i]}return t}else{if(pt(e))return e;if(at(e))return e}}const Hc=/;(?![^(]*\))/g,qc=/:([^]+)/,Jc=/\/\*[^]*?\*\//g;function Yc(e){const t={};return e.replace(Jc,"").split(Hc).forEach(n=>{if(n){const r=n.split(qc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function _t(e){let t="";if(pt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=_t(e[n]);r&&(t+=r+" ")}else if(at(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Wc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zc=mo(Wc);function Xa(e){return!!e||e===""}const Pe=e=>pt(e)?e:e==null?"":Te(e)||at(e)&&(e.toString===Wa||!$e(e.toString))?JSON.stringify(e,Qa,2):String(e),Qa=(e,t)=>t&&t.__v_isRef?Qa(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Ja(t)?{[`Set(${t.size})`]:[...t.values()]}:at(t)&&!Te(t)&&!za(t)?String(t):t;let Zt;class Za{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Zt;try{return Zt=this,t()}finally{Zt=n}}}on(){Zt=this}off(){Zt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Gc(e){return new Za(e)}function Xc(e,t=Zt){t&&t.active&&t.effects.push(e)}function Qc(){return Zt}const wo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},el=e=>(e.w&Fn)>0,tl=e=>(e.n&Fn)>0,Zc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Fn},eu=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const s=t[r];el(s)&&!tl(s)?s.delete(e):t[n++]=s,s.w&=~Fn,s.n&=~Fn}t.length=n}},Ai=new WeakMap;let Nr=0,Fn=1;const $i=30;let en;const Gn=Symbol(""),Ii=Symbol("");class xo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Xc(this,r)}run(){if(!this.active)return this.fn();let t=en,n=In;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=en,en=this,In=!0,Fn=1<<++Nr,Nr<=$i?Zc(this):Xo(this),this.fn()}finally{Nr<=$i&&eu(this),Fn=1<<--Nr,en=this.parent,In=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){en===this?this.deferStop=!0:this.active&&(Xo(this),this.onStop&&this.onStop(),this.active=!1)}}function Xo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let In=!0;const nl=[];function Er(){nl.push(In),In=!1}function Pr(){const e=nl.pop();In=e===void 0?!0:e}function Lt(e,t,n){if(In&&en){let r=Ai.get(e);r||Ai.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=wo()),rl(s)}}function rl(e,t){let n=!1;Nr<=$i?tl(e)||(e.n|=Fn,n=!el(e)):n=!e.has(en),n&&(e.add(en),en.deps.push(e))}function xn(e,t,n,r,s,i){const o=Ai.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&Te(e)){const c=Number(r);o.forEach((u,h)=>{(h==="length"||h>=c)&&l.push(u)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":Te(e)?_o(n)&&l.push(o.get("length")):(l.push(o.get(Gn)),yr(e)&&l.push(o.get(Ii)));break;case"delete":Te(e)||(l.push(o.get(Gn)),yr(e)&&l.push(o.get(Ii)));break;case"set":yr(e)&&l.push(o.get(Gn));break}if(l.length===1)l[0]&&Ni(l[0]);else{const c=[];for(const u of l)u&&c.push(...u);Ni(wo(c))}}function Ni(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&Qo(r);for(const r of n)r.computed||Qo(r)}function Qo(e,t){(e!==en||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const tu=mo("__proto__,__v_isRef,__isVue"),sl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(bo)),nu=ko(),ru=ko(!1,!0),su=ko(!0),Zo=iu();function iu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Je(this);for(let i=0,o=this.length;i<o;i++)Lt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Je)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Er();const r=Je(this)[t].apply(this,n);return Pr(),r}}),e}function ou(e){const t=Je(this);return Lt(t,"has",e),t.hasOwnProperty(e)}function ko(e=!1,t=!1){return function(r,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&i===(e?t?xu:cl:t?ll:al).get(r))return r;const o=Te(r);if(!e){if(o&&Ke(Zo,s))return Reflect.get(Zo,s,i);if(s==="hasOwnProperty")return ou}const l=Reflect.get(r,s,i);return(bo(s)?sl.has(s):tu(s))||(e||Lt(r,"get",s),t)?l:kt(l)?o&&_o(s)?l:l.value:at(l)?e?ul(l):Kn(l):l}}const au=il(),lu=il(!0);function il(e=!1){return function(n,r,s,i){let o=n[r];if(Dr(o)&&kt(o)&&!kt(s))return!1;if(!e&&(!Rs(s)&&!Dr(s)&&(o=Je(o),s=Je(s)),!Te(n)&&kt(o)&&!kt(s)))return o.value=s,!0;const l=Te(n)&&_o(r)?Number(r)<n.length:Ke(n,r),c=Reflect.set(n,r,s,i);return n===Je(i)&&(l?Yr(s,o)&&xn(n,"set",r,s):xn(n,"add",r,s)),c}}function cu(e,t){const n=Ke(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&xn(e,"delete",t,void 0),r}function uu(e,t){const n=Reflect.has(e,t);return(!bo(t)||!sl.has(t))&&Lt(e,"has",t),n}function fu(e){return Lt(e,"iterate",Te(e)?"length":Gn),Reflect.ownKeys(e)}const ol={get:nu,set:au,deleteProperty:cu,has:uu,ownKeys:fu},du={get:su,set(e,t){return!0},deleteProperty(e,t){return!0}},hu=mt({},ol,{get:ru,set:lu}),Co=e=>e,ti=e=>Reflect.getPrototypeOf(e);function hs(e,t,n=!1,r=!1){e=e.__v_raw;const s=Je(e),i=Je(t);n||(t!==i&&Lt(s,"get",t),Lt(s,"get",i));const{has:o}=ti(s),l=r?Co:n?Oo:Wr;if(o.call(s,t))return l(e.get(t));if(o.call(s,i))return l(e.get(i));e!==s&&e.get(t)}function ps(e,t=!1){const n=this.__v_raw,r=Je(n),s=Je(e);return t||(e!==s&&Lt(r,"has",e),Lt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function ys(e,t=!1){return e=e.__v_raw,!t&&Lt(Je(e),"iterate",Gn),Reflect.get(e,"size",e)}function ea(e){e=Je(e);const t=Je(this);return ti(t).has.call(t,e)||(t.add(e),xn(t,"add",e,e)),this}function ta(e,t){t=Je(t);const n=Je(this),{has:r,get:s}=ti(n);let i=r.call(n,e);i||(e=Je(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Yr(t,o)&&xn(n,"set",e,t):xn(n,"add",e,t),this}function na(e){const t=Je(this),{has:n,get:r}=ti(t);let s=n.call(t,e);s||(e=Je(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&xn(t,"delete",e,void 0),i}function ra(){const e=Je(this),t=e.size!==0,n=e.clear();return t&&xn(e,"clear",void 0,void 0),n}function ms(e,t){return function(r,s){const i=this,o=i.__v_raw,l=Je(o),c=t?Co:e?Oo:Wr;return!e&&Lt(l,"iterate",Gn),o.forEach((u,h)=>r.call(s,c(u),c(h),i))}}function gs(e,t,n){return function(...r){const s=this.__v_raw,i=Je(s),o=yr(i),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,u=s[e](...r),h=n?Co:t?Oo:Wr;return!t&&Lt(i,"iterate",c?Ii:Gn),{next(){const{value:x,done:m}=u.next();return m?{value:x,done:m}:{value:l?[h(x[0]),h(x[1])]:h(x),done:m}},[Symbol.iterator](){return this}}}}function Dn(e){return function(...t){return e==="delete"?!1:this}}function pu(){const e={get(i){return hs(this,i)},get size(){return ys(this)},has:ps,add:ea,set:ta,delete:na,clear:ra,forEach:ms(!1,!1)},t={get(i){return hs(this,i,!1,!0)},get size(){return ys(this)},has:ps,add:ea,set:ta,delete:na,clear:ra,forEach:ms(!1,!0)},n={get(i){return hs(this,i,!0)},get size(){return ys(this,!0)},has(i){return ps.call(this,i,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:ms(!0,!1)},r={get(i){return hs(this,i,!0,!0)},get size(){return ys(this,!0)},has(i){return ps.call(this,i,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:ms(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=gs(i,!1,!1),n[i]=gs(i,!0,!1),t[i]=gs(i,!1,!0),r[i]=gs(i,!0,!0)}),[e,n,t,r]}const[yu,mu,gu,vu]=pu();function So(e,t){const n=t?e?vu:gu:e?mu:yu;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Ke(n,s)&&s in r?n:r,s,i)}const bu={get:So(!1,!1)},_u={get:So(!1,!0)},wu={get:So(!0,!1)},al=new WeakMap,ll=new WeakMap,cl=new WeakMap,xu=new WeakMap;function ku(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Cu(e){return e.__v_skip||!Object.isExtensible(e)?0:ku(Kc(e))}function Kn(e){return Dr(e)?e:Do(e,!1,ol,bu,al)}function Su(e){return Do(e,!1,hu,_u,ll)}function ul(e){return Do(e,!0,du,wu,cl)}function Do(e,t,n,r,s){if(!at(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Cu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return s.set(e,l),l}function gr(e){return Dr(e)?gr(e.__v_raw):!!(e&&e.__v_isReactive)}function Dr(e){return!!(e&&e.__v_isReadonly)}function Rs(e){return!!(e&&e.__v_isShallow)}function fl(e){return gr(e)||Dr(e)}function Je(e){const t=e&&e.__v_raw;return t?Je(t):e}function To(e){return Bs(e,"__v_skip",!0),e}const Wr=e=>at(e)?Kn(e):e,Oo=e=>at(e)?ul(e):e;function dl(e){In&&en&&(e=Je(e),rl(e.dep||(e.dep=wo())))}function hl(e,t){e=Je(e);const n=e.dep;n&&Ni(n)}function kt(e){return!!(e&&e.__v_isRef===!0)}function sn(e){return Du(e,!1)}function Du(e,t){return kt(e)?e:new Tu(e,t)}class Tu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Je(t),this._value=n?t:Wr(t)}get value(){return dl(this),this._value}set value(t){const n=this.__v_isShallow||Rs(t)||Dr(t);t=n?t:Je(t),Yr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Wr(t),hl(this))}}function te(e){return kt(e)?e.value:e}const Ou={get:(e,t,n)=>te(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return kt(s)&&!kt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function pl(e){return gr(e)?e:new Proxy(e,Ou)}class Eu{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new xo(t,()=>{this._dirty||(this._dirty=!0,hl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Je(this);return dl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Pu(e,t,n=!1){let r,s;const i=$e(e);return i?(r=e,s=rn):(r=e.get,s=e.set),new Eu(r,s,i||!s,n)}function Nn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){ni(i,t,n)}return s}function on(e,t,n,r){if($e(e)){const i=Nn(e,t,n,r);return i&&Ya(i)&&i.catch(o=>{ni(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(on(e[i],t,n,r));return s}function ni(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,l=n;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,o,l)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Nn(c,null,10,[e,o,l]);return}}Au(e,n,s,r)}function Au(e,t,n,r=!0){console.error(e)}let zr=!1,Fi=!1;const wt=[];let un=0;const vr=[];let yn=null,Jn=0;const yl=Promise.resolve();let Eo=null;function $u(e){const t=Eo||yl;return e?t.then(this?e.bind(this):e):t}function Iu(e){let t=un+1,n=wt.length;for(;t<n;){const r=t+n>>>1;Gr(wt[r])<e?t=r+1:n=r}return t}function Po(e){(!wt.length||!wt.includes(e,zr&&e.allowRecurse?un+1:un))&&(e.id==null?wt.push(e):wt.splice(Iu(e.id),0,e),ml())}function ml(){!zr&&!Fi&&(Fi=!0,Eo=yl.then(vl))}function Nu(e){const t=wt.indexOf(e);t>un&&wt.splice(t,1)}function Fu(e){Te(e)?vr.push(...e):(!yn||!yn.includes(e,e.allowRecurse?Jn+1:Jn))&&vr.push(e),ml()}function sa(e,t=zr?un+1:0){for(;t<wt.length;t++){const n=wt[t];n&&n.pre&&(wt.splice(t,1),t--,n())}}function gl(e){if(vr.length){const t=[...new Set(vr)];if(vr.length=0,yn){yn.push(...t);return}for(yn=t,yn.sort((n,r)=>Gr(n)-Gr(r)),Jn=0;Jn<yn.length;Jn++)yn[Jn]();yn=null,Jn=0}}const Gr=e=>e.id==null?1/0:e.id,Lu=(e,t)=>{const n=Gr(e)-Gr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function vl(e){Fi=!1,zr=!0,wt.sort(Lu);const t=rn;try{for(un=0;un<wt.length;un++){const n=wt[un];n&&n.active!==!1&&Nn(n,null,14)}}finally{un=0,wt.length=0,gl(),zr=!1,Eo=null,(wt.length||vr.length)&&vl()}}function Mu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||tt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:x,trim:m}=r[h]||tt;m&&(s=n.map(A=>pt(A)?A.trim():A)),x&&(s=n.map(Ei))}let l,c=r[l=hi(t)]||r[l=hi(Cr(t))];!c&&i&&(c=r[l=hi(rr(t))]),c&&on(c,e,6,s);const u=r[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,on(u,e,6,s)}}function bl(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},l=!1;if(!$e(e)){const c=u=>{const h=bl(u,t,!0);h&&(l=!0,mt(o,h))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(at(e)&&r.set(e,null),null):(Te(i)?i.forEach(c=>o[c]=null):mt(o,i),at(e)&&r.set(e,o),o)}function ri(e,t){return!e||!Zs(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,rr(t))||Ke(e,t))}let Ct=null,_l=null;function js(e){const t=Ct;return Ct=e,_l=e&&e.type.__scopeId||null,t}function St(e,t=Ct,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&pa(-1);const i=js(t);let o;try{o=e(...s)}finally{js(i),r._d&&pa(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function pi(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:l,attrs:c,emit:u,render:h,renderCache:x,data:m,setupState:A,ctx:S,inheritAttrs:O}=e;let R,B;const E=js(e);try{if(n.shapeFlag&4){const I=s||r;R=cn(h.call(I,I,x,i,A,m,S)),B=c}else{const I=t;R=cn(I.length>1?I(i,{attrs:c,slots:l,emit:u}):I(i,null)),B=t.props?c:Bu(c)}}catch(I){Kr.length=0,ni(I,e,1),R=Fe(Ln)}let $=R;if(B&&O!==!1){const I=Object.keys(B),{shapeFlag:U}=$;I.length&&U&7&&(o&&I.some(go)&&(B=Ru(B,o)),$=er($,B))}return n.dirs&&($=er($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),R=$,js(E),R}const Bu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zs(n))&&((t||(t={}))[n]=e[n]);return t},Ru=(e,t)=>{const n={};for(const r in e)(!go(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function ju(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:l,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ia(r,o,u):!!o;if(c&8){const h=t.dynamicProps;for(let x=0;x<h.length;x++){const m=h[x];if(o[m]!==r[m]&&!ri(u,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?ia(r,o,u):!0:!!o;return!1}function ia(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ri(n,i))return!0}return!1}function Ku({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const wl=e=>e.__isSuspense;function Uu(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Fu(e)}const vs={};function Os(e,t,n){return xl(e,t,n)}function xl(e,t,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=tt){var l;const c=Qc()===((l=bt)==null?void 0:l.scope)?bt:null;let u,h=!1,x=!1;if(kt(e)?(u=()=>e.value,h=Rs(e)):gr(e)?(u=()=>e,r=!0):Te(e)?(x=!0,h=e.some(I=>gr(I)||Rs(I)),u=()=>e.map(I=>{if(kt(I))return I.value;if(gr(I))return Wn(I);if($e(I))return Nn(I,c,2)})):$e(e)?t?u=()=>Nn(e,c,2):u=()=>{if(!(c&&c.isUnmounted))return m&&m(),on(e,c,3,[A])}:u=rn,t&&r){const I=u;u=()=>Wn(I())}let m,A=I=>{m=E.onStop=()=>{Nn(I,c,4)}},S;if(Qr)if(A=rn,t?n&&on(t,c,3,[u(),x?[]:void 0,A]):u(),s==="sync"){const I=Nf();S=I.__watcherHandles||(I.__watcherHandles=[])}else return rn;let O=x?new Array(e.length).fill(vs):vs;const R=()=>{if(E.active)if(t){const I=E.run();(r||h||(x?I.some((U,J)=>Yr(U,O[J])):Yr(I,O)))&&(m&&m(),on(t,c,3,[I,O===vs?void 0:x&&O[0]===vs?[]:O,A]),O=I)}else E.run()};R.allowRecurse=!!t;let B;s==="sync"?B=R:s==="post"?B=()=>vt(R,c&&c.suspense):(R.pre=!0,c&&(R.id=c.uid),B=()=>Po(R));const E=new xo(u,B);t?n?R():O=E.run():s==="post"?vt(E.run.bind(E),c&&c.suspense):E.run();const $=()=>{E.stop(),c&&c.scope&&vo(c.scope.effects,E)};return S&&S.push($),$}function Vu(e,t,n){const r=this.proxy,s=pt(e)?e.includes(".")?kl(r,e):()=>r[e]:e.bind(r,r);let i;$e(t)?i=t:(i=t.handler,n=t);const o=bt;Tr(this);const l=xl(s,i.bind(r),n);return o?Tr(o):Xn(),l}function kl(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Wn(e,t){if(!at(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))Wn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Wn(e[n],t);else if(Ja(e)||yr(e))e.forEach(n=>{Wn(n,t)});else if(za(e))for(const n in e)Wn(e[n],t);return e}function Vt(e,t){const n=Ct;if(n===null)return e;const r=ai(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,l,c,u=tt]=t[i];o&&($e(o)&&(o={mounted:o,updated:o}),o.deep&&Wn(l),s.push({dir:o,instance:r,value:l,oldValue:void 0,arg:c,modifiers:u}))}return e}function Vn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Er(),on(c,n,8,[e.el,l,e,t]),Pr())}}function Cl(e,t){e.shapeFlag&6&&e.component?Cl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Mt(e,t){return $e(e)?(()=>mt({name:e.name},t,{setup:e}))():e}const br=e=>!!e.type.__asyncLoader,Sl=e=>e.type.__isKeepAlive,Hu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ul(),r=n.ctx;if(!r.renderer)return()=>{const E=t.default&&t.default();return E&&E.length===1?E[0]:E};const s=new Map,i=new Set;let o=null;const l=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:x}}}=r,m=x("div");r.activate=(E,$,I,U,J)=>{const H=E.component;u(E,$,I,0,l),c(H.vnode,E,$,I,H,l,U,E.slotScopeIds,J),vt(()=>{H.isDeactivated=!1,H.a&&mr(H.a);const se=E.props&&E.props.onVnodeMounted;se&&zt(se,H.parent,E)},l)},r.deactivate=E=>{const $=E.component;u(E,m,null,1,l),vt(()=>{$.da&&mr($.da);const I=E.props&&E.props.onVnodeUnmounted;I&&zt(I,$.parent,E),$.isDeactivated=!0},l)};function A(E){yi(E),h(E,n,l,!0)}function S(E){s.forEach(($,I)=>{const U=va($.type);U&&(!E||!E(U))&&O(I)})}function O(E){const $=s.get(E);!o||!ur($,o)?A($):o&&yi(o),s.delete(E),i.delete(E)}Os(()=>[e.include,e.exclude],([E,$])=>{E&&S(I=>Fr(E,I)),$&&S(I=>!Fr($,I))},{flush:"post",deep:!0});let R=null;const B=()=>{R!=null&&s.set(R,mi(n.subTree))};return sr(B),Ol(B),as(()=>{s.forEach(E=>{const{subTree:$,suspense:I}=n,U=mi($);if(E.type===U.type&&E.key===U.key){yi(U);const J=U.component.da;J&&vt(J,I);return}A(E)})}),()=>{if(R=null,!t.default)return null;const E=t.default(),$=E[0];if(E.length>1)return o=null,E;if(!Io($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let I=mi($);const U=I.type,J=va(br(I)?I.type.__asyncResolved||{}:U),{include:H,exclude:se,max:k}=e;if(H&&(!J||!Fr(H,J))||se&&J&&Fr(se,J))return o=I,$;const _=I.key==null?U:I.key,V=s.get(_);return I.el&&(I=er(I),$.shapeFlag&128&&($.ssContent=I)),R=_,V?(I.el=V.el,I.component=V.component,I.transition&&Cl(I,I.transition),I.shapeFlag|=512,i.delete(_),i.add(_)):(i.add(_),k&&i.size>parseInt(k,10)&&O(i.values().next().value)),I.shapeFlag|=256,o=I,wl($.type)?$:I}}},qu=Hu;function Fr(e,t){return Te(e)?e.some(n=>Fr(n,t)):pt(e)?e.split(",").includes(t):jc(e)?e.test(t):!1}function Ju(e,t){Dl(e,"a",t)}function Yu(e,t){Dl(e,"da",t)}function Dl(e,t,n=bt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(si(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Sl(s.parent.vnode)&&Wu(r,t,n,s),s=s.parent}}function Wu(e,t,n,r){const s=si(t,e,r,!0);El(()=>{vo(r[t],s)},n)}function yi(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function mi(e){return e.shapeFlag&128?e.ssContent:e}function si(e,t,n=bt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Er(),Tr(n);const l=on(t,n,e,o);return Xn(),Pr(),l});return r?s.unshift(i):s.push(i),i}}const Cn=e=>(t,n=bt)=>(!Qr||e==="sp")&&si(e,(...r)=>t(...r),n),Tl=Cn("bm"),sr=Cn("m"),zu=Cn("bu"),Ol=Cn("u"),as=Cn("bum"),El=Cn("um"),Gu=Cn("sp"),Xu=Cn("rtg"),Qu=Cn("rtc");function Zu(e,t=bt){si("ec",e,t)}const ef=Symbol.for("v-ndc");function vn(e,t,n,r){let s;const i=n&&n[r];if(Te(e)||pt(e)){s=new Array(e.length);for(let o=0,l=e.length;o<l;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(at(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>t(o,l,void 0,i&&i[l]));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=t(e[u],u,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}function Pl(e,t,n={},r,s){if(Ct.isCE||Ct.parent&&br(Ct.parent)&&Ct.parent.isCE)return t!=="default"&&(n.name=t),Fe("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),re();const o=i&&Al(i(n)),l=Ft(nt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Al(e){return e.some(t=>Io(t)?!(t.type===Ln||t.type===nt&&!Al(t.children)):!0)?e:null}const Li=e=>e?Vl(e)?ai(e)||e.proxy:Li(e.parent):null,jr=mt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Li(e.parent),$root:e=>Li(e.root),$emit:e=>e.emit,$options:e=>Ao(e),$forceUpdate:e=>e.f||(e.f=()=>Po(e.update)),$nextTick:e=>e.n||(e.n=$u.bind(e.proxy)),$watch:e=>Vu.bind(e)}),gi=(e,t)=>e!==tt&&!e.__isScriptSetup&&Ke(e,t),tf={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const A=o[t];if(A!==void 0)switch(A){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(gi(r,t))return o[t]=1,r[t];if(s!==tt&&Ke(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&Ke(u,t))return o[t]=3,i[t];if(n!==tt&&Ke(n,t))return o[t]=4,n[t];Mi&&(o[t]=0)}}const h=jr[t];let x,m;if(h)return t==="$attrs"&&Lt(e,"get",t),h(e);if((x=l.__cssModules)&&(x=x[t]))return x;if(n!==tt&&Ke(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Ke(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return gi(s,t)?(s[t]=n,!0):r!==tt&&Ke(r,t)?(r[t]=n,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!n[o]||e!==tt&&Ke(e,o)||gi(t,o)||(l=i[0])&&Ke(l,o)||Ke(r,o)||Ke(jr,o)||Ke(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ke(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function nf(){return rf().slots}function rf(){const e=Ul();return e.setupContext||(e.setupContext=ql(e))}function oa(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Mi=!0;function sf(e){const t=Ao(e),n=e.proxy,r=e.ctx;Mi=!1,t.beforeCreate&&aa(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:x,mounted:m,beforeUpdate:A,updated:S,activated:O,deactivated:R,beforeDestroy:B,beforeUnmount:E,destroyed:$,unmounted:I,render:U,renderTracked:J,renderTriggered:H,errorCaptured:se,serverPrefetch:k,expose:_,inheritAttrs:V,components:j,directives:_e,filters:ue}=t;if(u&&of(u,r,null),o)for(const he in o){const ce=o[he];$e(ce)&&(r[he]=ce.bind(n))}if(s){const he=s.call(n,n);at(he)&&(e.data=Kn(he))}if(Mi=!0,i)for(const he in i){const ce=i[he],We=$e(ce)?ce.bind(n,n):$e(ce.get)?ce.get.bind(n,n):rn,Ye=!$e(ce)&&$e(ce.set)?ce.set.bind(n):rn,st=Lo({get:We,set:Ye});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>st.value,set:qe=>st.value=qe})}if(l)for(const he in l)$l(l[he],r,n,he);if(c){const he=$e(c)?c.call(n):c;Reflect.ownKeys(he).forEach(ce=>{df(ce,he[ce])})}h&&aa(h,e,"c");function be(he,ce){Te(ce)?ce.forEach(We=>he(We.bind(n))):ce&&he(ce.bind(n))}if(be(Tl,x),be(sr,m),be(zu,A),be(Ol,S),be(Ju,O),be(Yu,R),be(Zu,se),be(Qu,J),be(Xu,H),be(as,E),be(El,I),be(Gu,k),Te(_))if(_.length){const he=e.exposed||(e.exposed={});_.forEach(ce=>{Object.defineProperty(he,ce,{get:()=>n[ce],set:We=>n[ce]=We})})}else e.exposed||(e.exposed={});U&&e.render===rn&&(e.render=U),V!=null&&(e.inheritAttrs=V),j&&(e.components=j),_e&&(e.directives=_e)}function of(e,t,n=rn){Te(e)&&(e=Bi(e));for(const r in e){const s=e[r];let i;at(s)?"default"in s?i=Es(s.from||r,s.default,!0):i=Es(s.from||r):i=Es(s),kt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function aa(e,t,n){on(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function $l(e,t,n,r){const s=r.includes(".")?kl(n,r):()=>n[r];if(pt(e)){const i=t[e];$e(i)&&Os(s,i)}else if($e(e))Os(s,e.bind(n));else if(at(e))if(Te(e))e.forEach(i=>$l(i,t,n,r));else{const i=$e(e.handler)?e.handler.bind(n):t[e.handler];$e(i)&&Os(s,i,e)}}function Ao(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(u=>Ks(c,u,o,!0)),Ks(c,t,o)),at(t)&&i.set(t,c),c}function Ks(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ks(e,i,n,!0),s&&s.forEach(o=>Ks(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=af[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const af={data:la,props:ca,emits:ca,methods:Lr,computed:Lr,beforeCreate:Pt,created:Pt,beforeMount:Pt,mounted:Pt,beforeUpdate:Pt,updated:Pt,beforeDestroy:Pt,beforeUnmount:Pt,destroyed:Pt,unmounted:Pt,activated:Pt,deactivated:Pt,errorCaptured:Pt,serverPrefetch:Pt,components:Lr,directives:Lr,watch:cf,provide:la,inject:lf};function la(e,t){return t?e?function(){return mt($e(e)?e.call(this,this):e,$e(t)?t.call(this,this):t)}:t:e}function lf(e,t){return Lr(Bi(e),Bi(t))}function Bi(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Pt(e,t){return e?[...new Set([].concat(e,t))]:t}function Lr(e,t){return e?mt(Object.create(null),e,t):t}function ca(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:mt(Object.create(null),oa(e),oa(t??{})):t}function cf(e,t){if(!e)return t;if(!t)return e;const n=mt(Object.create(null),e);for(const r in t)n[r]=Pt(e[r],t[r]);return n}function Il(){return{app:null,config:{isNativeTag:Mc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uf=0;function ff(e,t){return function(r,s=null){$e(r)||(r=mt({},r)),s!=null&&!at(s)&&(s=null);const i=Il(),o=new Set;let l=!1;const c=i.app={_uid:uf++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Ff,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&$e(u.install)?(o.add(u),u.install(c,...h)):$e(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,x){if(!l){const m=Fe(r,s);return m.appContext=i,h&&t?t(m,u):e(m,u,x),l=!0,c._container=u,u.__vue_app__=c,ai(m.component)||m.component.proxy}},unmount(){l&&(e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){Us=c;try{return u()}finally{Us=null}}};return c}}let Us=null;function df(e,t){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[e]=t}}function Es(e,t,n=!1){const r=bt||Ct;if(r||Us){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Us._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&$e(t)?t.call(r&&r.proxy):t}}function hf(e,t,n,r=!1){const s={},i={};Bs(i,oi,1),e.propsDefaults=Object.create(null),Nl(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Su(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function pf(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,l=Je(s),[c]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let x=0;x<h.length;x++){let m=h[x];if(ri(e.emitsOptions,m))continue;const A=t[m];if(c)if(Ke(i,m))A!==i[m]&&(i[m]=A,u=!0);else{const S=Cr(m);s[S]=Ri(c,l,S,A,e,!1)}else A!==i[m]&&(i[m]=A,u=!0)}}}else{Nl(e,t,s,i)&&(u=!0);let h;for(const x in l)(!t||!Ke(t,x)&&((h=rr(x))===x||!Ke(t,h)))&&(c?n&&(n[x]!==void 0||n[h]!==void 0)&&(s[x]=Ri(c,l,x,void 0,e,!0)):delete s[x]);if(i!==l)for(const x in i)(!t||!Ke(t,x))&&(delete i[x],u=!0)}u&&xn(e,"set","$attrs")}function Nl(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(Ts(c))continue;const u=t[c];let h;s&&Ke(s,h=Cr(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:ri(e.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Je(n),u=l||tt;for(let h=0;h<i.length;h++){const x=i[h];n[x]=Ri(s,c,x,u[x],e,!Ke(u,x))}}return o}function Ri(e,t,n,r,s,i){const o=e[n];if(o!=null){const l=Ke(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&$e(c)){const{propsDefaults:u}=s;n in u?r=u[n]:(Tr(s),r=u[n]=c.call(null,t),Xn())}else r=c}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===rr(n))&&(r=!0))}return r}function Fl(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},l=[];let c=!1;if(!$e(e)){const h=x=>{c=!0;const[m,A]=Fl(x,t,!0);mt(o,m),A&&l.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!c)return at(e)&&r.set(e,pr),pr;if(Te(i))for(let h=0;h<i.length;h++){const x=Cr(i[h]);ua(x)&&(o[x]=tt)}else if(i)for(const h in i){const x=Cr(h);if(ua(x)){const m=i[h],A=o[x]=Te(m)||$e(m)?{type:m}:mt({},m);if(A){const S=ha(Boolean,A.type),O=ha(String,A.type);A[0]=S>-1,A[1]=O<0||S<O,(S>-1||Ke(A,"default"))&&l.push(x)}}}const u=[o,l];return at(e)&&r.set(e,u),u}function ua(e){return e[0]!=="$"}function fa(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function da(e,t){return fa(e)===fa(t)}function ha(e,t){return Te(t)?t.findIndex(n=>da(n,e)):$e(t)&&da(t,e)?0:-1}const Ll=e=>e[0]==="_"||e==="$stable",$o=e=>Te(e)?e.map(cn):[cn(e)],yf=(e,t,n)=>{if(t._n)return t;const r=St((...s)=>$o(t(...s)),n);return r._c=!1,r},Ml=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ll(s))continue;const i=e[s];if($e(i))t[s]=yf(s,i,r);else if(i!=null){const o=$o(i);t[s]=()=>o}}},Bl=(e,t)=>{const n=$o(t);e.slots.default=()=>n},mf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Je(t),Bs(t,"_",n)):Ml(t,e.slots={})}else e.slots={},t&&Bl(e,t);Bs(e.slots,oi,1)},gf=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=tt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:(mt(s,t),!n&&l===1&&delete s._):(i=!t.$stable,Ml(t,s)),o=t}else t&&(Bl(e,t),o={default:1});if(i)for(const l in s)!Ll(l)&&!(l in o)&&delete s[l]};function ji(e,t,n,r,s=!1){if(Te(e)){e.forEach((m,A)=>ji(m,t&&(Te(t)?t[A]:t),n,r,s));return}if(br(r)&&!s)return;const i=r.shapeFlag&4?ai(r.component)||r.component.proxy:r.el,o=s?null:i,{i:l,r:c}=e,u=t&&t.r,h=l.refs===tt?l.refs={}:l.refs,x=l.setupState;if(u!=null&&u!==c&&(pt(u)?(h[u]=null,Ke(x,u)&&(x[u]=null)):kt(u)&&(u.value=null)),$e(c))Nn(c,l,12,[o,h]);else{const m=pt(c),A=kt(c);if(m||A){const S=()=>{if(e.f){const O=m?Ke(x,c)?x[c]:h[c]:c.value;s?Te(O)&&vo(O,i):Te(O)?O.includes(i)||O.push(i):m?(h[c]=[i],Ke(x,c)&&(x[c]=h[c])):(c.value=[i],e.k&&(h[e.k]=c.value))}else m?(h[c]=o,Ke(x,c)&&(x[c]=o)):A&&(c.value=o,e.k&&(h[e.k]=o))};o?(S.id=-1,vt(S,n)):S()}}}const vt=Uu;function vf(e){return bf(e)}function bf(e,t){const n=Pi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:x,nextSibling:m,setScopeId:A=rn,insertStaticContent:S}=e,O=(a,f,p,y=null,v=null,w=null,C=!1,P=null,L=!!f.dynamicChildren)=>{if(a===f)return;a&&!ur(a,f)&&(y=K(a),qe(a,v,w,!0),a=null),f.patchFlag===-2&&(L=!1,f.dynamicChildren=null);const{type:M,ref:W,shapeFlag:q}=f;switch(M){case ii:R(a,f,p,y);break;case Ln:B(a,f,p,y);break;case vi:a==null&&E(f,p,y,C);break;case nt:j(a,f,p,y,v,w,C,P,L);break;default:q&1?U(a,f,p,y,v,w,C,P,L):q&6?_e(a,f,p,y,v,w,C,P,L):(q&64||q&128)&&M.process(a,f,p,y,v,w,C,P,L,Y)}W!=null&&v&&ji(W,a&&a.ref,w,f||a,!f)},R=(a,f,p,y)=>{if(a==null)r(f.el=l(f.children),p,y);else{const v=f.el=a.el;f.children!==a.children&&u(v,f.children)}},B=(a,f,p,y)=>{a==null?r(f.el=c(f.children||""),p,y):f.el=a.el},E=(a,f,p,y)=>{[a.el,a.anchor]=S(a.children,f,p,y,a.el,a.anchor)},$=({el:a,anchor:f},p,y)=>{let v;for(;a&&a!==f;)v=m(a),r(a,p,y),a=v;r(f,p,y)},I=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=m(a),s(a),a=p;s(f)},U=(a,f,p,y,v,w,C,P,L)=>{C=C||f.type==="svg",a==null?J(f,p,y,v,w,C,P,L):k(a,f,v,w,C,P,L)},J=(a,f,p,y,v,w,C,P)=>{let L,M;const{type:W,props:q,shapeFlag:G,transition:Z,dirs:oe}=a;if(L=a.el=o(a.type,w,q&&q.is,q),G&8?h(L,a.children):G&16&&se(a.children,L,null,y,v,w&&W!=="foreignObject",C,P),oe&&Vn(a,null,y,"created"),H(L,a,a.scopeId,C,y),q){for(const ve in q)ve!=="value"&&!Ts(ve)&&i(L,ve,null,q[ve],w,a.children,y,v,Re);"value"in q&&i(L,"value",null,q.value),(M=q.onVnodeBeforeMount)&&zt(M,y,a)}oe&&Vn(a,null,y,"beforeMount");const pe=(!v||v&&!v.pendingBranch)&&Z&&!Z.persisted;pe&&Z.beforeEnter(L),r(L,f,p),((M=q&&q.onVnodeMounted)||pe||oe)&&vt(()=>{M&&zt(M,y,a),pe&&Z.enter(L),oe&&Vn(a,null,y,"mounted")},v)},H=(a,f,p,y,v)=>{if(p&&A(a,p),y)for(let w=0;w<y.length;w++)A(a,y[w]);if(v){let w=v.subTree;if(f===w){const C=v.vnode;H(a,C,C.scopeId,C.slotScopeIds,v.parent)}}},se=(a,f,p,y,v,w,C,P,L=0)=>{for(let M=L;M<a.length;M++){const W=a[M]=P?On(a[M]):cn(a[M]);O(null,W,f,p,y,v,w,C,P)}},k=(a,f,p,y,v,w,C)=>{const P=f.el=a.el;let{patchFlag:L,dynamicChildren:M,dirs:W}=f;L|=a.patchFlag&16;const q=a.props||tt,G=f.props||tt;let Z;p&&Hn(p,!1),(Z=G.onVnodeBeforeUpdate)&&zt(Z,p,f,a),W&&Vn(f,a,p,"beforeUpdate"),p&&Hn(p,!0);const oe=v&&f.type!=="foreignObject";if(M?_(a.dynamicChildren,M,P,p,y,oe,w):C||ce(a,f,P,null,p,y,oe,w,!1),L>0){if(L&16)V(P,f,q,G,p,y,v);else if(L&2&&q.class!==G.class&&i(P,"class",null,G.class,v),L&4&&i(P,"style",q.style,G.style,v),L&8){const pe=f.dynamicProps;for(let ve=0;ve<pe.length;ve++){const ne=pe[ve],g=q[ne],d=G[ne];(d!==g||ne==="value")&&i(P,ne,g,d,v,a.children,p,y,Re)}}L&1&&a.children!==f.children&&h(P,f.children)}else!C&&M==null&&V(P,f,q,G,p,y,v);((Z=G.onVnodeUpdated)||W)&&vt(()=>{Z&&zt(Z,p,f,a),W&&Vn(f,a,p,"updated")},y)},_=(a,f,p,y,v,w,C)=>{for(let P=0;P<f.length;P++){const L=a[P],M=f[P],W=L.el&&(L.type===nt||!ur(L,M)||L.shapeFlag&70)?x(L.el):p;O(L,M,W,null,y,v,w,C,!0)}},V=(a,f,p,y,v,w,C)=>{if(p!==y){if(p!==tt)for(const P in p)!Ts(P)&&!(P in y)&&i(a,P,p[P],null,C,f.children,v,w,Re);for(const P in y){if(Ts(P))continue;const L=y[P],M=p[P];L!==M&&P!=="value"&&i(a,P,M,L,C,f.children,v,w,Re)}"value"in y&&i(a,"value",p.value,y.value)}},j=(a,f,p,y,v,w,C,P,L)=>{const M=f.el=a?a.el:l(""),W=f.anchor=a?a.anchor:l("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(P=P?P.concat(Z):Z),a==null?(r(M,p,y),r(W,p,y),se(f.children,p,W,v,w,C,P,L)):q>0&&q&64&&G&&a.dynamicChildren?(_(a.dynamicChildren,G,p,v,w,C,P),(f.key!=null||v&&f===v.subTree)&&Rl(a,f,!0)):ce(a,f,p,W,v,w,C,P,L)},_e=(a,f,p,y,v,w,C,P,L)=>{f.slotScopeIds=P,a==null?f.shapeFlag&512?v.ctx.activate(f,p,y,C,L):ue(f,p,y,v,w,C,L):Ie(a,f,L)},ue=(a,f,p,y,v,w,C)=>{const P=a.component=Of(a,y,v);if(Sl(a)&&(P.ctx.renderer=Y),Ef(P),P.asyncDep){if(v&&v.registerDep(P,be),!a.el){const L=P.subTree=Fe(Ln);B(null,L,f,p)}return}be(P,a,f,p,v,w,C)},Ie=(a,f,p)=>{const y=f.component=a.component;if(ju(a,f,p))if(y.asyncDep&&!y.asyncResolved){he(y,f,p);return}else y.next=f,Nu(y.update),y.update();else f.el=a.el,y.vnode=f},be=(a,f,p,y,v,w,C)=>{const P=()=>{if(a.isMounted){let{next:W,bu:q,u:G,parent:Z,vnode:oe}=a,pe=W,ve;Hn(a,!1),W?(W.el=oe.el,he(a,W,C)):W=oe,q&&mr(q),(ve=W.props&&W.props.onVnodeBeforeUpdate)&&zt(ve,Z,W,oe),Hn(a,!0);const ne=pi(a),g=a.subTree;a.subTree=ne,O(g,ne,x(g.el),K(g),a,v,w),W.el=ne.el,pe===null&&Ku(a,ne.el),G&&vt(G,v),(ve=W.props&&W.props.onVnodeUpdated)&&vt(()=>zt(ve,Z,W,oe),v)}else{let W;const{el:q,props:G}=f,{bm:Z,m:oe,parent:pe}=a,ve=br(f);if(Hn(a,!1),Z&&mr(Z),!ve&&(W=G&&G.onVnodeBeforeMount)&&zt(W,pe,f),Hn(a,!0),q&&D){const ne=()=>{a.subTree=pi(a),D(q,a.subTree,a,v,null)};ve?f.type.__asyncLoader().then(()=>!a.isUnmounted&&ne()):ne()}else{const ne=a.subTree=pi(a);O(null,ne,p,y,a,v,w),f.el=ne.el}if(oe&&vt(oe,v),!ve&&(W=G&&G.onVnodeMounted)){const ne=f;vt(()=>zt(W,pe,ne),v)}(f.shapeFlag&256||pe&&br(pe.vnode)&&pe.vnode.shapeFlag&256)&&a.a&&vt(a.a,v),a.isMounted=!0,f=p=y=null}},L=a.effect=new xo(P,()=>Po(M),a.scope),M=a.update=()=>L.run();M.id=a.uid,Hn(a,!0),M()},he=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,pf(a,f.props,y,p),gf(a,f.children,p),Er(),sa(),Pr()},ce=(a,f,p,y,v,w,C,P,L=!1)=>{const M=a&&a.children,W=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Ye(M,q,p,y,v,w,C,P,L);return}else if(G&256){We(M,q,p,y,v,w,C,P,L);return}}Z&8?(W&16&&Re(M,v,w),q!==M&&h(p,q)):W&16?Z&16?Ye(M,q,p,y,v,w,C,P,L):Re(M,v,w,!0):(W&8&&h(p,""),Z&16&&se(q,p,y,v,w,C,P,L))},We=(a,f,p,y,v,w,C,P,L)=>{a=a||pr,f=f||pr;const M=a.length,W=f.length,q=Math.min(M,W);let G;for(G=0;G<q;G++){const Z=f[G]=L?On(f[G]):cn(f[G]);O(a[G],Z,p,null,v,w,C,P,L)}M>W?Re(a,v,w,!0,!1,q):se(f,p,y,v,w,C,P,L,q)},Ye=(a,f,p,y,v,w,C,P,L)=>{let M=0;const W=f.length;let q=a.length-1,G=W-1;for(;M<=q&&M<=G;){const Z=a[M],oe=f[M]=L?On(f[M]):cn(f[M]);if(ur(Z,oe))O(Z,oe,p,null,v,w,C,P,L);else break;M++}for(;M<=q&&M<=G;){const Z=a[q],oe=f[G]=L?On(f[G]):cn(f[G]);if(ur(Z,oe))O(Z,oe,p,null,v,w,C,P,L);else break;q--,G--}if(M>q){if(M<=G){const Z=G+1,oe=Z<W?f[Z].el:y;for(;M<=G;)O(null,f[M]=L?On(f[M]):cn(f[M]),p,oe,v,w,C,P,L),M++}}else if(M>G)for(;M<=q;)qe(a[M],v,w,!0),M++;else{const Z=M,oe=M,pe=new Map;for(M=oe;M<=G;M++){const Q=f[M]=L?On(f[M]):cn(f[M]);Q.key!=null&&pe.set(Q.key,M)}let ve,ne=0;const g=G-oe+1;let d=!1,b=0;const T=new Array(g);for(M=0;M<g;M++)T[M]=0;for(M=Z;M<=q;M++){const Q=a[M];if(ne>=g){qe(Q,v,w,!0);continue}let ee;if(Q.key!=null)ee=pe.get(Q.key);else for(ve=oe;ve<=G;ve++)if(T[ve-oe]===0&&ur(Q,f[ve])){ee=ve;break}ee===void 0?qe(Q,v,w,!0):(T[ee-oe]=M+1,ee>=b?b=ee:d=!0,O(Q,f[ee],p,null,v,w,C,P,L),ne++)}const N=d?_f(T):pr;for(ve=N.length-1,M=g-1;M>=0;M--){const Q=oe+M,ee=f[Q],me=Q+1<W?f[Q+1].el:y;T[M]===0?O(null,ee,p,me,v,w,C,P,L):d&&(ve<0||M!==N[ve]?st(ee,p,me,2):ve--)}}},st=(a,f,p,y,v=null)=>{const{el:w,type:C,transition:P,children:L,shapeFlag:M}=a;if(M&6){st(a.component.subTree,f,p,y);return}if(M&128){a.suspense.move(f,p,y);return}if(M&64){C.move(a,f,p,Y);return}if(C===nt){r(w,f,p);for(let q=0;q<L.length;q++)st(L[q],f,p,y);r(a.anchor,f,p);return}if(C===vi){$(a,f,p);return}if(y!==2&&M&1&&P)if(y===0)P.beforeEnter(w),r(w,f,p),vt(()=>P.enter(w),v);else{const{leave:q,delayLeave:G,afterLeave:Z}=P,oe=()=>r(w,f,p),pe=()=>{q(w,()=>{oe(),Z&&Z()})};G?G(w,oe,pe):pe()}else r(w,f,p)},qe=(a,f,p,y=!1,v=!1)=>{const{type:w,props:C,ref:P,children:L,dynamicChildren:M,shapeFlag:W,patchFlag:q,dirs:G}=a;if(P!=null&&ji(P,null,p,a,!0),W&256){f.ctx.deactivate(a);return}const Z=W&1&&G,oe=!br(a);let pe;if(oe&&(pe=C&&C.onVnodeBeforeUnmount)&&zt(pe,f,a),W&6)de(a.component,p,y);else{if(W&128){a.suspense.unmount(p,y);return}Z&&Vn(a,null,f,"beforeUnmount"),W&64?a.type.remove(a,f,p,v,Y,y):M&&(w!==nt||q>0&&q&64)?Re(M,f,p,!1,!0):(w===nt&&q&384||!v&&W&16)&&Re(L,f,p),y&&Bt(a)}(oe&&(pe=C&&C.onVnodeUnmounted)||Z)&&vt(()=>{pe&&zt(pe,f,a),Z&&Vn(a,null,f,"unmounted")},p)},Bt=a=>{const{type:f,el:p,anchor:y,transition:v}=a;if(f===nt){ge(p,y);return}if(f===vi){I(a);return}const w=()=>{s(p),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(a.shapeFlag&1&&v&&!v.persisted){const{leave:C,delayLeave:P}=v,L=()=>C(p,w);P?P(a.el,w,L):L()}else w()},ge=(a,f)=>{let p;for(;a!==f;)p=m(a),s(a),a=p;s(f)},de=(a,f,p)=>{const{bum:y,scope:v,update:w,subTree:C,um:P}=a;y&&mr(y),v.stop(),w&&(w.active=!1,qe(C,a,f,p)),P&&vt(P,f),vt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Re=(a,f,p,y=!1,v=!1,w=0)=>{for(let C=w;C<a.length;C++)qe(a[C],f,p,y,v)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():m(a.anchor||a.el),z=(a,f,p)=>{a==null?f._vnode&&qe(f._vnode,null,null,!0):O(f._vnode||null,a,f,null,null,null,p),sa(),gl(),f._vnode=a},Y={p:O,um:qe,m:st,r:Bt,mt:ue,mc:se,pc:ce,pbc:_,n:K,o:e};let X,D;return t&&([X,D]=t(Y)),{render:z,hydrate:X,createApp:ff(z,X)}}function Hn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Rl(e,t,n=!1){const r=e.children,s=t.children;if(Te(r)&&Te(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=On(s[i]),l.el=o.el),n||Rl(o,l)),l.type===ii&&(l.el=o.el)}}function _f(e){const t=e.slice(),n=[0];let r,s,i,o,l;const c=e.length;for(r=0;r<c;r++){const u=e[r];if(u!==0){if(s=n[n.length-1],e[s]<u){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,e[n[l]]<u?i=l+1:o=l;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}const wf=e=>e.__isTeleport,nt=Symbol.for("v-fgt"),ii=Symbol.for("v-txt"),Ln=Symbol.for("v-cmt"),vi=Symbol.for("v-stc"),Kr=[];let tn=null;function re(e=!1){Kr.push(tn=e?null:[])}function xf(){Kr.pop(),tn=Kr[Kr.length-1]||null}let Xr=1;function pa(e){Xr+=e}function jl(e){return e.dynamicChildren=Xr>0?tn||pr:null,xf(),Xr>0&&tn&&tn.push(e),e}function le(e,t,n,r,s,i){return jl(F(e,t,n,r,s,i,!0))}function Ft(e,t,n,r,s){return jl(Fe(e,t,n,r,s,!0))}function Io(e){return e?e.__v_isVNode===!0:!1}function ur(e,t){return e.type===t.type&&e.key===t.key}const oi="__vInternal",Kl=({key:e})=>e??null,Ps=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?pt(e)||kt(e)||$e(e)?{i:Ct,r:e,k:t,f:!!n}:e:null);function F(e,t=null,n=null,r=0,s=null,i=e===nt?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Kl(t),ref:t&&Ps(t),scopeId:_l,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ct};return l?(No(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=pt(n)?8:16),Xr>0&&!o&&tn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&tn.push(c),c}const Fe=kf;function kf(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===ef)&&(e=Ln),Io(e)){const l=er(e,t,!0);return n&&No(l,n),Xr>0&&!i&&tn&&(l.shapeFlag&6?tn[tn.indexOf(e)]=l:tn.push(l)),l.patchFlag|=-2,l}if($f(e)&&(e=e.__vccOpts),t){t=Cf(t);let{class:l,style:c}=t;l&&!pt(l)&&(t.class=_t(l)),at(c)&&(fl(c)&&!Te(c)&&(c=mt({},c)),t.style=Sr(c))}const o=pt(e)?1:wl(e)?128:wf(e)?64:at(e)?4:$e(e)?2:0;return F(e,t,n,r,s,o,i,!0)}function Cf(e){return e?fl(e)||oi in e?mt({},e):e:null}function er(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,l=t?Sf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Kl(l),ref:t&&t.ref?n&&s?Te(s)?s.concat(Ps(t)):[s,Ps(t)]:Ps(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==nt?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&er(e.ssContent),ssFallback:e.ssFallback&&er(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Tt(e=" ",t=0){return Fe(ii,null,e,t)}function Be(e="",t=!1){return t?(re(),Ft(Ln,null,e)):Fe(Ln,null,e)}function cn(e){return e==null||typeof e=="boolean"?Fe(Ln):Te(e)?Fe(nt,null,e.slice()):typeof e=="object"?On(e):Fe(ii,null,String(e))}function On(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:er(e)}function No(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),No(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(oi in t)?t._ctx=Ct:s===3&&Ct&&(Ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else $e(t)?(t={default:t,_ctx:Ct},n=32):(t=String(t),r&64?(n=16,t=[Tt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Sf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=_t([t.class,r.class]));else if(s==="style")t.style=Sr([t.style,r.style]);else if(Zs(s)){const i=t[s],o=r[s];o&&i!==o&&!(Te(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function zt(e,t,n,r=null){on(e,t,7,[n,r])}const Df=Il();let Tf=0;function Of(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Df,i={uid:Tf++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Za(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fl(r,s),emitsOptions:bl(r,s),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Mu.bind(null,i),e.ce&&e.ce(i),i}let bt=null;const Ul=()=>bt||Ct;let Fo,ar,ya="__VUE_INSTANCE_SETTERS__";(ar=Pi()[ya])||(ar=Pi()[ya]=[]),ar.push(e=>bt=e),Fo=e=>{ar.length>1?ar.forEach(t=>t(e)):ar[0](e)};const Tr=e=>{Fo(e),e.scope.on()},Xn=()=>{bt&&bt.scope.off(),Fo(null)};function Vl(e){return e.vnode.shapeFlag&4}let Qr=!1;function Ef(e,t=!1){Qr=t;const{props:n,children:r}=e.vnode,s=Vl(e);hf(e,n,s,t),mf(e,r);const i=s?Pf(e,t):void 0;return Qr=!1,i}function Pf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=To(new Proxy(e.ctx,tf));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?ql(e):null;Tr(e),Er();const i=Nn(r,e,0,[e.props,s]);if(Pr(),Xn(),Ya(i)){if(i.then(Xn,Xn),t)return i.then(o=>{ma(e,o,t)}).catch(o=>{ni(o,e,0)});e.asyncDep=i}else ma(e,i,t)}else Hl(e,t)}function ma(e,t,n){$e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:at(t)&&(e.setupState=pl(t)),Hl(e,n)}let ga;function Hl(e,t,n){const r=e.type;if(!e.render){if(!t&&ga&&!r.render){const s=r.template||Ao(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:c}=r,u=mt(mt({isCustomElement:i,delimiters:l},o),c);r.render=ga(s,u)}}e.render=r.render||rn}Tr(e),Er(),sf(e),Pr(),Xn()}function Af(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Lt(e,"get","$attrs"),t[n]}}))}function ql(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Af(e)},slots:e.slots,emit:e.emit,expose:t}}function ai(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(pl(To(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in jr)return jr[n](e)},has(t,n){return n in t||n in jr}}))}function va(e,t=!0){return $e(e)?e.displayName||e.name:e.name||t&&e.__name}function $f(e){return $e(e)&&"__vccOpts"in e}const Lo=(e,t)=>Pu(e,t,Qr),If=Symbol.for("v-scx"),Nf=()=>Es(If),Ff="3.3.4",Lf="http://www.w3.org/2000/svg",Yn=typeof document<"u"?document:null,ba=Yn&&Yn.createElement("template"),Mf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t?Yn.createElementNS(Lf,e):Yn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Yn.createTextNode(e),createComment:e=>Yn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ba.innerHTML=r?`<svg>${e}</svg>`:e;const l=ba.content;if(r){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Bf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Rf(e,t,n){const r=e.style,s=pt(n);if(n&&!s){if(t&&!pt(t))for(const i in t)n[i]==null&&Ki(r,i,"");for(const i in n)Ki(r,i,n[i])}else{const i=r.display;s?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const _a=/\s*!important$/;function Ki(e,t,n){if(Te(n))n.forEach(r=>Ki(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=jf(e,t);_a.test(n)?e.setProperty(rr(r),n.replace(_a,""),"important"):e[r]=n}}const wa=["Webkit","Moz","ms"],bi={};function jf(e,t){const n=bi[t];if(n)return n;let r=Cr(t);if(r!=="filter"&&r in e)return bi[t]=r;r=Ga(r);for(let s=0;s<wa.length;s++){const i=wa[s]+r;if(i in e)return bi[t]=i}return t}const xa="http://www.w3.org/1999/xlink";function Kf(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xa,t.slice(6,t.length)):e.setAttributeNS(xa,t,n);else{const i=zc(t);n==null||i&&!Xa(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Uf(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const u=l==="OPTION"?e.getAttribute("value"):e.value,h=n??"";u!==h&&(e.value=h),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=Xa(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function fr(e,t,n,r){e.addEventListener(t,n,r)}function Vf(e,t,n,r){e.removeEventListener(t,n,r)}function Hf(e,t,n,r,s=null){const i=e._vei||(e._vei={}),o=i[t];if(r&&o)o.value=r;else{const[l,c]=qf(t);if(r){const u=i[t]=Wf(r,s);fr(e,l,u,c)}else o&&(Vf(e,l,o,c),i[t]=void 0)}}const ka=/(?:Once|Passive|Capture)$/;function qf(e){let t;if(ka.test(e)){t={};let r;for(;r=e.match(ka);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rr(e.slice(2)),t]}let _i=0;const Jf=Promise.resolve(),Yf=()=>_i||(Jf.then(()=>_i=0),_i=Date.now());function Wf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;on(zf(r,n.value),t,5,[r])};return n.value=e,n.attached=Yf(),n}function zf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Ca=/^on[a-z]/,Gf=(e,t,n,r,s=!1,i,o,l,c)=>{t==="class"?Bf(e,r,s):t==="style"?Rf(e,n,r):Zs(t)?go(t)||Hf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xf(e,t,r,s))?Uf(e,t,r,i,o,l,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Kf(e,t,r,s))};function Xf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Ca.test(t)&&$e(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Ca.test(t)&&pt(n)?!1:t in e}const Sa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>mr(t,n):t};function Qf(e){e.target.composing=!0}function Da(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ht={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e._assign=Sa(s);const i=r||s.props&&s.props.type==="number";fr(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Ei(l)),e._assign(l)}),n&&fr(e,"change",()=>{e.value=e.value.trim()}),t||(fr(e,"compositionstart",Qf),fr(e,"compositionend",Da),fr(e,"change",Da))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e._assign=Sa(i),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(s||e.type==="number")&&Ei(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Zf=["ctrl","shift","alt","meta"],ed={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Zf.some(n=>e[`${n}Key`]&&!t.includes(n))},ut=(e,t)=>(n,...r)=>{for(let s=0;s<t.length;s++){const i=ed[t[s]];if(i&&i(n,t))return}return e(n,...r)},td={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},nd=(e,t)=>n=>{if(!("key"in n))return;const r=rr(n.key);if(t.some(s=>s===r||td[s]===r))return e(n)},rd=mt({patchProp:Gf},Mf);let Ta;function sd(){return Ta||(Ta=vf(rd))}const id=(...e)=>{const t=sd().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=od(r);if(!s)return;const i=t._component;!$e(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function od(e){return pt(e)?document.querySelector(e):e}var ad=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const ld=Symbol();var Oa;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Oa||(Oa={}));function cd(){const e=Gc(!0),t=e.run(()=>sn({}));let n=[],r=[];const s=To({install(i){s._a=i,i.provide(ld,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!ad?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const ud={key:0,class:"button-loader"},fd=F("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),dd=[fd],At=Mt({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=nf();return(r,s)=>(re(),le("button",{class:_t(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(re(),le("div",ud,dd)):Be("",!0),t.icon?(re(),le("i",{key:1,class:_t([{"opacity-0":t.loading,"mr-2":te(n).default},"font-icon"])},Pe(t.icon),3)):Be("",!0),te(n).default?(re(),le("span",{key:2,class:_t({"opacity-0":t.loading})},[Pl(r.$slots,"default")],2)):Be("",!0)],2))}});var Pn=(e=>(e.ProfilesSearch="profiles_search",e.ProfilesSaved="profiles_saved",e.ProfilesParsing="profiles_parsing",e.Settings="settings",e))(Pn||{});class hd{constructor(){Kt(this,"active",sn("profiles_search"));Kt(this,"list",[{value:"profiles_search",text:" ",icon:"group_add"},{value:"profiles_parsing",text:"",icon:"tune"},{value:"profiles_saved",text:"",icon:"people"}])}changeTab(t){this.active.value=t}}const fn=new hd,rt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ht=Object.keys,Dt=Array.isArray;function It(e,t){return typeof t!="object"||ht(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||rt.Promise||(rt.Promise=Promise);const Zr=Object.getPrototypeOf,pd={}.hasOwnProperty;function qt(e,t){return pd.call(e,t)}function Or(e,t){typeof t=="function"&&(t=t(Zr(e))),(typeof Reflect>"u"?ht:Reflect.ownKeys)(t).forEach(n=>{_n(e,n,t[n])})}const Jl=Object.defineProperty;function _n(e,t,n,r){Jl(e,t,It(n&&qt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function _r(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_n(e.prototype,"constructor",e),{extend:Or.bind(null,e.prototype)}}}}const yd=Object.getOwnPropertyDescriptor;function Mo(e,t){let n;return yd(e,t)||(n=Zr(e))&&Mo(n,t)}const md=[].slice;function Vs(e,t,n){return md.call(e,t,n)}function Yl(e,t){return t(e)}function Mr(e){if(!e)throw new Error("Assertion Failed")}function Wl(e){rt.setImmediate?setImmediate(e):setTimeout(e,0)}function zl(e,t){return e.reduce((n,r,s)=>{var i=t(r,s);return i&&(n[i[0]]=i[1]),n},{})}function wn(e,t){if(qt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,s=t.length;r<s;++r){var i=wn(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:wn(l,t.substr(o+1))}}function an(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Mr(typeof n!="string"&&"length"in n);for(var r=0,s=t.length;r<s;++r)an(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),l=t.substr(i+1);if(l==="")n===void 0?Dt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var c=e[o];c&&qt(e,o)||(c=e[o]={}),an(c,l,n)}}else n===void 0?Dt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Gl(e){var t={};for(var n in e)qt(e,n)&&(t[n]=e[n]);return t}const gd=[].concat;function Xl(e){return gd.apply([],e)}const Ql="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Xl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>rt[e]),vd=Ql.map(e=>rt[e]);zl(Ql,e=>[e,!0]);let En=null;function ls(e){En=typeof WeakMap<"u"&&new WeakMap;const t=Ui(e);return En=null,t}function Ui(e){if(!e||typeof e!="object")return e;let t=En&&En.get(e);if(t)return t;if(Dt(e)){t=[],En&&En.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Ui(e[n]))}else if(vd.indexOf(e.constructor)>=0)t=e;else{const i=Zr(e);for(var s in t=i===Object.prototype?{}:Object.create(i),En&&En.set(e,t),e)qt(e,s)&&(t[s]=Ui(e[s]))}return t}const{toString:bd}={};function Vi(e){return bd.call(e).slice(8,-1)}const Hi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_d=typeof Hi=="symbol"?function(e){var t;return e!=null&&(t=e[Hi])&&t.apply(e)}:function(){return null},dr={};function gn(e){var t,n,r,s;if(arguments.length===1){if(Dt(e))return e.slice();if(this===dr&&typeof e=="string")return[e];if(s=_d(e)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Bo=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var dn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zl(e,t){dn=e,ec=t}var ec=()=>!0;const wd=!new Error("").stack;function ir(){if(wd)try{throw ir.arguments,new Error}catch(e){return e}return new Error}function qi(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(ec).map(r=>`
`+r).join("")):""}var tc=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ro=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(tc),xd={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wr(e,t){this._e=ir(),this.name=e,this.message=t}function nc(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Hs(e,t,n,r){this._e=ir(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=nc(e,t)}function Ur(e,t){this._e=ir(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=nc(e,t)}_r(wr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+qi(this._e,2))}},toString:function(){return this.name+": "+this.message}}),_r(Hs).from(wr),_r(Ur).from(wr);var jo=Ro.reduce((e,t)=>(e[t]=t+"Error",e),{});const kd=wr;var De=Ro.reduce((e,t)=>{var n=t+"Error";function r(s,i){this._e=ir(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=xd[t]||n,this.inner=null)}return _r(r).from(kd),e[t]=r,e},{});De.Syntax=SyntaxError,De.Type=TypeError,De.Range=RangeError;var Ea=tc.reduce((e,t)=>(e[t+"Error"]=De[t],e),{}),As=Ro.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=De[t]),e),{});function Xe(){}function es(e){return e}function Cd(e,t){return e==null||e===es?t:function(n){return t(e(n))}}function tr(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Sd(e,t){return e===Xe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?tr(r,this.onsuccess):r),s&&(this.onerror=this.onerror?tr(s,this.onerror):s),i!==void 0?i:n}}function Dd(e,t){return e===Xe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?tr(n,this.onsuccess):n),r&&(this.onerror=this.onerror?tr(r,this.onerror):r)}}function Td(e,t){return e===Xe?t:function(n){var r=e.apply(this,arguments);It(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?tr(s,this.onsuccess):s),i&&(this.onerror=this.onerror?tr(i,this.onerror):i),r===void 0?o===void 0?void 0:o:It(r,o)}}function Od(e,t){return e===Xe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ko(e,t){return e===Xe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}As.ModifyError=Hs,As.DexieError=wr,As.BulkError=Ur;var ts={};const rc=100,[Ji,qs,Yi]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Zr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Zr(t),e]})(),sc=qs&&qs.then,$s=Ji&&Ji.constructor,Uo=!!Yi;var Wi=!1,Ed=Yi?()=>{Yi.then(bs)}:rt.setImmediate?setImmediate.bind(null,bs):rt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{bs(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(bs,0)},Vr=function(e,t){Br.push([e,t]),Js&&(Ed(),Js=!1)},zi=!0,Js=!0,Qn=[],Is=[],Gi=null,Xi=es,xr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$a,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{$a(e[0],e[1])}catch{}})}},xe=xr,Br=[],Zn=0,Ns=[];function fe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Xe,this._lib=!1;var t=this._PSD=xe;if(dn&&(this._stackHolder=ir(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ts)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Zi(this,this._value))}this._state=null,this._value=null,++t.ref,oc(this,e)}const Qi={get:function(){var e=xe,t=Ys;function n(r,s){var i=!e.global&&(e!==xe||t!==Ys);const o=i&&!kn();var l=new fe((c,u)=>{Vo(this,new ic(Ws(r,e,i,o),Ws(s,e,i,o),c,u,e))});return dn&&cc(l,this),l}return n.prototype=ts,n},set:function(e){_n(this,"then",e&&e.prototype===ts?Qi:{get:function(){return e},set:Qi.set})}};function ic(e,t,n,r,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=s}function oc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&cs();n&&typeof n.then=="function"?oc(e,(s,i)=>{n instanceof fe?n._then(s,i):n.then(s,i)}):(e._state=!0,e._value=n,ac(e)),r&&us()}},Zi.bind(null,e))}catch(n){Zi(e,n)}}function Zi(e,t){if(Is.push(t),e._state===null){var n=e._lib&&cs();t=Xi(t),e._state=!1,e._value=t,dn&&t!==null&&typeof t=="object"&&!t._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){s&&s(o)}}(()=>{var r=Mo(t,"stack");t._promise=e,_n(t,"stack",{get:()=>Wi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Qn.some(s=>s._value===r._value)||Qn.push(r)}(e),ac(e),n&&us()}}function ac(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Vo(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),Zn===0&&(++Zn,Vr(()=>{--Zn==0&&Ho()},[]))}function Vo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Zn,Vr(Pd,[n,e,t])}else e._listeners.push(t)}function Pd(e,t,n){try{Gi=t;var r,s=t._value;t._state?r=e(s):(Is.length&&(Is=[]),r=e(s),Is.indexOf(s)===-1&&function(i){for(var o=Qn.length;o;)if(Qn[--o]._value===i._value)return void Qn.splice(o,1)}(t)),n.resolve(r)}catch(i){n.reject(i)}finally{Gi=null,--Zn==0&&Ho(),--n.psd.ref||n.psd.finalize()}}function lc(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var s,i,o=e._value;o!=null?(s=o.name||"Error",i=o.message||o,r=qi(o,0)):(s=o,i=""),t.push(s+(i?": "+i:"")+r)}return dn&&((r=qi(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&lc(e._prev,t,n)),t}function cc(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function bs(){cs()&&us()}function cs(){var e=zi;return zi=!1,Js=!1,e}function us(){var e,t,n;do for(;Br.length>0;)for(e=Br,Br=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Br.length>0);zi=!0,Js=!0}function Ho(){var e=Qn;Qn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ns.slice(0),n=t.length;n;)t[--n]()}function _s(e){return new fe(ts,!1,e)}function it(e,t){var n=xe;return function(){var r=cs(),s=xe;try{return Bn(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Bn(s,!1),r&&us()}}}Or(fe.prototype,{then:Qi,_then:function(e,t){Vo(this,new ic(null,null,e,t,xe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):_s(r)):this.then(null,r=>r&&r.name===t?n(r):_s(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),_s(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Wi=!0;var e=lc(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Wi=!1}}},timeout:function(e,t){return e<1/0?new fe((n,r)=>{var s=setTimeout(()=>r(new De.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_n(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),xr.env=uc(),Or(fe,{all:function(){var e=gn.apply(null,arguments).map(ws);return new fe(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((s,i)=>fe.resolve(s).then(o=>{e[i]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof fe)return e;if(e&&typeof e.then=="function")return new fe((n,r)=>{e.then(n,r)});var t=new fe(ts,!0,e);return cc(t,Gi),t},reject:_s,race:function(){var e=gn.apply(null,arguments).map(ws);return new fe((t,n)=>{e.map(r=>fe.resolve(r).then(t,n))})},PSD:{get:()=>xe,set:e=>xe=e},totalEchoes:{get:()=>Ys},newPSD:Mn,usePSD:$r,scheduler:{get:()=>Vr,set:e=>{Vr=e}},rejectionMapper:{get:()=>Xi,set:e=>{Xi=e}},follow:(e,t)=>new fe((n,r)=>Mn((s,i)=>{var o=xe;o.unhandleds=[],o.onunhandled=i,o.finalize=tr(function(){(function(l){function c(){l(),Ns.splice(Ns.indexOf(c),1)}Ns.push(c),++Zn,Vr(()=>{--Zn==0&&Ho()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),$s&&($s.allSettled&&_n(fe,"allSettled",function(){const e=gn.apply(null,arguments).map(ws);return new fe(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((s,i)=>fe.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),$s.any&&typeof AggregateError<"u"&&_n(fe,"any",function(){const e=gn.apply(null,arguments).map(ws);return new fe((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach((i,o)=>fe.resolve(i).then(l=>t(l),l=>{s[o]=l,--r||n(new AggregateError(s))}))})}));const xt={awaits:0,echoes:0,id:0};var Ad=0,Fs=[],wi=0,Ys=0,$d=0;function Mn(e,t,n,r){var s=xe,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++$d;var o=xr.env;i.env=Uo?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject,nthen:Pa(o.nthen,i),gthen:Pa(o.gthen,i)}:{},t&&It(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=$r(i,e,n,r);return i.ref===0&&i.finalize(),l}function Ar(){return xt.id||(xt.id=++Ad),++xt.awaits,xt.echoes+=rc,xt.id}function kn(){return!!xt.awaits&&(--xt.awaits==0&&(xt.id=0),xt.echoes=xt.awaits*rc,!0)}function ws(e){return xt.echoes&&e&&e.constructor===$s?(Ar(),e.then(t=>(kn(),t),t=>(kn(),yt(t)))):e}function Id(e){++Ys,xt.echoes&&--xt.echoes!=0||(xt.echoes=xt.id=0),Fs.push(xe),Bn(e,!0)}function Nd(){var e=Fs[Fs.length-1];Fs.pop(),Bn(e,!1)}function Bn(e,t){var n=xe;if((t?!xt.echoes||wi++&&e===xe:!wi||--wi&&e===xe)||fc(t?Id.bind(null,e):Nd),e!==xe&&(xe=e,n===xr&&(xr.env=uc()),Uo)){var r=xr.env.Promise,s=e.env;qs.then=s.nthen,r.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(rt,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function uc(){var e=rt.Promise;return Uo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(rt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:qs.then,gthen:e.prototype.then}:{}}function $r(e,t,n,r,s){var i=xe;try{return Bn(e,!0),t(n,r,s)}finally{Bn(i,!1)}}function fc(e){sc.call(Ji,e)}function Ws(e,t,n,r){return typeof e!="function"?e:function(){var s=xe;n&&Ar(),Bn(t,!0);try{return e.apply(this,arguments)}finally{Bn(s,!1),r&&fc(kn)}}}function Pa(e,t){return function(n,r){return e.call(this,Ws(n,t),Ws(r,t))}}(""+sc).indexOf("[native code]")===-1&&(Ar=kn=Xe);const Aa="unhandledrejection";function $a(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,s={promise:t,reason:e};if(rt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Aa,!0,!0),It(r,s)):rt.CustomEvent&&It(r=new CustomEvent(Aa,{detail:s}),s),r&&rt.dispatchEvent&&(dispatchEvent(r),!rt.PromiseRejectionEvent&&rt.onunhandledrejection))try{rt.onunhandledrejection(r)}catch{}dn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var yt=fe.reject;function eo(e,t,n,r){if(e.idbdb&&(e._state.openComplete||xe.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===jo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>eo(e,t,n,r))):yt(i)}return s._promise(t,(i,o)=>Mn(()=>(xe.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(e._state.openComplete)return yt(new De.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return yt(new De.DatabaseClosed);e.open().catch(Xe)}return e._state.dbReadyPromise.then(()=>eo(e,t,n,r))}const Ia="3.2.4",zn=String.fromCharCode(65535),to=-1/0,pn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",dc="String expected.",Hr=[],li=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Fd=li,Ld=li,hc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ci="__dbnames",xi="readonly",ki="readwrite";function nr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const pc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xs(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=ls(t))[e],t)}class Md{_trans(t,n,r){const s=this._tx||xe.trans,i=this.name;function o(c,u,h){if(!h.schema[i])throw new De.NotFound("Table "+i+" not part of transaction");return n(h.idbtrans,h)}const l=cs();try{return s&&s.db===this.db?s===xe.trans?s._promise(t,o,r):Mn(()=>s._promise(t,o,r),{trans:s,transless:xe.transless||xe}):eo(this.db,t,[this.name],o)}finally{l&&us()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(s=>this.hook.reading.fire(s))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Dt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ht(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(h=>u.keyPath.indexOf(h)>=0)&&u.keyPath.every(h=>n.indexOf(h)>=0))[0];if(r&&this.db._maxKey!==zn)return this.where(r.name).equals(r.keyPath.map(u=>t[u]));!r&&dn&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(u,h){try{return i.cmp(u,h)===0}catch{return!1}}const[l,c]=n.reduce(([u,h],x)=>{const m=s[x],A=t[x];return[u||m,u||!m?nr(h,m&&m.multi?S=>{const O=wn(S,x);return Dt(O)&&O.some(R=>o(A,R))}:S=>o(A,wn(S,x))):h]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Dt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const s=Object.create(t.prototype);for(var i in r)if(qt(r,i))try{s[i]=r[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){It(this,t)})}add(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=t;return s&&r&&(i=xs(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?fe.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{an(t,s,o)}catch{}return o})}update(t,n){if(typeof t!="object"||Dt(t))return this.where(":id").equals(t).modify(n);{const r=wn(t,this.schema.primKey.keyPath);if(r===void 0)return yt(new De.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ht(n).forEach(s=>{an(t,s,n[s])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=t;return s&&r&&(i=xs(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?fe.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{an(t,s,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?fe.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:pc})).then(t=>t.numFailures?fe.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new De.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new De.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let h=c&&l?t.map(xs(c)):t;return this.core.mutate({trans:o,type:"add",keys:s,values:h,wantResults:i}).then(({numFailures:x,results:m,lastResult:A,failures:S})=>{if(x===0)return i?m:A;throw new Ur(`${this.name}.bulkAdd(): ${x} of ${u} operations failed`,S)})})}bulkPut(t,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new De.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new De.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let h=c&&l?t.map(xs(c)):t;return this.core.mutate({trans:o,type:"put",keys:s,values:h,wantResults:i}).then(({numFailures:x,results:m,lastResult:A,failures:S})=>{if(x===0)return i?m:A;throw new Ur(`${this.name}.bulkPut(): ${x} of ${u} operations failed`,S)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new Ur(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function qr(e){var t={},n=function(o,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return t[o].subscribe.apply(null,u),e}if(typeof o=="string")return t[o]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(o,l,c){if(typeof o!="object"){var u;l||(l=Od),c||(c=Xe);var h={subscribers:[],fire:c,subscribe:function(x){h.subscribers.indexOf(x)===-1&&(h.subscribers.push(x),h.fire=l(h.fire,x))},unsubscribe:function(x){h.subscribers=h.subscribers.filter(function(m){return m!==x}),h.fire=h.subscribers.reduce(l,c)}};return t[o]=n[o]=h,h}ht(u=o).forEach(function(x){var m=u[x];if(Dt(m))i(x,u[x][0],u[x][1]);else{if(m!=="asap")throw new De.InvalidArgument("Invalid event config");var A=i(x,es,function(){for(var S=arguments.length,O=new Array(S);S--;)O[S]=arguments[S];A.subscribers.forEach(function(R){Wl(function(){R.apply(null,O)})})})}})}}function Ir(e,t){return _r(t).from({prototype:e}),t}function lr(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ci(e,t){e.filter=nr(e.filter,t)}function Si(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>nr(r(),t()):t,e.justLimit=n&&!r}function Ls(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new De.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Na(e,t,n){const r=Ls(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function ks(e,t,n,r){const s=e.replayFilter?nr(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},o=(l,c,u)=>{if(!s||s(c,u,m=>c.stop(m),m=>c.fail(m))){var h=c.primaryKey,x=""+h;x==="[object ArrayBuffer]"&&(x=""+new Uint8Array(h)),qt(i,x)||(i[x]=!0,t(l,c,u))}};return Promise.all([e.or._iterate(o,n),Fa(Na(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Fa(Na(e,r,n),nr(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Fa(e,t,n,r){var s=it(r?(i,o,l)=>n(r(i),o,l):n);return e.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();t&&!t(i,l=>o=l,l=>{i.stop(l),o=Xe},l=>{i.fail(l),o=Xe})||s(i.value,i,l=>o=l),o()})})}function $t(e,t){try{const n=La(e),r=La(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(s,i){const o=s.length,l=i.length,c=o<l?o:l;for(let u=0;u<c;++u)if(s[u]!==i[u])return s[u]<i[u]?-1:1;return o===l?0:o<l?-1:1}(Ma(e),Ma(t));case"Array":return function(s,i){const o=s.length,l=i.length,c=o<l?o:l;for(let u=0;u<c;++u){const h=$t(s[u],i[u]);if(h!==0)return h}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function La(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Vi(e);return n==="ArrayBuffer"?"binary":n}function Ma(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Bd{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,yt.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,yt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=nr(n.algorithm,t)}_iterate(t,n){return ks(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&It(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>ks(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,s=r.table.core;if(lr(r,!0))return s.count({trans:n,query:{index:Ls(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return ks(r,()=>(++i,!1),n,s).then(()=>i)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),s=r[0],i=r.length-1;function o(u,h){return h?o(u[r[h]],h-1):u[s]}var l=this._ctx.dir==="next"?1:-1;function c(u,h){var x=o(u,i),m=o(h,i);return x<m?-l:x>m?l:0}return this.toArray(function(u){return u.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&lr(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=Ls(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return ks(r,i=>s.push(i),n,r.table.core).then(()=>s)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,lr(n)?Si(n,()=>{var r=t;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):Si(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Si(this._ctx,()=>{var n=t;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(t,n){return Ci(this._ctx,function(r,s,i){return!t(r.value)||(s(i),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return Ci(this._ctx,function(s){return t(s.value)}),n=this._ctx,r=t,n.isMatch=nr(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.primaryKey,s)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&lr(n,!0)&&n.limit>0)return this._read(s=>{var i=Ls(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Ci(this._ctx,function(s){var i=s.primaryKey.toString(),o=qt(r,i);return r[i]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var s;if(typeof t=="function")s=t;else{var i=ht(t),o=i.length;s=function(O){for(var R=!1,B=0;B<o;++B){var E=i[B],$=t[E];wn(O,E)!==$&&(an(O,E,$),R=!0)}return R}}const l=n.table.core,{outbound:c,extractKey:u}=l.schema.primaryKey,h=this.db._options.modifyChunkSize||200,x=[];let m=0;const A=[],S=(O,R)=>{const{failures:B,numFailures:E}=R;m+=O-E;for(let $ of ht(B))x.push(B[$])};return this.clone().primaryKeys().then(O=>{const R=B=>{const E=Math.min(h,O.length-B);return l.getMany({trans:r,keys:O.slice(B,B+E),cache:"immutable"}).then($=>{const I=[],U=[],J=c?[]:null,H=[];for(let k=0;k<E;++k){const _=$[k],V={value:ls(_),primKey:O[B+k]};s.call(V,V.value,V)!==!1&&(V.value==null?H.push(O[B+k]):c||$t(u(_),u(V.value))===0?(U.push(V.value),c&&J.push(O[B+k])):(H.push(O[B+k]),I.push(V.value)))}const se=lr(n)&&n.limit===1/0&&(typeof t!="function"||t===Di)&&{index:n.index,range:n.range};return Promise.resolve(I.length>0&&l.mutate({trans:r,type:"add",values:I}).then(k=>{for(let _ in k.failures)H.splice(parseInt(_),1);S(I.length,k)})).then(()=>(U.length>0||se&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:J,values:U,criteria:se,changeSpec:typeof t!="function"&&t}).then(k=>S(U.length,k))).then(()=>(H.length>0||se&&t===Di)&&l.mutate({trans:r,type:"delete",keys:H,criteria:se}).then(k=>S(H.length,k))).then(()=>O.length>B+E&&R(B+h))})};return R(0).then(()=>{if(x.length>0)throw new Hs("Error modifying one or more objects",x,m,A);return O.length})})})}delete(){var t=this._ctx,n=t.range;return lr(t)&&(t.isPrimKey&&!Ld||n.type===3)?this._write(r=>{const{primaryKey:s}=t.table.core.schema,i=n;return t.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:c,results:u,numFailures:h})=>{if(h)throw new Hs("Could not delete some values",Object.keys(l).map(x=>l[x]),o-h);return o-h}))}):this.modify(Di)}}const Di=(e,t)=>t.value=null;function Rd(e,t){return e<t?-1:e===t?0:1}function jd(e,t){return e>t?-1:e===t?0:1}function Ut(e,t,n){var r=e instanceof mc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function cr(e){return new e.Collection(e,()=>yc("")).limit(0)}function Kd(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),l=-1,c=0;c<o;++c){var u=t[c];if(u!==r[c])return s(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):s(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;s(e[c],u)<0&&(l=c)}return o<r.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function Cs(e,t,n,r){var s,i,o,l,c,u,h,x=n.length;if(!n.every(O=>typeof O=="string"))return Ut(e,dc);function m(O){s=function(B){return B==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(O),i=function(B){return B==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(O),o=O==="next"?Rd:jd;var R=n.map(function(B){return{lower:i(B),upper:s(B)}}).sort(function(B,E){return o(B.lower,E.lower)});l=R.map(function(B){return B.upper}),c=R.map(function(B){return B.lower}),u=O,h=O==="next"?"":r}m("next");var A=new e.Collection(e,()=>Tn(l[0],c[x-1]+r));A._ondirectionchange=function(O){m(O)};var S=0;return A._addAlgorithm(function(O,R,B){var E=O.key;if(typeof E!="string")return!1;var $=i(E);if(t($,c,S))return!0;for(var I=null,U=S;U<x;++U){var J=Kd(E,$,l[U],c[U],o,u);J===null&&I===null?S=U+1:(I===null||o(I,J)>0)&&(I=J)}return R(I!==null?function(){O.continue(I+h)}:B),!1}),A}function Tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function yc(e){return{type:1,lower:e,upper:e}}class mc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||s)&&(!r||!s)?cr(this):new this.Collection(this,()=>Tn(t,n,!r,!s))}catch{return Ut(this,pn)}}equals(t){return t==null?Ut(this,pn):new this.Collection(this,()=>yc(t))}above(t){return t==null?Ut(this,pn):new this.Collection(this,()=>Tn(t,void 0,!0))}aboveOrEqual(t){return t==null?Ut(this,pn):new this.Collection(this,()=>Tn(t,void 0,!1))}below(t){return t==null?Ut(this,pn):new this.Collection(this,()=>Tn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Ut(this,pn):new this.Collection(this,()=>Tn(void 0,t))}startsWith(t){return typeof t!="string"?Ut(this,dc):this.between(t,t+zn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Cs(this,(n,r)=>n.indexOf(r[0])===0,[t],zn)}equalsIgnoreCase(t){return Cs(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=gn.apply(dr,arguments);return t.length===0?cr(this):Cs(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=gn.apply(dr,arguments);return t.length===0?cr(this):Cs(this,(n,r)=>r.some(s=>n.indexOf(s)===0),t,zn)}anyOf(){const t=gn.apply(dr,arguments);let n=this._cmp;try{t.sort(n)}catch{return Ut(this,pn)}if(t.length===0)return cr(this);const r=new this.Collection(this,()=>Tn(t[0],t[t.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let s=0;return r._addAlgorithm((i,o,l)=>{const c=i.key;for(;n(c,t[s])>0;)if(++s,s===t.length)return o(l),!1;return n(c,t[s])===0||(o(()=>{i.continue(t[s])}),!1)}),r}notEqual(t){return this.inAnyRange([[to,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=gn.apply(dr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ut(this,pn)}const n=t.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[to,s]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,l=this._max;if(t.length===0)return cr(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&s(E[0],E[1])<=0))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",De.InvalidArgument);const c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let h,x=s;function m(E,$){return x(E[0],$[0])}try{h=t.reduce(function(E,$){let I=0,U=E.length;for(;I<U;++I){const J=E[I];if(r($[0],J[1])<0&&r($[1],J[0])>0){J[0]=o(J[0],$[0]),J[1]=l(J[1],$[1]);break}}return I===U&&E.push($),E},[]),h.sort(m)}catch{return Ut(this,pn)}let A=0;const S=u?E=>s(E,h[A][1])>0:E=>s(E,h[A][1])>=0,O=c?E=>i(E,h[A][0])>0:E=>i(E,h[A][0])>=0;let R=S;const B=new this.Collection(this,()=>Tn(h[0][0],h[h.length-1][1],!c,!u));return B._ondirectionchange=E=>{E==="next"?(R=S,x=s):(R=O,x=i),h.sort(m)},B._addAlgorithm((E,$,I)=>{for(var U=E.key;R(U);)if(++A,A===h.length)return $(I),!1;return!!function(J){return!S(J)&&!O(J)}(U)||(this._cmp(U,h[A][1])===0||this._cmp(U,h[A][0])===0||$(()=>{x===s?E.continue(h[A][0]):E.continue(h[A][1])}),!1)}),B}startsWithAnyOf(){const t=gn.apply(dr,arguments);return t.every(n=>typeof n=="string")?t.length===0?cr(this):this.inAnyRange(t.map(n=>[n,n+zn])):Ut(this,"startsWithAnyOf() only works with strings")}}function ln(e){return it(function(t){return ns(t),e(t.target.error),!1})}function ns(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const rs="storagemutated",An="x-storagemutated-1",Rn=qr(null,rs);class Ud{_lock(){return Mr(!xe.global),++this._reculock,this._reculock!==1||xe.global||(xe.lockOwnerFor=this),this}_unlock(){if(Mr(!xe.global),--this._reculock==0)for(xe.global||(xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{$r(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&xe.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Mr(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new De.DatabaseClosed(r);case"MissingAPIError":throw new De.MissingAPI(r.message,r);default:throw new De.OpenFailed(r)}if(!this.active)throw new De.TransactionInactive;return Mr(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=it(s=>{ns(s),this._reject(t.error)}),t.onabort=it(s=>{ns(s),this.active&&this._reject(new De.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=it(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Rn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return yt(new De.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new De.TransactionInactive);if(this._locked())return new fe((i,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(i,o)},xe])});if(r)return Mn(()=>{var i=new fe((o,l)=>{this._lock();const c=n(o,l,this);c&&c.then&&c.then(o,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new fe((i,o)=>{var l=n(i,o,this);l&&l.then&&l.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=fe.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new fe((o,l)=>{r.then(c=>n._waitingQueue.push(it(o.bind(null,c))),c=>n._waitingQueue.push(it(l.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new De.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(qt(n,t))return n[t];const r=this.schema[t];if(!r)throw new De.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,r,this);return s.core=this.db.core.table(t),n[t]=s,s}}function no(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+gc(t)}}function gc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:zl(n,r=>[r.name,r])}}let ss=e=>{try{return e.only([[]]),ss=()=>[[]],[[]]}catch{return ss=()=>zn,zn}};function ro(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>wn(r,t)}(e):t=>wn(t,e)}function Ba(e){return[].slice.call(e)}let Vd=0;function Jr(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Hd(e,t,n){function r(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:h,lowerOpen:x,upperOpen:m}=c;return u===void 0?h===void 0?null:t.upperBound(h,!!m):h===void 0?t.lowerBound(u,!!x):t.bound(u,h,!!x,!!m)}const{schema:s,hasGetAll:i}=function(c,u){const h=Ba(c.objectStoreNames);return{schema:{name:c.name,tables:h.map(x=>u.objectStore(x)).map(x=>{const{keyPath:m,autoIncrement:A}=x,S=Dt(m),O=m==null,R={},B={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:S,keyPath:m,autoIncrement:A,unique:!0,extractKey:ro(m)},indexes:Ba(x.indexNames).map(E=>x.index(E)).map(E=>{const{name:$,unique:I,multiEntry:U,keyPath:J}=E,H={name:$,compound:Dt(J),keyPath:J,unique:I,multiEntry:U,extractKey:ro(J)};return R[Jr(J)]=H,H}),getIndexByKeyPath:E=>R[Jr(E)]};return R[":id"]=B.primaryKey,m!=null&&(R[Jr(m)]=B.primaryKey),B})},hasGetAll:h.length>0&&"getAll"in u.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=s.tables.map(c=>function(u){const h=u.name;return{name:h,schema:u,mutate:function({trans:x,type:m,keys:A,values:S,range:O}){return new Promise((R,B)=>{R=it(R);const E=x.objectStore(h),$=E.keyPath==null,I=m==="put"||m==="add";if(!I&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:U}=A||S||{length:1};if(A&&S&&A.length!==S.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});let J;const H=[],se=[];let k=0;const _=j=>{++k,ns(j)};if(m==="deleteRange"){if(O.type===4)return R({numFailures:k,failures:se,results:[],lastResult:void 0});O.type===3?H.push(J=E.clear()):H.push(J=E.delete(r(O)))}else{const[j,_e]=I?$?[S,A]:[S,null]:[A,null];if(I)for(let ue=0;ue<U;++ue)H.push(J=_e&&_e[ue]!==void 0?E[m](j[ue],_e[ue]):E[m](j[ue])),J.onerror=_;else for(let ue=0;ue<U;++ue)H.push(J=E[m](j[ue])),J.onerror=_}const V=j=>{const _e=j.target.result;H.forEach((ue,Ie)=>ue.error!=null&&(se[Ie]=ue.error)),R({numFailures:k,failures:se,results:m==="delete"?A:H.map(ue=>ue.result),lastResult:_e})};J.onerror=j=>{_(j),V(j)},J.onsuccess=V})},getMany:({trans:x,keys:m})=>new Promise((A,S)=>{A=it(A);const O=x.objectStore(h),R=m.length,B=new Array(R);let E,$=0,I=0;const U=H=>{const se=H.target;B[se._pos]=se.result,++I===$&&A(B)},J=ln(S);for(let H=0;H<R;++H)m[H]!=null&&(E=O.get(m[H]),E._pos=H,E.onsuccess=U,E.onerror=J,++$);$===0&&A(B)}),get:({trans:x,key:m})=>new Promise((A,S)=>{A=it(A);const O=x.objectStore(h).get(m);O.onsuccess=R=>A(R.target.result),O.onerror=ln(S)}),query:function(x){return m=>new Promise((A,S)=>{A=it(A);const{trans:O,values:R,limit:B,query:E}=m,$=B===1/0?void 0:B,{index:I,range:U}=E,J=O.objectStore(h),H=I.isPrimaryKey?J:J.index(I.name),se=r(U);if(B===0)return A({result:[]});if(x){const k=R?H.getAll(se,$):H.getAllKeys(se,$);k.onsuccess=_=>A({result:_.target.result}),k.onerror=ln(S)}else{let k=0;const _=R||!("openKeyCursor"in H)?H.openCursor(se):H.openKeyCursor(se),V=[];_.onsuccess=j=>{const _e=_.result;return _e?(V.push(R?_e.value:_e.primaryKey),++k===B?A({result:V}):void _e.continue()):A({result:V})},_.onerror=ln(S)}})}(i),openCursor:function({trans:x,values:m,query:A,reverse:S,unique:O}){return new Promise((R,B)=>{R=it(R);const{index:E,range:$}=A,I=x.objectStore(h),U=E.isPrimaryKey?I:I.index(E.name),J=S?O?"prevunique":"prev":O?"nextunique":"next",H=m||!("openKeyCursor"in U)?U.openCursor(r($),J):U.openKeyCursor(r($),J);H.onerror=ln(B),H.onsuccess=it(se=>{const k=H.result;if(!k)return void R(null);k.___id=++Vd,k.done=!1;const _=k.continue.bind(k);let V=k.continuePrimaryKey;V&&(V=V.bind(k));const j=k.advance.bind(k),_e=()=>{throw new Error("Cursor not stopped")};k.trans=x,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=it(B),k.next=function(){let ue=1;return this.start(()=>ue--?this.continue():this.stop()).then(()=>this)},k.start=ue=>{const Ie=new Promise((he,ce)=>{he=it(he),H.onerror=ln(ce),k.fail=ce,k.stop=We=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=_e,he(We)}}),be=()=>{if(H.result)try{ue()}catch(he){k.fail(he)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=it(he=>{H.onsuccess=be,be()}),k.continue=_,k.continuePrimaryKey=V,k.advance=j,be(),Ie},R(k)},B)})},count({query:x,trans:m}){const{index:A,range:S}=x;return new Promise((O,R)=>{const B=m.objectStore(h),E=A.isPrimaryKey?B:B.index(A.name),$=r(S),I=$?E.count($):E.count();I.onsuccess=it(U=>O(U.target.result)),I.onerror=ln(R)})}}}(c)),l={};return o.forEach(c=>l[c.name]=c),{stack:"dbcore",transaction:e.transaction.bind(e),table(c){if(!l[c])throw new Error(`Table '${c}' not found`);return l[c]},MIN_KEY:-1/0,MAX_KEY:ss(t),schema:s}}function so({_novip:e},t){const n=t.db,r=function(s,i,{IDBKeyRange:o,indexedDB:l},c){return{dbcore:function(h,x){return x.reduce((m,{create:A})=>({...m,...A(m)}),h)}(Hd(i,o,c),s.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(s=>{const i=s.name;e.core.schema.tables.some(o=>o.name===i)&&(s.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=s.core))})}function zs({_novip:e},t,n,r){n.forEach(s=>{const i=r[s];t.forEach(o=>{const l=Mo(o,s);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?_n(o,s,{get(){return this.table(s)},set(c){Jl(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new e.Table(s,i))})})}function io({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function qd(e,t){return e._cfg.version-t._cfg.version}function Jd(e,t,n,r){const s=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),l=xe.transless||xe;Mn(()=>{xe.trans=i,xe.transless=l,t===0?(ht(s).forEach(c=>{Ti(n,c,s[c].primKey,s[c].indexes)}),so(e,n),fe.follow(()=>e.on.populate.fire(i)).catch(o)):function({_novip:c},u,h,x){const m=[],A=c._versions;let S=c._dbSchema=ao(c,c.idbdb,x),O=!1;const R=A.filter(E=>E._cfg.version>=u);function B(){return m.length?fe.resolve(m.shift()(h.idbtrans)).then(B):fe.resolve()}return R.forEach(E=>{m.push(()=>{const $=S,I=E._cfg.dbschema;lo(c,$,x),lo(c,I,x),S=c._dbSchema=I;const U=bc($,I);U.add.forEach(H=>{Ti(x,H[0],H[1].primKey,H[1].indexes)}),U.change.forEach(H=>{if(H.recreate)throw new De.Upgrade("Not yet support for changing primary key");{const se=x.objectStore(H.name);H.add.forEach(k=>oo(se,k)),H.change.forEach(k=>{se.deleteIndex(k.name),oo(se,k)}),H.del.forEach(k=>se.deleteIndex(k))}});const J=E._cfg.contentUpgrade;if(J&&E._cfg.version>u){so(c,x),h._memoizedTables={},O=!0;let H=Gl(I);U.del.forEach(V=>{H[V]=$[V]}),io(c,[c.Transaction.prototype]),zs(c,[c.Transaction.prototype],ht(H),H),h.schema=H;const se=Bo(J);let k;se&&Ar();const _=fe.follow(()=>{if(k=J(h),k&&se){var V=kn.bind(null,null);k.then(V,V)}});return k&&typeof k.then=="function"?fe.resolve(k):_.then(()=>k)}}),m.push($=>{(!O||!Fd)&&function(I,U){[].slice.call(U.db.objectStoreNames).forEach(J=>I[J]==null&&U.db.deleteObjectStore(J))}(E._cfg.dbschema,$),io(c,[c.Transaction.prototype]),zs(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),h.schema=c._dbSchema})}),B().then(()=>{var E,$;$=x,ht(E=S).forEach(I=>{$.db.objectStoreNames.contains(I)||Ti($,I,E[I].primKey,E[I].indexes)})})}(e,t,i,n).catch(o)})}function bc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!li)o.recreate=!0,n.change.push(o);else{const l=s.idxByName,c=i.idxByName;let u;for(u in l)c[u]||o.del.push(u);for(u in c){const h=l[u],x=c[u];h?h.src!==x.src&&o.change.push(x):o.add.push(x)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function Ti(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>oo(s,i)),s}function oo(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ao(e,t,n){const r={};return Vs(t.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const l=no(gc(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),c=[];for(let h=0;h<i.indexNames.length;++h){const x=i.index(i.indexNames[h]);o=x.keyPath;var u=no(x.name,o,!!x.unique,!!x.multiEntry,!1,o&&typeof o!="string",!1);c.push(u)}r[s]=vc(s,l,c)}),r}function lo({_novip:e},t,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const c=o.indexNames[l],u=o.index(c).keyPath,h=typeof u=="string"?u:"["+Vs(u).join("+")+"]";if(t[i]){const x=t[i].idxByName[h];x&&(x.name=c,delete t[i].idxByName[h],t[i].idxByName[c]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&rt.WorkerGlobalScope&&rt instanceof rt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Yd{_parseStoresSpec(t,n){ht(t).forEach(r=>{if(t[r]!==null){var s=t[r].split(",").map((o,l)=>{const c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return no(c,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Dt(u),l===0)}),i=s.shift();if(i.multi)throw new De.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new De.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new De.Schema("Index must have a name and cannot be an empty string")}),n[r]=vc(r,i,s)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?It(this._cfg.storesSource,t):t;const r=n._versions,s={};let i={};return r.forEach(o=>{It(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,io(n,[n._allTables,n,n.Transaction.prototype]),zs(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ht(i),i),n._storeNames=ht(i),this}upgrade(t){return this._cfg.contentUpgrade=Ko(this._cfg.contentUpgrade||Xe,t),this}}function qo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ft(ci,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Jo(e){return e&&typeof e.databases=="function"}function co(e){return Mn(function(){return xe.letThrough=!0,e()})}function Wd(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function zd(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?yt(t.dbOpenError):e);dn&&(t.openCanceller._stackHolder=ir()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function s(){if(t.openCanceller!==r)throw new De.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,o=null,l=!1;return fe.race([r,(typeof navigator>"u"?fe.resolve():Wd()).then(()=>new fe((c,u)=>{if(s(),!n)throw new De.MissingAPI;const h=e.name,x=t.autoSchema?n.open(h):n.open(h,Math.round(10*e.verno));if(!x)throw new De.MissingAPI;x.onerror=ln(u),x.onblocked=it(e._fireOnBlocked),x.onupgradeneeded=it(m=>{if(o=x.transaction,t.autoSchema&&!e._options.allowEmptyDB){x.onerror=ns,o.abort(),x.result.close();const S=n.deleteDatabase(h);S.onsuccess=S.onerror=it(()=>{u(new De.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=ln(u);var A=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=A<1,e._novip.idbdb=x.result,Jd(e,A/10,o,u)}},u),x.onsuccess=it(()=>{o=null;const m=e._novip.idbdb=x.result,A=Vs(m.objectStoreNames);if(A.length>0)try{const O=m.transaction((S=A).length===1?S[0]:S,"readonly");t.autoSchema?function({_novip:R},B,E){R.verno=B.version/10;const $=R._dbSchema=ao(0,B,E);R._storeNames=Vs(B.objectStoreNames,0),zs(R,[R._allTables],ht($),$)}(e,m,O):(lo(e,e._dbSchema,O),function(R,B){const E=bc(ao(0,R.idbdb,B),R._dbSchema);return!(E.add.length||E.change.some($=>$.add.length||$.change.length))}(e,O)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),so(e,O)}catch{}var S;Hr.push(e),m.onversionchange=it(O=>{t.vcFired=!0,e.on("versionchange").fire(O)}),m.onclose=it(O=>{e.on("close").fire(O)}),l&&function({indexedDB:O,IDBKeyRange:R},B){!Jo(O)&&B!==ci&&qo(O,R).put({name:B}).catch(Xe)}(e._deps,h),c()},u)}))]).then(()=>(s(),t.onReadyBeingFired=[],fe.resolve(co(()=>e.on.ready.fire(e.vip))).then(function c(){if(t.onReadyBeingFired.length>0){let u=t.onReadyBeingFired.reduce(Ko,Xe);return t.onReadyBeingFired=[],fe.resolve(co(()=>u(e.vip))).then(c)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(c=>{t.dbOpenError=c;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),yt(c)}).finally(()=>{t.openComplete=!0,i()})}function uo(e){var t=i=>e.next(i),n=s(t),r=s(i=>e.throw(i));function s(i){return o=>{var l=i(o),c=l.value;return l.done?c:c&&typeof c.then=="function"?c.then(n,r):Dt(c)?Promise.all(c).then(n,r):n(c)}}return s(t)()}function Gd(e,t,n){var r=arguments.length;if(r<2)throw new De.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[e,Xl(s),n]}function _c(e,t,n,r,s){return fe.resolve().then(()=>{const i=xe.transless||xe,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(x){return x.name===jo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>_c(e,t,n,null,s))):yt(x)}const c=Bo(s);let u;c&&Ar();const h=fe.follow(()=>{if(u=s.call(o,o),u)if(c){var x=kn.bind(null,null);u.then(x,x)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=uo(u))},l);return(u&&typeof u.then=="function"?fe.resolve(u).then(x=>o.active?x:yt(new De.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>u)).then(x=>(r&&o._resolve(),o._completion.then(()=>x))).catch(x=>(o._reject(x),yt(x)))})}function Ss(e,t,n){const r=Dt(e)?e.slice():[e];for(let s=0;s<n;++s)r.push(t);return r}const Xd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(h,x,m){const A=Jr(h),S=s[A]=s[A]||[],O=h==null?0:typeof h=="string"?1:h.length,R=x>0,B={...m,isVirtual:R,keyTail:x,keyLength:O,extractKey:ro(h),unique:!R&&m.unique};return S.push(B),B.isPrimaryKey||i.push(B),O>1&&o(O===2?h[0]:h.slice(0,O-1),x+1,m),S.sort((E,$)=>E.keyTail-$.keyTail),B}const l=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(const h of r.indexes)o(h.keyPath,0,h);function c(h){const x=h.query.index;return x.isVirtual?{...h,query:{index:x,range:(m=h.query.range,A=x.keyTail,{type:m.type===1?2:m.type,lower:Ss(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,A),lowerOpen:!0,upper:Ss(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,A),upperOpen:!0})}}:h;var m,A}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(h){const x=s[Jr(h)];return x&&x[0]}},count:h=>n.count(c(h)),query:h=>n.query(c(h)),openCursor(h){const{keyTail:x,isVirtual:m,keyLength:A}=h.query.index;return m?n.openCursor(c(h)).then(S=>S&&function(O){return Object.create(O,{continue:{value:function(B){B!=null?O.continue(Ss(B,h.reverse?e.MAX_KEY:e.MIN_KEY,x)):h.unique?O.continue(O.key.slice(0,A).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,x)):O.continue()}},continuePrimaryKey:{value(B,E){O.continuePrimaryKey(Ss(B,e.MAX_KEY,x),E)}},primaryKey:{get:()=>O.primaryKey},key:{get(){const B=O.key;return A===1?B[0]:B.slice(0,A)}},value:{get:()=>O.value}})}(S)):n.openCursor(h)}}}}}};function Yo(e,t,n,r){return n=n||{},r=r||"",ht(e).forEach(s=>{if(qt(t,s)){var i=e[s],o=t[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const l=Vi(i);l!==Vi(o)?n[r+s]=t[s]:l==="Object"?Yo(i,o,n,r+s+"."):i!==o&&(n[r+s]=t[s])}else i!==o&&(n[r+s]=t[s])}else n[r+s]=void 0}),ht(t).forEach(s=>{qt(e,s)||(n[r+s]=t[s])}),n}const Qd={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=xe.trans,{deleting:l,creating:c,updating:u}=o.table(t).hook;switch(i.type){case"add":if(c.fire===Xe)break;return o._promise("readwrite",()=>h(i),!0);case"put":if(c.fire===Xe&&u.fire===Xe)break;return o._promise("readwrite",()=>h(i),!0);case"delete":if(l.fire===Xe)break;return o._promise("readwrite",()=>h(i),!0);case"deleteRange":if(l.fire===Xe)break;return o._promise("readwrite",()=>function(m){return x(m.trans,m.range,1e4)}(i),!0)}return n.mutate(i);function h(m){const A=xe.trans,S=m.keys||function(O,R){return R.type==="delete"?R.keys:R.keys||R.values.map(O.extractKey)}(r,m);if(!S)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:S}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(O,R,B){return R.type==="add"?Promise.resolve([]):O.getMany({trans:R.trans,keys:B,cache:"immutable"})}(n,m,S).then(O=>{const R=S.map((B,E)=>{const $=O[E],I={onerror:null,onsuccess:null};if(m.type==="delete")l.fire.call(I,B,$,A);else if(m.type==="add"||$===void 0){const U=c.fire.call(I,B,m.values[E],A);B==null&&U!=null&&(B=U,m.keys[E]=B,r.outbound||an(m.values[E],r.keyPath,B))}else{const U=Yo($,m.values[E]),J=u.fire.call(I,U,B,$,A);if(J){const H=m.values[E];Object.keys(J).forEach(se=>{qt(H,se)?H[se]=J[se]:an(H,se,J[se])})}}return I});return n.mutate(m).then(({failures:B,results:E,numFailures:$,lastResult:I})=>{for(let U=0;U<S.length;++U){const J=E?E[U]:S[U],H=R[U];J==null?H.onerror&&H.onerror(B[U]):H.onsuccess&&H.onsuccess(m.type==="put"&&O[U]?m.values[U]:J)}return{failures:B,results:E,numFailures:$,lastResult:I}}).catch(B=>(R.forEach(E=>E.onerror&&E.onerror(B)),Promise.reject(B)))})}function x(m,A,S){return n.query({trans:m,values:!1,query:{index:r,range:A},limit:S}).then(({result:O})=>h({type:"delete",keys:O,trans:m}).then(R=>R.numFailures>0?Promise.reject(R.failures[0]):O.length<S?{failures:[],numFailures:0,lastResult:void 0}:x(m,{...A,lower:O[O.length-1],lowerOpen:!0},S)))}}}}})};function wc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)$t(t.keys[s],e[i])===0&&(r.push(n?ls(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch{return null}}const Zd={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=wc(r.keys,r.trans._cache,r.cache==="clone");return s?fe.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?ls(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Wo(e){return!("from"in e)}const mn=function(e,t){if(!this){const n=new mn;return e&&"d"in e&&It(n,e),n}It(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function is(e,t,n){const r=$t(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Wo(e))return It(e,{from:t,to:n,d:1});const s=e.l,i=e.r;if($t(n,e.from)<0)return s?is(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ra(e);if($t(t,e.to)>0)return i?is(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ra(e);$t(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),$t(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&Gs(e,s),i&&o&&Gs(e,i)}function Gs(e,t){Wo(t)||function n(r,{from:s,to:i,l:o,r:l}){is(r,s,i),o&&n(r,o),l&&n(r,l)}(e,t)}function eh(e,t){const n=fo(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=fo(e);let o=i.next(s.from),l=o.value;for(;!r.done&&!o.done;){if($t(l.from,s.to)<=0&&$t(l.to,s.from)>=0)return!0;$t(s.from,l.from)<0?s=(r=n.next(l.from)).value:l=(o=i.next(s.from)).value}return!1}function fo(e){let t=Wo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&$t(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||$t(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ra(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o={...e},l=e[s];e.from=l.from,e.to=l.to,e[s]=l[s],o[s]=l[i],e[i]=o,o.d=ja(o)}e.d=ja(e)}function ja({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Or(mn.prototype,{add(e){return Gs(this,e),this},addKey(e){return is(this,e,e),this},addKeys(e){return e.forEach(t=>is(this,t,t)),this},[Hi](){return fo(this)}});const th={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new mn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const s=e.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:l,outbound:c}=o,u={...s,mutate:m=>{const A=m.trans,S=A.mutatedParts||(A.mutatedParts={}),O=J=>{const H=`idb://${t}/${r}/${J}`;return S[H]||(S[H]=new mn)},R=O(""),B=O(":dels"),{type:E}=m;let[$,I]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const U=m.trans._cache;return s.mutate(m).then(J=>{if(Dt($)){E!=="delete"&&($=J.results),R.addKeys($);const H=wc($,U);H||E==="add"||B.addKeys($),(H||I)&&function(se,k,_,V){function j(_e){const ue=se(_e.name||"");function Ie(he){return he!=null?_e.extractKey(he):null}const be=he=>_e.multiEntry&&Dt(he)?he.forEach(ce=>ue.addKey(ce)):ue.addKey(he);(_||V).forEach((he,ce)=>{const We=_&&Ie(_[ce]),Ye=V&&Ie(V[ce]);$t(We,Ye)!==0&&(We!=null&&be(We),Ye!=null&&be(Ye))})}k.indexes.forEach(j)}(O,i,H,I)}else if($){const H={from:$.lower,to:$.upper};B.add(H),R.add(H)}else R.add(n),B.add(n),i.indexes.forEach(H=>O(H.name).add(n));return J})}},h=({query:{index:m,range:A}})=>{var S,O;return[m,new mn((S=A.lower)!==null&&S!==void 0?S:e.MIN_KEY,(O=A.upper)!==null&&O!==void 0?O:e.MAX_KEY)]},x={get:m=>[o,new mn(m.key)],getMany:m=>[o,new mn().addKeys(m.keys)],count:h,query:h,openCursor:h};return ht(x).forEach(m=>{u[m]=function(A){const{subscr:S}=xe;if(S){const O=I=>{const U=`idb://${t}/${r}/${I}`;return S[U]||(S[U]=new mn)},R=O(""),B=O(":dels"),[E,$]=x[m](A);if(O(E.name||"").add($),!E.isPrimaryKey){if(m!=="count"){const I=m==="query"&&c&&A.values&&s.query({...A,values:!1});return s[m].apply(this,arguments).then(U=>{if(m==="query"){if(c&&A.values)return I.then(({result:H})=>(R.addKeys(H),U));const J=A.values?U.result.map(l):U.result;A.values?R.addKeys(J):B.addKeys(J)}else if(m==="openCursor"){const J=U,H=A.values;return J&&Object.create(J,{key:{get:()=>(B.addKey(J.primaryKey),J.key)},primaryKey:{get(){const se=J.primaryKey;return B.addKey(se),se}},value:{get:()=>(H&&R.addKey(J.primaryKey),J.value)}})}return U})}B.add(n)}}return s[m].apply(this,arguments)}}),u}}}};class ft{constructor(t,n){this._middlewares={},this.verno=0;const r=ft.dependencies;this._options=n={addons:ft.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Xe,dbReadyPromise:null,cancelOpen:Xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new fe(l=>{i.dbReadyResolve=l}),i.openCanceller=new fe((l,c)=>{i.cancelOpen=c}),this._state=i,this.name=t,this.on=qr(this,"populate","blocked","versionchange","close",{ready:[Ko,Xe]}),this.on.ready.subscribe=Yl(this.on.ready.subscribe,l=>(c,u)=>{ft.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||fe.resolve().then(c),u&&l(c);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(c),u&&l(c);else{l(c);const x=this;u||l(function m(){x.on.ready.unsubscribe(c),x.on.ready.unsubscribe(m)})}})}),this.Collection=(o=this,Ir(Bd.prototype,function(l,c){this.db=o;let u=pc,h=null;if(c)try{u=c()}catch(S){h=S}const x=l._ctx,m=x.table,A=m.hook.reading.fire;this._ctx={table:m,index:x.index,isPrimKey:!x.index||m.schema.primKey.keyPath&&x.index===m.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:x.or,valueMapper:A!==es?A:null}})),this.Table=function(l){return Ir(Md.prototype,function(c,u,h){this.db=l,this._tx=h,this.name=c,this.schema=u,this.hook=l._allTables[c]?l._allTables[c].hook:qr(null,{creating:[Sd,Xe],reading:[Cd,es],updating:[Td,Xe],deleting:[Dd,Xe]})})}(this),this.Transaction=function(l){return Ir(Ud.prototype,function(c,u,h,x,m){this.db=l,this.mode=c,this.storeNames=u,this.schema=h,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=qr(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe((A,S)=>{this._resolve=A,this._reject=S}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},A=>{var S=this.active;return this.active=!1,this.on.error.fire(A),this.parent?this.parent._reject(A):S&&this.idbtrans&&this.idbtrans.abort(),yt(A)})})}(this),this.Version=function(l){return Ir(Yd.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Ir(mc.prototype,function(c,u,h){this.db=l,this._ctx={table:c,index:u===":id"?null:u,or:h};const x=l._deps.indexedDB;if(!x)throw new De.MissingAPI;this._cmp=this._ascending=x.cmp.bind(x),this._descending=(m,A)=>x.cmp(A,m),this._max=(m,A)=>x.cmp(m,A)>0?m:A,this._min=(m,A)=>x.cmp(m,A)<0?m:A,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=ss(n.IDBKeyRange),this._createTransaction=(l,c,u,h)=>new this.Transaction(l,c,u,this._options.chromeTransactionDurability,h),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Hr.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(l))},this.use(Xd),this.use(Qd),this.use(th),this.use(Zd),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new De.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new De.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(s=>s._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(qd),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?t():new fe((n,r)=>{if(this._state.openComplete)return r(new De.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new De.DatabaseClosed);this.open().catch(Xe)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:s}){s&&this.unuse({stack:t,name:s});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:r??10,name:s}),i.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return zd(this)}_close(){const t=this._state,n=Hr.indexOf(this);if(n>=0&&Hr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new fe(r=>{t.dbReadyResolve=r}),t.openCanceller=new fe((r,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new De.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new fe((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=it(()=>{(function({indexedDB:l,IDBKeyRange:c},u){!Jo(l)&&u!==ci&&qo(l,c).delete(u).catch(Xe)})(this._deps,this.name),r()}),o.onerror=ln(s),o.onblocked=this._fireOnBlocked};if(t)throw new De.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ht(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Gd.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let s=xe.trans;s&&s.db===this&&t.indexOf("!")===-1||(s=null);const i=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(u=>{var h=u instanceof this.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),t=="r"||t===xi)o=xi;else{if(t!="rw"&&t!=ki)throw new De.InvalidArgument("Invalid transaction mode: "+t);o=ki}if(s){if(s.mode===xi&&o===ki){if(!i)throw new De.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(u=>{if(s&&s.storeNames.indexOf(u)===-1){if(!i)throw new De.SubTransaction("Table "+u+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,(h,x)=>{x(u)}):yt(u)}const c=_c.bind(null,this,o,l,s,r);return s?s._promise(o,c,"lock"):xe.trans?$r(xe.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!qt(this._allTables,t))throw new De.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const nh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class rh{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[nh](){return this}}function xc(e,t){return ht(t).forEach(n=>{Gs(e[n]||(e[n]=new mn),t[n])}),e}function sh(e){let t,n=!1;const r=new rh(s=>{const i=Bo(e);let o=!1,l={},c={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Rn.storagemutated.unsubscribe(A)}};s.start&&s.start(u);let h=!1,x=!1;function m(){return ht(c).some(O=>l[O]&&eh(l[O],c[O]))}const A=O=>{xc(l,O),m()&&S()},S=()=>{if(h||o)return;l={};const O={},R=function(B){i&&Ar();const E=()=>Mn(e,{subscr:B,trans:null}),$=xe.trans?$r(xe.transless,E):E();return i&&$.then(kn,kn),$}(O);x||(Rn(rs,A),x=!0),h=!0,Promise.resolve(R).then(B=>{n=!0,t=B,h=!1,o||(m()?S():(l={},c=O,s.next&&s.next(B)))},B=>{h=!1,n=!1,s.error&&s.error(B),u.unsubscribe()})};return S(),u});return r.hasValue=()=>n,r.getValue=()=>t,r}let ho;try{ho={indexedDB:rt.indexedDB||rt.mozIndexedDB||rt.webkitIndexedDB||rt.msIndexedDB,IDBKeyRange:rt.IDBKeyRange||rt.webkitIDBKeyRange}}catch{ho={indexedDB:null,IDBKeyRange:null}}const qn=ft;function Ms(e){let t=bn;try{bn=!0,Rn.storagemutated.fire(e)}finally{bn=t}}Or(qn,{...As,delete:e=>new qn(e,{addons:[]}).delete(),exists:e=>new qn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Jo(t)?Promise.resolve(t.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==ci)):qo(t,n).toCollection().primaryKeys()}(qn.dependencies).then(e)}catch{return yt(new De.MissingAPI)}},defineClass:()=>function(e){It(this,e)},ignoreTransaction:e=>xe.trans?$r(xe.transless,e):e(),vip:co,async:function(e){return function(){try{var t=uo(e.apply(this,arguments));return t&&typeof t.then=="function"?t:fe.resolve(t)}catch(n){return yt(n)}}},spawn:function(e,t,n){try{var r=uo(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:fe.resolve(r)}catch(s){return yt(s)}},currentTransaction:{get:()=>xe.trans||null},waitFor:function(e,t){const n=fe.resolve(typeof e=="function"?qn.ignoreTransaction(e):e).timeout(t||6e4);return xe.trans?xe.trans.waitFor(n):n},Promise:fe,debug:{get:()=>dn,set:e=>{Zl(e,e==="dexie"?()=>!0:hc)}},derive:_r,extend:It,props:Or,override:Yl,Events:qr,on:Rn,liveQuery:sh,extendObservabilitySet:xc,getByKeyPath:wn,setByKeyPath:an,delByKeyPath:function(e,t){typeof t=="string"?an(e,t,void 0):"length"in t&&[].map.call(t,function(n){an(e,n,void 0)})},shallowClone:Gl,deepClone:ls,getObjectDiff:Yo,cmp:$t,asap:Wl,minKey:to,addons:[],connections:Hr,errnames:jo,dependencies:ho,semVer:Ia,version:Ia.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),qn.maxKey=ss(qn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rn(rs,e=>{if(!bn){let t;li?(t=document.createEvent("CustomEvent"),t.initCustomEvent(An,!0,!0,e)):t=new CustomEvent(An,{detail:e}),bn=!0,dispatchEvent(t),bn=!1}}),addEventListener(An,({detail:e})=>{bn||Ms(e)}));let bn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(An);typeof e.unref=="function"&&e.unref(),Rn(rs,t=>{bn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ms(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Rn(rs,t=>{try{bn||(typeof localStorage<"u"&&localStorage.setItem(An,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:An,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===An){const n=JSON.parse(t.newValue);n&&Ms(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===An&&Ms(t.changedParts)})}fe.rejectionMapper=function(e,t){if(!e||e instanceof wr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ea[e.name])return e;var n=new Ea[e.name](t||e.message,e);return"stack"in e&&_n(n,"stack",{get:function(){return this.inner.stack}}),n},Zl(dn,hc);const ct=new ft("avito_scraper");function ih(e=1){ct.version(e).stores({reviewsFilter:`
            key,
            productName,
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            closeTabs, 
            *profilesLinks
        `,profileInfoList:`
            ++id,
            &url,
            name,
            comment,
            marked,
            *reviewsList
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class oh{constructor(t){Kt(this,"canvas",null);Kt(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var c,u;const s={...this.settings,...r,type:t},i=(c=this.canvas)==null?void 0:c.querySelector(`.${this.settings.groupContainerClass}.position-${s.position}`),o=this.createToast(n,s);if(i)return i.append(o),o;const l=this.createContainer(s);return l.append(o),(u=this.canvas)==null||u.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),s=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...s),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const i=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(i),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const Ue=new oh({hideOnClick:!0,position:"bottom-right"});var Ve=(e=>(e.ReviewsFilterSaved=" ",e.ReviewsFilterSaveError="   ",e.ReviewsFilterCleared=" ",e.ReviewsFilterClearError="     ",e.ReviewsFilterGetError="     ",e.ReviewsFilterAllLinksParsed="    ",e.ReviewsFilterSimilarLinks="    ",e.ParsingReviewsCanceled="  ",e.ParsingReviewsStarted="  ",e.ParsingReviewsFinished="  ",e.TabOpenError="   ",e.ProfileCreated="   ",e.ProfileCreateError="     ",e.ProfileEdited="  ",e.ProfileEditeError="   ",e.ProfileDeleted="  ",e.ProfileDeleteError="   ",e.ProfileLinkCopied="    ",e.ProfileLinkAddedInReviewsFilter="     ",e.ProfileInfoListAddedInDB="  ",e.ProfileInfoListRemovedFromDB="  ",e.InfoCopied="   ",e.InfoNotFound="  ",e.ResultsNotFound="  ",e.ProductNameCopied="    ",e.WaitOpenPage="    ...",e.DBExportSuccess="   ",e.DBExportError="   ",e.DBImportError="   ",e.DBImportSuccess="   ",e.DBDropSuccess="   ",e.DBDropError="    ",e.ProfilesParsingEnded="  ",e.ProfilesParsingError="   ",e))(Ve||{});function Ka(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function kr(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ua(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}async function kc(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(s,i){i.status==="complete"&&s===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function Va(){let t=(await chrome.tabs.query({})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function ah(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Xs(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("    ",n)}t.remove()}function lh(e,t){return Math.floor(Math.random()*(t-e+1))+e}class ch{constructor(){Kt(this,"list",sn([]));Kt(this,"state",Kn({contentModalData:[],contentModalVisible:!1,viewAllButtonVisible:!1,viewMoreThanButtonVisible:!1,removeInfoListButtonVisible:!1}))}pushProfileInfo(t){this.list.value.push(t)}pushResultsByUrl(t,n){const r=this.list.value.find(s=>s.url===t);r&&(r.reviewsList=n,this.sortResults(r,"product_name_asc"))}sortResults(t,n){if(t.reviewsList){t.reviewsSortedBy=n;let r=JSON.parse(JSON.stringify(t.reviewsList));n==="product_name_asc"&&r.sort((s,i)=>s.productName.localeCompare(i.productName)),n==="product_name_desc"&&r.sort((s,i)=>i.productName.localeCompare(s.productName)),n==="rating_desc"&&r.sort((s,i)=>s.rating>i.rating?-1:s.rating<i.rating?1:0),n==="rating_asc"&&r.sort((s,i)=>s.rating>i.rating?1:s.rating<i.rating?-1:0),n==="date_desc"&&r.sort((s,i)=>s.date>i.date?-1:s.date<i.date?1:0),n==="date_asc"&&r.sort((s,i)=>s.date>i.date?1:s.date<i.date?-1:0),n==="delivery_desc"&&r.sort((s,i)=>Number(i.delivery)-Number(s.delivery)),n==="delivery_asc"&&r.sort((s,i)=>Number(s.delivery)-Number(i.delivery)),t.reviewsList=r}}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}
`,n+=`${kr(t.parsingDate)}



`,this.sortResults(t,"product_name_asc"),(r=t.reviewsList)==null||r.forEach(s=>{let i=new Date(s.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(i);n+=`${s.productName}~${o}${s.delivery?"~Delivery":""}
`}),n&&(Xs(n),Ue.show("success",Ve.InfoCopied))}getMoreThanResults(t=10){let n=[],r=new Map;this.list.value.forEach(i=>{var o;(o=i.reviewsList)==null||o.forEach(l=>{if(r.has(l.productName)){let c=r.get(l.productName);if(c){let u=[...c,{...l,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`,count:0}];r.set(l.productName,u)}}else r.set(l.productName,[{...l,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`,count:0}])})}),r.forEach((i,o)=>{i.length>=t&&(i[0]&&(i[0].count=i.length),n.push(i[0]))}),r.clear();let s=JSON.parse(JSON.stringify(n));return s.sort((i,o)=>i.count>o.count?-1:i.count<o.count?1:0),n=s,n}getAllResults(){let t=[];this.list.value.forEach(r=>{var s;(s=r.reviewsList)==null||s.forEach(i=>{t.push({...i,color:r.color,info:`${r.name} / ${r.rating} / ${r.reviewsCount} / ${r.subscribers} / ${r.deliveryInfo}`,count:0})})});let n=JSON.parse(JSON.stringify(t));return n.sort((r,s)=>r.productName.localeCompare(s.productName)),t=n,t}async apiProfileCheckInDB(t){let n=await ct.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiCreateInfoList(){try{let t=JSON.parse(JSON.stringify(this.list.value));t.length&&(ct.profileInfoList.clear(),ct.profileInfoList.bulkAdd(t),Ue.show("success",Ve.ProfileInfoListAddedInDB))}catch(t){console.log(t)}finally{}}async apiGetInfoList(){try{const t=await ct.profileInfoList.toArray();if(t.length)return t}catch(t){console.log(t)}finally{}return[]}async apiRemoveInfoList(){try{await ct.profileInfoList.clear(),Ue.show("success",Ve.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiRemoveInfoListOnlyUnmarked(){try{let n=(await ct.profileInfoList.filter(r=>r.marked===!1).toArray()).map(r=>r.id);await ct.profileInfoList.bulkDelete(n),Ue.show("warning",Ve.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers,activeAdds:n.activeAdds,completedAdds:n.completedAdds}]};const s=await ct.savedProfiles.add(r);t.id=s,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,Ue.show("success",Ve.ProfileCreated)}catch(n){console.log(n),Ue.show("error",Ve.ProfileCreateError)}finally{}}}const Ee=new ch,uh={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},fh={class:"centered py-3 flex flex-wrap items-center gap-3"},dh={class:"flex items-center gap-3 ml-auto"},hh=Mt({__name:"Header",setup(e){async function t(){Ee.state.contentModalVisible=!0,Ee.state.contentModalData=Ee.getAllResults()}async function n(){Ee.state.contentModalVisible=!0,Ee.state.contentModalData=Ee.getMoreThanResults()}async function r(){window.confirm("   ?")&&(Ee.list.value=[],Ee.apiRemoveInfoList())}return(s,i)=>(re(),le("header",uh,[F("div",fh,[(re(!0),le(nt,null,vn(te(fn).list,o=>(re(),Ft(At,{key:o.value,icon:o.icon,class:_t([te(fn).active.value===o.value?"ring-2 ring-white":""]),onClick:l=>te(fn).changeTab(o.value)},{default:St(()=>[Tt(Pe(o.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),F("div",dh,[te(Ee).state.viewAllButtonVisible&&te(Ee).list.value.length>1?(re(),Ft(At,{key:0,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(t,["stop","prevent"])},{default:St(()=>[Tt(" ")]),_:1},8,["onClick"])):Be("",!0),te(Ee).state.viewMoreThanButtonVisible&&te(Ee).list.value.length>1?(re(),Ft(At,{key:1,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(n,["stop","prevent"])},{default:St(()=>[Tt(" >= 10")]),_:1},8,["onClick"])):Be("",!0),te(Ee).state.removeInfoListButtonVisible&&te(Ee).list.value.length?(re(),Ft(At,{key:2,theme:"danger",type:"button",icon:"delete_sweep",onClick:ut(r,["stop","prevent"])},null,8,["onClick"])):Be("",!0)]),Fe(At,{theme:"info",type:"button",icon:"settings",class:_t(["ml-auto",[te(fn).active.value===te(Pn).Settings?"ring-2 ring-white":""]]),onClick:i[0]||(i[0]=o=>te(fn).changeTab(te(Pn).Settings))},null,8,["class"])])]))}}),ph={class:"switch"},yh=["tabindex","checked"],mh=["tabindex","checked"],gh=F("div",{class:"switch__label"},null,-1),Ha=Mt({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,s)=>(re(),le("div",ph,[r.type==="checkbox"?(re(),le("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,yh)):Be("",!0),r.type==="radio"?(re(),le("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,mh)):Be("",!0),gh]))}});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cc={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(vh,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return Y}});var s={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},i={classes:"",inline:!1,locale:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:s.days,minView:s.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function l(){let{tagName:D="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=document.createElement(D);return a&&v.classList.add(...a.split(" ")),p&&(v.id=p),f&&(v.innerHTML=f),y&&c(v,y),v}function c(D,a){for(let[f,p]of Object.entries(a))p!==void 0&&D.setAttribute(f,p);return D}function u(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function h(D){let a=D.getHours(),{hours:f,dayPeriod:p}=x(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:m(a),hours12:f,dayPeriod:p,fullHours12:m(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function x(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function m(D){return D<10?"0"+D:D}function A(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function S(){let D=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let v in y)y[v]&&D.push(v);else y&&D.push(y)}),D.join(" ")}function O(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.days;if(!D||!a)return!1;let p=h(D),y=h(a);return{[s.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[s.months]:p.month===y.month&&p.year===y.year,[s.years]:p.year===y.year}[f]}function R(D,a,f){let p=E(D,!1).getTime(),y=E(a,!1).getTime();return f?p>=y:p>y}function B(D,a){return!R(D,a,!0)}function E(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||$(f),f}function $(D){return D.setHours(0,0,0,0),D}function I(D,a,f){D.length?D.forEach(p=>{p.addEventListener(a,f)}):D.addEventListener(a,f)}function U(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:U(D.parentNode,a))}function J(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[v,w]of Object.entries(y))if(w!==void 0&&w.toString()==="[object Object]"){let C=D[v]!==void 0?D[v].toString():void 0,P=w.toString(),L=Array.isArray(w)?[]:{};D[v]=D[v]?C!==P?L:D[v]:L,H(D[v],w)}else D[v]=w}),D}function se(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function _(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class V{constructor(){let{type:a,date:f,dp:p,opts:y,body:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),_(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),_(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),_(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),_(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),_(this,"onChangeFocusDate",w=>{if(!w)return void(this.focused&&this.removeFocus());let C=O(w,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),_(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=v,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=h(this.date),v=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...v}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:v}=this.opts,{minDate:w,maxDate:C}=this.dp,{day:P}=h(this.date),L=this._isOutOfMinMaxRange(),M=(a=this.customData)===null||a===void 0?void 0:a.disabled,W=S("air-datepicker-cell",`-${this.singleType}-`,{"-current-":O(p,this.date,this.type),"-min-date-":w&&O(w,this.date,this.type),"-max-date-":C&&O(C,this.date,this.type)}),q="";switch(this.type){case s.days:q=S({"-weekend-":this.dp.isWeekend(P),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||L||M});break;case s.months:q=S({"-disabled-":L||M});break;case s.years:q=S({"-other-decade-":this.isOtherDecade,"-disabled-":L||this.isOtherDecade&&!v||M})}return S(W,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=h(this.date),{showOtherMonths:v,showOtherYears:w}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case s.days:return!v&&this.isOtherMonth?"":y;case s.months:return this.dp.locale[this.opts.monthsField][p];case s.years:return!w&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:v,year:w,date:C}=h(y),P=p===s.days,L=p===s.years,M=!!a&&new Date(w,L?a.getMonth():v,P?C:a.getDate()),W=!!f&&new Date(w,L?f.getMonth():v,P?C:f.getDate());return a&&f?B(M,a)||R(W,f):a?B(M,a):f?R(W,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=S({"-in-range-":a&&f&&(y=this.date,v=a,w=f,R(y,v)&&B(y,w)),"-range-from-":a&&O(this.date,a,this.type),"-range-to-":f&&O(this.date,f,this.type)});var y,v,w;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){O(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function j(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let _e={[s.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${s.days}-"></div>`,[s.months]:`<div class="air-datepicker-body--cells -${s.months}-"></div>`,[s.years]:`<div class="air-datepicker-body--cells -${s.years}-"></div>`};const ue=".air-datepicker-cell";class Ie{constructor(a){let{dp:f,type:p,opts:y}=a;j(this,"handleClick",v=>{let w=v.target.closest(ue).adpCell;if(w.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(w.date,w.type);C?this.dp._handleAlreadySelectedDates(C,w.date):this.dp.selectDate(w.date)}),j(this,"handleDayNameClick",v=>{let w=v.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(w),datepicker:this.dp})}),j(this,"onChangeCurrentView",v=>{v!==this.type?this.hide():(this.show(),this.render())}),j(this,"onMouseOverCell",v=>{let w=U(v.target,ue);this.dp.setFocusDate(!!w&&w.adpCell.date)}),j(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),j(this,"onClickBody",v=>{let{onClickDayName:w}=this.opts,C=v.target;C.closest(ue)&&this.handleClick(v),w&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(v)}),j(this,"onMouseDown",v=>{this.pressed=!0;let w=U(v.target,ue),C=w&&w.adpCell;O(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),O(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),j(this,"onMouseMove",v=>{if(!this.pressed||!this.dp.isMinViewReached)return;v.preventDefault();let w=U(v.target,ue),C=w&&w.adpCell,{selectedDates:P,rangeDateTo:L,rangeDateFrom:M}=this.dp;if(!C||C.isDisabled)return;let{date:W}=C;if(P.length===2){if(this.rangeFromFocused&&!R(W,L)){let{hours:q,minutes:G}=h(M);W.setHours(q),W.setMinutes(G),this.dp.rangeDateFrom=W,this.dp.replaceDate(M,W)}if(this.rangeToFocused&&!B(W,M)){let{hours:q,minutes:G}=h(L);W.setHours(q),W.setMinutes(G),this.dp.rangeDateTo=W,this.dp.replaceDate(L,W)}}}),j(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),j(this,"onChangeViewDate",(v,w)=>{if(!this.isVisible)return;let C=A(v),P=A(w);switch(this.dp.currentView){case s.days:if(O(v,w,s.months))return;break;case s.months:if(O(v,w,s.years))return;break;case s.years:if(C[0]===P[0]&&C[1]===P[1])return}this.render()}),j(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(v=>{this.$cells.appendChild(v.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===s.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;I(this.$el,"mouseover",this.onMouseOverCell),I(this.$el,"mouseout",this.onMouseOutCell),I(this.$el,"click",this.onClickBody),a&&f&&(I(this.$el,"mousedown",this.onMouseDown),I(this.$el,"mousemove",this.onMouseMove),I(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:_e[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,v=a,w=0;for(;w<7;){let C=v%7;f+=`<div class="${S("air-datepicker-body--day-name",{[s.cssClassWeekend]:p(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,w++,v++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=u(a),{year:y,month:v}=h(a),w=new Date(y,v,1),C=new Date(y,v,p),P=w.getDay()-f,L=6-C.getDay()+f;P=P<0?P+7:P,L=L>6?L-7:L;let M=function(pe,ve){let{year:ne,month:g,date:d}=h(pe);return new Date(ne,g,d-ve)}(w,P),W=p+P+L,q=M.getDate(),{year:G,month:Z}=h(M),oe=0;for(;oe<W;){let pe=new Date(G,Z,q+oe);this._generateCell(pe),oe++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,v=new V({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(v),v}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=A(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case s.days:this._generateDayCells();break;case s.months:this._generateMonthCells();break;case s.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView)}}function be(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class he{constructor(a){let{dp:f,opts:p}=a;be(this,"onClickNav",y=>{let v=U(y.target,".air-datepicker-nav--action");if(!v)return;let w=v.dataset.action;this.dp[w]()}),be(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),be(this,"update",()=>{let{prevHtml:y,nextHtml:v}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=v,this._resetNavStatus(),this.render(),this.handleNavStatus()}),be(this,"renderDelay",()=>{setTimeout(this.render)}),be(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,v){for(let w in v)v[w]?y.classList.add(w):y.classList.remove(w)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(s.eventChangeTime,this.render))}destroy(){this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(s.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:v}=this.dp.parsedViewDate,w=!!f&&h(f),C=!!p&&h(p);switch(this.dp.currentView){case s.days:f&&w.month>=v&&w.year>=y&&this._disableNav("prev"),p&&C.month<=v&&C.year<=y&&this._disableNav("next");break;case s.months:f&&w.year>=y&&this._disableNav("prev"),p&&C.year<=y&&this._disableNav("next");break;case s.years:{let P=A(this.dp.viewDate);f&&w.year>=P[0]&&this._disableNav("prev"),p&&C.year<=P[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(v=>{v.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var ce={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class We{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&ce[f]&&(p=ce[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:v={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:S("air-datepicker-button",p),attrs:v})}render(){this.generateButtons()}}function Ye(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class st{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ye(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Ye(this,"onChangeSelectedDate",y=>{let{date:v,updateTime:w=!1}=y;v&&(this.setMinMaxTime(v),this.setCurrentTime(!!w&&v),this.addTimeToDate(v))}),Ye(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Ye(this,"onChangeInputRange",y=>{let v=y.target;this[v.getAttribute("name")]=v.value,this.updateText(),this.dp.trigger(s.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Ye(this,"onMouseEnterLeave",y=>{let v=y.target.getAttribute("name"),w=this.$minutesText;v==="hours"&&(w=this.$hoursText),w.classList.toggle("-focus-")}),Ye(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Ye(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(k("h"))||p.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),I(this.$ranges,a,this.onChangeInputRange),I(this.$ranges,"mouseenter",this.onMouseEnterLeave),I(this.$ranges,"mouseleave",this.onMouseEnterLeave),I(this.$ranges,"focus",this.onFocus),I(this.$ranges,"mousedown",this.onFocus),I(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:S("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:v,minMinutes:w,maxHours:C,maxMinutes:P,dayPeriod:L,opts:{hoursStep:M,minutesStep:W}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${m(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${m(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${L}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${v}" max="${C}" step="${M}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${w}" max="${P}" step="${W}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&O(a,f)&&this.setMinTimeFromMinDate(f),p&&O(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?h(a):this;this.hours=J(f,this.minHours,this.maxHours),this.minutes=J(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=J(a,0,23),this.minMinutes=J(f,0,59),this.maxHours=J(p,0,23),this.maxMinutes=J(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){c(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,c(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=m(this.displayHours),this.$minutesText.innerHTML=m(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=x(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function qe(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Bt{constructor(a){let{dp:f,opts:p}=a;qe(this,"pressedKeys",new Set),qe(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,v)=>v.up()]])),qe(this,"handleHotKey",y=>{let v=this.hotKeys.get(y),w=h(this.getInitialFocusDate());v(w,this.dp);let{year:C,month:P,date:L}=w,M=u(new Date(C,P));M<L&&(L=M);let W=this.dp.getClampedDate(new Date(C,P,L));this.dp.setFocusDate(W,{viewDateTransition:!0})}),qe(this,"isHotKeyPressed",()=>{let y=!1,v=this.pressedKeys.size,w=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(P=>{y||v!==P.length||(y=P.every(w)&&C)});else{if(v!==C.length)continue;y=C.every(w)&&C}}return y}),qe(this,"isArrow",y=>y>=37&&y<=40),qe(this,"onKeyDown",y=>{let{key:v,which:w}=y,{dp:C,dp:{focusDate:P},opts:L}=this;this.registerKey(v);let M=this.isHotKeyPressed();if(M)return y.preventDefault(),void this.handleHotKey(M);if(this.isArrow(w))return y.preventDefault(),void this.focusNextCell(v);if(v==="Enter"){if(C.currentView!==L.minView)return void C.down();if(P){let W=C._checkIfDateIsSelected(P);return void(W?C._handleAlreadySelectedDates(W,P):C.selectDate(P))}}v==="Escape"&&this.dp.hide()}),qe(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:v}}=this.dp,w=a||p[p.length-1];if(!w)switch(f){case s.days:w=new Date(y,v,new Date().getDate());break;case s.months:w=new Date(y,v,1);break;case s.years:w=new Date(y,0,1)}return w}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:v,years:w}=s,C=h(f),P=C.year,L=C.month,M=C.date;switch(a){case"ArrowLeft":p===y&&(M-=1),p===v&&(L-=1),p===w&&(P-=1);break;case"ArrowUp":p===y&&(M-=7),p===v&&(L-=3),p===w&&(P-=4);break;case"ArrowRight":p===y&&(M+=1),p===v&&(L+=1),p===w&&(P+=1);break;case"ArrowDown":p===y&&(M+=7),p===v&&(L+=3),p===w&&(P+=4)}let W=this.dp.getClampedDate(new Date(P,L,M));this.dp.setFocusDate(W,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ge={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function de(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var P=C.call(v,w);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Re="",K="",z=!1;class Y{static buildGlobalContainer(a){z=!0,Re=l({className:a,id:a}),o("body").appendChild(Re)}constructor(a,f){var p=this;if(de(this,"viewIndexes",[s.days,s.months,s.years]),de(this,"next",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(w,C+1,1));break;case s.months:this.setViewDate(new Date(w+1,C,1));break;case s.years:this.setViewDate(new Date(w+10,0,1))}}),de(this,"prev",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(w,C-1,1));break;case s.months:this.setViewDate(new Date(w-1,C,1));break;case s.years:this.setViewDate(new Date(w-10,0,1))}}),de(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),de(this,"setPosition",function(w){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(w=w||p.opts.position)=="function")return void(p.customHide=w({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:C,done:p._finishHide}));let P,L,{isMobile:M}=p.opts,W=p.$el.getBoundingClientRect(),q=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,oe=p.$datepicker.getBoundingClientRect(),pe=w.split(" "),ve=window.scrollY,ne=window.scrollX,g=p.opts.offset,d=pe[0],b=pe[1];if(M)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:W.width,height:p.$el.offsetHeight},ve=0,ne=0),G!==Z&&G!==document.body){let T=G.getBoundingClientRect();q={top:W.top-T.top,left:W.left-T.left,width:W.width,height:W.height},ve=0,ne=0}switch(d){case"top":P=q.top-oe.height-g;break;case"right":L=q.left+q.width+g;break;case"bottom":P=q.top+q.height+g;break;case"left":L=q.left-oe.width-g}switch(b){case"top":P=q.top;break;case"right":L=q.left+q.width-oe.width;break;case"bottom":P=q.top+q.height-oe.height;break;case"left":L=q.left;break;case"center":/left|right/.test(d)?P=q.top+q.height/2-oe.height/2:L=q.left+q.width/2-oe.width/2}p.$datepicker.style.cssText=`left: ${L+ne}px; top: ${P+ve}px`}}),de(this,"_setInputValue",()=>{let{opts:w,$altField:C,locale:{dateFormat:P}}=this,{altFieldDateFormat:L,altField:M}=w;M&&C&&(C.value=this._getInputValue(L)),this.$el.value=this._getInputValue(P)}),de(this,"_getInputValue",w=>{let{selectedDates:C,opts:P}=this,{multipleDates:L,multipleDatesSeparator:M}=P;if(!C.length)return"";let W=typeof w=="function",q=W?w(L?C:C[0]):C.map(G=>this.formatDate(G,w));return q=W?q:q.join(M),q}),de(this,"_checkIfDateIsSelected",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.days,P=!1;return p.selectedDates.some(L=>{let M=O(w,L,C);return P=M&&L,M}),P}),de(this,"_scheduleCallAfterTransition",w=>{this._cancelScheduledCall(),w&&w(!1),this._onTransitionEnd=()=>{w&&w(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),de(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),de(this,"setViewDate",w=>{if(!((w=se(w))instanceof Date)||O(w,this.viewDate))return;let C=this.viewDate;this.viewDate=w;let{onChangeViewDate:P}=this.opts;if(P){let{month:L,year:M}=this.parsedViewDate;P({month:L,year:M,decade:this.curDecade})}this.trigger(s.eventChangeViewDate,w,C)}),de(this,"setFocusDate",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!w||(w=se(w))instanceof Date)&&(p.focusDate=w,p.opts.range&&w&&p._handleRangeOnFocus(),p.trigger(s.eventChangeFocusDate,w,C))}),de(this,"setCurrentView",w=>{if(this.viewIndexes.includes(w)){if(this.currentView=w,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(s.eventChangeCurrentView,w),!this.views[w]){let C=this.views[w]=new Ie({dp:this,opts:this.opts,type:w});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(w)}}),de(this,"_updateLastSelectedDate",w=>{this.lastSelectedDate=w,this.trigger(s.eventChangeLastSelectedDate,w)}),de(this,"destroy",()=>{let{showEvent:w,isMobile:C}=this.opts,P=this.$datepicker.parentNode;P&&P.removeChild(this.$datepicker),this.$el.removeEventListener(w,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),de(this,"update",w=>{let C=H({},this.opts);H(this.opts,w);let{timepicker:P,buttons:L,range:M,selectedDates:W,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&W&&this.selectDate(W),w.view&&this.setCurrentView(w.view),this._setInputValue(),C.range&&!M?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&M&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!P?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&P&&this._addTimepicker(),!C.buttons&&L?this._addButtons():C.buttons&&!L?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&L&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===s.days&&this.views[this.currentView].renderDayNames())}),de(this,"isOtherMonth",w=>{let{month:C}=h(w);return C!==this.parsedViewDate.month}),de(this,"isOtherYear",w=>{let{year:C}=h(w);return C!==this.parsedViewDate.year}),de(this,"isOtherDecade",w=>{let{year:C}=h(w),[P,L]=A(this.viewDate);return C<P||C>L}),de(this,"_onChangeSelectedDate",w=>{let{silent:C}=w;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),de(this,"_onChangeFocusedDate",function(w){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!w)return;let P=!1;C&&(P=p.isOtherMonth(w)||p.isOtherYear(w)||p.isOtherDecade(w)),P&&p.setViewDate(w)}),de(this,"_onChangeTime",w=>{let{hours:C,minutes:P}=w,L=new Date,{lastSelectedDate:M,opts:{onSelect:W}}=this,q=M;M||(q=L);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(P),M?(this._setInputValue(),W&&this._triggerOnSelect()):this.selectDate(q))}),de(this,"_onFocus",w=>{this.visible||this.show()}),de(this,"_onBlur",w=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),de(this,"_onMouseDown",w=>{this.inFocus=!0}),de(this,"_onMouseUp",w=>{this.inFocus=!1,this.$el.focus()}),de(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),de(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),de(this,"isWeekend",w=>this.opts.weekends.includes(w)),de(this,"getClampedDate",w=>{let{minDate:C,maxDate:P}=this,L=w;return P&&R(w,P)?L=P:C&&B(w,C)&&(L=C),L}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=H({},i,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:v}=this.opts;v||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=se(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:v,keyboardNav:w,onlyTimepicker:C}}=this,P=o("body");(!z||z&&Re&&!P.contains(Re))&&!p&&this.elIsInput&&!this.$customContainer&&Y.buildGlobalContainer(Y.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),w&&!C&&(this.keyboardNav=new Bt({dp:this,opts:a}))),v&&this.selectDate(v,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Re.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:v,position:w,classes:C,onlyTimepicker:P,isMobile:L}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(w)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),P&&this.$datepicker.classList.add("-only-timepicker-"),L&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Ie({dp:this,type:this.currentView,opts:a}),this.nav=new he({dp:this,opts:a}),v&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&se(a),this.maxDate=!!f&&se(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new st({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new We({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(s.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(s.eventChangeFocusDate,this._onChangeFocusedDate),this.on(s.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:v,timeFormat:w,dateTimeSeparator:C}=this.opts;var P;this.locale=(P=a,JSON.parse(JSON.stringify(P))),f&&(this.locale.dateFormat=f),w!==void 0&&w!==""&&(this.locale.timeFormat=w);let{timeFormat:L}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let M=L?C:"";this.locale.dateFormat=[this.locale.dateFormat,L||""].join(M)}v&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&R(a,p)&&this.setViewDate(p),f&&B(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=se(a),!(a instanceof Date))return;let p=f,y=this.locale,v=h(a),w=v.dayPeriod,C=A(a),P=Y.replacer,L={T:a.getTime(),m:v.minutes,mm:v.fullMinutes,h:v.hours12,hh:v.fullHours12,H:v.hours,HH:v.fullHours,aa:w,AA:w.toUpperCase(),E:y.daysShort[v.day],EEEE:y.days[v.day],d:v.date,dd:v.fullDate,M:v.month+1,MM:v.fullMonth,MMM:y.monthsShort[v.month],MMMM:y.months[v.month],yy:v.year.toString().slice(-2),yyyy:v.year,yyyy1:C[0],yyyy2:C[1]};for(let[M,W]of Object.entries(L))p=P(p,k(M),W);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:v,selectedDates:w}=this,{updateTime:C}=p,{moveToOtherMonthsOnSelect:P,moveToOtherYearsOnSelect:L,multipleDates:M,range:W,autoClose:q}=this.opts,G=w.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=se(a))instanceof Date){if(y===s.days&&a.getMonth()!==v.month&&P&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===s.years&&a.getFullYear()!==v.year&&L&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),M&&!W){if(G===M)return;this._checkIfDateIsSelected(a)||w.push(a)}else if(W)switch(G){case 1:w.push(a),this.rangeDateTo||(this.rangeDateTo=a),R(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(M||W?W&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=se(a))instanceof Date)return f.some((y,v)=>{if(O(y,a))return f.splice(v,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(v=>O(v,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||O(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:v,multipleDates:w,range:C}}=this,P=w||C,L=typeof y.dateFormat=="function";p.length&&(a=p.map(E),f=L?w?y.dateFormat(a):a.map(M=>y.dateFormat(M)):a.map(M=>this.formatDate(M,y.dateFormat))),v({date:P?a:a[0],formattedDate:P?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=se(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(R(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.day;if(!((a=se(a))instanceof Date))return;let{year:p,month:y,date:v}=h(a),w=`[data-year="${p}"]`,C=`[data-month="${y}"]`,P={[s.day]:`${w}${C}[data-date="${v}"]`,[s.month]:`${w}${C}`,[s.year]:`${w}`};return this.views[this.currentView].$el.querySelector(P[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return A(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===s.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===s.days}get $container(){return this.$customContainer||Re}static replacer(a,f,p){return a.replace(f,function(y,v,w,C){return v+p+C})}}var X;return de(Y,"defaults",i),de(Y,"version","3.3.5"),de(Y,"defaultGlobalContainerId","air-datepicker-global-container"),X=Y.prototype,Object.assign(X,ge),r.default}()})})(Cc);var _h=Cc.exports;const qa=bh(_h);class wh{constructor(){Kt(this,"list",sn([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Ee.list.value.find(s=>s.url===t),r=await ct.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let s=JSON.parse(JSON.stringify(n)),i=r[0];i.parsingResults.unshift({parsingDate:s.parsingDate,rating:s.rating,reviewsCount:s.reviewsCount,deliveryInfo:s.deliveryInfo,subscribers:s.subscribers,activeAdds:s.activeAdds,completedAdds:s.completedAdds});const o=await ct.savedProfiles.put(i)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){return t===0&&n===0?await ct.savedProfiles.toArray():[]}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await ct.savedProfiles.put(n))Ue.show("success",Ve.ProfileEdited);else throw new Error}catch{Ue.show("error",Ve.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await ct.savedProfiles.delete(t.id),Ue.show("success",Ve.ProfileDeleted)}catch(n){console.log(n),Ue.show("error",Ve.ProfileDeleteError)}finally{}}}const dt=new wh;class xh{constructor(){Kt(this,"state",Kn({loading:!1,currentPage:0,profilesListSortType:"name_asc",profilesList:[],profilesInParsingFilter:{}}))}sortProfileList(t="name_asc"){this.state.profilesListSortType=t;let n=JSON.parse(JSON.stringify(this.state.profilesList));t==="name_desc"&&n.sort((r,s)=>s.name.localeCompare(r.name)),t==="name_asc"&&n.sort((r,s)=>r.name.localeCompare(s.name)),t==="rating_desc"&&n.sort((r,s)=>r.rating>s.rating?-1:r.rating<s.rating?1:0),t==="rating_asc"&&n.sort((r,s)=>r.rating>s.rating?1:r.rating<s.rating?-1:0),t==="reviews_desc"&&n.sort((r,s)=>r.reviewsCount>s.reviewsCount?-1:r.reviewsCount<s.reviewsCount?1:0),t==="reviews_asc"&&n.sort((r,s)=>r.reviewsCount>s.reviewsCount?1:r.reviewsCount<s.reviewsCount?-1:0),t==="db_exist_desc"&&n.sort((r,s)=>Number(s.existsInDataBase)-Number(r.existsInDataBase)),t==="db_exist_asc"&&n.sort((r,s)=>Number(r.existsInDataBase)-Number(s.existsInDataBase)),this.state.profilesList=[],this.state.profilesList=[...n]}async checkProfilesInDB(){let t=await dt.apiGetList();this.state.profilesList.forEach(n=>{let r=n.url.split("/")[4];if(r){let s=t.find(i=>i.url.includes(r));s&&s.name===n.name&&(n.existsInDataBase=!0)}})}pushProfileList(t){let n=[...t,...this.state.profilesList];n=new Set(n.map(r=>JSON.stringify(r))),n=[...n].map(r=>JSON.parse(r)),this.state.profilesList=n,this.sortProfileList(),this.checkProfilesInDB(),this.checkProfileInParsingFilter()}checkProfileInParsingFilter(){this.state.profilesList.forEach(t=>{Oe.profileLinkGetByUrl(t.url)&&(this.state.profilesInParsingFilter[t.url]=t)})}removeLinksFromParsingFilter(t){delete this.state.profilesInParsingFilter[t]}clearProfilesList(){window.confirm("   ?")&&(this.state.profilesList=[],this.state.profilesInParsingFilter={})}}const ot=new xh;class kh{constructor(){Kt(this,"fields",Kn({profilesLinks:[{url:"",status:"new",highlight:!1}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,deliveryOnly:!1,closeTabs:!0}));Kt(this,"openedTab",sn({}))}get profileLinkNew(){return this.fields.profilesLinks.find(t=>t.status==="new")}get profileLinkHighlighted(){return this.fields.profilesLinks.find(t=>t.highlight)}profileLinkGetByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}profileLinkPushNew(t=""){this.fields.profilesLinks.push({url:t,status:"new",highlight:!1})}profileLinksRemoveEmpty(){this.fields.profilesLinks.forEach((t,n,r)=>{t.url===""&&r.splice(n,1)})}profileLinkRemove(t,n){ot.removeLinksFromParsingFilter(t.url),this.fields.profilesLinks.length===1?this.fields.profilesLinks[0].url="":this.fields.profilesLinks.splice(n,1),this.profileLinksHighlightDuplicates()}profileLinksHighlightDuplicates(){this.fields.profilesLinks.forEach((t,n,r)=>{let s=r.filter(i=>i.url===t.url&&t.url!=="");t.highlight=s.length>1})}profileLinkSetInfo(t,n){const r=this.profileLinkGetByUrl(t);r&&(r.info=n)}profileLinksPasteMultiple(t,n){let r=n.value.split(" ");if(r=r.filter(s=>s!==""),r.length>1){r.forEach((s,i)=>{i===0?t.url=s.trim():this.profileLinkPushNew(s.trim())});return}t.url=n.value.trim()}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.productName=t.productName,this.fields.deliveryOnly=t.deliveryOnly,this.fields.closeTabs=t.closeTabs,t}catch(t){console.log(t),Ue.show("error",Ve.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new",highlight:!1}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.deliveryOnly=!1,this.fields.closeTabs=!0,await this.apiRemoveFilter()}async parsingStart(){try{if(this.profileLinkNew){const t=this.fields.profilesLinks.map(r=>r.url);Ee.list.value=Ee.list.value.filter(r=>t.includes(r.url)||r.marked);const n=await kc(this.profileLinkNew.url);this.openedTab.value=n,n.id&&chrome.tabs.sendMessage(n.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.profileLinkNew.url})}else Ue.show("warning",Ve.ReviewsFilterAllLinksParsed)}catch{Ue.show("error",Ve.TabOpenError)}}async apiRemoveFilter(){try{await ct.reviewsFilter.where("key").equals("reviewsFilter").delete(),Ue.show("warning",Ve.ReviewsFilterCleared)}catch(t){console.log(t),Ue.show("warning",Ve.ReviewsFilterClearError)}}async apiGetFilter(){const t=await ct.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ua(t.dateFrom),t.dateTo=Ua(t.dateTo),(await ct.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?ct.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):ct.reviewsFilter.add({...t,key:"reviewsFilter"}),Ue.show("success",Ve.ReviewsFilterSaved)}catch(t){console.log(t),Ue.show("error",Ve.ReviewsFilterSaveError)}}}const Oe=new kh,Ch=["onSubmit"],Sh={class:"grid grid-cols-4 gap-5"},Dh={class:"col-span-4"},Th=F("div",{class:"text-sm font-medium mb-2"},"  ",-1),Oh={class:"flex items-center gap-4"},Eh={class:"flex-none select-none"},Ph={key:0,class:"font-icon text-3xl block text-green-400"},Ah={key:1,class:"font-icon text-3xl block text-red-400"},$h={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Ih={key:3,class:"font-icon text-3xl block text-gray-400"},Nh=["onUpdate:modelValue","onInput"],Fh={class:"flex-none cursor-pointer select-none"},Lh=["onClick"],Mh={class:"flex-none cursor-pointer select-none ml-auto"},Bh=["innerHTML"],Rh=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),jh=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),Kh={class:"col-span-2"},Uh=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),Vh=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),Hh=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),qh={class:"col-span-4"},Jh={class:"flex items-center"},Yh={class:"inline-block w-1/4"},Wh=F("div",{class:"mb-3 text-sm font-medium"},"  ",-1),zh={class:"inline-block w-1/4"},Gh=F("div",{class:"mb-3 text-sm font-medium"}," ",-1),Xh={class:"flex items-center gap-4 mt-10"},Qh=Mt({__name:"ProfilesParseFilter",setup(e){const t={dateFrom:null,dateTo:null},n={autoClose:!0,onSelect:({formattedDate:l,datepicker:c})=>{c.$el.id==="dateFrom"&&(Oe.fields.dateFrom=l),c.$el.id==="dateTo"&&(Oe.fields.dateTo=l)}};function r(l,c){Oe.profileLinksPasteMultiple(l,c.target),Oe.profileLinksHighlightDuplicates(),l.status="new",l.info=""}async function s(){window.confirm("  ?")&&(Oe.resetFields(),t.dateFrom.selectDate(Ka()),t.dateTo.selectDate(new Date),Ee.list.value=Ee.list.value.filter(l=>l.marked),Ee.apiRemoveInfoListOnlyUnmarked())}async function i(){if(Oe.profileLinkHighlighted){Ue.show("error",Ve.ReviewsFilterSimilarLinks);return}Oe.apiCreateFilter(),Ee.apiCreateInfoList()}async function o(){if(Oe.profileLinkHighlighted){Ue.show("error",Ve.ReviewsFilterSimilarLinks);return}Oe.parsingStart()}return sr(()=>{t.dateFrom=new qa("#dateFrom",n),t.dateTo=new qa("#dateTo",n),t.dateFrom.selectDate(Ka()),t.dateTo.selectDate(new Date),setTimeout(async()=>{const l=await Oe.apiGetFilter();l&&(t.dateFrom.selectDate(l.dateFrom),t.dateTo.selectDate(l.dateTo))},0)}),as(()=>{t.dateFrom.destroy(),t.dateTo.destroy()}),(l,c)=>(re(),le("form",{class:"pb-14 transition-opacity duration-300 delay-100",onSubmit:ut(o,["prevent"])},[F("div",Sh,[F("div",Dh,[Th,(re(!0),le(nt,null,vn(te(Oe).fields.profilesLinks,(u,h)=>(re(),le("div",{key:h,class:_t(h>0?"mt-5":"")},[F("div",Oh,[F("div",Eh,[u.status==="success"?(re(),le("i",Ph,"check_circle")):Be("",!0),u.status==="error"?(re(),le("i",Ah,"cancel")):Be("",!0),u.status==="wait"?(re(),le("i",$h,"rotate_right")):Be("",!0),u.status==="new"?(re(),le("i",Ih,"watch_later")):Be("",!0)]),Vt(F("input",{"onUpdate:modelValue":x=>u.url=x,tabindex:"1",type:"search",required:"",class:_t(["text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",{"ring-4 ring-red-400":u.highlight}]),onInput:x=>r(u,x)},null,42,Nh),[[Ht,u.url]]),F("div",Fh,[F("i",{class:"font-icon text-3xl block text-red-400",onClick:x=>te(Oe).profileLinkRemove(u,h)},"remove_circle_outline",8,Lh)]),F("div",Mh,[F("i",{class:"font-icon text-3xl block text-green-400",onClick:c[0]||(c[0]=x=>te(Oe).profileLinkPushNew())},"add_circle_outline")])]),u.info?(re(),le("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:u.info},null,8,Bh)):Be("",!0)],2))),128))]),F("div",null,[Rh,Vt(F("input",{"onUpdate:modelValue":c[1]||(c[1]=u=>te(Oe).fields.dateFrom=u),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Oe).fields.dateFrom]])]),F("div",null,[jh,Vt(F("input",{"onUpdate:modelValue":c[2]||(c[2]=u=>te(Oe).fields.dateTo=u),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Oe).fields.dateTo]])]),F("div",Kh,[Uh,Vt(F("input",{"onUpdate:modelValue":c[3]||(c[3]=u=>te(Oe).fields.productName=u),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Oe).fields.productName]])]),F("div",null,[Vh,Vt(F("input",{"onUpdate:modelValue":c[4]||(c[4]=u=>te(Oe).fields.ratingFrom=u),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Oe).fields.ratingFrom]])]),F("div",null,[Hh,Vt(F("input",{"onUpdate:modelValue":c[5]||(c[5]=u=>te(Oe).fields.ratingTo=u),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Oe).fields.ratingTo]])]),F("div",qh,[F("div",Jh,[F("label",Yh,[Wh,Fe(Ha,{tabindex:6,modelValue:te(Oe).fields.deliveryOnly,"onUpdate:modelValue":c[6]||(c[6]=u=>te(Oe).fields.deliveryOnly=u)},null,8,["modelValue"])]),F("label",zh,[Gh,Fe(Ha,{tabindex:7,modelValue:te(Oe).fields.closeTabs,"onUpdate:modelValue":c[7]||(c[7]=u=>te(Oe).fields.closeTabs=u)},null,8,["modelValue"])])])])]),F("div",Xh,[Fe(At,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:St(()=>[Tt(" ")]),_:1}),Fe(At,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:ut(i,["stop","prevent"])},{default:St(()=>[Tt(" ")]),_:1},8,["onClick"]),Fe(At,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:ut(s,["stop","prevent"])},{default:St(()=>[Tt(" ")]),_:1},8,["onClick"])])],40,Ch))}}),Zh=["onKeydown"],Sc=Mt({__name:"Modal",props:{width:{default:"580px"}},emits:["close"],setup(e,{emit:t}){const n=e,r=sn();function s(o){const l=o.target;!l.classList.contains("app-modal__body")&&!l.closest(".app-modal__body")&&i()}function i(){t("close")}return as(()=>{document.body.classList.remove("overflow-hidden")}),sr(()=>{var o;(o=r==null?void 0:r.value)==null||o.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(o,l)=>(re(),le("div",{ref_key:"modalRef",ref:r,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-60 z-100 overflow-y-scroll p-10 flex",onClick:s,onKeydown:nd(i,["esc"])},[F("div",{class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-10 m-auto max-w-full min-h-[100px] break-all",style:Sr({width:n.width})},[F("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:i},"close"),Pl(o.$slots,"default")],4)],40,Zh))}}),ep=["onClick"],$n=Mt({__name:"SortHeading",props:{currentSortType:{default:""},sortTypes:{default:()=>[]},label:{default:""}},emits:["sort"],setup(e,{emit:t}){const n=e,r=Lo(()=>!!(n.sortTypes.includes(n.currentSortType)&&n.currentSortType.includes("asc")));function s(){n.currentSortType.includes("desc")?t("sort",n.sortTypes.find(i=>i.includes("asc"))):t("sort",n.sortTypes.find(i=>i.includes("desc")))}return(i,o)=>(re(),le("div",{class:"flex items-center cursor-pointer select-none whitespace-nowrap",onClick:ut(s,["prevent"])},[F("div",{class:_t(["font-icon mr-2",[{"text-cyan-400":n.sortTypes.includes(n.currentSortType)},{"rotate-180":r.value}]])},"sort",2),F("div",null,Pe(n.label),1)],8,ep))}}),tp={key:0,class:"pb-10"},np=["onClick"],rp={class:"min-w-0 flex-1"},sp={class:"flex items-center gap-4 mb-4"},ip=["onClick"],op={key:0,class:"text-[16px] text-sky-300 font-medium italic"},ap={class:"flex flex-wrap items-center gap-x-4 gap-y-2 text-[16px] font-medium"},lp={class:"text-orange-300"},cp={class:"text-yellow-300"},up={class:"text-teal-300"},fp={class:"text-rose-300"},dp={class:"text-amber-300"},hp={key:0,class:"text-lime-300"},pp={key:1,class:"text-gray-300"},yp={class:"flex-none flex items-center gap-4"},mp={key:0,class:"flex-none"},gp=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"storage",-1),vp=[gp],bp=["onClick"],_p=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"cloud_upload",-1),wp=[_p],xp=["onClick"],kp=F("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"content_copy",-1),Cp=[kp],Sp=["onClick"],Dp={class:"font-icon text-3xl drop-shadow-xl"},Tp={key:0,class:"text-[14px] px-4 p-5"},Op={key:0,class:"mb-8"},Ep=F("div",{class:"mb-3 opacity-80"},":",-1),Pp=["onUpdate:modelValue"],Ap={key:0},$p={class:"mb-8 font-bold text-xl"},Ip={class:"w-full relative"},Np={class:"text-[16px] sticky top-[64px] bg-gray-600"},Fp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Lp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Mp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Bp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Rp={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},jp={class:"px-4 py-2 border border-white border-opacity-50"},Kp={class:"flex-none flex items-center"},Up={class:"text-base font-medium mr-1"},Vp={class:"text-[18px] font-icon text-yellow-400"},Hp={class:"px-4 py-2 border border-white border-opacity-50"},qp={class:"flex items-center gap-4"},Jp=["onClick"],Yp={class:"px-4 py-2 border border-white border-opacity-50"},Wp={key:2,class:"text-xl font-bold text-red-300"},zp=["title"],Gp=["onClick"],Xp=["onClick"],Qp={key:0},Zp={key:1},ey={key:1,class:"text-center text-xl font-bold"},ty={key:1,class:"text-center text-xl font-bold pb-10"},ny=Mt({__name:"ProfilesInfoList",setup(e){function t(){Ee.state.contentModalVisible=!1,Ee.state.contentModalData=[]}function n(h){Xs(h),Ue.show("success",Ve.ProductNameCopied)}function r(h){Xs(h.profileUrl),Ue.show("success",Ve.ProfileLinkCopied)}function s(h,x){Ee.sortResults(h,x)}function i(h){h.opened===void 0&&(h.opened=!0),h.opened=!h.opened}function o(h){h.url&&window.open(h.url,"_blank")}function l(h){h.marked=!h.marked}async function c(h){Ee.apiProfileCreate(h)}async function u(h){Ee.copyItemInfo(h)}return as(()=>{Ee.state.viewAllButtonVisible=!1,Ee.state.viewMoreThanButtonVisible=!1,Ee.state.removeInfoListButtonVisible=!1}),sr(async()=>{Ee.state.viewAllButtonVisible=!0,Ee.state.viewMoreThanButtonVisible=!0,Ee.state.removeInfoListButtonVisible=!0,Ee.list.value.forEach(async h=>{await Ee.apiProfileCheckInDB(h)}),Ee.list.value.length===1&&(Ee.list.value[0].opened=!0)}),(h,x)=>te(Ee).list.value.length?(re(),le("div",tp,[(re(!0),le(nt,null,vn(te(Ee).list.value,m=>{var A;return re(),le("div",{key:m.url,class:_t(["relative rounded-xl shadow-xl bg-gray-600 text-[16px] mb-3",m.opened?"ring ring-blue-400":""])},[F("div",{class:"relative flex items-start p-4 select-none cursor-pointer rounded-xl",style:Sr({"background-image":`linear-gradient(45deg, rgb(75 85 99) 0%, rgb(75 85 99) 70%, ${m.color.bg} 100%)`}),onClick:S=>i(m)},[F("div",rp,[F("div",sp,[F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(S=>o(m),["stop"])},Pe(m.name),9,ip),m.comment?(re(),le("div",op,Pe(m.comment),1)):Be("",!0)]),F("div",ap,[F("div",lp,Pe(m.rating),1),F("div",cp,Pe(m.reviewsCount),1),F("div",up,Pe(m.subscribers),1),F("div",fp,Pe(m.deliveryInfo),1),F("div",dp," - "+Pe(m.activeAdds),1),m.completedAdds?(re(),le("div",hp," - "+Pe(m.completedAdds),1)):Be("",!0),m.savedDate?(re(),le("div",pp,Pe(m.savedDate?te(kr)(m.savedDate):""),1)):Be("",!0)])]),F("div",yp,[m.existsInDataBase?(re(),le("div",mp,vp)):(re(),le("div",{key:1,class:"flex-none ml-auto",onClick:ut(S=>c(m),["stop"])},wp,8,bp)),F("div",{class:"flex-none",onClick:ut(S=>u(m),["stop"])},Cp,8,xp),F("div",{class:"flex-none",onClick:ut(S=>l(m),["stop"])},[F("div",Dp,Pe(m.marked?"bookmark":"bookmark_border"),1)],8,Sp)])],12,np),m.opened?(re(),le("div",Tp,[m.existsInDataBase?Be("",!0):(re(),le("div",Op,[Ep,Vt(F("input",{"onUpdate:modelValue":S=>m.comment=S,type:"search",required:"",class:"text-base w-1/4 max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,Pp),[[Ht,m.comment]])])),(A=m.reviewsList)!=null&&A.length?(re(),le(nt,{key:1},[m.opened?(re(),le("div",Ap,[F("div",$p,[F("div",null,[Tt("  - "),F("strong",null,Pe(m.reviewsList.length),1)])]),F("table",Ip,[F("tr",Np,[F("th",Fp,[Fe($n,{"sort-types":["date_desc","date_asc"],"current-sort-type":m.reviewsSortedBy,label:"",onSort:S=>s(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Lp,[Fe($n,{"sort-types":["rating_desc","rating_asc"],"current-sort-type":m.reviewsSortedBy,label:"",onSort:S=>s(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Mp,[Fe($n,{"sort-types":["product_name_desc","product_name_asc"],"current-sort-type":m.reviewsSortedBy,label:" ",onSort:S=>s(m,S)},null,8,["current-sort-type","onSort"])]),F("th",Bp,[Fe($n,{"sort-types":["delivery_desc","delivery_asc"],"current-sort-type":m.reviewsSortedBy,label:"",onSort:S=>s(m,S)},null,8,["current-sort-type","onSort"])])]),(re(!0),le(nt,null,vn(m.reviewsList,(S,O)=>{var R;return re(),le("tr",{key:m.reviewsSortedBy+O,class:"text-[14px] hover:bg-gray-600"},[F("td",Rp,Pe((R=te(kr)(S.date))==null?void 0:R.slice(0,10)),1),F("td",jp,[F("div",Kp,[F("div",Up,"("+Pe(S.rating)+") - ",1),(re(!0),le(nt,null,vn(S.rating,B=>(re(),le("div",Vp,"star"))),256))])]),F("td",Hp,[F("div",qp,[F("div",{class:"font-icon text-green-400 cursor-pointer",onClick:ut(B=>n(S.productName),["stop"])},"content_copy",8,Jp),F("div",null,Pe(S.productName),1)])]),F("td",Yp,[F("strong",{class:_t(S.delivery?"text-green-400":"text-red-400")},Pe(S.delivery?"":""),3)])])}),128))])])):Be("",!0)],64)):(re(),le("div",Wp,"  "))])):Be("",!0)],2)}),128)),te(Ee).state.contentModalVisible?(re(),Ft(Sc,{key:0,width:"800px",onClose:t},{default:St(()=>[te(Ee).state.contentModalData.length?(re(!0),le(nt,{key:0},vn(te(Ee).state.contentModalData,m=>{var A;return re(),le("div",{class:"flex text-sm items-center gap-2 py-0.5 px-1 mb-[2px] mr-5 font-medium",style:Sr({"background-color":m.color.bg,color:m.color.text}),title:m.info},[F("i",{class:"font-icon text-xl cursor-pointer drop-shadow-xl",onClick:S=>n(m.productName)},"content_copy",8,Gp),F("i",{class:"font-icon text-xl cursor-pointer drop-shadow-xl",onClick:S=>r(m)},"account_box",8,Xp),F("div",null,Pe(m.productName),1),m.count?Be("",!0):(re(),le("div",Qp,Pe((A=te(kr)(m.date))==null?void 0:A.slice(0,10)),1)),m.count?(re(),le("strong",Zp,"("+Pe(m.count)+")",1)):Be("",!0)],12,zp)}),256)):(re(),le("div",ey,"  "))]),_:1})):Be("",!0)])):(re(),le("div",ty,"  "))}}),ry=Mt({__name:"ProfilesParsedPage",setup(e){return(t,n)=>(re(),le(nt,null,[Fe(Qh),Fe(ny)],64))}});class sy{constructor(){Kt(this,"openedTab",sn({}));Kt(this,"fields",Kn({reviewsCount:100,categoryUrl:"",profileName:"",pageStart:1,pageEnd:10}))}async parsingStart(){const t=await kc(this.fields.categoryUrl);this.openedTab.value=t,t.id&&chrome.tabs.sendMessage(t.id,{action:"profiles-parsing-start",profilesFilterFields:this.fields,currentUrl:this.fields.categoryUrl})}}const Wt=new sy,iy={class:"grid grid-cols-4 gap-5"},oy={class:"col-span-4"},ay=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),ly={class:"flex items-center gap-4"},cy={key:0,class:"font-icon text-3xl block text-green-400 animate-spin"},uy={key:1,class:"flex-none font-medium text-[16px]"},fy={class:"text-green-400"},dy=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),hy=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),py=F("div",{class:"mb-2 text-sm font-medium"},"  ",-1),yy=F("div",{class:"mb-2 text-sm font-medium"}," ",-1),my={class:"flex items-center gap-4 mt-10"},gy=Mt({__name:"ProfilesSearchFilter",setup(e){async function t(){Wt.parsingStart()}return(n,r)=>(re(),le("form",{class:_t(["pb-14",{"pointer-events-none":te(ot).state.loading}]),onSubmit:r[6]||(r[6]=ut(s=>t(),["prevent"]))},[F("div",iy,[F("div",oy,[ay,F("div",ly,[te(ot).state.loading?(re(),le("i",cy,"rotate_right")):Be("",!0),te(ot).state.currentPage>0?(re(),le("div",uy,[F("strong",fy,Pe(te(ot).state.currentPage),1),Tt(" - "+Pe(te(Wt).fields.pageEnd),1)])):Be("",!0),Vt(F("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>te(Wt).fields.categoryUrl=s),type:"text",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Wt).fields.categoryUrl]])])]),F("div",null,[dy,Vt(F("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>te(Wt).fields.pageStart=s),required:"",type:"number",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Wt).fields.pageStart]])]),F("div",null,[hy,Vt(F("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>te(Wt).fields.pageEnd=s),required:"",type:"number",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Wt).fields.pageEnd]])]),F("div",null,[py,Vt(F("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>te(Wt).fields.reviewsCount=s),type:"number",min:"0",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Wt).fields.reviewsCount]])]),F("div",null,[yy,Vt(F("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>te(Wt).fields.profileName=s),type:"text",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,te(Wt).fields.profileName]])])]),F("div",my,[Fe(At,{theme:"success",type:"submit",icon:"find_in_page"},{default:St(()=>[Tt(" ")]),_:1}),Fe(At,{theme:"danger",type:"button",icon:"delete_sweep",onClick:r[5]||(r[5]=s=>te(ot).clearProfilesList())},{default:St(()=>[Tt(" ")]),_:1})])],34))}}),vy={key:0,class:"pb-14"},by={class:"mb-8 font-bold text-xl flex items-center gap-4"},_y={class:"w-full relative"},wy={class:"text-[16px] sticky top-[64px] bg-gray-600"},xy={class:"text-left px-4 py-2 border border-white border-opacity-50"},ky={class:"text-left px-4 py-2 border border-white border-opacity-50"},Cy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Sy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Dy={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Ty={class:"flex items-center gap-4"},Oy=["onClick"],Ey=["onClick"],Py=["href"],Ay={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},$y={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Iy={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Ny=Mt({__name:"ProfilesSearchedList",setup(e){function t(i){ot.sortProfileList(i)}function n(i){r(i)||(Oe.profileLinkPushNew(i.url),Oe.profileLinksHighlightDuplicates(),Oe.profileLinksRemoveEmpty(),ot.state.profilesInParsingFilter[i.url]=i)}function r(i){return i.url in ot.state.profilesInParsingFilter}function s(){ot.state.profilesList.forEach(i=>{ot.state.profilesInParsingFilter[i.url]=i,Oe.profileLinkGetByUrl(i.url)||Oe.profileLinkPushNew(i.url)}),Oe.profileLinksHighlightDuplicates(),Oe.profileLinksRemoveEmpty()}return(i,o)=>te(ot).state.profilesList.length?(re(),le("div",vy,[F("div",by,[F("div",null,[Tt("  - "),F("strong",null,Pe(te(ot).state.profilesList.length),1)]),F("i",{class:"font-icon text-green-400 cursor-pointer ml-auto text-3xl",onClick:o[0]||(o[0]=l=>s())},"playlist_add")]),F("table",_y,[F("tr",wy,[F("th",xy,[Fe($n,{label:"","sort-types":["name_desc","name_asc"],"current-sort-type":te(ot).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",ky,[Fe($n,{label:"","sort-types":["rating_desc","rating_asc"],"current-sort-type":te(ot).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",Cy,[Fe($n,{label:"","sort-types":["reviews_desc","reviews_asc"],"current-sort-type":te(ot).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])]),F("th",Sy,[Fe($n,{label:"  ","sort-types":["db_exist_desc","db_exist_asc"],"current-sort-type":te(ot).state.profilesListSortType,onSort:t},null,8,["current-sort-type"])])]),(re(!0),le(nt,null,vn(te(ot).state.profilesList,l=>(re(),le("tr",{key:l.name,class:"text-[14px] hover:bg-gray-600"},[F("td",Dy,[F("div",Ty,[r(l)?(re(),le("i",{key:0,class:"font-icon text-3xl text-green-400",onClick:c=>n(l)},"filter_none",8,Oy)):(re(),le("i",{key:1,class:"font-icon text-3xl text-amber-400 cursor-pointer",onClick:c=>n(l)},"add_to_photos",8,Ey)),F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",target:"_blank",href:l.url},Pe(l.name),9,Py)])]),F("td",Ay,Pe(l.rating),1),F("td",$y,Pe(l.reviewsCount),1),F("td",Iy,[F("strong",{class:_t(l.existsInDataBase?"text-green-400":"text-red-400")},Pe(l.existsInDataBase?"":""),3)])]))),128))])])):Be("",!0)}}),Fy=Mt({__name:"ProfilesSearchPage",setup(e){return(t,n)=>(re(),le(nt,null,[Fe(gy),Fe(Ny)],64))}});const Ly=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},My={},By=F("svg",{class:"spinner",viewBox:"0 0 50 50"},[F("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),Ry=[By];function jy(e,t){return re(),le("div",null,Ry)}const Dc=Ly(My,[["render",jy]]),Ky={key:0,class:"flex justify-center"},Uy=["onClick"],Vy={class:"min-w-0 flex-1"},Hy={class:"flex items-center gap-4 mb-4"},qy=["onClick"],Jy={key:0,class:"text-[16px] text-sky-300 font-medium italic"},Yy={class:"flex flex-wrap items-center gap-4 text-[16px] font-medium"},Wy={class:"text-orange-300"},zy={class:"text-yellow-300"},Gy={class:"text-teal-300"},Xy={class:"text-rose-300"},Qy={class:"text-amber-300"},Zy={key:0,class:"text-lime-300"},em={class:"text-gray-300"},tm={class:"flex-none flex items-center gap-4"},nm=["onClick"],rm=F("i",{class:"font-icon text-3xl text-amber-400"},"add_to_photos",-1),sm=[rm],im=["onClick"],om=F("i",{class:"font-icon text-3xl text-green-400"},"edit",-1),am=[om],lm=["onClick"],cm=F("i",{class:"font-icon text-3xl text-sky-400"},"content_copy",-1),um=[cm],fm=["onClick"],dm=F("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),hm=[dm],pm={key:0,class:"text-[14px] px-4 p-5"},ym={key:0,class:"w-full"},mm=F("tr",null,[F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"}," "),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"  "),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),F("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"")],-1),gm={class:"text-left px-4 py-2 border border-white border-opacity-50"},vm={class:"text-left px-4 py-2 border border-white border-opacity-50"},bm={class:"text-left px-4 py-2 border border-white border-opacity-50"},_m={class:"text-left px-4 py-2 border border-white border-opacity-50"},wm={class:"text-left px-4 py-2 border border-white border-opacity-50"},xm={class:"text-left px-4 py-2 border border-white border-opacity-50"},km={class:"text-left px-4 py-2 border border-white border-opacity-50"},Cm={key:1,class:"text-center text-xl font-medium"},Sm={key:2,class:"text-center text-xl font-bold"},Dm={key:0},Tm={class:"text-2xl font-bold mb-5 pr-10"},Om={class:"mb-6"},Em=F("div",{class:"mb-2 text-sm font-medium"},"",-1),Pm=Mt({__name:"ProfilesSavedPage",setup(e){const t=sn(!1),n=sn(null),r=sn(!1);function s(m){m.url&&window.open(m.url,"_blank")}function i(m){m.url&&(Xs(m.url),Ue.show("success",Ve.ProfileLinkCopied))}function o(m){m.opened=!m.opened}function l(){t.value=!1,n.value=null}function c(m){t.value=!0,n.value=m}function u(m){Oe.profileLinkPushNew(m.url),Oe.profileLinksHighlightDuplicates(),Oe.profileLinksRemoveEmpty(),Ue.show("success",Ve.ProfileLinkAddedInReviewsFilter)}async function h(m){dt.apiProfileUpdate(m),t.value=!1,n.value=null}async function x(m){window.confirm(` "${m.name}" ?`)&&m.id&&(await dt.apiProfileDelete(m),setTimeout(async()=>{dt.list.value=await dt.apiGetList()},0))}return sr(async()=>{setTimeout(async()=>{dt.list.value=await dt.apiGetList()},0)}),Tl(()=>{dt.list.value.forEach(m=>m.opened=!1)}),(m,A)=>(re(),le(nt,null,[r.value?(re(),le("div",Ky,[Fe(Dc,{class:"w-10 h-10 flex-none"})])):te(dt).list.value.length?(re(!0),le(nt,{key:1},vn(te(dt).list.value,S=>{var O,R,B,E,$,I,U,J,H,se;return re(),le("div",{key:S.id,class:_t([S.opened?"ring ring-blue-400":"","rounded-xl bg-gray-600 shadow-xl mb-3"])},[F("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:k=>o(S)},[F("div",Vy,[F("div",Hy,[F("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(k=>s(S),["stop"])},Pe(S.name),9,qy),S.comment?(re(),le("div",Jy,Pe(S.comment),1)):Be("",!0)]),F("div",Yy,[F("div",Wy,Pe((O=te(dt).getLastParsingInfo(S))==null?void 0:O.rating),1),F("div",zy,Pe((R=te(dt).getLastParsingInfo(S))==null?void 0:R.reviewsCount),1),F("div",Gy,Pe((B=te(dt).getLastParsingInfo(S))==null?void 0:B.subscribers),1),F("div",Xy,Pe((E=te(dt).getLastParsingInfo(S))==null?void 0:E.deliveryInfo),1),F("div",Qy," - "+Pe(($=te(dt).getLastParsingInfo(S))==null?void 0:$.activeAdds),1),(I=te(dt).getLastParsingInfo(S))!=null&&I.completedAdds?(re(),le("div",Zy," - "+Pe((U=te(dt).getLastParsingInfo(S))==null?void 0:U.completedAdds),1)):Be("",!0),F("div",em,Pe((J=te(dt).getLastParsingInfo(S))!=null&&J.parsingDate?te(kr)((H=te(dt).getLastParsingInfo(S))==null?void 0:H.parsingDate):""),1)])]),F("div",tm,[F("div",{class:"flex-none ml-auto",onClick:ut(k=>u(S),["stop"])},sm,8,nm),F("div",{class:"flex-none ml-auto",onClick:ut(k=>c(S),["stop"])},am,8,im),F("div",{class:"flex-none",onClick:ut(k=>i(S),["stop"])},um,8,lm),F("div",{class:"flex-none",onClick:ut(k=>x(S),["stop"])},hm,8,fm)])],8,Uy),S.opened?(re(),le("div",pm,[(se=S.parsingResults)!=null&&se.length?(re(),le("table",ym,[mm,(re(!0),le(nt,null,vn(S.parsingResults,k=>(re(),le("tr",null,[F("td",gm,Pe(te(kr)(k.parsingDate)),1),F("td",vm,Pe(k.rating),1),F("td",bm,Pe(k.reviewsCount),1),F("td",_m,Pe(k.subscribers),1),F("td",wm,Pe(k.deliveryInfo),1),F("td",xm,Pe(k.activeAdds),1),F("td",km,Pe(k.completedAdds||te(Ve).InfoNotFound),1)]))),256))])):(re(),le("div",Cm,"  "))])):Be("",!0)],2)}),128)):(re(),le("div",Sm,"  ")),t.value?(re(),Ft(Sc,{key:3,onClose:l},{default:St(()=>[n.value?(re(),le("div",Dm,[F("form",{onSubmit:A[1]||(A[1]=ut(S=>h(n.value),["prevent"]))},[F("div",Tm,Pe(n.value.name),1),F("div",Om,[Em,Vt(F("input",{"onUpdate:modelValue":A[0]||(A[0]=S=>n.value.comment=S),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Ht,n.value.comment]])]),F("div",null,[Fe(At,{type:"submit",theme:"success"},{default:St(()=>[Tt("")]),_:1})])],32)])):Be("",!0)]),_:1})):Be("",!0)],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function jn(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(x){o(x)}}function c(h){try{u(r.throw(h))}catch(x){o(x)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function nn(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(h){u=[6,h],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Am(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function $m(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var s=r[n];t[s.name]=s.schema}return t}function Tc(e,t){return new Promise(function(n,r){var s=new FileReader;s.onabort=function(i){return r(new Error("file read aborted"))},s.onerror=function(i){return r(i.target.error)},s.onload=function(i){return n(i.target.result)},t==="binary"?s.readAsArrayBuffer(e):s.readAsText(e)})}function Oc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ui=zo(function(e,t){(function(n,r){e.exports=r()})(po,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(K)}function r(K,z,Y,X,D,a,f){try{var p=K[a](f),y=p.value}catch(v){Y(v);return}p.done?z(y):Promise.resolve(y).then(X,D)}function s(K){return function(){var z=this,Y=arguments;return new Promise(function(X,D){var a=K.apply(z,Y);function f(y){r(a,X,D,f,p,"next",y)}function p(y){r(a,X,D,f,p,"throw",y)}f(void 0)})}}function i(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function o(K,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,z,Y){return z&&o(K.prototype,z),Y&&o(K,Y),K}function c(K,z,Y){return z in K?Object.defineProperty(K,z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):K[z]=Y,K}function u(K,z){var Y=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);z&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),Y.push.apply(Y,X)}return Y}function h(K){for(var z=1;z<arguments.length;z++){var Y=arguments[z]!=null?arguments[z]:{};z%2?u(Object(Y),!0).forEach(function(X){c(K,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(Y)):u(Object(Y)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(Y,X))})}return K}function x(K,z){return S(K)||R(K,z)||E()}function m(K){return A(K)||O(K)||B()}function A(K){if(Array.isArray(K)){for(var z=0,Y=new Array(K.length);z<K.length;z++)Y[z]=K[z];return Y}}function S(K){if(Array.isArray(K))return K}function O(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function R(K,z){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var Y=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(Y.push(p.value),!(z&&Y.length===z));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return Y}}function B(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $=function K(z){i(this,K),this.p=new Promise(z)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(K,z){var Y=this;return new $(function(X,D){Y.p.then(function(a){X(K?K(a):a)}).catch(function(a){return z?z(a):Promise.reject(a)}).then(X,D)})},$.prototype.catch=function(K){return this.then(null,K)},$.resolve=function(K){return new $(function(z){z(K)})},$.reject=function(K){return new $(function(z,Y){Y(K)})},["all","race"].forEach(function(K){$[K]=function(z){return new $(function(Y,X){Promise[K](z.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(Y,X)})}});var I={},U=I.toString,J={}.hasOwnProperty,H=Object.getPrototypeOf,se=J.toString;function k(K,z){return ue(K)&&typeof K.then=="function"&&(!z||typeof K.catch=="function")}function _(K){return U.call(K).slice(8,-1)}function V(K,z){if(!K||n(K)!=="object")return!1;var Y=H(K);if(!Y)return z===null;var X=J.call(Y,"constructor")&&Y.constructor;return typeof X!="function"?z===null:z===X||z!==null&&se.call(X)===se.call(z)||typeof z=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===z.__typeson__type__}function j(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object):!0}function _e(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object)||_e(z):!0}function ue(K){return K&&n(K)==="object"}function Ie(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function be(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function he(K,z){if(z==="")return K;var Y=z.indexOf(".");if(Y>-1){var X=K[be(z.slice(0,Y))];return X===void 0?void 0:he(X,z.slice(Y+1))}return K[be(z)]}function ce(K,z,Y){if(z==="")return Y;var X=z.indexOf(".");if(X>-1){var D=K[be(z.slice(0,X))];return ce(D,z.slice(X+1),Y)}return K[be(z)]=Y,K}function We(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Ye=Object.keys,st=Array.isArray,qe={}.hasOwnProperty,Bt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ge(K,z){if(K.keypath==="")return-1;var Y=K.keypath.match(/\./g)||0,X=z.keypath.match(/\./g)||0;return Y&&(Y=Y.length),X&&(X=X.length),Y>X?-1:Y<X?1:K.keypath<z.keypath?-1:K.keypath>z.keypath}var de=function(){function K(z){i(this,K),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(Y,X,D,a){a=h({},this.options,{},a,{stringification:!0});var f=this.encapsulate(Y,null,a);return st(f)?JSON.stringify(f[0],X,D):f.then(function(p){return JSON.stringify(p,X,D)})}},{key:"stringifySync",value:function(Y,X,D,a){return this.stringify(Y,X,D,h({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(Y,X,D,a){return this.stringify(Y,X,D,h({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(Y,X,D){return D=h({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(Y,X),D)}},{key:"parseSync",value:function(Y,X,D){return this.parse(Y,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(Y,X,D){return this.parse(Y,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(Y,X,D)}},{key:"rootTypeName",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(Y,X,D)}},{key:"encapsulate",value:function(Y,X,D){D=h({sync:!0},this.options,{},D);var a=D,f=a.sync,p=this,y={},v=[],w=[],C=[],P="cyclic"in D?D.cyclic:!0,L=D,M=L.encapsulateObserver,W=pe("",Y,P,X||{},C);function q(ne){var g=Object.values(y);if(D.iterateNone)return g.length?g[0]:K.getJSONType(ne);if(g.length){if(D.returnTypeNames)return m(new Set(g));!ne||!j(ne)||qe.call(ne,"$types")?ne={$:ne,$types:{$:y}}:ne.$types=y}else ue(ne)&&qe.call(ne,"$types")&&(ne={$:ne,$types:!0});return D.returnTypeNames?!1:ne}function G(ne,g){return Z.apply(this,arguments)}function Z(){return Z=s(regeneratorRuntime.mark(function ne(g,d){var b;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Promise.all(d.map(function(Q){return Q[1].p}));case 2:return b=N.sent,N.next=5,Promise.all(b.map(function(){var Q=s(regeneratorRuntime.mark(function ee(me){var ae,Ce,Ne,Le,ze,He,je,Qe,Ze,Ae,gt,ye,ie,ke;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ae=[],Ce=d.splice(0,1),Ne=x(Ce,1),Le=Ne[0],ze=x(Le,7),He=ze[0],je=ze[2],Qe=ze[3],Ze=ze[4],Ae=ze[5],gt=ze[6],ye=pe(He,me,je,Qe,ae,!0,gt),ie=V(ye,$),!(He&&ie)){Se.next=11;break}return Se.next=8,ye.p;case 8:return ke=Se.sent,Ze[Ae]=ke,Se.abrupt("return",G(g,ae));case 11:return He?Ze[Ae]=ye:ie?g=ye.p:g=ye,Se.abrupt("return",G(g,ae));case 13:case"end":return Se.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return N.abrupt("return",g);case 6:case"end":return N.stop()}},ne)})),Z.apply(this,arguments)}function oe(ne,g,d){Object.assign(ne,g);var b=Bt.map(function(T){var N=ne[T];return delete ne[T],N});d(),Bt.forEach(function(T,N){ne[T]=b[N]})}function pe(ne,g,d,b,T,N,Q){var ee,me={},ae=n(g),Ce=M?function(ie){var ke=Q||b.type||K.getJSONType(g);M(Object.assign(ie||me,{keypath:ne,value:g,cyclic:d,stateObj:b,promisesData:T,resolvingTypesonPromise:N,awaitingTypesonPromise:V(g,$)},{type:ke}))}:null;if(["string","boolean","number","undefined"].includes(ae))return g===void 0||ae==="number"&&(isNaN(g)||g===-1/0||g===1/0)?(b.replaced?ee=g:ee=ve(ne,g,b,T,!1,N,Ce),ee!==g&&(me={replaced:ee})):ee=g,Ce&&Ce(),ee;if(g===null)return Ce&&Ce(),g;if(d&&!b.iterateIn&&!b.iterateUnsetNumeric&&g&&n(g)==="object"){var Ne=v.indexOf(g);if(Ne<0)d===!0&&(v.push(g),w.push(ne));else return y[ne]="#",Ce&&Ce({cyclicKeypath:w[Ne]}),"#"+w[Ne]}var Le=j(g),ze=st(g),He=(Le||ze)&&(!p.plainObjectReplacers.length||b.replaced)||b.iterateIn?g:ve(ne,g,b,T,Le||ze,null,Ce),je;if(He!==g?(ee=He,me={replaced:He}):ne===""&&V(g,$)?(T.push([ne,g,d,b,void 0,void 0,b.type]),ee=g):ze&&b.iterateIn!=="object"||b.iterateIn==="array"?(je=new Array(g.length),me={clone:je}):!["function","symbol"].includes(n(g))&&!("toJSON"in g)&&!V(g,$)&&!V(g,Promise)&&!V(g,ArrayBuffer)||Le||b.iterateIn==="object"?(je={},b.addLength&&(je.length=g.length),me={clone:je}):ee=g,Ce&&Ce(),D.iterateNone)return je||ee;if(!je)return ee;if(b.iterateIn){var Qe=function(ke){var we={ownKeys:qe.call(g,ke)};oe(b,we,function(){var Se=ne+(ne?".":"")+Ie(ke),Me=pe(Se,g[ke],!!d,b,T,N);V(Me,$)?T.push([Se,Me,!!d,b,je,ke,b.type]):Me!==void 0&&(je[ke]=Me)})};for(var Ze in g)Qe(Ze);Ce&&Ce({endIterateIn:!0,end:!0})}else Ye(g).forEach(function(ie){var ke=ne+(ne?".":"")+Ie(ie),we={ownKeys:!0};oe(b,we,function(){var Se=pe(ke,g[ie],!!d,b,T,N);V(Se,$)?T.push([ke,Se,!!d,b,je,ie,b.type]):Se!==void 0&&(je[ie]=Se)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(b.iterateUnsetNumeric){for(var Ae=g.length,gt=function(ke){if(!(ke in g)){var we=ne+(ne?".":"")+ke,Se={ownKeys:!1};oe(b,Se,function(){var Me=pe(we,void 0,!!d,b,T,N);V(Me,$)?T.push([we,Me,!!d,b,je,ke,b.type]):Me!==void 0&&(je[ke]=Me)})}},ye=0;ye<Ae;ye++)gt(ye);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return je}function ve(ne,g,d,b,T,N,Q){for(var ee=T?p.plainObjectReplacers:p.nonplainObjectReplacers,me=ee.length;me--;){var ae=ee[me];if(ae.test(g,d)){var Ce=ae.type;if(p.revivers[Ce]){var Ne=y[ne];y[ne]=Ne?[Ce].concat(Ne):Ce}if(Object.assign(d,{type:Ce,replaced:!0}),(f||!ae.replaceAsync)&&!ae.replace)return Q&&Q({typeDetected:!0}),pe(ne,g,P&&"readonly",d,b,N,Ce);Q&&Q({replacing:!0});var Le=f||!ae.replaceAsync?"replace":"replaceAsync";return pe(ne,ae[Le](g,d),P&&"readonly",d,b,N,Ce)}}return g}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(W,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(W)]:f?q(W):Promise.resolve(q(W))}},{key:"encapsulateSync",value:function(Y,X,D){return this.encapsulate(Y,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(Y,X,D){return this.encapsulate(Y,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(Y,X){var D=Y&&Y.$types;if(!D)return Y;if(D===!0)return Y.$;X=h({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},v=!0;D.$&&j(D.$)&&(Y=Y.$,D=D.$,v=!1);var w=this;function C(Z,oe){var pe=w.revivers[Z]||[],ve=x(pe,1),ne=ve[0];if(!ne)throw new Error("Unregistered type: "+Z);return f&&!("revive"in ne)?oe:ne[f&&ne.revive?"revive":!f&&ne.reviveAsync?"reviveAsync":"revive"](oe,y)}function P(){var Z=[];if(Object.entries(D).forEach(function(oe){var pe=x(oe,2),ve=pe[0],ne=pe[1];ne!=="#"&&[].concat(ne).forEach(function(g){var d=w.revivers[g]||[null,{}],b=x(d,2),T=b[1].plain;T&&(Z.push({keypath:ve,type:g}),delete D[ve])})}),!!Z.length)return Z.sort(ge).reduce(function oe(pe,ve){var ne=ve.keypath,g=ve.type;if(k(pe))return pe.then(function(T){return oe(T,{keypath:ne,type:g})});var d=he(Y,ne);if(d=C(g,d),V(d,$))return d.then(function(T){var N=ce(Y,ne,T);N===T&&(Y=N)});var b=ce(Y,ne,d);b===d&&(Y=b)},void 0)}var L=[];function M(Z,oe,pe,ve,ne){if(!(v&&Z==="$types")){var g=D[Z],d=st(oe);if(d||j(oe)){var b=d?new Array(oe.length):{};for(Ye(oe).forEach(function(Ne){var Le=M(Z+(Z?".":"")+Ie(Ne),oe[Ne],pe||b,b,Ne),ze=function(je){return V(je,Re)?b[Ne]=void 0:je!==void 0&&(b[Ne]=je),je};V(Le,$)?L.push(Le.then(function(He){return ze(He)})):ze(Le)}),oe=b;p.length;){var T=x(p[0],4),N=T[0],Q=T[1],ee=T[2],me=T[3],ae=he(N,Q);if(ae!==void 0)ee[me]=ae;else break;p.splice(0,1)}}if(!g)return oe;if(g==="#"){var Ce=he(pe,oe.slice(1));return Ce===void 0&&p.push([pe,oe.slice(1),ve,ne]),Ce}return[].concat(g).reduce(function Ne(Le,ze){return V(Le,$)?Le.then(function(He){return Ne(He,ze)}):C(ze,Le)},oe)}}function W(Z){return V(Z,Re)?void 0:Z}var q=P(),G;return V(q,$)?G=q.then(function(){return Y}):(G=M("",Y,null),L.length&&(G=$.resolve(G).then(function(Z){return $.all([Z].concat(L))}).then(function(Z){var oe=x(Z,1),pe=oe[0];return pe}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(G,$)?G.p.then(W):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?W(G):Promise.resolve(W(G))}},{key:"reviveSync",value:function(Y,X){return this.revive(Y,h({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Y,X){return this.revive(Y,h({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Y,X){return X=X||{},[].concat(Y).forEach(function D(a){var f=this;if(st(a))return a.map(function(p){return D.call(f,p)});a&&Ye(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],v=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,w=v.filter(function(pe){return pe.type===p});if(w.length&&(v.splice(v.indexOf(w[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var C=y;y={test:function(ve){return ve&&ve.constructor===C},replace:function(ve){return h({},ve)},revive:function(ve){return Object.assign(Object.create(C.prototype),ve)}}}else if(st(y)){var P=y,L=x(P,3),M=L[0],W=L[1],q=L[2];y={test:M,replace:W,revive:q}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var oe={};y.revive&&(oe.revive=y.revive.bind(y)),y.reviveAsync&&(oe.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[oe,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Re=function K(){i(this,K)};return Re.__typeson__type__="TypesonUndefined",de.Undefined=Re,de.Promise=$,de.isThenable=k,de.toStringTag=_,de.hasConstructorOf=V,de.isObject=ue,de.isPlainObject=j,de.isUserObject=_e,de.escapeKeyPathComponent=Ie,de.unescapeKeyPathComponent=be,de.getByKeyPath=he,de.getJSONType=We,de.JSON_TYPES=["null","boolean","number","string","array","object"],de})}),Im=zo(function(e,t){(function(n,r){e.exports=r()})(po,function(){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function r(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function s(g,d){for(var b=0;b<d.length;b++){var T=d[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function i(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function o(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);d&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,T)}return b}function l(g){return function(b){if(Array.isArray(b))return c(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||function(b,T){if(b){if(typeof b=="string")return c(b,T);var N=Object.prototype.toString.call(b).slice(8,-1);if(N==="Object"&&b.constructor&&(N=b.constructor.name),N==="Map"||N==="Set")return Array.from(b);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return c(b,T)}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,T=new Array(d);b<d;b++)T[b]=g[b];return T}function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(g)}function h(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function x(g,d){for(var b=0;b<d.length;b++){var T=d[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function m(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function A(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);d&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,T)}return b}function S(g){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?A(Object(b),!0).forEach(function(T){m(g,T,b[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(b)):A(Object(b)).forEach(function(T){Object.defineProperty(g,T,Object.getOwnPropertyDescriptor(b,T))})}return g}function O(g,d){return function(T){if(Array.isArray(T))return T}(g)||function(T,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(T)))){var Q=[],ee=!0,me=!1,ae=void 0;try{for(var Ce,Ne=T[Symbol.iterator]();!(ee=(Ce=Ne.next()).done)&&(Q.push(Ce.value),!N||Q.length!==N);ee=!0);}catch(Le){me=!0,ae=Le}finally{try{ee||Ne.return==null||Ne.return()}finally{if(me)throw ae}}return Q}}(g,d)||B(g,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R(g){return function(b){if(Array.isArray(b))return E(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||B(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(g,d){if(g){if(typeof g=="string")return E(g,d);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?E(g,d):void 0}}function E(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,T=new Array(d);b<d;b++)T[b]=g[b];return T}var $=function g(d){h(this,g),this.p=new Promise(d)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(g,d){var b=this;return new $(function(T,N){b.p.then(function(Q){T(g?g(Q):Q)}).catch(function(Q){return d?d(Q):Promise.reject(Q)}).then(T,N)})},$.prototype.catch=function(g){return this.then(null,g)},$.resolve=function(g){return new $(function(d){d(g)})},$.reject=function(g){return new $(function(d,b){b(g)})},["all","race"].forEach(function(g){$[g]=function(d){return new $(function(b,T){Promise[g](d.map(function(N){return N&&N.constructor&&N.constructor.__typeson__type__==="TypesonPromise"?N.p:N})).then(b,T)})}});var I={}.toString,U={}.hasOwnProperty,J=Object.getPrototypeOf,H=U.toString;function se(g,d){return j(g)&&typeof g.then=="function"&&(!d||typeof g.catch=="function")}function k(g){return I.call(g).slice(8,-1)}function _(g,d){if(!g||u(g)!=="object")return!1;var b=J(g);if(!b)return d===null;var T=U.call(b,"constructor")&&b.constructor;return typeof T!="function"?d===null:d===T||d!==null&&H.call(T)===H.call(d)||typeof d=="function"&&typeof T.__typeson__type__=="string"&&T.__typeson__type__===d.__typeson__type__}function V(g){return!(!g||k(g)!=="Object")&&(!J(g)||_(g,Object))}function j(g){return g&&u(g)==="object"}function _e(g){return g.replace(/~/g,"~0").replace(/\./g,"~1")}function ue(g){return g.replace(/~1/g,".").replace(/~0/g,"~")}function Ie(g,d){if(d==="")return g;var b=d.indexOf(".");if(b>-1){var T=g[ue(d.slice(0,b))];return T===void 0?void 0:Ie(T,d.slice(b+1))}return g[ue(d)]}function be(g,d,b){if(d==="")return b;var T=d.indexOf(".");return T>-1?be(g[ue(d.slice(0,T))],d.slice(T+1),b):(g[ue(d)]=b,g)}function he(g,d,b){return b?d?d(g):g:(g&&g.then||(g=Promise.resolve(g)),d?g.then(d):g)}var ce=Object.keys,We=Array.isArray,Ye={}.hasOwnProperty,st=["type","replaced","iterateIn","iterateUnsetNumeric"];function qe(g){return function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];try{return Promise.resolve(g.apply(this,d))}catch(T){return Promise.reject(T)}}}function Bt(g,d){if(g.keypath==="")return-1;var b=g.keypath.match(/\./g)||0,T=d.keypath.match(/\./g)||0;return b&&(b=b.length),T&&(T=T.length),b>T?-1:b<T?1:g.keypath<d.keypath?-1:g.keypath>d.keypath}var ge=function(){function g(d){h(this,g),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(b,T,N){return T&&x(b.prototype,T),N&&x(b,N),b}(g,[{key:"stringify",value:function(b,T,N,Q){Q=S(S(S({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(b,null,Q);return We(ee)?JSON.stringify(ee[0],T,N):ee.then(function(me){return JSON.stringify(me,T,N)})}},{key:"stringifySync",value:function(b,T,N,Q){return this.stringify(b,T,N,S(S({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(b,T,N,Q){return this.stringify(b,T,N,S(S({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(b,T,N){return N=S(S(S({},this.options),N),{},{parse:!0}),this.revive(JSON.parse(b,T),N)}},{key:"parseSync",value:function(b,T,N){return this.parse(b,T,S(S({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"parseAsync",value:function(b,T,N){return this.parse(b,T,S(S({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"specialTypeNames",value:function(b,T){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.returnTypeNames=!0,this.encapsulate(b,T,N)}},{key:"rootTypeName",value:function(b,T){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.iterateNone=!0,this.encapsulate(b,T,N)}},{key:"encapsulate",value:function(b,T,N){var Q=qe(function(ye,ie){return he(Promise.all(ie.map(function(ke){return ke[1].p})),function(ke){return he(Promise.all(ke.map(qe(function(we){var Se=!1,Me=[],Rt=O(ie.splice(0,1),1),lt=O(Rt[0],7),Nt=lt[0],Jt=lt[2],Ge=lt[3],Yt=lt[4],et=lt[5],jt=lt[6],Ot=Ae(Nt,we,Jt,Ge,Me,!0,jt),Xt=_(Ot,$);return function(fi,fs){var or=fi();return or&&or.then?or.then(fs):fs(or)}(function(){if(Nt&&Xt)return he(Ot.p,function(Qt){return Yt[et]=Qt,Se=!0,Q(ye,Me)})},function(Qt){return Se?Qt:(Nt?Yt[et]=Ot:ye=Xt?Ot.p:Ot,Q(ye,Me))})}))),function(){return ye})})}),ee=(N=S(S({sync:!0},this.options),N)).sync,me=this,ae={},Ce=[],Ne=[],Le=[],ze=!("cyclic"in N)||N.cyclic,He=N.encapsulateObserver,je=Ae("",b,ze,T||{},Le);function Qe(ye){var ie=Object.values(ae);if(N.iterateNone)return ie.length?ie[0]:g.getJSONType(ye);if(ie.length){if(N.returnTypeNames)return R(new Set(ie));ye&&V(ye)&&!Ye.call(ye,"$types")?ye.$types=ae:ye={$:ye,$types:{$:ae}}}else j(ye)&&Ye.call(ye,"$types")&&(ye={$:ye,$types:!0});return!N.returnTypeNames&&ye}function Ze(ye,ie,ke){Object.assign(ye,ie);var we=st.map(function(Se){var Me=ye[Se];return delete ye[Se],Me});ke(),st.forEach(function(Se,Me){ye[Se]=we[Me]})}function Ae(ye,ie,ke,we,Se,Me,Rt){var lt,Nt={},Jt=u(ie),Ge=He?function(Sn){var Et=Rt||we.type||g.getJSONType(ie);He(Object.assign(Sn||Nt,{keypath:ye,value:ie,cyclic:ke,stateObj:we,promisesData:Se,resolvingTypesonPromise:Me,awaitingTypesonPromise:_(ie,$)},{type:Et}))}:null;if(["string","boolean","number","undefined"].includes(Jt))return ie===void 0||Number.isNaN(ie)||ie===Number.NEGATIVE_INFINITY||ie===Number.POSITIVE_INFINITY?(lt=we.replaced?ie:gt(ye,ie,we,Se,!1,Me,Ge))!==ie&&(Nt={replaced:lt}):lt=ie,Ge&&Ge(),lt;if(ie===null)return Ge&&Ge(),ie;if(ke&&!we.iterateIn&&!we.iterateUnsetNumeric&&ie&&u(ie)==="object"){var Yt=Ce.indexOf(ie);if(!(Yt<0))return ae[ye]="#",Ge&&Ge({cyclicKeypath:Ne[Yt]}),"#"+Ne[Yt];ke===!0&&(Ce.push(ie),Ne.push(ye))}var et,jt=V(ie),Ot=We(ie),Xt=(jt||Ot)&&(!me.plainObjectReplacers.length||we.replaced)||we.iterateIn?ie:gt(ye,ie,we,Se,jt||Ot,null,Ge);if(Xt!==ie?(lt=Xt,Nt={replaced:Xt}):ye===""&&_(ie,$)?(Se.push([ye,ie,ke,we,void 0,void 0,we.type]),lt=ie):Ot&&we.iterateIn!=="object"||we.iterateIn==="array"?(et=new Array(ie.length),Nt={clone:et}):(["function","symbol"].includes(u(ie))||"toJSON"in ie||_(ie,$)||_(ie,Promise)||_(ie,ArrayBuffer))&&!jt&&we.iterateIn!=="object"?lt=ie:(et={},we.addLength&&(et.length=ie.length),Nt={clone:et}),Ge&&Ge(),N.iterateNone)return et||lt;if(!et)return lt;if(we.iterateIn){var Qt=function(Et){var hn={ownKeys:Ye.call(ie,Et)};Ze(we,hn,function(){var Un=ye+(ye?".":"")+_e(Et),ds=Ae(Un,ie[Et],!!ke,we,Se,Me);_(ds,$)?Se.push([Un,ds,!!ke,we,et,Et,we.type]):ds!==void 0&&(et[Et]=ds)})};for(var fi in ie)Qt(fi);Ge&&Ge({endIterateIn:!0,end:!0})}else ce(ie).forEach(function(Sn){var Et=ye+(ye?".":"")+_e(Sn);Ze(we,{ownKeys:!0},function(){var hn=Ae(Et,ie[Sn],!!ke,we,Se,Me);_(hn,$)?Se.push([Et,hn,!!ke,we,et,Sn,we.type]):hn!==void 0&&(et[Sn]=hn)})}),Ge&&Ge({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var fs=ie.length,or=function(Et){if(!(Et in ie)){var hn=ye+(ye?".":"")+Et;Ze(we,{ownKeys:!1},function(){var Un=Ae(hn,void 0,!!ke,we,Se,Me);_(Un,$)?Se.push([hn,Un,!!ke,we,et,Et,we.type]):Un!==void 0&&(et[Et]=Un)})}},di=0;di<fs;di++)or(di);Ge&&Ge({endIterateUnsetNumeric:!0,end:!0})}return et}function gt(ye,ie,ke,we,Se,Me,Rt){for(var lt=Se?me.plainObjectReplacers:me.nonplainObjectReplacers,Nt=lt.length;Nt--;){var Jt=lt[Nt];if(Jt.test(ie,ke)){var Ge=Jt.type;if(me.revivers[Ge]){var Yt=ae[ye];ae[ye]=Yt?[Ge].concat(Yt):Ge}return Object.assign(ke,{type:Ge,replaced:!0}),!ee&&Jt.replaceAsync||Jt.replace?(Rt&&Rt({replacing:!0}),Ae(ye,Jt[ee||!Jt.replaceAsync?"replace":"replaceAsync"](ie,ke),ze&&"readonly",ke,we,Me,Ge)):(Rt&&Rt({typeDetected:!0}),Ae(ye,ie,ze&&"readonly",ke,we,Me,Ge))}}return ie}return Le.length?ee&&N.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(je,Le)).then(Qe):!ee&&N.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():N.stringification&&ee?[Qe(je)]:ee?Qe(je):Promise.resolve(Qe(je))}},{key:"encapsulateSync",value:function(b,T,N){return this.encapsulate(b,T,S(S({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(b,T,N){return this.encapsulate(b,T,S(S({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"revive",value:function(b,T){var N=b&&b.$types;if(!N)return b;if(N===!0)return b.$;var Q=(T=S(S({sync:!0},this.options),T)).sync,ee=[],me={},ae=!0;N.$&&V(N.$)&&(b=b.$,N=N.$,ae=!1);var Ce=this;function Ne(Qe,Ze){var Ae=O(Ce.revivers[Qe]||[],1)[0];if(!Ae)throw new Error("Unregistered type: "+Qe);return Q&&!("revive"in Ae)?Ze:Ae[Q&&Ae.revive?"revive":!Q&&Ae.reviveAsync?"reviveAsync":"revive"](Ze,me)}var Le=[];function ze(Qe){return _(Qe,de)?void 0:Qe}var He,je=function(){var Ze=[];if(Object.entries(N).forEach(function(Ae){var gt=O(Ae,2),ye=gt[0],ie=gt[1];ie!=="#"&&[].concat(ie).forEach(function(ke){O(Ce.revivers[ke]||[null,{}],2)[1].plain&&(Ze.push({keypath:ye,type:ke}),delete N[ye])})}),Ze.length)return Ze.sort(Bt).reduce(function Ae(gt,ye){var ie=ye.keypath,ke=ye.type;if(se(gt))return gt.then(function(Me){return Ae(Me,{keypath:ie,type:ke})});var we=Ie(b,ie);if(_(we=Ne(ke,we),$))return we.then(function(Me){var Rt=be(b,ie,Me);Rt===Me&&(b=Rt)});var Se=be(b,ie,we);Se===we&&(b=Se)},void 0)}();return _(je,$)?He=je.then(function(){return b}):(He=function Qe(Ze,Ae,gt,ye,ie){if(!ae||Ze!=="$types"){var ke=N[Ze],we=We(Ae);if(we||V(Ae)){var Se=we?new Array(Ae.length):{};for(ce(Ae).forEach(function(et){var jt=Qe(Ze+(Ze?".":"")+_e(et),Ae[et],gt||Se,Se,et),Ot=function(Qt){return _(Qt,de)?Se[et]=void 0:Qt!==void 0&&(Se[et]=Qt),Qt};_(jt,$)?Le.push(jt.then(function(Xt){return Ot(Xt)})):Ot(jt)}),Ae=Se;ee.length;){var Me=O(ee[0],4),Rt=Me[0],lt=Me[1],Nt=Me[2],Jt=Me[3],Ge=Ie(Rt,lt);if(Ge===void 0)break;Nt[Jt]=Ge,ee.splice(0,1)}}if(!ke)return Ae;if(ke==="#"){var Yt=Ie(gt,Ae.slice(1));return Yt===void 0&&ee.push([gt,Ae.slice(1),ye,ie]),Yt}return[].concat(ke).reduce(function et(jt,Ot){return _(jt,$)?jt.then(function(Xt){return et(Xt,Ot)}):Ne(Ot,jt)},Ae)}}("",b,null),Le.length&&(He=$.resolve(He).then(function(Qe){return $.all([Qe].concat(Le))}).then(function(Qe){return O(Qe,1)[0]}))),se(He)?Q&&T.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(He,$)?He.p.then(ze):He:!Q&&T.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?ze(He):Promise.resolve(ze(He))}},{key:"reviveSync",value:function(b,T){return this.revive(b,S(S({throwOnBadSyncType:!0},T),{},{sync:!0}))}},{key:"reviveAsync",value:function(b,T){return this.revive(b,S(S({throwOnBadSyncType:!0},T),{},{sync:!1}))}},{key:"register",value:function(b,T){return T=T||{},[].concat(b).forEach(function N(Q){var ee=this;if(We(Q))return Q.map(function(me){return N.call(ee,me)});Q&&ce(Q).forEach(function(me){if(me==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(me))throw new TypeError("Plain JSON object types are reserved as type names");var ae=Q[me],Ce=ae&&ae.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ne=Ce.filter(function(Ze){return Ze.type===me});if(Ne.length&&(Ce.splice(Ce.indexOf(Ne[0]),1),delete this.revivers[me],delete this.types[me]),typeof ae=="function"){var Le=ae;ae={test:function(Ae){return Ae&&Ae.constructor===Le},replace:function(Ae){return S({},Ae)},revive:function(Ae){return Object.assign(Object.create(Le.prototype),Ae)}}}else if(We(ae)){var ze=O(ae,3);ae={test:ze[0],replace:ze[1],revive:ze[2]}}if(ae&&ae.test){var He={type:me,test:ae.test.bind(ae)};ae.replace&&(He.replace=ae.replace.bind(ae)),ae.replaceAsync&&(He.replaceAsync=ae.replaceAsync.bind(ae));var je=typeof T.fallback=="number"?T.fallback:T.fallback?0:Number.POSITIVE_INFINITY;if(ae.testPlainObjects?this.plainObjectReplacers.splice(je,0,He):this.nonplainObjectReplacers.splice(je,0,He),ae.revive||ae.reviveAsync){var Qe={};ae.revive&&(Qe.revive=ae.revive.bind(ae)),ae.reviveAsync&&(Qe.reviveAsync=ae.reviveAsync.bind(ae)),this.revivers[me]=[Qe,{plain:ae.testPlainObjects}]}this.types[me]=ae}},this)},this),this}}]),g}(),de=function g(){h(this,g)};de.__typeson__type__="TypesonUndefined",ge.Undefined=de,ge.Promise=$,ge.isThenable=se,ge.toStringTag=k,ge.hasConstructorOf=_,ge.isObject=j,ge.isPlainObject=V,ge.isUserObject=function g(d){if(!d||k(d)!=="Object")return!1;var b=J(d);return!b||_(d,Object)||g(b)},ge.escapeKeyPathComponent=_e,ge.unescapeKeyPathComponent=ue,ge.getByKeyPath=Ie,ge.getJSONType=function(d){return d===null?"null":Array.isArray(d)?"array":u(d)},ge.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Re={userObject:{test:function(d,b){return ge.isUserObject(d)},replace:function(d){return function(T){for(var N=1;N<arguments.length;N++){var Q=arguments[N]!=null?arguments[N]:{};N%2?o(Object(Q),!0).forEach(function(ee){i(T,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(T,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return T}({},d)},revive:function(d){return d}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(d,b){return!!Array.isArray(d)&&(Object.keys(d).some(function(T){return String(Number.parseInt(T))!==T})&&(b.iterateIn="object",b.addLength=!0),!0)},replace:function(d,b){return b.iterateUnsetNumeric=!0,d},revive:function(d){if(Array.isArray(d))return d;var b=[];return Object.keys(d).forEach(function(T){var N=d[T];b[T]=N}),b}}},{sparseUndefined:{test:function(d,b){return d===void 0&&b.ownKeys===!1},replace:function(d){return 0},revive:function(d){}}}],z={undef:{test:function(d,b){return d===void 0&&(b.ownKeys||!("ownKeys"in b))},replace:function(d){return 0},revive:function(d){return new ge.Undefined}}},Y={StringObject:{test:function(d){return ge.toStringTag(d)==="String"&&n(d)==="object"},replace:function(d){return String(d)},revive:function(d){return new String(d)}},BooleanObject:{test:function(d){return ge.toStringTag(d)==="Boolean"&&n(d)==="object"},replace:function(d){return!!d},revive:function(d){return new Boolean(d)}},NumberObject:{test:function(d){return ge.toStringTag(d)==="Number"&&n(d)==="object"},replace:function(d){return Number(d)},revive:function(d){return new Number(d)}}},X=[{nan:{test:function(d){return Number.isNaN(d)},replace:function(d){return"NaN"},revive:function(d){return Number.NaN}}},{infinity:{test:function(d){return d===Number.POSITIVE_INFINITY},replace:function(d){return"Infinity"},revive:function(d){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(d){return d===Number.NEGATIVE_INFINITY},replace:function(d){return"-Infinity"},revive:function(d){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(d){return ge.toStringTag(d)==="Date"},replace:function(d){var b=d.getTime();return Number.isNaN(b)?"NaN":b},revive:function(d){return d==="NaN"?new Date(Number.NaN):new Date(d)}}},a={regexp:{test:function(d){return ge.toStringTag(d)==="RegExp"},replace:function(d){return{source:d.source,flags:(d.global?"g":"")+(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.sticky?"y":"")+(d.unicode?"u":"")}},revive:function(d){var b=d.source,T=d.flags;return new RegExp(b,T)}}},f={map:{test:function(d){return ge.toStringTag(d)==="Map"},replace:function(d){return l(d.entries())},revive:function(d){return new Map(d)}}},p={set:{test:function(d){return ge.toStringTag(d)==="Set"},replace:function(d){return l(d.values())},revive:function(d){return new Set(d)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Uint8Array(256),w=0;w<y.length;w++)v[y.charCodeAt(w)]=w;var C=function(d,b,T){T==null&&(T=d.byteLength);for(var N=new Uint8Array(d,b||0,T),Q=N.length,ee="",me=0;me<Q;me+=3)ee+=y[N[me]>>2],ee+=y[(3&N[me])<<4|N[me+1]>>4],ee+=y[(15&N[me+1])<<2|N[me+2]>>6],ee+=y[63&N[me+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},P=function(d){var b,T,N,Q,ee=d.length,me=.75*d.length,ae=0;d[d.length-1]==="="&&(me--,d[d.length-2]==="="&&me--);for(var Ce=new ArrayBuffer(me),Ne=new Uint8Array(Ce),Le=0;Le<ee;Le+=4)b=v[d.charCodeAt(Le)],T=v[d.charCodeAt(Le+1)],N=v[d.charCodeAt(Le+2)],Q=v[d.charCodeAt(Le+3)],Ne[ae++]=b<<2|T>>4,Ne[ae++]=(15&T)<<4|N>>2,Ne[ae++]=(3&N)<<6|63&Q;return Ce},L={arraybuffer:{test:function(d){return ge.toStringTag(d)==="ArrayBuffer"},replace:function(d,b){b.buffers||(b.buffers=[]);var T=b.buffers.indexOf(d);return T>-1?{index:T}:(b.buffers.push(d),C(d))},revive:function(d,b){if(b.buffers||(b.buffers=[]),n(d)==="object")return b.buffers[d.index];var T=P(d);return b.buffers.push(T),T}}},M=typeof self>"u"?po:self,W={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(g){var d=g,b=M[d];b&&(W[g.toLowerCase()]={test:function(N){return ge.toStringTag(N)===d},replace:function(N,Q){var ee=N.buffer,me=N.byteOffset,ae=N.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:me,length:ae}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:me,length:ae})},revive:function(N,Q){Q.buffers||(Q.buffers=[]);var ee,me=N.byteOffset,ae=N.length,Ce=N.encoded,Ne=N.index;return"index"in N?ee=Q.buffers[Ne]:(ee=P(Ce),Q.buffers.push(ee)),new b(ee,me,ae)}})});var q={dataview:{test:function(d){return ge.toStringTag(d)==="DataView"},replace:function(d,b){var T=d.buffer,N=d.byteOffset,Q=d.byteLength;b.buffers||(b.buffers=[]);var ee=b.buffers.indexOf(T);return ee>-1?{index:ee,byteOffset:N,byteLength:Q}:(b.buffers.push(T),{encoded:C(T),byteOffset:N,byteLength:Q})},revive:function(d,b){b.buffers||(b.buffers=[]);var T,N=d.byteOffset,Q=d.byteLength,ee=d.encoded,me=d.index;return"index"in d?T=b.buffers[me]:(T=P(ee),b.buffers.push(T)),new DataView(T,N,Q)}}},G={IntlCollator:{test:function(d){return ge.hasConstructorOf(d,Intl.Collator)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.Collator(d.locale,d)}},IntlDateTimeFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.DateTimeFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.DateTimeFormat(d.locale,d)}},IntlNumberFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.NumberFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.NumberFormat(d.locale,d)}}};function Z(g){for(var d=new Uint8Array(g.length),b=0;b<g.length;b++)d[b]=g.charCodeAt(b);return d.buffer}var oe={file:{test:function(d){return ge.toStringTag(d)==="File"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad File access: "+b.status);return{type:d.type,stringContents:b.responseText,name:d.name,lastModified:d.lastModified}},revive:function(d){var b=d.name,T=d.type,N=d.stringContents,Q=d.lastModified;return new File([Z(N)],b,{type:T,lastModified:Q})},replaceAsync:function(d){return new ge.Promise(function(b,T){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result,name:d.name,lastModified:d.lastModified})}),N.addEventListener("error",function(){T(N.error)}),N.readAsBinaryString(d)})}}},pe={bigint:{test:function(d){return typeof d=="bigint"},replace:function(d){return String(d)},revive:function(d){return BigInt(d)}}},ve={bigintObject:{test:function(d){return n(d)==="object"&&ge.hasConstructorOf(d,BigInt)},replace:function(d){return String(d)},revive:function(d){return new Object(BigInt(d))}}},ne={cryptokey:{test:function(d){return ge.toStringTag(d)==="CryptoKey"&&d.extractable},replaceAsync:function(d){return new ge.Promise(function(b,T){crypto.subtle.exportKey("jwk",d).catch(function(N){T(N)}).then(function(N){b({jwk:N,algorithm:d.algorithm,usages:d.usages})})})},revive:function(d){var b=d.jwk,T=d.algorithm,N=d.usages;return crypto.subtle.importKey("jwk",b,T,!0,N)}}};return[Re,z,K,Y,X,D,a,{imagedata:{test:function(d){return ge.toStringTag(d)==="ImageData"},replace:function(d){return{array:l(d.data),width:d.width,height:d.height}},revive:function(d){return new ImageData(new Uint8ClampedArray(d.array),d.width,d.height)}}},{imagebitmap:{test:function(d){return ge.toStringTag(d)==="ImageBitmap"||d&&d.dataset&&d.dataset.toStringTag==="ImageBitmap"},replace:function(d){var b=document.createElement("canvas");return b.getContext("2d").drawImage(d,0,0),b.toDataURL()},revive:function(d){var b=document.createElement("canvas"),T=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){T.drawImage(N,0,0)}),N.src=d,b},reviveAsync:function(d){var b=document.createElement("canvas"),T=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){T.drawImage(N,0,0)}),N.src=d,createImageBitmap(b)}}},oe,{file:oe.file,filelist:{test:function(d){return ge.toStringTag(d)==="FileList"},replace:function(d){for(var b=[],T=0;T<d.length;T++)b[T]=d.item(T);return b},revive:function(d){return new(function(){function b(){r(this,b),this._files=arguments[0],this.length=this._files.length}return function(N,Q,ee){return Q&&s(N.prototype,Q),ee&&s(N,ee),N}(b,[{key:"item",value:function(N){return this._files[N]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),b}())(d)}}},{blob:{test:function(d){return ge.toStringTag(d)==="Blob"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad Blob access: "+b.status);return{type:d.type,stringContents:b.responseText}},revive:function(d){var b=d.type,T=d.stringContents;return new Blob([Z(T)],{type:b})},replaceAsync:function(d){return new ge.Promise(function(b,T){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result})}),N.addEventListener("error",function(){T(N.error)}),N.readAsBinaryString(d)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?L:[],typeof Uint8Array=="function"?W:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?ne:[],typeof BigInt<"u"?[pe,ve]:[])})}),hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rr=new Uint8Array(256);for(var Ds=0;Ds<hr.length;Ds++)Rr[hr.codePointAt(Ds)]=Ds;var yo=function(t,n,r){r==null&&(r=t.byteLength);for(var s=new Uint8Array(t,n||0,r),i=s.length,o="",l=0;l<i;l+=3)o+=hr[s[l]>>2],o+=hr[(s[l]&3)<<4|s[l+1]>>4],o+=hr[(s[l+1]&15)<<2|s[l+2]>>6],o+=hr[s[l+2]&63];return i%3===2?o=o.slice(0,-1)+"=":i%3===1&&(o=o.slice(0,-2)+"=="),o},Ec=function(t){var n=t.length,r=t.length*.75,s=0,i,o,l,c;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var u=new ArrayBuffer(r),h=new Uint8Array(u),x=0;x<n;x+=4)i=Rr[t.codePointAt(x)],o=Rr[t.codePointAt(x+1)],l=Rr[t.codePointAt(x+2)],c=Rr[t.codePointAt(x+3)],h[s++]=i<<2|o>>4,h[s++]=(o&15)<<4|l>>2,h[s++]=(l&3)<<6|c&63;return u},Nm=typeof self>"u"?global:self,Pc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=Nm[t];n&&(Pc[e.toLowerCase()+"2"]={test:function(r){return ui.toStringTag(r)===t},replace:function(r){var s=r.buffer,i=r.byteOffset,o=r.length;return{buffer:s,byteOffset:i,length:o}},revive:function(r){var s=r.buffer,i=r.byteOffset,o=r.length;return new n(s,i,o)}})});var Fm={arraybuffer:{test:function(e){return ui.toStringTag(e)==="ArrayBuffer"},replace:function(e){return yo(e,0,e.byteLength)},revive:function(e){var t=Ec(e);return t}}},Gt=new ui().register(Im),Lm="FileReaderSync"in self,Qs=[],Oi=0;Gt.register([Fm,Pc,{blob2:{test:function(e){return ui.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Lm){var t=Oc(e,"binary"),n=yo(t,0,t.byteLength);return{type:e.type,data:n}}else{Qs.push(e);var r={type:e.type,data:{start:Oi,end:Oi+e.size}};return Oi+=e.size,r}},finalize:function(e,t){e.data=yo(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Ec(n)],{type:t})}}}]);Gt.mustFinalize=function(){return Qs.length>0};Gt.finalize=function(e){return jn(void 0,void 0,void 0,function(){var t,n,r,s,i,o,l,c,u,h;return nn(this,function(x){switch(x.label){case 0:return[4,Tc(new Blob(Qs),"binary")];case 1:if(t=x.sent(),e){for(n=0,r=e;n<r.length;n++)if(s=r[n],s.$types){i=s.$types,o=i.$,o&&(i=i.$);for(l in i)c=i[l],u=Gt.types[c],u&&u.finalize&&(h=ft.getByKeyPath(s,o?"$."+l:l),u.finalize(h,t.slice(h.start,h.end)))}}return Qs=[],[2]}})})};var Mm=2e3;function Ac(e,t){return jn(this,void 0,void 0,function(){function n(){return jn(this,void 0,void 0,function(){var u,h,x,m,A,S,O,R,B;return nn(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function($){return $.count()}))];case 1:u=E.sent(),u.forEach(function($,I){return s[I].rowCount=$}),c.totalRows=u.reduce(function($,I){return $+I}),h=JSON.stringify(o,void 0,i?2:void 0),x=h.lastIndexOf("]"),m=h.substring(0,x),r.push(m),A=t.filter,S=function($){var I,U,J,H,se,k,_,V,j,_e,ue,Ie;return nn(this,function(be){switch(be.label){case 0:I=e.table($),U=I.schema.primKey,J=!!U.keyPath,H=t.numRowsPerChunk||Mm,se=J?{tableName:I.name,inbound:!0,rows:[]}:{tableName:I.name,inbound:!1,rows:[]},k=JSON.stringify(se,void 0,i?2:void 0),i&&(k=k.split(`
`).join(`
    `)),_=k.lastIndexOf("]"),r.push(k.substring(0,_)),V=null,j=0,_e=!0,ue=function(){var he,ce,We,Ye,ge,st,qe,Bt,ge;return nn(this,function(de){switch(de.label){case 0:return l&&ft.ignoreTransaction(function(){return l(c)}),he=V==null?I.limit(H):I.where(":id").above(V).limit(H),[4,he.toArray()];case 1:return ce=de.sent(),ce.length===0?[2,"break"]:(V!=null&&j>0&&(r.push(","),i&&r.push(`
      `)),_e=ce.length===H,J?(We=A?ce.filter(function(Re){return A($,Re)}):ce,Ye=We.map(function(Re){return Gt.encapsulate(Re)}),Gt.mustFinalize()?[4,ft.waitFor(Gt.finalize(Ye))]:[3,3]):[3,4]);case 2:de.sent(),de.label=3;case 3:return ge=JSON.stringify(Ye,void 0,i?2:void 0),i&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),j=We.length,V=ce.length>0?ft.getByKeyPath(ce[ce.length-1],U.keyPath):null,[3,8];case 4:return[4,he.primaryKeys()];case 5:return st=de.sent(),qe=st.map(function(Re,K){return[Re,ce[K]]}),A&&(qe=qe.filter(function(Re){var K=Re[0],z=Re[1];return A($,z,K)})),Bt=qe.map(function(Re){return Gt.encapsulate(Re)}),Gt.mustFinalize()?[4,ft.waitFor(Gt.finalize(Bt))]:[3,7];case 6:de.sent(),de.label=7;case 7:ge=JSON.stringify(Bt,void 0,i?2:void 0),i&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),j=qe.length,V=st.length>0?st[st.length-1]:null,de.label=8;case 8:return c.completedRows+=ce.length,[2]}})},be.label=1;case 1:return _e?[5,ue()]:[3,3];case 2:return Ie=be.sent(),Ie==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(_)),c.completedTables+=1,c.completedTables<c.totalTables&&r.push(","),[2]}})},O=0,R=s,E.label=2;case 2:return O<R.length?(B=R[O].name,[5,S(B)]):[3,5];case 3:E.sent(),E.label=4;case 4:return O++,[3,2];case 5:return r.push(h.substr(x)),c.done=!0,l&&ft.ignoreTransaction(function(){return l(c)}),[2]}})})}var r,s,i,o,l,c;return nn(this,function(u){switch(u.label){case 0:t=t||{},r=[],s=e.tables.map(function(h){return{name:h.name,schema:Am(h),rowCount:0}}),i=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:s,data:[]}},l=t.progressCallback,c={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},u.label=1;case 1:return u.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:return Gt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var Bm=1,Rm={Stream:function(){}},jm=zo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new A(k)},n.CParser=A,n.CStream=O,n.createStream=S,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var s={textNode:void 0,numberNode:""},i=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var c in n.STATE)n.STATE[n.STATE[c]]=c;o=n.STATE;const u={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function _(){this.__proto__=k}return _.prototype=k,new _}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var _=[];for(var V in k)k.hasOwnProperty(V)&&_.push(V);return _});function h(k){var _=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var j in s){var _e=k[j]===void 0?0:k[j].length;if(_e>_)switch(j){case"text":closeText(k);break;default:U(k,"Max buffer length exceeded: "+j)}V=Math.max(V,_e)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+k.position}function x(k){for(var _ in s)k[_]=s[_]}var m=/[\\"\n]/g;function A(k){if(!(this instanceof A))return new A(k);var _=this;x(_),_.bufferCheckPosition=n.MAX_BUFFER_LENGTH,_.q=_.c=_.p="",_.opt=k||{},_.closed=_.closedRoot=_.sawRoot=!1,_.tag=_.error=null,_.state=o.BEGIN,_.stack=new Array,_.position=_.column=0,_.line=1,_.slashed=!1,_.unicodeI=0,_.unicodeS=null,_.depth=0,R(_,"onready")}A.prototype={end:function(){J(this)},write:se,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Rm.Stream}catch{l=function(){}}function S(k){return new O(k)}function O(k){if(!(this instanceof O))return new O(k);this._parser=new A(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var _=this;l.apply(_),this._parser.onend=function(){_.emit("end")},this._parser.onerror=function(V){_.emit("error",V),_._parser.error=null},i.forEach(function(V){Object.defineProperty(_,"on"+V,{get:function(){return _._parser["on"+V]},set:function(j){if(!j)return _.removeAllListeners(V),_._parser["on"+V]=j,j;_.on(V,j)},enumerable:!0,configurable:!1})})}O.prototype=Object.create(l.prototype,{constructor:{value:O}}),O.prototype.write=function(k){k=new Buffer(k);for(var _=0;_<k.length;_++){var V=k[_];if(this.bytes_remaining>0){for(var j=0;j<this.bytes_remaining;j++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+j]=k[j];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,_=_+j-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+_>k.length){for(var _e=0;_e<=k.length-1-_;_e++)this.temp_buffs[this.bytes_in_sequence][_e]=k[_+_e];return this.bytes_remaining=_+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(_,_+this.bytes_in_sequence).toString(),_=_+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ue=_;ue<k.length&&!(k[ue]>=128);ue++);this.string=k.slice(_,ue).toString(),this._parser.write(this.string),this.emit("data",this.string),_=ue-1}},O.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},O.prototype.on=function(k,_){var V=this;return!V._parser["on"+k]&&i.indexOf(k)!==-1&&(V._parser["on"+k]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,k),V.emit.apply(V,j)}),l.prototype.on.call(V,k,_)},O.prototype.destroy=function(){x(this._parser),this.emit("close")};function R(k,_,V){n.INFO&&console.log("-- emit",_,V),k[_]&&k[_](V)}function B(k,_,V){E(k),R(k,_,V)}function E(k,_){k.textNode=I(k.opt,k.textNode),k.textNode!==void 0&&R(k,_||"onvalue",k.textNode),k.textNode=void 0}function $(k){k.numberNode&&R(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function I(k,_){return _===void 0||(k.trim&&(_=_.trim()),k.normalize&&(_=_.replace(/\s+/g," "))),_}function U(k,_){return E(k),_+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,_=new Error(_),k.error=_,R(k,"onerror",_),k}function J(k){return(k.state!==o.VALUE||k.depth!==0)&&U(k,"Unexpected end"),E(k),k.c="",k.closed=!0,R(k,"onend"),A.call(k,k.opt),k}function H(k){return k===u.carriageReturn||k===u.lineFeed||k===u.space||k===u.tab}function se(k){var _=this;if(this.error)throw this.error;if(_.closed)return U(_,"Cannot write after close. Assign an onready handler.");if(k===null)return J(_);var V=0,j=k.charCodeAt(0),_e=_.p;for(n.DEBUG&&console.log("write -> ["+k+"]");j&&(_e=j,_.c=j=k.charCodeAt(V++),_e!==j?_.p=_e:_e=_.p,!!j);)switch(n.DEBUG&&console.log(V,j,n.STATE[_.state]),_.position++,j===u.lineFeed?(_.line++,_.column=0):_.column++,_.state){case o.BEGIN:j===u.openBrace?_.state=o.OPEN_OBJECT:j===u.openBracket?_.state=o.OPEN_ARRAY:H(j)||U(_,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(j))continue;if(_.state===o.OPEN_KEY)_.stack.push(o.CLOSE_KEY);else if(j===u.closeBrace){R(_,"onopenobject"),this.depth++,R(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_OBJECT);j===u.doubleQuote?_.state=o.STRING:U(_,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(j))continue;_.state,o.CLOSE_KEY,j===u.colon?(_.state===o.CLOSE_OBJECT?(_.stack.push(o.CLOSE_OBJECT),E(_,"onopenobject"),this.depth++):E(_,"onkey"),_.state=o.VALUE):j===u.closeBrace?(B(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE):j===u.comma?(_.state===o.CLOSE_OBJECT&&_.stack.push(o.CLOSE_OBJECT),E(_),_.state=o.OPEN_KEY):U(_,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(j))continue;if(_.state===o.OPEN_ARRAY)if(R(_,"onopenarray"),this.depth++,_.state=o.VALUE,j===u.closeBracket){R(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_ARRAY);j===u.doubleQuote?_.state=o.STRING:j===u.openBrace?_.state=o.OPEN_OBJECT:j===u.openBracket?_.state=o.OPEN_ARRAY:j===u.t?_.state=o.TRUE:j===u.f?_.state=o.FALSE:j===u.n?_.state=o.NULL:j===u.minus?_.numberNode+="-":u._0<=j&&j<=u._9?(_.numberNode+=String.fromCharCode(j),_.state=o.NUMBER_DIGIT):U(_,"Bad value");continue;case o.CLOSE_ARRAY:if(j===u.comma)_.stack.push(o.CLOSE_ARRAY),E(_,"onvalue"),_.state=o.VALUE;else if(j===u.closeBracket)B(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;else{if(H(j))continue;U(_,"Bad array")}continue;case o.STRING:_.textNode===void 0&&(_.textNode="");var ue=V-1,Ie=_.slashed,be=_.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,j,n.STATE[_.state],Ie);be>0;)if(_.unicodeS+=String.fromCharCode(j),j=k.charCodeAt(V++),_.position++,be===4?(_.textNode+=String.fromCharCode(parseInt(_.unicodeS,16)),be=0,ue=V-1):be++,!j)break e;if(j===u.doubleQuote&&!Ie){_.state=_.stack.pop()||o.VALUE,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}if(j===u.backslash&&!Ie&&(Ie=!0,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue,j=k.charCodeAt(V++),_.position++,!j))break;if(Ie){if(Ie=!1,j===u.n?_.textNode+=`
`:j===u.r?_.textNode+="\r":j===u.t?_.textNode+="	":j===u.f?_.textNode+="\f":j===u.b?_.textNode+="\b":j===u.u?(be=1,_.unicodeS=""):_.textNode+=String.fromCharCode(j),j=k.charCodeAt(V++),_.position++,ue=V-1,j)continue;break}m.lastIndex=V;var he=m.exec(k);if(he===null){V=k.length+1,_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}if(V=he.index+1,j=k.charCodeAt(he.index),!j){_.textNode+=k.substring(ue,V-1),_.position+=V-1-ue;break}}_.slashed=Ie,_.unicodeI=be;continue;case o.TRUE:j===u.r?_.state=o.TRUE2:U(_,"Invalid true started with t"+j);continue;case o.TRUE2:j===u.u?_.state=o.TRUE3:U(_,"Invalid true started with tr"+j);continue;case o.TRUE3:j===u.e?(R(_,"onvalue",!0),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid true started with tru"+j);continue;case o.FALSE:j===u.a?_.state=o.FALSE2:U(_,"Invalid false started with f"+j);continue;case o.FALSE2:j===u.l?_.state=o.FALSE3:U(_,"Invalid false started with fa"+j);continue;case o.FALSE3:j===u.s?_.state=o.FALSE4:U(_,"Invalid false started with fal"+j);continue;case o.FALSE4:j===u.e?(R(_,"onvalue",!1),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid false started with fals"+j);continue;case o.NULL:j===u.u?_.state=o.NULL2:U(_,"Invalid null started with n"+j);continue;case o.NULL2:j===u.l?_.state=o.NULL3:U(_,"Invalid null started with nu"+j);continue;case o.NULL3:j===u.l?(R(_,"onvalue",null),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid null started with nul"+j);continue;case o.NUMBER_DECIMAL_POINT:j===u.period?(_.numberNode+=".",_.state=o.NUMBER_DIGIT):U(_,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:u._0<=j&&j<=u._9?_.numberNode+=String.fromCharCode(j):j===u.period?(_.numberNode.indexOf(".")!==-1&&U(_,"Invalid number has two dots"),_.numberNode+="."):j===u.e||j===u.E?((_.numberNode.indexOf("e")!==-1||_.numberNode.indexOf("E")!==-1)&&U(_,"Invalid number has two exponential"),_.numberNode+="e"):j===u.plus||j===u.minus?(_e===u.e||_e===u.E||U(_,"Invalid symbol in number"),_.numberNode+=String.fromCharCode(j)):($(_),V--,_.state=_.stack.pop()||o.VALUE);continue;default:U(_,"Unknown state: "+_.state)}return _.position>=_.bufferCheckPosition&&h(_),_}})(t)});function Km(e){var t=0,n=Um(!0),r={pullAsync:function(s){return jn(this,void 0,void 0,function(){var i,o,l;return nn(this,function(c){switch(c.label){case 0:return i=e.slice(t,t+s),t+=s,[4,Tc(i,"text")];case 1:return o=c.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(s){var i=e.slice(t,t+s);t+=s;var o=Oc(i,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Um(e){var t=jm.parser(),n=0,r,s=[],i,o,l=!1,c=!1;return t.onopenobject=function(u){var h={};h.incomplete=!0,r||(r=h),i&&(s.push([o,i,c]),e&&(c?i.push(h):i[o]=h)),i=h,o=u,c=!1,++n},t.onkey=function(u){return o=u},t.onvalue=function(u){return c?i.push(u):i[o]=u},t.oncloseobject=function(){var u;if(delete i.incomplete,o=null,--n===0)l=!0;else{var h=i;u=s.pop(),o=u[0],i=u[1],c=u[2],e||(c?i.push(h):i[o]=h)}},t.onopenarray=function(){var u=[];u.incomplete=!0,r||(r=u),i&&(s.push([o,i,c]),e&&(c?i.push(u):i[o]=u)),i=u,c=!0,o=null,++n},t.onclosearray=function(){var u;if(delete i.incomplete,o=null,--n===0)l=!0;else{var h=i;u=s.pop(),o=u[0],i=u[1],c=u[2],e||(c?i.push(h):i[o]=h)}},{write:function(u){return t.write(u),r},done:function(){return l}}}var $c=1024;function Vm(e,t){return jn(this,void 0,void 0,function(){var n,r,s,i;return nn(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||$c*1024,[4,Nc(e,n)];case 1:return r=o.sent(),s=r.result.data,i=new ft(s.databaseName),i.version(s.databaseVersion).stores($m(s)),[4,Ic(i,r,t)];case 2:return o.sent(),[2,i]}})})}function Ic(e,t,n){return jn(this,void 0,void 0,function(){function r(){return jn(this,void 0,void 0,function(){var S,O,R,B,E;return nn(this,function($){switch($.label){case 0:S=function(I){var U,J,H,se,k,_,V,j,_e,ue,Ie,be;return nn(this,function(he){switch(he.label){case 0:if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(u&&ft.ignoreTransaction(function(){return u(h)}),U=I.tableName,J=e.table(U),H=c.tables.filter(function(ce){return ce.name===U})[0].schema,!J){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=J.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(se=I.rows,k=[],_=0;_<se.length&&(V=se[_],!V.incomplete);_++)k.push(Gt.revive(V));return j=n.filter,_e=j?I.inbound?k.filter(function(ce){return j(U,ce)}):k.filter(function(ce){var We=ce[0],Ye=ce[1];return j(U,Ye,We)}):k,ue=I.inbound?[void 0,_e]:[_e.map(function(ce){return ce[0]}),k.map(function(ce){return ce[1]})],Ie=ue[0],be=ue[1],n.overwriteValues?[4,J.bulkPut(be,Ie)]:[3,2];case 1:return he.sent(),[3,4];case 2:return[4,J.bulkAdd(be,Ie)];case 3:he.sent(),he.label=4;case 4:return h.completedRows+=k.length,k.incomplete||(h.completedTables+=1),se.splice(0,k.length),[2]}})},O=0,R=c.data,$.label=1;case 1:return O<R.length?(B=R[O],[5,S(B)]):[3,4];case 2:if(E=$.sent(),E==="break")return[3,4];$.label=3;case 3:return O++,[3,1];case 4:for(;c.data.length>0&&c.data[0].rows&&!c.data[0].rows.incomplete;)c.data.splice(0,1);return!i.done()&&!i.eof()?l?(i.pullSync(s),[3,7]):[3,5]:[3,8];case 5:return[4,ft.waitFor(i.pullAsync(s))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var s,i,o,l,c,u,h,x,m,A;return nn(this,function(S){switch(S.label){case 0:return n=n||{},s=n.chunkSizeBytes||$c*1024,[4,Nc(t,s)];case 1:if(i=S.sent(),o=i.result,l="FileReaderSync"in self,c=o.data,!n.acceptNameDiff&&e.name!==c.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(c.databaseName));if(!n.acceptVersionDiff&&e.verno!==c.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(c.databaseVersion));if(u=n.progressCallback,h={done:!1,completedRows:0,completedTables:0,totalRows:c.tables.reduce(function(O,R){return O+R.rowCount},0),totalTables:c.tables.length},u&&ft.ignoreTransaction(function(){return u(h)}),!n.clearTablesBeforeImport)return[3,5];x=0,m=e.tables,S.label=2;case 2:return x<m.length?(A=m[x],[4,A.clear()]):[3,5];case 3:S.sent(),S.label=4;case 4:return x++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return S.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:S.sent(),S.label=9;case 9:return h.done=!0,u&&ft.ignoreTransaction(function(){return u(h)}),[2]}})})}function Nc(e,t){return jn(this,void 0,void 0,function(){var n,r;return nn(this,function(s){switch(s.label){case 0:n="slice"in e?Km(e):e,s.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return s.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Bm)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}ft.prototype.export=function(e){return Ac(this,e)};ft.prototype.import=function(e,t){return Ic(this,e,t)};ft.import=function(e,t){return Vm(e,t)};const Hm={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},qm=F("div",{class:"text-2xl font-bold mb-6"}," ",-1),Jm={class:"flex flex-wrap items-center gap-5"},Ym=F("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),Wm=F("span",{class:"pointer-events-none"},"",-1),zm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},Gm=F("div",{class:"text-2xl font-bold mb-6 text-red-400"},"!",-1),Xm={class:"flex flex-wrap items-center gap-5"},Qm=Mt({__name:"SettingsPage",setup(e){const t=Kn({dbLoading:!1});Lo(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("   ?"))try{await ct.close(),window.indexedDB.deleteDatabase("avito_scraper"),Ue.show("error",Ve.DBDropSuccess),window.location.reload()}catch{Ue.show("error",Ve.DBDropError)}}async function r(){window.confirm("  ?")&&(await chrome.storage.local.clear(),window.location.reload())}async function s(){t.dbLoading=!0;try{const l=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,c=await Ac(ct),u=new Blob([c],{type:"text/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download=l,h.click(),h.remove(),Ue.show("success",Ve.DBExportSuccess)}catch{Ue.show("error",Ve.DBExportError)}finally{t.dbLoading=!1}}return(i,o)=>(re(),le(nt,null,[F("div",Hm,[t.dbLoading?(re(),Ft(Dc,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):Be("",!0),qm,F("div",Jm,[Fe(At,{theme:"success",icon:"cloud_upload"},{default:St(()=>[Ym,Wm]),_:1}),Fe(At,{theme:"info",icon:"cloud_download",onClick:s},{default:St(()=>[Tt("")]),_:1})])]),F("div",zm,[Gm,F("div",Xm,[Fe(At,{theme:"danger",icon:"delete_sweep",onClick:ut(r,["stop"])},{default:St(()=>[Tt(" localStorage")]),_:1},8,["onClick"]),Fe(At,{theme:"danger",icon:"delete_forever",onClick:ut(n,["stop"])},{default:St(()=>[Tt(" IndexedDB")]),_:1},8,["onClick"])])])],64))}}),Zm={class:"centered"},eg=Mt({__name:"App",setup(e){const t=sn(!1);return sr(async()=>{ih(),chrome.runtime.onMessage.addListener(async({message:n,action:r,status:s,currentUrl:i,data:o})=>{if(s&&n&&Ue.show(s,n),r==="reviews-parsing-started"){const l=Oe.profileLinkGetByUrl(i);l&&(l.status="wait")}if(r==="reviews-parsing-ended"){if(s==="success"){Ee.pushResultsByUrl(i,o),dt.pushParsingResult(i);const l=Oe.profileLinkGetByUrl(i);l&&(l.status="success")}if(s==="error"){const l=Oe.profileLinkGetByUrl(i);l&&(l.status="error")}if(Oe.profileLinkNew){const l=Ue.show("success",Ve.WaitOpenPage,{duration:172800});await ah(lh(2,10)*1e3),Ue.drop(l),Oe.parsingStart()}else Ue.show("success",Ve.ParsingReviewsFinished,{duration:172800}),fn.changeTab(Pn.ProfilesParsing),Va()}if(r==="profile-info"){Ee.list.value.push(o);let l=`
                ${o.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.deliveryInfo}&nbsp;&nbsp;/&nbsp;&nbsp;
                 ${o.activeAdds}
                ${o.completedAdds?"&nbsp;&nbsp;/&nbsp;&nbsp;  "+o.completedAdds:""}
            `;Oe.profileLinkSetInfo(i,l)}r==="profiles-parsing-started"&&s==="success"&&(ot.state.loading=!0),r==="profiles-parsing-current-page"&&s==="success"&&(ot.state.currentPage=o),r==="profiles-parsing-ended"&&(s==="success"&&(ot.state.loading=!1,Ue.show("success",Ve.ProfilesParsingEnded,{duration:172800}),Va(),ot.pushProfileList(o)),s==="error"&&(ot.state.loading=!1,Ue.show("error",Ve.ProfilesParsingError,{duration:172800})))}),document.fonts.onloadingdone=()=>{t.value=!0},Ee.list.value=await Ee.apiGetInfoList(),setTimeout(()=>{Oe.setFilterFromDB()},0)}),(n,r)=>(re(),le("div",{class:_t(["app-wrapper transition-opacity duration-200 delay-100",t.value?"opacity-100":"opacity-0"])},[Fe(hh),F("main",Zm,[(re(),Ft(qu,null,[te(fn).active.value===te(Pn).ProfilesSearch?(re(),Ft(Fy,{key:0})):Be("",!0),te(fn).active.value===te(Pn).ProfilesParsing?(re(),Ft(ry,{key:1})):Be("",!0)],1024)),te(fn).active.value===te(Pn).ProfilesSaved?(re(),Ft(Pm,{key:0})):Be("",!0),te(fn).active.value===te(Pn).Settings?(re(),Ft(Qm,{key:1})):Be("",!0)])],2))}}),tg=cd();id(eg).use(tg).mount("#options");

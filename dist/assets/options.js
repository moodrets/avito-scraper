var Ec=Object.defineProperty;var Ac=(e,t,n)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rn=(e,t,n)=>(Ac(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fo(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const et={},ur=[],Qt=()=>{},Pc=()=>!1,$c=/^on[^a-z]/,zi=e=>$c.test(e),ho=e=>e.startsWith("onUpdate:"),yt=Object.assign,po=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ic=Object.prototype.hasOwnProperty,je=(e,t)=>Ic.call(e,t),Te=Array.isArray,fr=e=>ri(e)==="[object Map]",ja=e=>ri(e)==="[object Set]",Nc=e=>ri(e)==="[object RegExp]",Ae=e=>typeof e=="function",dt=e=>typeof e=="string",yo=e=>typeof e=="symbol",st=e=>e!==null&&typeof e=="object",Ka=e=>st(e)&&Ae(e.then)&&Ae(e.catch),Ua=Object.prototype.toString,ri=e=>Ua.call(e),Fc=e=>ri(e).slice(8,-1),Va=e=>ri(e)==="[object Object]",mo=e=>dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ci=fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Lc=/-(\w)/g,_r=Gi(e=>e.replace(Lc,(t,n)=>n?n.toUpperCase():"")),Mc=/\B([A-Z])/g,Zn=Gi(e=>e.replace(Mc,"-$1").toLowerCase()),Ha=Gi(e=>e.charAt(0).toUpperCase()+e.slice(1)),cs=Gi(e=>e?`on${Ha(e)}`:""),Hr=(e,t)=>!Object.is(e,t),dr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Fi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Yo;const Ss=()=>Yo||(Yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wr(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=dt(r)?Kc(r):wr(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(dt(e))return e;if(st(e))return e}}const Bc=/;(?![^(]*\))/g,Rc=/:([^]+)/,jc=/\/\*[^]*?\*\//g;function Kc(e){const t={};return e.replace(jc,"").split(Bc).forEach(n=>{if(n){const r=n.split(Rc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function pt(e){let t="";if(dt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=pt(e[n]);r&&(t+=r+" ")}else if(st(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Uc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vc=fo(Uc);function qa(e){return!!e||e===""}const Ie=e=>dt(e)?e:e==null?"":Te(e)||st(e)&&(e.toString===Ua||!Ae(e.toString))?JSON.stringify(e,Ya,2):String(e),Ya=(e,t)=>t&&t.__v_isRef?Ya(e,t.value):fr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ja(t)?{[`Set(${t.size})`]:[...t.values()]}:st(t)&&!Te(t)&&!Va(t)?String(t):t;let Jt;class Ja{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Jt;try{return Jt=this,t()}finally{Jt=n}}}on(){Jt=this}off(){Jt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Hc(e){return new Ja(e)}function qc(e,t=Jt){t&&t.active&&t.effects.push(e)}function Yc(){return Jt}const go=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Wa=e=>(e.w&$n)>0,za=e=>(e.n&$n)>0,Jc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$n},Wc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];Wa(i)&&!za(i)?i.delete(e):t[n++]=i,i.w&=~$n,i.n&=~$n}t.length=n}},Ts=new WeakMap;let Pr=0,$n=1;const Os=30;let zt;const Yn=Symbol(""),Es=Symbol("");class vo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,qc(this,r)}run(){if(!this.active)return this.fn();let t=zt,n=An;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=zt,zt=this,An=!0,$n=1<<++Pr,Pr<=Os?Jc(this):Jo(this),this.fn()}finally{Pr<=Os&&Wc(this),$n=1<<--Pr,zt=this.parent,An=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zt===this?this.deferStop=!0:this.active&&(Jo(this),this.onStop&&this.onStop(),this.active=!1)}}function Jo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let An=!0;const Ga=[];function Dr(){Ga.push(An),An=!1}function Sr(){const e=Ga.pop();An=e===void 0?!0:e}function It(e,t,n){if(An&&zt){let r=Ts.get(e);r||Ts.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=go()),Xa(i)}}function Xa(e,t){let n=!1;Pr<=Os?za(e)||(e.n|=$n,n=!Wa(e)):n=!e.has(zt),n&&(e.add(zt),zt.deps.push(e))}function vn(e,t,n,r,i,s){const o=Ts.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&Te(e)){const u=Number(r);o.forEach((c,h)=>{(h==="length"||h>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":Te(e)?mo(n)&&l.push(o.get("length")):(l.push(o.get(Yn)),fr(e)&&l.push(o.get(Es)));break;case"delete":Te(e)||(l.push(o.get(Yn)),fr(e)&&l.push(o.get(Es)));break;case"set":fr(e)&&l.push(o.get(Yn));break}if(l.length===1)l[0]&&As(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);As(go(u))}}function As(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&Wo(r);for(const r of n)r.computed||Wo(r)}function Wo(e,t){(e!==zt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const zc=fo("__proto__,__v_isRef,__isVue"),Qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yo)),Gc=bo(),Xc=bo(!1,!0),Qc=bo(!0),zo=Zc();function Zc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ve(this);for(let s=0,o=this.length;s<o;s++)It(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ve)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Dr();const r=Ve(this)[t].apply(this,n);return Sr(),r}}),e}function eu(e){const t=Ve(this);return It(t,"has",e),t.hasOwnProperty(e)}function bo(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?mu:rl:t?nl:tl).get(r))return r;const o=Te(r);if(!e){if(o&&je(zo,i))return Reflect.get(zo,i,s);if(i==="hasOwnProperty")return eu}const l=Reflect.get(r,i,s);return(yo(i)?Qa.has(i):zc(i))||(e||It(r,"get",i),t)?l:kt(l)?o&&mo(i)?l:l.value:st(l)?e?il(l):Tr(l):l}}const tu=Za(),nu=Za(!0);function Za(e=!1){return function(n,r,i,s){let o=n[r];if(xr(o)&&kt(o)&&!kt(i))return!1;if(!e&&(!Li(i)&&!xr(i)&&(o=Ve(o),i=Ve(i)),!Te(n)&&kt(o)&&!kt(i)))return o.value=i,!0;const l=Te(n)&&mo(r)?Number(r)<n.length:je(n,r),u=Reflect.set(n,r,i,s);return n===Ve(s)&&(l?Hr(i,o)&&vn(n,"set",r,i):vn(n,"add",r,i)),u}}function ru(e,t){const n=je(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&vn(e,"delete",t,void 0),r}function iu(e,t){const n=Reflect.has(e,t);return(!yo(t)||!Qa.has(t))&&It(e,"has",t),n}function su(e){return It(e,"iterate",Te(e)?"length":Yn),Reflect.ownKeys(e)}const el={get:Gc,set:tu,deleteProperty:ru,has:iu,ownKeys:su},ou={get:Qc,set(e,t){return!0},deleteProperty(e,t){return!0}},au=yt({},el,{get:Xc,set:nu}),_o=e=>e,Xi=e=>Reflect.getPrototypeOf(e);function ui(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ve(e),s=Ve(t);n||(t!==s&&It(i,"get",t),It(i,"get",s));const{has:o}=Xi(i),l=r?_o:n?Co:qr;if(o.call(i,t))return l(e.get(t));if(o.call(i,s))return l(e.get(s));e!==i&&e.get(t)}function fi(e,t=!1){const n=this.__v_raw,r=Ve(n),i=Ve(e);return t||(e!==i&&It(r,"has",e),It(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function di(e,t=!1){return e=e.__v_raw,!t&&It(Ve(e),"iterate",Yn),Reflect.get(e,"size",e)}function Go(e){e=Ve(e);const t=Ve(this);return Xi(t).has.call(t,e)||(t.add(e),vn(t,"add",e,e)),this}function Xo(e,t){t=Ve(t);const n=Ve(this),{has:r,get:i}=Xi(n);let s=r.call(n,e);s||(e=Ve(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?Hr(t,o)&&vn(n,"set",e,t):vn(n,"add",e,t),this}function Qo(e){const t=Ve(this),{has:n,get:r}=Xi(t);let i=n.call(t,e);i||(e=Ve(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&vn(t,"delete",e,void 0),s}function Zo(){const e=Ve(this),t=e.size!==0,n=e.clear();return t&&vn(e,"clear",void 0,void 0),n}function hi(e,t){return function(r,i){const s=this,o=s.__v_raw,l=Ve(o),u=t?_o:e?Co:qr;return!e&&It(l,"iterate",Yn),o.forEach((c,h)=>r.call(i,u(c),u(h),s))}}function pi(e,t,n){return function(...r){const i=this.__v_raw,s=Ve(i),o=fr(s),l=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=i[e](...r),h=n?_o:t?Co:qr;return!t&&It(s,"iterate",u?Es:Yn),{next(){const{value:m,done:x}=c.next();return x?{value:m,done:x}:{value:l?[h(m[0]),h(m[1])]:h(m),done:x}},[Symbol.iterator](){return this}}}}function xn(e){return function(...t){return e==="delete"?!1:this}}function lu(){const e={get(s){return ui(this,s)},get size(){return di(this)},has:fi,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:hi(!1,!1)},t={get(s){return ui(this,s,!1,!0)},get size(){return di(this)},has:fi,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:hi(!1,!0)},n={get(s){return ui(this,s,!0)},get size(){return di(this,!0)},has(s){return fi.call(this,s,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:hi(!0,!1)},r={get(s){return ui(this,s,!0,!0)},get size(){return di(this,!0)},has(s){return fi.call(this,s,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:hi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=pi(s,!1,!1),n[s]=pi(s,!0,!1),t[s]=pi(s,!1,!0),r[s]=pi(s,!0,!0)}),[e,n,t,r]}const[cu,uu,fu,du]=lu();function wo(e,t){const n=t?e?du:fu:e?uu:cu;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(je(n,i)&&i in r?n:r,i,s)}const hu={get:wo(!1,!1)},pu={get:wo(!1,!0)},yu={get:wo(!0,!1)},tl=new WeakMap,nl=new WeakMap,rl=new WeakMap,mu=new WeakMap;function gu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vu(e){return e.__v_skip||!Object.isExtensible(e)?0:gu(Fc(e))}function Tr(e){return xr(e)?e:xo(e,!1,el,hu,tl)}function bu(e){return xo(e,!1,au,pu,nl)}function il(e){return xo(e,!0,ou,yu,rl)}function xo(e,t,n,r,i){if(!st(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=vu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return i.set(e,l),l}function hr(e){return xr(e)?hr(e.__v_raw):!!(e&&e.__v_isReactive)}function xr(e){return!!(e&&e.__v_isReadonly)}function Li(e){return!!(e&&e.__v_isShallow)}function sl(e){return hr(e)||xr(e)}function Ve(e){const t=e&&e.__v_raw;return t?Ve(t):e}function ko(e){return Fi(e,"__v_skip",!0),e}const qr=e=>st(e)?Tr(e):e,Co=e=>st(e)?il(e):e;function ol(e){An&&zt&&(e=Ve(e),Xa(e.dep||(e.dep=go())))}function al(e,t){e=Ve(e);const n=e.dep;n&&As(n)}function kt(e){return!!(e&&e.__v_isRef===!0)}function Zt(e){return _u(e,!1)}function _u(e,t){return kt(e)?e:new wu(e,t)}class wu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ve(t),this._value=n?t:qr(t)}get value(){return ol(this),this._value}set value(t){const n=this.__v_isShallow||Li(t)||xr(t);t=n?t:Ve(t),Hr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:qr(t),al(this))}}function fe(e){return kt(e)?e.value:e}const xu={get:(e,t,n)=>fe(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return kt(i)&&!kt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ll(e){return hr(e)?e:new Proxy(e,xu)}class ku{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new vo(t,()=>{this._dirty||(this._dirty=!0,al(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ve(this);return ol(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Cu(e,t,n=!1){let r,i;const s=Ae(e);return s?(r=e,i=Qt):(r=e.get,i=e.set),new ku(r,i,s||!i,n)}function Pn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Qi(s,t,n)}return i}function en(e,t,n,r){if(Ae(e)){const s=Pn(e,t,n,r);return s&&Ka(s)&&s.catch(o=>{Qi(o,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(en(e[s],t,n,r));return i}function Qi(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,l=n;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,o,l)===!1)return}s=s.parent}const u=t.appContext.config.errorHandler;if(u){Pn(u,null,10,[e,o,l]);return}}Du(e,n,i,r)}function Du(e,t,n,r=!0){console.error(e)}let Yr=!1,Ps=!1;const wt=[];let an=0;const pr=[];let fn=null,Un=0;const cl=Promise.resolve();let Do=null;function Su(e){const t=Do||cl;return e?t.then(this?e.bind(this):e):t}function Tu(e){let t=an+1,n=wt.length;for(;t<n;){const r=t+n>>>1;Jr(wt[r])<e?t=r+1:n=r}return t}function So(e){(!wt.length||!wt.includes(e,Yr&&e.allowRecurse?an+1:an))&&(e.id==null?wt.push(e):wt.splice(Tu(e.id),0,e),ul())}function ul(){!Yr&&!Ps&&(Ps=!0,Do=cl.then(dl))}function Ou(e){const t=wt.indexOf(e);t>an&&wt.splice(t,1)}function Eu(e){Te(e)?pr.push(...e):(!fn||!fn.includes(e,e.allowRecurse?Un+1:Un))&&pr.push(e),ul()}function ea(e,t=Yr?an+1:0){for(;t<wt.length;t++){const n=wt[t];n&&n.pre&&(wt.splice(t,1),t--,n())}}function fl(e){if(pr.length){const t=[...new Set(pr)];if(pr.length=0,fn){fn.push(...t);return}for(fn=t,fn.sort((n,r)=>Jr(n)-Jr(r)),Un=0;Un<fn.length;Un++)fn[Un]();fn=null,Un=0}}const Jr=e=>e.id==null?1/0:e.id,Au=(e,t)=>{const n=Jr(e)-Jr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function dl(e){Ps=!1,Yr=!0,wt.sort(Au);const t=Qt;try{for(an=0;an<wt.length;an++){const n=wt[an];n&&n.active!==!1&&Pn(n,null,14)}}finally{an=0,wt.length=0,fl(),Yr=!1,Do=null,(wt.length||pr.length)&&dl()}}function Pu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||et;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:m,trim:x}=r[h]||et;x&&(i=n.map(S=>dt(S)?S.trim():S)),m&&(i=n.map(Ds))}let l,u=r[l=cs(t)]||r[l=cs(_r(t))];!u&&s&&(u=r[l=cs(Zn(t))]),u&&en(u,e,6,i);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,en(c,e,6,i)}}function hl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},l=!1;if(!Ae(e)){const u=c=>{const h=hl(c,t,!0);h&&(l=!0,yt(o,h))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!l?(st(e)&&r.set(e,null),null):(Te(s)?s.forEach(u=>o[u]=null):yt(o,s),st(e)&&r.set(e,o),o)}function Zi(e,t){return!e||!zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(e,t[0].toLowerCase()+t.slice(1))||je(e,Zn(t))||je(e,t))}let Ct=null,pl=null;function Mi(e){const t=Ct;return Ct=e,pl=e&&e.type.__scopeId||null,t}function $t(e,t=Ct,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ua(-1);const s=Mi(t);let o;try{o=e(...i)}finally{Mi(s),r._d&&ua(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function us(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:l,attrs:u,emit:c,render:h,renderCache:m,data:x,setupState:S,ctx:P,inheritAttrs:T}=e;let B,M;const E=Mi(e);try{if(n.shapeFlag&4){const I=i||r;B=on(h.call(I,I,m,s,S,x,P)),M=u}else{const I=t;B=on(I.length>1?I(s,{attrs:u,slots:l,emit:c}):I(s,null)),M=t.props?u:$u(u)}}catch(I){Br.length=0,Qi(I,e,1),B=ot(In)}let $=B;if(M&&T!==!1){const I=Object.keys(M),{shapeFlag:U}=$;I.length&&U&7&&(o&&I.some(ho)&&(M=Iu(M,o)),$=Gn($,M))}return n.dirs&&($=Gn($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),B=$,Mi(E),B}const $u=e=>{let t;for(const n in e)(n==="class"||n==="style"||zi(n))&&((t||(t={}))[n]=e[n]);return t},Iu=(e,t)=>{const n={};for(const r in e)(!ho(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Nu(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:l,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?ta(r,o,c):!!o;if(u&8){const h=t.dynamicProps;for(let m=0;m<h.length;m++){const x=h[m];if(o[x]!==r[x]&&!Zi(c,x))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?ta(r,o,c):!0:!!o;return!1}function ta(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Zi(n,s))return!0}return!1}function Fu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const yl=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Eu(e)}const yi={};function Di(e,t,n){return ml(e,t,n)}function ml(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=et){var l;const u=Yc()===((l=bt)==null?void 0:l.scope)?bt:null;let c,h=!1,m=!1;if(kt(e)?(c=()=>e.value,h=Li(e)):hr(e)?(c=()=>e,r=!0):Te(e)?(m=!0,h=e.some(I=>hr(I)||Li(I)),c=()=>e.map(I=>{if(kt(I))return I.value;if(hr(I))return Hn(I);if(Ae(I))return Pn(I,u,2)})):Ae(e)?t?c=()=>Pn(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return x&&x(),en(e,u,3,[S])}:c=Qt,t&&r){const I=c;c=()=>Hn(I())}let x,S=I=>{x=E.onStop=()=>{Pn(I,u,4)}},P;if(zr)if(S=Qt,t?n&&en(t,u,3,[c(),m?[]:void 0,S]):c(),i==="sync"){const I=Of();P=I.__watcherHandles||(I.__watcherHandles=[])}else return Qt;let T=m?new Array(e.length).fill(yi):yi;const B=()=>{if(E.active)if(t){const I=E.run();(r||h||(m?I.some((U,Y)=>Hr(U,T[Y])):Hr(I,T)))&&(x&&x(),en(t,u,3,[I,T===yi?void 0:m&&T[0]===yi?[]:T,S]),T=I)}else E.run()};B.allowRecurse=!!t;let M;i==="sync"?M=B:i==="post"?M=()=>vt(B,u&&u.suspense):(B.pre=!0,u&&(B.id=u.uid),M=()=>So(B));const E=new vo(c,M);t?n?B():T=E.run():i==="post"?vt(E.run.bind(E),u&&u.suspense):E.run();const $=()=>{E.stop(),u&&u.scope&&po(u.scope.effects,E)};return P&&P.push($),$}function Mu(e,t,n){const r=this.proxy,i=dt(e)?e.includes(".")?gl(r,e):()=>r[e]:e.bind(r,r);let s;Ae(t)?s=t:(s=t.handler,n=t);const o=bt;kr(this);const l=ml(i,s.bind(r),n);return o?kr(o):Jn(),l}function gl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Hn(e,t){if(!st(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))Hn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Hn(e[n],t);else if(ja(e)||fr(e))e.forEach(n=>{Hn(n,t)});else if(Va(e))for(const n in e)Hn(e[n],t);return e}function Cn(e,t){const n=Ct;if(n===null)return e;const r=rs(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,l,u,c=et]=t[s];o&&(Ae(o)&&(o={mounted:o,updated:o}),o.deep&&Hn(l),i.push({dir:o,instance:r,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function Rn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let u=l.dir[r];u&&(Dr(),en(u,n,8,[e.el,l,e,t]),Sr())}}function vl(e,t){e.shapeFlag&6&&e.component?vl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nn(e,t){return Ae(e)?(()=>yt({name:e.name},t,{setup:e}))():e}const yr=e=>!!e.type.__asyncLoader,bl=e=>e.type.__isKeepAlive,Bu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ll(),r=n.ctx;if(!r.renderer)return()=>{const E=t.default&&t.default();return E&&E.length===1?E[0]:E};const i=new Map,s=new Set;let o=null;const l=n.suspense,{renderer:{p:u,m:c,um:h,o:{createElement:m}}}=r,x=m("div");r.activate=(E,$,I,U,Y)=>{const H=E.component;c(E,$,I,0,l),u(H.vnode,E,$,I,H,l,U,E.slotScopeIds,Y),vt(()=>{H.isDeactivated=!1,H.a&&dr(H.a);const ne=E.props&&E.props.onVnodeMounted;ne&&Ut(ne,H.parent,E)},l)},r.deactivate=E=>{const $=E.component;c(E,x,null,1,l),vt(()=>{$.da&&dr($.da);const I=E.props&&E.props.onVnodeUnmounted;I&&Ut(I,$.parent,E),$.isDeactivated=!0},l)};function S(E){fs(E),h(E,n,l,!0)}function P(E){i.forEach(($,I)=>{const U=pa($.type);U&&(!E||!E(U))&&T(I)})}function T(E){const $=i.get(E);!o||!or($,o)?S($):o&&fs(o),i.delete(E),s.delete(E)}Di(()=>[e.include,e.exclude],([E,$])=>{E&&P(I=>$r(E,I)),$&&P(I=>!$r($,I))},{flush:"post",deep:!0});let B=null;const M=()=>{B!=null&&i.set(B,ds(n.subTree))};return er(M),xl(M),ii(()=>{i.forEach(E=>{const{subTree:$,suspense:I}=n,U=ds($);if(E.type===U.type&&E.key===U.key){fs(U);const Y=U.component.da;Y&&vt(Y,I);return}S(E)})}),()=>{if(B=null,!t.default)return null;const E=t.default(),$=E[0];if(E.length>1)return o=null,E;if(!Eo($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let I=ds($);const U=I.type,Y=pa(yr(I)?I.type.__asyncResolved||{}:U),{include:H,exclude:ne,max:k}=e;if(H&&(!Y||!$r(H,Y))||ne&&Y&&$r(ne,Y))return o=I,$;const _=I.key==null?U:I.key,V=i.get(_);return I.el&&(I=Gn(I),$.shapeFlag&128&&($.ssContent=I)),B=_,V?(I.el=V.el,I.component=V.component,I.transition&&vl(I,I.transition),I.shapeFlag|=512,s.delete(_),s.add(_)):(s.add(_),k&&s.size>parseInt(k,10)&&T(s.values().next().value)),I.shapeFlag|=256,o=I,yl($.type)?$:I}}},Ru=Bu;function $r(e,t){return Te(e)?e.some(n=>$r(n,t)):dt(e)?e.split(",").includes(t):Nc(e)?e.test(t):!1}function ju(e,t){_l(e,"a",t)}function Ku(e,t){_l(e,"da",t)}function _l(e,t,n=bt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(es(t,r,n),n){let i=n.parent;for(;i&&i.parent;)bl(i.parent.vnode)&&Uu(r,t,n,i),i=i.parent}}function Uu(e,t,n,r){const i=es(t,e,r,!0);kl(()=>{po(r[t],i)},n)}function fs(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ds(e){return e.shapeFlag&128?e.ssContent:e}function es(e,t,n=bt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Dr(),kr(n);const l=en(t,n,e,o);return Jn(),Sr(),l});return r?i.unshift(s):i.push(s),s}}const _n=e=>(t,n=bt)=>(!zr||e==="sp")&&es(e,(...r)=>t(...r),n),wl=_n("bm"),er=_n("m"),Vu=_n("bu"),xl=_n("u"),ii=_n("bum"),kl=_n("um"),Hu=_n("sp"),qu=_n("rtg"),Yu=_n("rtc");function Ju(e,t=bt){es("ec",e,t)}const Wu=Symbol.for("v-ndc");function En(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||dt(e)){i=new Array(e.length);for(let o=0,l=e.length;o<l;o++)i[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(st(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];i[l]=t(e[c],c,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function Cl(e,t,n={},r,i){if(Ct.isCE||Ct.parent&&yr(Ct.parent)&&Ct.parent.isCE)return t!=="default"&&(n.name=t),ot("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),se();const o=s&&Dl(s(n)),l=_t(it,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Dl(e){return e.some(t=>Eo(t)?!(t.type===In||t.type===it&&!Dl(t.children)):!0)?e:null}const $s=e=>e?Ml(e)?rs(e)||e.proxy:$s(e.parent):null,Mr=yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$s(e.parent),$root:e=>$s(e.root),$emit:e=>e.emit,$options:e=>To(e),$forceUpdate:e=>e.f||(e.f=()=>So(e.update)),$nextTick:e=>e.n||(e.n=Su.bind(e.proxy)),$watch:e=>Mu.bind(e)}),hs=(e,t)=>e!==et&&!e.__isScriptSetup&&je(e,t),zu={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const S=o[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(hs(r,t))return o[t]=1,r[t];if(i!==et&&je(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&je(c,t))return o[t]=3,s[t];if(n!==et&&je(n,t))return o[t]=4,n[t];Is&&(o[t]=0)}}const h=Mr[t];let m,x;if(h)return t==="$attrs"&&It(e,"get",t),h(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==et&&je(n,t))return o[t]=4,n[t];if(x=u.config.globalProperties,je(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return hs(i,t)?(i[t]=n,!0):r!==et&&je(r,t)?(r[t]=n,!0):je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||e!==et&&je(e,o)||hs(t,o)||(l=s[0])&&je(l,o)||je(r,o)||je(Mr,o)||je(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:je(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Gu(){return Xu().slots}function Xu(){const e=Ll();return e.setupContext||(e.setupContext=Rl(e))}function na(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Is=!0;function Qu(e){const t=To(e),n=e.proxy,r=e.ctx;Is=!1,t.beforeCreate&&ra(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:l,provide:u,inject:c,created:h,beforeMount:m,mounted:x,beforeUpdate:S,updated:P,activated:T,deactivated:B,beforeDestroy:M,beforeUnmount:E,destroyed:$,unmounted:I,render:U,renderTracked:Y,renderTriggered:H,errorCaptured:ne,serverPrefetch:k,expose:_,inheritAttrs:V,components:R,directives:_e,filters:le}=t;if(c&&Zu(c,r,null),o)for(const de in o){const ae=o[de];Ae(ae)&&(r[de]=ae.bind(n))}if(i){const de=i.call(n,n);st(de)&&(e.data=Tr(de))}if(Is=!0,s)for(const de in s){const ae=s[de],Je=Ae(ae)?ae.bind(n,n):Ae(ae.get)?ae.get.bind(n,n):Qt,He=!Ae(ae)&&Ae(ae.set)?ae.set.bind(n):Qt,nt=jl({get:Je,set:He});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>nt.value,set:Ue=>nt.value=Ue})}if(l)for(const de in l)Sl(l[de],r,n,de);if(u){const de=Ae(u)?u.call(n):u;Reflect.ownKeys(de).forEach(ae=>{of(ae,de[ae])})}h&&ra(h,e,"c");function be(de,ae){Te(ae)?ae.forEach(Je=>de(Je.bind(n))):ae&&de(ae.bind(n))}if(be(wl,m),be(er,x),be(Vu,S),be(xl,P),be(ju,T),be(Ku,B),be(Ju,ne),be(Yu,Y),be(qu,H),be(ii,E),be(kl,I),be(Hu,k),Te(_))if(_.length){const de=e.exposed||(e.exposed={});_.forEach(ae=>{Object.defineProperty(de,ae,{get:()=>n[ae],set:Je=>n[ae]=Je})})}else e.exposed||(e.exposed={});U&&e.render===Qt&&(e.render=U),V!=null&&(e.inheritAttrs=V),R&&(e.components=R),_e&&(e.directives=_e)}function Zu(e,t,n=Qt){Te(e)&&(e=Ns(e));for(const r in e){const i=e[r];let s;st(i)?"default"in i?s=Si(i.from||r,i.default,!0):s=Si(i.from||r):s=Si(i),kt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ra(e,t,n){en(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Sl(e,t,n,r){const i=r.includes(".")?gl(n,r):()=>n[r];if(dt(e)){const s=t[e];Ae(s)&&Di(i,s)}else if(Ae(e))Di(i,e.bind(n));else if(st(e))if(Te(e))e.forEach(s=>Sl(s,t,n,r));else{const s=Ae(e.handler)?e.handler.bind(n):t[e.handler];Ae(s)&&Di(i,s,e)}}function To(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let u;return l?u=l:!i.length&&!n&&!r?u=t:(u={},i.length&&i.forEach(c=>Bi(u,c,o,!0)),Bi(u,t,o)),st(t)&&s.set(t,u),u}function Bi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Bi(e,s,n,!0),i&&i.forEach(o=>Bi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=ef[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const ef={data:ia,props:sa,emits:sa,methods:Ir,computed:Ir,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:Ir,directives:Ir,watch:nf,provide:ia,inject:tf};function ia(e,t){return t?e?function(){return yt(Ae(e)?e.call(this,this):e,Ae(t)?t.call(this,this):t)}:t:e}function tf(e,t){return Ir(Ns(e),Ns(t))}function Ns(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ot(e,t){return e?[...new Set([].concat(e,t))]:t}function Ir(e,t){return e?yt(Object.create(null),e,t):t}function sa(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:yt(Object.create(null),na(e),na(t??{})):t}function nf(e,t){if(!e)return t;if(!t)return e;const n=yt(Object.create(null),e);for(const r in t)n[r]=Ot(e[r],t[r]);return n}function Tl(){return{app:null,config:{isNativeTag:Pc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rf=0;function sf(e,t){return function(r,i=null){Ae(r)||(r=yt({},r)),i!=null&&!st(i)&&(i=null);const s=Tl(),o=new Set;let l=!1;const u=s.app={_uid:rf++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Ef,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&Ae(c.install)?(o.add(c),c.install(u,...h)):Ae(c)&&(o.add(c),c(u,...h))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,h){return h?(s.components[c]=h,u):s.components[c]},directive(c,h){return h?(s.directives[c]=h,u):s.directives[c]},mount(c,h,m){if(!l){const x=ot(r,i);return x.appContext=s,h&&t?t(x,c):e(x,c,m),l=!0,u._container=c,c.__vue_app__=u,rs(x.component)||x.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,h){return s.provides[c]=h,u},runWithContext(c){Ri=u;try{return c()}finally{Ri=null}}};return u}}let Ri=null;function of(e,t){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[e]=t}}function Si(e,t,n=!1){const r=bt||Ct;if(r||Ri){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ri._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ae(t)?t.call(r&&r.proxy):t}}function af(e,t,n,r=!1){const i={},s={};Fi(s,ns,1),e.propsDefaults=Object.create(null),Ol(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:bu(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function lf(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,l=Ve(i),[u]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let m=0;m<h.length;m++){let x=h[m];if(Zi(e.emitsOptions,x))continue;const S=t[x];if(u)if(je(s,x))S!==s[x]&&(s[x]=S,c=!0);else{const P=_r(x);i[P]=Fs(u,l,P,S,e,!1)}else S!==s[x]&&(s[x]=S,c=!0)}}}else{Ol(e,t,i,s)&&(c=!0);let h;for(const m in l)(!t||!je(t,m)&&((h=Zn(m))===m||!je(t,h)))&&(u?n&&(n[m]!==void 0||n[h]!==void 0)&&(i[m]=Fs(u,l,m,void 0,e,!0)):delete i[m]);if(s!==l)for(const m in s)(!t||!je(t,m))&&(delete s[m],c=!0)}c&&vn(e,"set","$attrs")}function Ol(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,l;if(t)for(let u in t){if(Ci(u))continue;const c=t[u];let h;i&&je(i,h=_r(u))?!s||!s.includes(h)?n[h]=c:(l||(l={}))[h]=c:Zi(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(s){const u=Ve(n),c=l||et;for(let h=0;h<s.length;h++){const m=s[h];n[m]=Fs(i,u,m,c[m],e,!je(c,m))}}return o}function Fs(e,t,n,r,i,s){const o=e[n];if(o!=null){const l=je(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(u)){const{propsDefaults:c}=i;n in c?r=c[n]:(kr(i),r=c[n]=u.call(null,t),Jn())}else r=u}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}function El(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},l=[];let u=!1;if(!Ae(e)){const h=m=>{u=!0;const[x,S]=El(m,t,!0);yt(o,x),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!u)return st(e)&&r.set(e,ur),ur;if(Te(s))for(let h=0;h<s.length;h++){const m=_r(s[h]);oa(m)&&(o[m]=et)}else if(s)for(const h in s){const m=_r(h);if(oa(m)){const x=s[h],S=o[m]=Te(x)||Ae(x)?{type:x}:yt({},x);if(S){const P=ca(Boolean,S.type),T=ca(String,S.type);S[0]=P>-1,S[1]=T<0||P<T,(P>-1||je(S,"default"))&&l.push(m)}}}const c=[o,l];return st(e)&&r.set(e,c),c}function oa(e){return e[0]!=="$"}function aa(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function la(e,t){return aa(e)===aa(t)}function ca(e,t){return Te(t)?t.findIndex(n=>la(n,e)):Ae(t)&&la(t,e)?0:-1}const Al=e=>e[0]==="_"||e==="$stable",Oo=e=>Te(e)?e.map(on):[on(e)],cf=(e,t,n)=>{if(t._n)return t;const r=$t((...i)=>Oo(t(...i)),n);return r._c=!1,r},Pl=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Al(i))continue;const s=e[i];if(Ae(s))t[i]=cf(i,s,r);else if(s!=null){const o=Oo(s);t[i]=()=>o}}},$l=(e,t)=>{const n=Oo(t);e.slots.default=()=>n},uf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ve(t),Fi(t,"_",n)):Pl(t,e.slots={})}else e.slots={},t&&$l(e,t);Fi(e.slots,ns,1)},ff=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=et;if(r.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:(yt(i,t),!n&&l===1&&delete i._):(s=!t.$stable,Pl(t,i)),o=t}else t&&($l(e,t),o={default:1});if(s)for(const l in i)!Al(l)&&!(l in o)&&delete i[l]};function Ls(e,t,n,r,i=!1){if(Te(e)){e.forEach((x,S)=>Ls(x,t&&(Te(t)?t[S]:t),n,r,i));return}if(yr(r)&&!i)return;const s=r.shapeFlag&4?rs(r.component)||r.component.proxy:r.el,o=i?null:s,{i:l,r:u}=e,c=t&&t.r,h=l.refs===et?l.refs={}:l.refs,m=l.setupState;if(c!=null&&c!==u&&(dt(c)?(h[c]=null,je(m,c)&&(m[c]=null)):kt(c)&&(c.value=null)),Ae(u))Pn(u,l,12,[o,h]);else{const x=dt(u),S=kt(u);if(x||S){const P=()=>{if(e.f){const T=x?je(m,u)?m[u]:h[u]:u.value;i?Te(T)&&po(T,s):Te(T)?T.includes(s)||T.push(s):x?(h[u]=[s],je(m,u)&&(m[u]=h[u])):(u.value=[s],e.k&&(h[e.k]=u.value))}else x?(h[u]=o,je(m,u)&&(m[u]=o)):S&&(u.value=o,e.k&&(h[e.k]=o))};o?(P.id=-1,vt(P,n)):P()}}}const vt=Lu;function df(e){return hf(e)}function hf(e,t){const n=Ss();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:u,setText:c,setElementText:h,parentNode:m,nextSibling:x,setScopeId:S=Qt,insertStaticContent:P}=e,T=(a,f,p,y=null,v=null,w=null,C=!1,A=null,F=!!f.dynamicChildren)=>{if(a===f)return;a&&!or(a,f)&&(y=K(a),Ue(a,v,w,!0),a=null),f.patchFlag===-2&&(F=!1,f.dynamicChildren=null);const{type:L,ref:W,shapeFlag:q}=f;switch(L){case ts:B(a,f,p,y);break;case In:M(a,f,p,y);break;case ps:a==null&&E(f,p,y,C);break;case it:R(a,f,p,y,v,w,C,A,F);break;default:q&1?U(a,f,p,y,v,w,C,A,F):q&6?_e(a,f,p,y,v,w,C,A,F):(q&64||q&128)&&L.process(a,f,p,y,v,w,C,A,F,J)}W!=null&&v&&Ls(W,a&&a.ref,w,f||a,!f)},B=(a,f,p,y)=>{if(a==null)r(f.el=l(f.children),p,y);else{const v=f.el=a.el;f.children!==a.children&&c(v,f.children)}},M=(a,f,p,y)=>{a==null?r(f.el=u(f.children||""),p,y):f.el=a.el},E=(a,f,p,y)=>{[a.el,a.anchor]=P(a.children,f,p,y,a.el,a.anchor)},$=({el:a,anchor:f},p,y)=>{let v;for(;a&&a!==f;)v=x(a),r(a,p,y),a=v;r(f,p,y)},I=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=x(a),i(a),a=p;i(f)},U=(a,f,p,y,v,w,C,A,F)=>{C=C||f.type==="svg",a==null?Y(f,p,y,v,w,C,A,F):k(a,f,v,w,C,A,F)},Y=(a,f,p,y,v,w,C,A)=>{let F,L;const{type:W,props:q,shapeFlag:G,transition:Z,dirs:ie}=a;if(F=a.el=o(a.type,w,q&&q.is,q),G&8?h(F,a.children):G&16&&ne(a.children,F,null,y,v,w&&W!=="foreignObject",C,A),ie&&Rn(a,null,y,"created"),H(F,a,a.scopeId,C,y),q){for(const ve in q)ve!=="value"&&!Ci(ve)&&s(F,ve,null,q[ve],w,a.children,y,v,Le);"value"in q&&s(F,"value",null,q.value),(L=q.onVnodeBeforeMount)&&Ut(L,y,a)}ie&&Rn(a,null,y,"beforeMount");const he=(!v||v&&!v.pendingBranch)&&Z&&!Z.persisted;he&&Z.beforeEnter(F),r(F,f,p),((L=q&&q.onVnodeMounted)||he||ie)&&vt(()=>{L&&Ut(L,y,a),he&&Z.enter(F),ie&&Rn(a,null,y,"mounted")},v)},H=(a,f,p,y,v)=>{if(p&&S(a,p),y)for(let w=0;w<y.length;w++)S(a,y[w]);if(v){let w=v.subTree;if(f===w){const C=v.vnode;H(a,C,C.scopeId,C.slotScopeIds,v.parent)}}},ne=(a,f,p,y,v,w,C,A,F=0)=>{for(let L=F;L<a.length;L++){const W=a[L]=A?Dn(a[L]):on(a[L]);T(null,W,f,p,y,v,w,C,A)}},k=(a,f,p,y,v,w,C)=>{const A=f.el=a.el;let{patchFlag:F,dynamicChildren:L,dirs:W}=f;F|=a.patchFlag&16;const q=a.props||et,G=f.props||et;let Z;p&&jn(p,!1),(Z=G.onVnodeBeforeUpdate)&&Ut(Z,p,f,a),W&&Rn(f,a,p,"beforeUpdate"),p&&jn(p,!0);const ie=v&&f.type!=="foreignObject";if(L?_(a.dynamicChildren,L,A,p,y,ie,w):C||ae(a,f,A,null,p,y,ie,w,!1),F>0){if(F&16)V(A,f,q,G,p,y,v);else if(F&2&&q.class!==G.class&&s(A,"class",null,G.class,v),F&4&&s(A,"style",q.style,G.style,v),F&8){const he=f.dynamicProps;for(let ve=0;ve<he.length;ve++){const te=he[ve],g=q[te],d=G[te];(d!==g||te==="value")&&s(A,te,g,d,v,a.children,p,y,Le)}}F&1&&a.children!==f.children&&h(A,f.children)}else!C&&L==null&&V(A,f,q,G,p,y,v);((Z=G.onVnodeUpdated)||W)&&vt(()=>{Z&&Ut(Z,p,f,a),W&&Rn(f,a,p,"updated")},y)},_=(a,f,p,y,v,w,C)=>{for(let A=0;A<f.length;A++){const F=a[A],L=f[A],W=F.el&&(F.type===it||!or(F,L)||F.shapeFlag&70)?m(F.el):p;T(F,L,W,null,y,v,w,C,!0)}},V=(a,f,p,y,v,w,C)=>{if(p!==y){if(p!==et)for(const A in p)!Ci(A)&&!(A in y)&&s(a,A,p[A],null,C,f.children,v,w,Le);for(const A in y){if(Ci(A))continue;const F=y[A],L=p[A];F!==L&&A!=="value"&&s(a,A,L,F,C,f.children,v,w,Le)}"value"in y&&s(a,"value",p.value,y.value)}},R=(a,f,p,y,v,w,C,A,F)=>{const L=f.el=a?a.el:l(""),W=f.anchor=a?a.anchor:l("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(A=A?A.concat(Z):Z),a==null?(r(L,p,y),r(W,p,y),ne(f.children,p,W,v,w,C,A,F)):q>0&&q&64&&G&&a.dynamicChildren?(_(a.dynamicChildren,G,p,v,w,C,A),(f.key!=null||v&&f===v.subTree)&&Il(a,f,!0)):ae(a,f,p,W,v,w,C,A,F)},_e=(a,f,p,y,v,w,C,A,F)=>{f.slotScopeIds=A,a==null?f.shapeFlag&512?v.ctx.activate(f,p,y,C,F):le(f,p,y,v,w,C,F):Pe(a,f,F)},le=(a,f,p,y,v,w,C)=>{const A=a.component=xf(a,y,v);if(bl(a)&&(A.ctx.renderer=J),kf(A),A.asyncDep){if(v&&v.registerDep(A,be),!a.el){const F=A.subTree=ot(In);M(null,F,f,p)}return}be(A,a,f,p,v,w,C)},Pe=(a,f,p)=>{const y=f.component=a.component;if(Nu(a,f,p))if(y.asyncDep&&!y.asyncResolved){de(y,f,p);return}else y.next=f,Ou(y.update),y.update();else f.el=a.el,y.vnode=f},be=(a,f,p,y,v,w,C)=>{const A=()=>{if(a.isMounted){let{next:W,bu:q,u:G,parent:Z,vnode:ie}=a,he=W,ve;jn(a,!1),W?(W.el=ie.el,de(a,W,C)):W=ie,q&&dr(q),(ve=W.props&&W.props.onVnodeBeforeUpdate)&&Ut(ve,Z,W,ie),jn(a,!0);const te=us(a),g=a.subTree;a.subTree=te,T(g,te,m(g.el),K(g),a,v,w),W.el=te.el,he===null&&Fu(a,te.el),G&&vt(G,v),(ve=W.props&&W.props.onVnodeUpdated)&&vt(()=>Ut(ve,Z,W,ie),v)}else{let W;const{el:q,props:G}=f,{bm:Z,m:ie,parent:he}=a,ve=yr(f);if(jn(a,!1),Z&&dr(Z),!ve&&(W=G&&G.onVnodeBeforeMount)&&Ut(W,he,f),jn(a,!0),q&&D){const te=()=>{a.subTree=us(a),D(q,a.subTree,a,v,null)};ve?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=us(a);T(null,te,p,y,a,v,w),f.el=te.el}if(ie&&vt(ie,v),!ve&&(W=G&&G.onVnodeMounted)){const te=f;vt(()=>Ut(W,he,te),v)}(f.shapeFlag&256||he&&yr(he.vnode)&&he.vnode.shapeFlag&256)&&a.a&&vt(a.a,v),a.isMounted=!0,f=p=y=null}},F=a.effect=new vo(A,()=>So(L),a.scope),L=a.update=()=>F.run();L.id=a.uid,jn(a,!0),L()},de=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,lf(a,f.props,y,p),ff(a,f.children,p),Dr(),ea(),Sr()},ae=(a,f,p,y,v,w,C,A,F=!1)=>{const L=a&&a.children,W=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){He(L,q,p,y,v,w,C,A,F);return}else if(G&256){Je(L,q,p,y,v,w,C,A,F);return}}Z&8?(W&16&&Le(L,v,w),q!==L&&h(p,q)):W&16?Z&16?He(L,q,p,y,v,w,C,A,F):Le(L,v,w,!0):(W&8&&h(p,""),Z&16&&ne(q,p,y,v,w,C,A,F))},Je=(a,f,p,y,v,w,C,A,F)=>{a=a||ur,f=f||ur;const L=a.length,W=f.length,q=Math.min(L,W);let G;for(G=0;G<q;G++){const Z=f[G]=F?Dn(f[G]):on(f[G]);T(a[G],Z,p,null,v,w,C,A,F)}L>W?Le(a,v,w,!0,!1,q):ne(f,p,y,v,w,C,A,F,q)},He=(a,f,p,y,v,w,C,A,F)=>{let L=0;const W=f.length;let q=a.length-1,G=W-1;for(;L<=q&&L<=G;){const Z=a[L],ie=f[L]=F?Dn(f[L]):on(f[L]);if(or(Z,ie))T(Z,ie,p,null,v,w,C,A,F);else break;L++}for(;L<=q&&L<=G;){const Z=a[q],ie=f[G]=F?Dn(f[G]):on(f[G]);if(or(Z,ie))T(Z,ie,p,null,v,w,C,A,F);else break;q--,G--}if(L>q){if(L<=G){const Z=G+1,ie=Z<W?f[Z].el:y;for(;L<=G;)T(null,f[L]=F?Dn(f[L]):on(f[L]),p,ie,v,w,C,A,F),L++}}else if(L>G)for(;L<=q;)Ue(a[L],v,w,!0),L++;else{const Z=L,ie=L,he=new Map;for(L=ie;L<=G;L++){const Q=f[L]=F?Dn(f[L]):on(f[L]);Q.key!=null&&he.set(Q.key,L)}let ve,te=0;const g=G-ie+1;let d=!1,b=0;const O=new Array(g);for(L=0;L<g;L++)O[L]=0;for(L=Z;L<=q;L++){const Q=a[L];if(te>=g){Ue(Q,v,w,!0);continue}let ee;if(Q.key!=null)ee=he.get(Q.key);else for(ve=ie;ve<=G;ve++)if(O[ve-ie]===0&&or(Q,f[ve])){ee=ve;break}ee===void 0?Ue(Q,v,w,!0):(O[ee-ie]=L+1,ee>=b?b=ee:d=!0,T(Q,f[ee],p,null,v,w,C,A,F),te++)}const N=d?pf(O):ur;for(ve=N.length-1,L=g-1;L>=0;L--){const Q=ie+L,ee=f[Q],ye=Q+1<W?f[Q+1].el:y;O[L]===0?T(null,ee,p,ye,v,w,C,A,F):d&&(ve<0||L!==N[ve]?nt(ee,p,ye,2):ve--)}}},nt=(a,f,p,y,v=null)=>{const{el:w,type:C,transition:A,children:F,shapeFlag:L}=a;if(L&6){nt(a.component.subTree,f,p,y);return}if(L&128){a.suspense.move(f,p,y);return}if(L&64){C.move(a,f,p,J);return}if(C===it){r(w,f,p);for(let q=0;q<F.length;q++)nt(F[q],f,p,y);r(a.anchor,f,p);return}if(C===ps){$(a,f,p);return}if(y!==2&&L&1&&A)if(y===0)A.beforeEnter(w),r(w,f,p),vt(()=>A.enter(w),v);else{const{leave:q,delayLeave:G,afterLeave:Z}=A,ie=()=>r(w,f,p),he=()=>{q(w,()=>{ie(),Z&&Z()})};G?G(w,ie,he):he()}else r(w,f,p)},Ue=(a,f,p,y=!1,v=!1)=>{const{type:w,props:C,ref:A,children:F,dynamicChildren:L,shapeFlag:W,patchFlag:q,dirs:G}=a;if(A!=null&&Ls(A,null,p,a,!0),W&256){f.ctx.deactivate(a);return}const Z=W&1&&G,ie=!yr(a);let he;if(ie&&(he=C&&C.onVnodeBeforeUnmount)&&Ut(he,f,a),W&6)ue(a.component,p,y);else{if(W&128){a.suspense.unmount(p,y);return}Z&&Rn(a,null,f,"beforeUnmount"),W&64?a.type.remove(a,f,p,v,J,y):L&&(w!==it||q>0&&q&64)?Le(L,f,p,!1,!0):(w===it&&q&384||!v&&W&16)&&Le(F,f,p),y&&Nt(a)}(ie&&(he=C&&C.onVnodeUnmounted)||Z)&&vt(()=>{he&&Ut(he,f,a),Z&&Rn(a,null,f,"unmounted")},p)},Nt=a=>{const{type:f,el:p,anchor:y,transition:v}=a;if(f===it){ge(p,y);return}if(f===ps){I(a);return}const w=()=>{i(p),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(a.shapeFlag&1&&v&&!v.persisted){const{leave:C,delayLeave:A}=v,F=()=>C(p,w);A?A(a.el,w,F):F()}else w()},ge=(a,f)=>{let p;for(;a!==f;)p=x(a),i(a),a=p;i(f)},ue=(a,f,p)=>{const{bum:y,scope:v,update:w,subTree:C,um:A}=a;y&&dr(y),v.stop(),w&&(w.active=!1,Ue(C,a,f,p)),A&&vt(A,f),vt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Le=(a,f,p,y=!1,v=!1,w=0)=>{for(let C=w;C<a.length;C++)Ue(a[C],f,p,y,v)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():x(a.anchor||a.el),z=(a,f,p)=>{a==null?f._vnode&&Ue(f._vnode,null,null,!0):T(f._vnode||null,a,f,null,null,null,p),ea(),fl(),f._vnode=a},J={p:T,um:Ue,m:nt,r:Nt,mt:le,mc:ne,pc:ae,pbc:_,n:K,o:e};let X,D;return t&&([X,D]=t(J)),{render:z,hydrate:X,createApp:sf(z,X)}}function jn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Il(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Dn(i[s]),l.el=o.el),n||Il(o,l)),l.type===ts&&(l.el=o.el)}}function pf(e){const t=e.slice(),n=[0];let r,i,s,o,l;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,e[n[l]]<c?s=l+1:o=l;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const yf=e=>e.__isTeleport,it=Symbol.for("v-fgt"),ts=Symbol.for("v-txt"),In=Symbol.for("v-cmt"),ps=Symbol.for("v-stc"),Br=[];let Gt=null;function se(e=!1){Br.push(Gt=e?null:[])}function mf(){Br.pop(),Gt=Br[Br.length-1]||null}let Wr=1;function ua(e){Wr+=e}function Nl(e){return e.dynamicChildren=Wr>0?Gt||ur:null,mf(),Wr>0&&Gt&&Gt.push(e),e}function me(e,t,n,r,i,s){return Nl(j(e,t,n,r,i,s,!0))}function _t(e,t,n,r,i){return Nl(ot(e,t,n,r,i,!0))}function Eo(e){return e?e.__v_isVNode===!0:!1}function or(e,t){return e.type===t.type&&e.key===t.key}const ns="__vInternal",Fl=({key:e})=>e??null,Ti=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?dt(e)||kt(e)||Ae(e)?{i:Ct,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,r=0,i=null,s=e===it?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fl(t),ref:t&&Ti(t),scopeId:pl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ct};return l?(Ao(u,n),s&128&&e.normalize(u)):n&&(u.shapeFlag|=dt(n)?8:16),Wr>0&&!o&&Gt&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&Gt.push(u),u}const ot=gf;function gf(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Wu)&&(e=In),Eo(e)){const l=Gn(e,t,!0);return n&&Ao(l,n),Wr>0&&!s&&Gt&&(l.shapeFlag&6?Gt[Gt.indexOf(e)]=l:Gt.push(l)),l.patchFlag|=-2,l}if(Sf(e)&&(e=e.__vccOpts),t){t=vf(t);let{class:l,style:u}=t;l&&!dt(l)&&(t.class=pt(l)),st(u)&&(sl(u)&&!Te(u)&&(u=yt({},u)),t.style=wr(u))}const o=dt(e)?1:yl(e)?128:yf(e)?64:st(e)?4:Ae(e)?2:0;return j(e,t,n,r,i,o,s,!0)}function vf(e){return e?sl(e)||ns in e?yt({},e):e:null}function Gn(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=e,l=t?bf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Fl(l),ref:t&&t.ref?n&&i?Te(i)?i.concat(Ti(t)):[i,Ti(t)]:Ti(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==it?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gn(e.ssContent),ssFallback:e.ssFallback&&Gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ht(e=" ",t=0){return ot(ts,null,e,t)}function Be(e="",t=!1){return t?(se(),_t(In,null,e)):ot(In,null,e)}function on(e){return e==null||typeof e=="boolean"?ot(In):Te(e)?ot(it,null,e.slice()):typeof e=="object"?Dn(e):ot(ts,null,String(e))}function Dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gn(e)}function Ao(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ao(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(ns in t)?t._ctx=Ct:i===3&&Ct&&(Ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ae(t)?(t={default:t,_ctx:Ct},n=32):(t=String(t),r&64?(n=16,t=[Ht(t)]):n=8);e.children=t,e.shapeFlag|=n}function bf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=pt([t.class,r.class]));else if(i==="style")t.style=wr([t.style,r.style]);else if(zi(i)){const s=t[i],o=r[i];o&&s!==o&&!(Te(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function Ut(e,t,n,r=null){en(e,t,7,[n,r])}const _f=Tl();let wf=0;function xf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||_f,s={uid:wf++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ja(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:El(r,i),emitsOptions:hl(r,i),emit:null,emitted:null,propsDefaults:et,inheritAttrs:r.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Pu.bind(null,s),e.ce&&e.ce(s),s}let bt=null;const Ll=()=>bt||Ct;let Po,rr,fa="__VUE_INSTANCE_SETTERS__";(rr=Ss()[fa])||(rr=Ss()[fa]=[]),rr.push(e=>bt=e),Po=e=>{rr.length>1?rr.forEach(t=>t(e)):rr[0](e)};const kr=e=>{Po(e),e.scope.on()},Jn=()=>{bt&&bt.scope.off(),Po(null)};function Ml(e){return e.vnode.shapeFlag&4}let zr=!1;function kf(e,t=!1){zr=t;const{props:n,children:r}=e.vnode,i=Ml(e);af(e,n,i,t),uf(e,r);const s=i?Cf(e,t):void 0;return zr=!1,s}function Cf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ko(new Proxy(e.ctx,zu));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?Rl(e):null;kr(e),Dr();const s=Pn(r,e,0,[e.props,i]);if(Sr(),Jn(),Ka(s)){if(s.then(Jn,Jn),t)return s.then(o=>{da(e,o,t)}).catch(o=>{Qi(o,e,0)});e.asyncDep=s}else da(e,s,t)}else Bl(e,t)}function da(e,t,n){Ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:st(t)&&(e.setupState=ll(t)),Bl(e,n)}let ha;function Bl(e,t,n){const r=e.type;if(!e.render){if(!t&&ha&&!r.render){const i=r.template||To(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:u}=r,c=yt(yt({isCustomElement:s,delimiters:l},o),u);r.render=ha(i,c)}}e.render=r.render||Qt}kr(e),Dr(),Qu(e),Sr(),Jn()}function Df(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return It(e,"get","$attrs"),t[n]}}))}function Rl(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Df(e)},slots:e.slots,emit:e.emit,expose:t}}function rs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ll(ko(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Mr)return Mr[n](e)},has(t,n){return n in t||n in Mr}}))}function pa(e,t=!0){return Ae(e)?e.displayName||e.name:e.name||t&&e.__name}function Sf(e){return Ae(e)&&"__vccOpts"in e}const jl=(e,t)=>Cu(e,t,zr),Tf=Symbol.for("v-scx"),Of=()=>Si(Tf),Ef="3.3.4",Af="http://www.w3.org/2000/svg",Vn=typeof document<"u"?document:null,ya=Vn&&Vn.createElement("template"),Pf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Vn.createElementNS(Af,e):Vn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Vn.createTextNode(e),createComment:e=>Vn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ya.innerHTML=r?`<svg>${e}</svg>`:e;const l=ya.content;if(r){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function $f(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function If(e,t,n){const r=e.style,i=dt(n);if(n&&!i){if(t&&!dt(t))for(const s in t)n[s]==null&&Ms(r,s,"");for(const s in n)Ms(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const ma=/\s*!important$/;function Ms(e,t,n){if(Te(n))n.forEach(r=>Ms(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Nf(e,t);ma.test(n)?e.setProperty(Zn(r),n.replace(ma,""),"important"):e[r]=n}}const ga=["Webkit","Moz","ms"],ys={};function Nf(e,t){const n=ys[t];if(n)return n;let r=_r(t);if(r!=="filter"&&r in e)return ys[t]=r;r=Ha(r);for(let i=0;i<ga.length;i++){const s=ga[i]+r;if(s in e)return ys[t]=s}return t}const va="http://www.w3.org/1999/xlink";function Ff(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(va,t.slice(6,t.length)):e.setAttributeNS(va,t,n);else{const s=Vc(t);n==null||s&&!qa(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function Lf(e,t,n,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const c=l==="OPTION"?e.getAttribute("value"):e.value,h=n??"";c!==h&&(e.value=h),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=qa(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function ar(e,t,n,r){e.addEventListener(t,n,r)}function Mf(e,t,n,r){e.removeEventListener(t,n,r)}function Bf(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[l,u]=Rf(t);if(r){const c=s[t]=Uf(r,i);ar(e,l,c,u)}else o&&(Mf(e,l,o,u),s[t]=void 0)}}const ba=/(?:Once|Passive|Capture)$/;function Rf(e){let t;if(ba.test(e)){t={};let r;for(;r=e.match(ba);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let ms=0;const jf=Promise.resolve(),Kf=()=>ms||(jf.then(()=>ms=0),ms=Date.now());function Uf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;en(Vf(r,n.value),t,5,[r])};return n.value=e,n.attached=Kf(),n}function Vf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const _a=/^on[a-z]/,Hf=(e,t,n,r,i=!1,s,o,l,u)=>{t==="class"?$f(e,r,i):t==="style"?If(e,n,r):zi(t)?ho(t)||Bf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qf(e,t,r,i))?Lf(e,t,r,s,o,l,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Ff(e,t,r,i))};function qf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&_a.test(t)&&Ae(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||_a.test(t)&&dt(n)?!1:t in e}const wa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>dr(t,n):t};function Yf(e){e.target.composing=!0}function xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Sn={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=wa(i);const s=r||i.props&&i.props.type==="number";ar(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=Ds(l)),e._assign(l)}),n&&ar(e,"change",()=>{e.value=e.value.trim()}),t||(ar(e,"compositionstart",Yf),ar(e,"compositionend",xa),ar(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=wa(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ds(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Jf=["ctrl","shift","alt","meta"],Wf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Jf.some(n=>e[`${n}Key`]&&!t.includes(n))},ut=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=Wf[t[i]];if(s&&s(n,t))return}return e(n,...r)},zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gf=(e,t)=>n=>{if(!("key"in n))return;const r=Zn(n.key);if(t.some(i=>i===r||zf[i]===r))return e(n)},Xf=yt({patchProp:Hf},Pf);let ka;function Qf(){return ka||(ka=df(Xf))}const Zf=(...e)=>{const t=Qf().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=ed(r);if(!i)return;const s=t._component;!Ae(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ed(e){return dt(e)?document.querySelector(e):e}var td=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const nd=Symbol();var Ca;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ca||(Ca={}));function rd(){const e=Hc(!0),t=e.run(()=>Zt({}));let n=[],r=[];const i=ko({install(s){i._a=s,s.provide(nd,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!td?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const id={key:0,class:"button-loader"},sd=j("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),od=[sd],Bt=nn({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=Gu();return(r,i)=>(se(),me("button",{class:pt(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(se(),me("div",id,od)):Be("",!0),t.icon?(se(),me("i",{key:1,class:pt([{"opacity-0":t.loading,"mr-2":fe(n).default},"font-icon"])},Ie(t.icon),3)):Be("",!0),fe(n).default?(se(),me("span",{key:2,class:pt({"opacity-0":t.loading})},[Cl(r.$slots,"default")],2)):Be("",!0)],2))}});var dn=(e=>(e.ProfilesFilter="profile_parsing",e.ReviewsFilter="reviews_filter",e.ParsingResult="parsing_result",e.ProfileSavedList="profile_saved_list",e.Settings="settings",e))(dn||{});class ad{constructor(){rn(this,"active",Zt("reviews_filter"));rn(this,"list",[{value:"reviews_filter",text:"",icon:"tune"},{value:"parsing_result",text:"",icon:"view_list"},{value:"profile_saved_list",text:"",icon:"people"}])}changeTab(t){this.active.value=t}}const Wt=new ad,tt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ft=Object.keys,Dt=Array.isArray;function At(e,t){return typeof t!="object"||ft(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||tt.Promise||(tt.Promise=Promise);const Gr=Object.getPrototypeOf,ld={}.hasOwnProperty;function Rt(e,t){return ld.call(e,t)}function Cr(e,t){typeof t=="function"&&(t=t(Gr(e))),(typeof Reflect>"u"?ft:Reflect.ownKeys)(t).forEach(n=>{mn(e,n,t[n])})}const Kl=Object.defineProperty;function mn(e,t,n,r){Kl(e,t,At(n&&Rt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function mr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),mn(e.prototype,"constructor",e),{extend:Cr.bind(null,e.prototype)}}}}const cd=Object.getOwnPropertyDescriptor;function $o(e,t){let n;return cd(e,t)||(n=Gr(e))&&$o(n,t)}const ud=[].slice;function ji(e,t,n){return ud.call(e,t,n)}function Ul(e,t){return t(e)}function Nr(e){if(!e)throw new Error("Assertion Failed")}function Vl(e){tt.setImmediate?setImmediate(e):setTimeout(e,0)}function Hl(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function gn(e,t){if(Rt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=gn(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:gn(l,t.substr(o+1))}}function tn(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Nr(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)tn(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),l=t.substr(s+1);if(l==="")n===void 0?Dt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&Rt(e,o)||(u=e[o]={}),tn(u,l,n)}}else n===void 0?Dt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ql(e){var t={};for(var n in e)Rt(e,n)&&(t[n]=e[n]);return t}const fd=[].concat;function Yl(e){return fd.apply([],e)}const Jl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Yl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>tt[e]),dd=Jl.map(e=>tt[e]);Hl(Jl,e=>[e,!0]);let Tn=null;function si(e){Tn=typeof WeakMap<"u"&&new WeakMap;const t=Bs(e);return Tn=null,t}function Bs(e){if(!e||typeof e!="object")return e;let t=Tn&&Tn.get(e);if(t)return t;if(Dt(e)){t=[],Tn&&Tn.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Bs(e[n]))}else if(dd.indexOf(e.constructor)>=0)t=e;else{const s=Gr(e);for(var i in t=s===Object.prototype?{}:Object.create(s),Tn&&Tn.set(e,t),e)Rt(e,i)&&(t[i]=Bs(e[i]))}return t}const{toString:hd}={};function Rs(e){return hd.call(e).slice(8,-1)}const js=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pd=typeof js=="symbol"?function(e){var t;return e!=null&&(t=e[js])&&t.apply(e)}:function(){return null},lr={};function pn(e){var t,n,r,i;if(arguments.length===1){if(Dt(e))return e.slice();if(this===lr&&typeof e=="string")return[e];if(i=pd(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Io=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wl(e,t){ln=e,zl=t}var zl=()=>!0;const yd=!new Error("").stack;function tr(){if(yd)try{throw tr.arguments,new Error}catch(e){return e}return new Error}function Ks(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(zl).map(r=>`
`+r).join("")):""}var Gl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],No=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Gl),md={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function gr(e,t){this._e=tr(),this.name=e,this.message=t}function Xl(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ki(e,t,n,r){this._e=tr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Xl(e,t)}function Rr(e,t){this._e=tr(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Xl(e,t)}mr(gr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ks(this._e,2))}},toString:function(){return this.name+": "+this.message}}),mr(Ki).from(gr),mr(Rr).from(gr);var Fo=No.reduce((e,t)=>(e[t]=t+"Error",e),{});const gd=gr;var Se=No.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=tr(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=md[t]||n,this.inner=null)}return mr(r).from(gd),e[t]=r,e},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Da=Gl.reduce((e,t)=>(e[t+"Error"]=Se[t],e),{}),Oi=No.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Se[t]),e),{});function Ge(){}function Xr(e){return e}function vd(e,t){return e==null||e===Xr?t:function(n){return t(e(n))}}function Xn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bd(e,t){return e===Ge?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xn(i,this.onerror):i),s!==void 0?s:n}}function _d(e,t){return e===Ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xn(r,this.onerror):r)}}function wd(e,t){return e===Ge?t:function(n){var r=e.apply(this,arguments);At(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Xn(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Xn(s,this.onerror):s),r===void 0?o===void 0?void 0:o:At(r,o)}}function xd(e,t){return e===Ge?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Lo(e,t){return e===Ge?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Oi.ModifyError=Ki,Oi.DexieError=gr,Oi.BulkError=Rr;var Qr={};const Ql=100,[Us,Ui,Vs]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Gr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Gr(t),e]})(),Zl=Ui&&Ui.then,Ei=Us&&Us.constructor,Mo=!!Vs;var Hs=!1,kd=Vs?()=>{Vs.then(mi)}:tt.setImmediate?setImmediate.bind(null,mi):tt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{mi(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(mi,0)},jr=function(e,t){Fr.push([e,t]),Vi&&(kd(),Vi=!1)},qs=!0,Vi=!0,Wn=[],Ai=[],Ys=null,Js=Xr,vr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oa,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Oa(e[0],e[1])}catch{}})}},xe=vr,Fr=[],zn=0,Pi=[];function ce(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ge,this._lib=!1;var t=this._PSD=xe;if(ln&&(this._stackHolder=tr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Qr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zs(this,this._value))}this._state=null,this._value=null,++t.ref,tc(this,e)}const Ws={get:function(){var e=xe,t=Hi;function n(r,i){var s=!e.global&&(e!==xe||t!==Hi);const o=s&&!bn();var l=new ce((u,c)=>{Bo(this,new ec(qi(r,e,s,o),qi(i,e,s,o),u,c,e))});return ln&&ic(l,this),l}return n.prototype=Qr,n},set:function(e){mn(this,"then",e&&e.prototype===Qr?Ws:{get:function(){return e},set:Ws.set})}};function ec(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function tc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&oi();n&&typeof n.then=="function"?tc(e,(i,s)=>{n instanceof ce?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,nc(e)),r&&ai()}},zs.bind(null,e))}catch(n){zs(e,n)}}function zs(e,t){if(Ai.push(t),e._state===null){var n=e._lib&&oi();t=Js(t),e._state=!1,e._value=t,ln&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=$o(t,"stack");t._promise=e,mn(t,"stack",{get:()=>Hs?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Wn.some(i=>i._value===r._value)||Wn.push(r)}(e),nc(e),n&&ai()}}function nc(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Bo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),zn===0&&(++zn,jr(()=>{--zn==0&&Ro()},[]))}function Bo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++zn,jr(Cd,[n,e,t])}else e._listeners.push(t)}function Cd(e,t,n){try{Ys=t;var r,i=t._value;t._state?r=e(i):(Ai.length&&(Ai=[]),r=e(i),Ai.indexOf(i)===-1&&function(s){for(var o=Wn.length;o;)if(Wn[--o]._value===s._value)return void Wn.splice(o,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{Ys=null,--zn==0&&Ro(),--n.psd.ref||n.psd.finalize()}}function rc(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Ks(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return ln&&((r=Ks(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&rc(e._prev,t,n)),t}function ic(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function mi(){oi()&&ai()}function oi(){var e=qs;return qs=!1,Vi=!1,e}function ai(){var e,t,n;do for(;Fr.length>0;)for(e=Fr,Fr=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Fr.length>0);qs=!0,Vi=!0}function Ro(){var e=Wn;Wn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Pi.slice(0),n=t.length;n;)t[--n]()}function gi(e){return new ce(Qr,!1,e)}function rt(e,t){var n=xe;return function(){var r=oi(),i=xe;try{return Fn(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Fn(i,!1),r&&ai()}}}Cr(ce.prototype,{then:Ws,_then:function(e,t){Bo(this,new ec(null,null,e,t,xe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):gi(r)):this.then(null,r=>r&&r.name===t?n(r):gi(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),gi(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Hs=!0;var e=rc(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Hs=!1}}},timeout:function(e,t){return e<1/0?new ce((n,r)=>{var i=setTimeout(()=>r(new Se.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&mn(ce.prototype,Symbol.toStringTag,"Dexie.Promise"),vr.env=sc(),Cr(ce,{all:function(){var e=pn.apply(null,arguments).map(vi);return new ce(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>ce.resolve(i).then(o=>{e[s]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof ce)return e;if(e&&typeof e.then=="function")return new ce((n,r)=>{e.then(n,r)});var t=new ce(Qr,!0,e);return ic(t,Ys),t},reject:gi,race:function(){var e=pn.apply(null,arguments).map(vi);return new ce((t,n)=>{e.map(r=>ce.resolve(r).then(t,n))})},PSD:{get:()=>xe,set:e=>xe=e},totalEchoes:{get:()=>Hi},newPSD:Nn,usePSD:Er,scheduler:{get:()=>jr,set:e=>{jr=e}},rejectionMapper:{get:()=>Js,set:e=>{Js=e}},follow:(e,t)=>new ce((n,r)=>Nn((i,s)=>{var o=xe;o.unhandleds=[],o.onunhandled=s,o.finalize=Xn(function(){(function(l){function u(){l(),Pi.splice(Pi.indexOf(u),1)}Pi.push(u),++zn,jr(()=>{--zn==0&&Ro()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Ei&&(Ei.allSettled&&mn(ce,"allSettled",function(){const e=pn.apply(null,arguments).map(vi);return new ce(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>ce.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Ei.any&&typeof AggregateError<"u"&&mn(ce,"any",function(){const e=pn.apply(null,arguments).map(vi);return new ce((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,o)=>ce.resolve(s).then(l=>t(l),l=>{i[o]=l,--r||n(new AggregateError(i))}))})}));const xt={awaits:0,echoes:0,id:0};var Dd=0,$i=[],gs=0,Hi=0,Sd=0;function Nn(e,t,n,r){var i=xe,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Sd;var o=vr.env;s.env=Mo?{Promise:ce,PromiseProp:{value:ce,configurable:!0,writable:!0},all:ce.all,race:ce.race,allSettled:ce.allSettled,any:ce.any,resolve:ce.resolve,reject:ce.reject,nthen:Sa(o.nthen,s),gthen:Sa(o.gthen,s)}:{},t&&At(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Er(s,e,n,r);return s.ref===0&&s.finalize(),l}function Or(){return xt.id||(xt.id=++Dd),++xt.awaits,xt.echoes+=Ql,xt.id}function bn(){return!!xt.awaits&&(--xt.awaits==0&&(xt.id=0),xt.echoes=xt.awaits*Ql,!0)}function vi(e){return xt.echoes&&e&&e.constructor===Ei?(Or(),e.then(t=>(bn(),t),t=>(bn(),ht(t)))):e}function Td(e){++Hi,xt.echoes&&--xt.echoes!=0||(xt.echoes=xt.id=0),$i.push(xe),Fn(e,!0)}function Od(){var e=$i[$i.length-1];$i.pop(),Fn(e,!1)}function Fn(e,t){var n=xe;if((t?!xt.echoes||gs++&&e===xe:!gs||--gs&&e===xe)||oc(t?Td.bind(null,e):Od),e!==xe&&(xe=e,n===vr&&(vr.env=sc()),Mo)){var r=vr.env.Promise,i=e.env;Ui.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(tt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function sc(){var e=tt.Promise;return Mo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(tt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ui.then,gthen:e.prototype.then}:{}}function Er(e,t,n,r,i){var s=xe;try{return Fn(e,!0),t(n,r,i)}finally{Fn(s,!1)}}function oc(e){Zl.call(Us,e)}function qi(e,t,n,r){return typeof e!="function"?e:function(){var i=xe;n&&Or(),Fn(t,!0);try{return e.apply(this,arguments)}finally{Fn(i,!1),r&&oc(bn)}}}function Sa(e,t){return function(n,r){return e.call(this,qi(n,t),qi(r,t))}}(""+Zl).indexOf("[native code]")===-1&&(Or=bn=Ge);const Ta="unhandledrejection";function Oa(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(tt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Ta,!0,!0),At(r,i)):tt.CustomEvent&&At(r=new CustomEvent(Ta,{detail:i}),i),r&&tt.dispatchEvent&&(dispatchEvent(r),!tt.PromiseRejectionEvent&&tt.onunhandledrejection))try{tt.onunhandledrejection(r)}catch{}ln&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ht=ce.reject;function Gs(e,t,n,r){if(e.idbdb&&(e._state.openComplete||xe.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Gs(e,t,n,r))):ht(s)}return i._promise(t,(s,o)=>Nn(()=>(xe.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ht(new Se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new Se.DatabaseClosed);e.open().catch(Ge)}return e._state.dbReadyPromise.then(()=>Gs(e,t,n,r))}const Ea="3.2.4",qn=String.fromCharCode(65535),Xs=-1/0,un="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ac="String expected.",Kr=[],is=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ed=is,Ad=is,lc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ss="__dbnames",vs="readonly",bs="readwrite";function Qn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const cc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bi(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=si(t))[e],t)}class Pd{_trans(t,n,r){const i=this._tx||xe.trans,s=this.name;function o(u,c,h){if(!h.schema[s])throw new Se.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}const l=oi();try{return i&&i.db===this.db?i===xe.trans?i._promise(t,o,r):Nn(()=>i._promise(t,o,r),{trans:i,transless:xe.transless||xe}):Gs(this.db,t,[this.name],o)}finally{l&&ai()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Dt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ft(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(h=>c.keyPath.indexOf(h)>=0)&&c.keyPath.every(h=>n.indexOf(h)>=0))[0];if(r&&this.db._maxKey!==qn)return this.where(r.name).equals(r.keyPath.map(c=>t[c]));!r&&ln&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,h){try{return s.cmp(c,h)===0}catch{return!1}}const[l,u]=n.reduce(([c,h],m)=>{const x=i[m],S=t[m];return[c||x,c||!x?Qn(h,x&&x.multi?P=>{const T=gn(P,m);return Dt(T)&&T.some(B=>o(S,B))}:P=>o(S,gn(P,m))):h]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Dt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(Rt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){At(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=bi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?ce.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{tn(t,i,o)}catch{}return o})}update(t,n){if(typeof t!="object"||Dt(t))return this.where(":id").equals(t).modify(n);{const r=gn(t,this.schema.primKey.keyPath);if(r===void 0)return ht(new Se.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ft(n).forEach(i=>{tn(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=bi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?ce.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{tn(t,i,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?ce.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:cc})).then(t=>t.numFailures?ce.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let h=u&&l?t.map(bi(u)):t;return this.core.mutate({trans:o,type:"add",keys:i,values:h,wantResults:s}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return s?x:S;throw new Rr(`${this.name}.bulkAdd(): ${m} of ${c} operations failed`,P)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let h=u&&l?t.map(bi(u)):t;return this.core.mutate({trans:o,type:"put",keys:i,values:h,wantResults:s}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return s?x:S;throw new Rr(`${this.name}.bulkPut(): ${m} of ${c} operations failed`,P)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Rr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Ur(e){var t={},n=function(o,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[o].subscribe.apply(null,c),e}if(typeof o=="string")return t[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,l,u){if(typeof o!="object"){var c;l||(l=xd),u||(u=Ge);var h={subscribers:[],fire:u,subscribe:function(m){h.subscribers.indexOf(m)===-1&&(h.subscribers.push(m),h.fire=l(h.fire,m))},unsubscribe:function(m){h.subscribers=h.subscribers.filter(function(x){return x!==m}),h.fire=h.subscribers.reduce(l,u)}};return t[o]=n[o]=h,h}ft(c=o).forEach(function(m){var x=c[m];if(Dt(x))s(m,c[m][0],c[m][1]);else{if(x!=="asap")throw new Se.InvalidArgument("Invalid event config");var S=s(m,Xr,function(){for(var P=arguments.length,T=new Array(P);P--;)T[P]=arguments[P];S.subscribers.forEach(function(B){Vl(function(){B.apply(null,T)})})})}})}}function Ar(e,t){return mr(t).from({prototype:e}),t}function ir(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function _s(e,t){e.filter=Qn(e.filter,t)}function ws(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Qn(r(),t()):t,e.justLimit=n&&!r}function Ii(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Aa(e,t,n){const r=Ii(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function _i(e,t,n,r){const i=e.replayFilter?Qn(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(l,u,c)=>{if(!i||i(u,c,x=>u.stop(x),x=>u.fail(x))){var h=u.primaryKey,m=""+h;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(h)),Rt(s,m)||(s[m]=!0,t(l,u,c))}};return Promise.all([e.or._iterate(o,n),Pa(Aa(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Pa(Aa(e,r,n),Qn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Pa(e,t,n,r){var i=rt(r?(s,o,l)=>n(r(s),o,l):n);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();t&&!t(s,l=>o=l,l=>{s.stop(l),o=Ge},l=>{s.fail(l),o=Ge})||i(s.value,s,l=>o=l),o()})})}function Et(e,t){try{const n=$a(e),r=$a(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===l?0:o<l?-1:1}(Ia(e),Ia(t));case"Array":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c){const h=Et(i[c],s[c]);if(h!==0)return h}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function $a(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Rs(e);return n==="ArrayBuffer"?"binary":n}function Ia(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class $d{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,ht.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Qn(n.algorithm,t)}_iterate(t,n){return _i(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&At(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>_i(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(ir(r,!0))return i.count({trans:n,query:{index:Ii(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return _i(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(c,h){return h?o(c[r[h]],h-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function u(c,h){var m=o(c,s),x=o(h,s);return m<x?-l:m>x?l:0}return this.toArray(function(c){return c.sort(u)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ir(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Ii(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return _i(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ir(n)?ws(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):ws(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ws(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return _s(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return _s(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=Qn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ir(n,!0)&&n.limit>0)return this._read(i=>{var s=Ii(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return _s(this._ctx,function(i){var s=i.primaryKey.toString(),o=Rt(r,s);return r[s]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=ft(t),o=s.length;i=function(T){for(var B=!1,M=0;M<o;++M){var E=s[M],$=t[E];gn(T,E)!==$&&(tn(T,E,$),B=!0)}return B}}const l=n.table.core,{outbound:u,extractKey:c}=l.schema.primaryKey,h=this.db._options.modifyChunkSize||200,m=[];let x=0;const S=[],P=(T,B)=>{const{failures:M,numFailures:E}=B;x+=T-E;for(let $ of ft(M))m.push(M[$])};return this.clone().primaryKeys().then(T=>{const B=M=>{const E=Math.min(h,T.length-M);return l.getMany({trans:r,keys:T.slice(M,M+E),cache:"immutable"}).then($=>{const I=[],U=[],Y=u?[]:null,H=[];for(let k=0;k<E;++k){const _=$[k],V={value:si(_),primKey:T[M+k]};i.call(V,V.value,V)!==!1&&(V.value==null?H.push(T[M+k]):u||Et(c(_),c(V.value))===0?(U.push(V.value),u&&Y.push(T[M+k])):(H.push(T[M+k]),I.push(V.value)))}const ne=ir(n)&&n.limit===1/0&&(typeof t!="function"||t===xs)&&{index:n.index,range:n.range};return Promise.resolve(I.length>0&&l.mutate({trans:r,type:"add",values:I}).then(k=>{for(let _ in k.failures)H.splice(parseInt(_),1);P(I.length,k)})).then(()=>(U.length>0||ne&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:Y,values:U,criteria:ne,changeSpec:typeof t!="function"&&t}).then(k=>P(U.length,k))).then(()=>(H.length>0||ne&&t===xs)&&l.mutate({trans:r,type:"delete",keys:H,criteria:ne}).then(k=>P(H.length,k))).then(()=>T.length>M+E&&B(M+h))})};return B(0).then(()=>{if(m.length>0)throw new Ki("Error modifying one or more objects",m,x,S);return T.length})})})}delete(){var t=this._ctx,n=t.range;return ir(t)&&(t.isPrimKey&&!Ad||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:u,results:c,numFailures:h})=>{if(h)throw new Ki("Could not delete some values",Object.keys(l).map(m=>l[m]),o-h);return o-h}))}):this.modify(xs)}}const xs=(e,t)=>t.value=null;function Id(e,t){return e<t?-1:e===t?0:1}function Nd(e,t){return e>t?-1:e===t?0:1}function Mt(e,t,n){var r=e instanceof fc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function sr(e){return new e.Collection(e,()=>uc("")).limit(0)}function Fd(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),l=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;i(e[u],c)<0&&(l=u)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function wi(e,t,n,r){var i,s,o,l,u,c,h,m=n.length;if(!n.every(T=>typeof T=="string"))return Mt(e,ac);function x(T){i=function(M){return M==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(T),s=function(M){return M==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(T),o=T==="next"?Id:Nd;var B=n.map(function(M){return{lower:s(M),upper:i(M)}}).sort(function(M,E){return o(M.lower,E.lower)});l=B.map(function(M){return M.upper}),u=B.map(function(M){return M.lower}),c=T,h=T==="next"?"":r}x("next");var S=new e.Collection(e,()=>kn(l[0],u[m-1]+r));S._ondirectionchange=function(T){x(T)};var P=0;return S._addAlgorithm(function(T,B,M){var E=T.key;if(typeof E!="string")return!1;var $=s(E);if(t($,u,P))return!0;for(var I=null,U=P;U<m;++U){var Y=Fd(E,$,l[U],u[U],o,c);Y===null&&I===null?P=U+1:(I===null||o(I,Y)>0)&&(I=Y)}return B(I!==null?function(){T.continue(I+h)}:M),!1}),S}function kn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function uc(e){return{type:1,lower:e,upper:e}}class fc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?sr(this):new this.Collection(this,()=>kn(t,n,!r,!i))}catch{return Mt(this,un)}}equals(t){return t==null?Mt(this,un):new this.Collection(this,()=>uc(t))}above(t){return t==null?Mt(this,un):new this.Collection(this,()=>kn(t,void 0,!0))}aboveOrEqual(t){return t==null?Mt(this,un):new this.Collection(this,()=>kn(t,void 0,!1))}below(t){return t==null?Mt(this,un):new this.Collection(this,()=>kn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Mt(this,un):new this.Collection(this,()=>kn(void 0,t))}startsWith(t){return typeof t!="string"?Mt(this,ac):this.between(t,t+qn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):wi(this,(n,r)=>n.indexOf(r[0])===0,[t],qn)}equalsIgnoreCase(t){return wi(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=pn.apply(lr,arguments);return t.length===0?sr(this):wi(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=pn.apply(lr,arguments);return t.length===0?sr(this):wi(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,qn)}anyOf(){const t=pn.apply(lr,arguments);let n=this._cmp;try{t.sort(n)}catch{return Mt(this,un)}if(t.length===0)return sr(this);const r=new this.Collection(this,()=>kn(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,o,l)=>{const u=s.key;for(;n(u,t[i])>0;)if(++i,i===t.length)return o(l),!1;return n(u,t[i])===0||(o(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[Xs,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=pn.apply(lr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Mt(this,un)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Xs,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,l=this._max;if(t.length===0)return sr(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&i(E[0],E[1])<=0))return Mt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);const u=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let h,m=i;function x(E,$){return m(E[0],$[0])}try{h=t.reduce(function(E,$){let I=0,U=E.length;for(;I<U;++I){const Y=E[I];if(r($[0],Y[1])<0&&r($[1],Y[0])>0){Y[0]=o(Y[0],$[0]),Y[1]=l(Y[1],$[1]);break}}return I===U&&E.push($),E},[]),h.sort(x)}catch{return Mt(this,un)}let S=0;const P=c?E=>i(E,h[S][1])>0:E=>i(E,h[S][1])>=0,T=u?E=>s(E,h[S][0])>0:E=>s(E,h[S][0])>=0;let B=P;const M=new this.Collection(this,()=>kn(h[0][0],h[h.length-1][1],!u,!c));return M._ondirectionchange=E=>{E==="next"?(B=P,m=i):(B=T,m=s),h.sort(x)},M._addAlgorithm((E,$,I)=>{for(var U=E.key;B(U);)if(++S,S===h.length)return $(I),!1;return!!function(Y){return!P(Y)&&!T(Y)}(U)||(this._cmp(U,h[S][1])===0||this._cmp(U,h[S][0])===0||$(()=>{m===i?E.continue(h[S][0]):E.continue(h[S][1])}),!1)}),M}startsWithAnyOf(){const t=pn.apply(lr,arguments);return t.every(n=>typeof n=="string")?t.length===0?sr(this):this.inAnyRange(t.map(n=>[n,n+qn])):Mt(this,"startsWithAnyOf() only works with strings")}}function sn(e){return rt(function(t){return Zr(t),e(t.target.error),!1})}function Zr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const ei="storagemutated",On="x-storagemutated-1",Ln=Ur(null,ei);class Ld{_lock(){return Nr(!xe.global),++this._reculock,this._reculock!==1||xe.global||(xe.lockOwnerFor=this),this}_unlock(){if(Nr(!xe.global),--this._reculock==0)for(xe.global||(xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Er(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&xe.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Nr(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(r);case"MissingAPIError":throw new Se.MissingAPI(r.message,r);default:throw new Se.OpenFailed(r)}if(!this.active)throw new Se.TransactionInactive;return Nr(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=rt(i=>{Zr(i),this._reject(t.error)}),t.onabort=rt(i=>{Zr(i),this.active&&this._reject(new Se.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=rt(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Ln.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return ht(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new Se.TransactionInactive);if(this._locked())return new ce((s,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,o)},xe])});if(r)return Nn(()=>{var s=new ce((o,l)=>{this._lock();const u=n(o,l,this);u&&u.then&&u.then(o,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new ce((s,o)=>{var l=n(s,o,this);l&&l.then&&l.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=ce.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new ce((o,l)=>{r.then(u=>n._waitingQueue.push(rt(o.bind(null,u))),u=>n._waitingQueue.push(rt(l.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Rt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Se.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Qs(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+dc(t)}}function dc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function hc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Hl(n,r=>[r.name,r])}}let ti=e=>{try{return e.only([[]]),ti=()=>[[]],[[]]}catch{return ti=()=>qn,qn}};function Zs(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>gn(r,t)}(e):t=>gn(t,e)}function Na(e){return[].slice.call(e)}let Md=0;function Vr(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Bd(e,t,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:h,lowerOpen:m,upperOpen:x}=u;return c===void 0?h===void 0?null:t.upperBound(h,!!x):h===void 0?t.lowerBound(c,!!m):t.bound(c,h,!!m,!!x)}const{schema:i,hasGetAll:s}=function(u,c){const h=Na(u.objectStoreNames);return{schema:{name:u.name,tables:h.map(m=>c.objectStore(m)).map(m=>{const{keyPath:x,autoIncrement:S}=m,P=Dt(x),T=x==null,B={},M={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:P,keyPath:x,autoIncrement:S,unique:!0,extractKey:Zs(x)},indexes:Na(m.indexNames).map(E=>m.index(E)).map(E=>{const{name:$,unique:I,multiEntry:U,keyPath:Y}=E,H={name:$,compound:Dt(Y),keyPath:Y,unique:I,multiEntry:U,extractKey:Zs(Y)};return B[Vr(Y)]=H,H}),getIndexByKeyPath:E=>B[Vr(E)]};return B[":id"]=M.primaryKey,x!=null&&(B[Vr(x)]=M.primaryKey),M})},hasGetAll:h.length>0&&"getAll"in c.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map(u=>function(c){const h=c.name;return{name:h,schema:c,mutate:function({trans:m,type:x,keys:S,values:P,range:T}){return new Promise((B,M)=>{B=rt(B);const E=m.objectStore(h),$=E.keyPath==null,I=x==="put"||x==="add";if(!I&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);const{length:U}=S||P||{length:1};if(S&&P&&S.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});let Y;const H=[],ne=[];let k=0;const _=R=>{++k,Zr(R)};if(x==="deleteRange"){if(T.type===4)return B({numFailures:k,failures:ne,results:[],lastResult:void 0});T.type===3?H.push(Y=E.clear()):H.push(Y=E.delete(r(T)))}else{const[R,_e]=I?$?[P,S]:[P,null]:[S,null];if(I)for(let le=0;le<U;++le)H.push(Y=_e&&_e[le]!==void 0?E[x](R[le],_e[le]):E[x](R[le])),Y.onerror=_;else for(let le=0;le<U;++le)H.push(Y=E[x](R[le])),Y.onerror=_}const V=R=>{const _e=R.target.result;H.forEach((le,Pe)=>le.error!=null&&(ne[Pe]=le.error)),B({numFailures:k,failures:ne,results:x==="delete"?S:H.map(le=>le.result),lastResult:_e})};Y.onerror=R=>{_(R),V(R)},Y.onsuccess=V})},getMany:({trans:m,keys:x})=>new Promise((S,P)=>{S=rt(S);const T=m.objectStore(h),B=x.length,M=new Array(B);let E,$=0,I=0;const U=H=>{const ne=H.target;M[ne._pos]=ne.result,++I===$&&S(M)},Y=sn(P);for(let H=0;H<B;++H)x[H]!=null&&(E=T.get(x[H]),E._pos=H,E.onsuccess=U,E.onerror=Y,++$);$===0&&S(M)}),get:({trans:m,key:x})=>new Promise((S,P)=>{S=rt(S);const T=m.objectStore(h).get(x);T.onsuccess=B=>S(B.target.result),T.onerror=sn(P)}),query:function(m){return x=>new Promise((S,P)=>{S=rt(S);const{trans:T,values:B,limit:M,query:E}=x,$=M===1/0?void 0:M,{index:I,range:U}=E,Y=T.objectStore(h),H=I.isPrimaryKey?Y:Y.index(I.name),ne=r(U);if(M===0)return S({result:[]});if(m){const k=B?H.getAll(ne,$):H.getAllKeys(ne,$);k.onsuccess=_=>S({result:_.target.result}),k.onerror=sn(P)}else{let k=0;const _=B||!("openKeyCursor"in H)?H.openCursor(ne):H.openKeyCursor(ne),V=[];_.onsuccess=R=>{const _e=_.result;return _e?(V.push(B?_e.value:_e.primaryKey),++k===M?S({result:V}):void _e.continue()):S({result:V})},_.onerror=sn(P)}})}(s),openCursor:function({trans:m,values:x,query:S,reverse:P,unique:T}){return new Promise((B,M)=>{B=rt(B);const{index:E,range:$}=S,I=m.objectStore(h),U=E.isPrimaryKey?I:I.index(E.name),Y=P?T?"prevunique":"prev":T?"nextunique":"next",H=x||!("openKeyCursor"in U)?U.openCursor(r($),Y):U.openKeyCursor(r($),Y);H.onerror=sn(M),H.onsuccess=rt(ne=>{const k=H.result;if(!k)return void B(null);k.___id=++Md,k.done=!1;const _=k.continue.bind(k);let V=k.continuePrimaryKey;V&&(V=V.bind(k));const R=k.advance.bind(k),_e=()=>{throw new Error("Cursor not stopped")};k.trans=m,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=rt(M),k.next=function(){let le=1;return this.start(()=>le--?this.continue():this.stop()).then(()=>this)},k.start=le=>{const Pe=new Promise((de,ae)=>{de=rt(de),H.onerror=sn(ae),k.fail=ae,k.stop=Je=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=_e,de(Je)}}),be=()=>{if(H.result)try{le()}catch(de){k.fail(de)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=rt(de=>{H.onsuccess=be,be()}),k.continue=_,k.continuePrimaryKey=V,k.advance=R,be(),Pe},B(k)},M)})},count({query:m,trans:x}){const{index:S,range:P}=m;return new Promise((T,B)=>{const M=x.objectStore(h),E=S.isPrimaryKey?M:M.index(S.name),$=r(P),I=$?E.count($):E.count();I.onsuccess=rt(U=>T(U.target.result)),I.onerror=sn(B)})}}}(u)),l={};return o.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:ti(t),schema:i}}function eo({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:o,indexedDB:l},u){return{dbcore:function(h,m){return m.reduce((x,{create:S})=>({...x,...S(x)}),h)}(Bd(s,o,u),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Yi({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(o=>{const l=$o(o,i);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?mn(o,i,{get(){return this.table(i)},set(u){Kl(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function to({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Rd(e,t){return e._cfg.version-t._cfg.version}function jd(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),l=xe.transless||xe;Nn(()=>{xe.trans=s,xe.transless=l,t===0?(ft(i).forEach(u=>{ks(n,u,i[u].primKey,i[u].indexes)}),eo(e,n),ce.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:u},c,h,m){const x=[],S=u._versions;let P=u._dbSchema=ro(u,u.idbdb,m),T=!1;const B=S.filter(E=>E._cfg.version>=c);function M(){return x.length?ce.resolve(x.shift()(h.idbtrans)).then(M):ce.resolve()}return B.forEach(E=>{x.push(()=>{const $=P,I=E._cfg.dbschema;io(u,$,m),io(u,I,m),P=u._dbSchema=I;const U=pc($,I);U.add.forEach(H=>{ks(m,H[0],H[1].primKey,H[1].indexes)}),U.change.forEach(H=>{if(H.recreate)throw new Se.Upgrade("Not yet support for changing primary key");{const ne=m.objectStore(H.name);H.add.forEach(k=>no(ne,k)),H.change.forEach(k=>{ne.deleteIndex(k.name),no(ne,k)}),H.del.forEach(k=>ne.deleteIndex(k))}});const Y=E._cfg.contentUpgrade;if(Y&&E._cfg.version>c){eo(u,m),h._memoizedTables={},T=!0;let H=ql(I);U.del.forEach(V=>{H[V]=$[V]}),to(u,[u.Transaction.prototype]),Yi(u,[u.Transaction.prototype],ft(H),H),h.schema=H;const ne=Io(Y);let k;ne&&Or();const _=ce.follow(()=>{if(k=Y(h),k&&ne){var V=bn.bind(null,null);k.then(V,V)}});return k&&typeof k.then=="function"?ce.resolve(k):_.then(()=>k)}}),x.push($=>{(!T||!Ed)&&function(I,U){[].slice.call(U.db.objectStoreNames).forEach(Y=>I[Y]==null&&U.db.deleteObjectStore(Y))}(E._cfg.dbschema,$),to(u,[u.Transaction.prototype]),Yi(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),h.schema=u._dbSchema})}),M().then(()=>{var E,$;$=m,ft(E=P).forEach(I=>{$.db.objectStoreNames.contains(I)||ks($,I,E[I].primKey,E[I].indexes)})})}(e,t,s,n).catch(o)})}function pc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!is)o.recreate=!0,n.change.push(o);else{const l=i.idxByName,u=s.idxByName;let c;for(c in l)u[c]||o.del.push(c);for(c in u){const h=l[c],m=u[c];h?h.src!==m.src&&o.change.push(m):o.add.push(m)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function ks(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>no(i,s)),i}function no(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ro(e,t,n){const r={};return ji(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const l=Qs(dc(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),u=[];for(let h=0;h<s.indexNames.length;++h){const m=s.index(s.indexNames[h]);o=m.keyPath;var c=Qs(m.name,o,!!m.unique,!!m.multiEntry,!1,o&&typeof o!="string",!1);u.push(c)}r[i]=hc(i,l,u)}),r}function io({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const u=o.indexNames[l],c=o.index(u).keyPath,h=typeof c=="string"?c:"["+ji(c).join("+")+"]";if(t[s]){const m=t[s].idxByName[h];m&&(m.name=u,delete t[s].idxByName[h],t[s].idxByName[u]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&tt.WorkerGlobalScope&&tt instanceof tt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Kd{_parseStoresSpec(t,n){ft(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((o,l)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Qs(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Dt(c),l===0)}),s=i.shift();if(s.multi)throw new Se.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),n[r]=hc(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?At(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(o=>{At(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,to(n,[n._allTables,n,n.Transaction.prototype]),Yi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ft(s),s),n._storeNames=ft(s),this}upgrade(t){return this._cfg.contentUpgrade=Lo(this._cfg.contentUpgrade||Ge,t),this}}function jo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ct(ss,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ko(e){return e&&typeof e.databases=="function"}function so(e){return Nn(function(){return xe.letThrough=!0,e()})}function Ud(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Vd(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?ht(t.dbOpenError):e);ln&&(t.openCanceller._stackHolder=tr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Se.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,l=!1;return ce.race([r,(typeof navigator>"u"?ce.resolve():Ud()).then(()=>new ce((u,c)=>{if(i(),!n)throw new Se.MissingAPI;const h=e.name,m=t.autoSchema?n.open(h):n.open(h,Math.round(10*e.verno));if(!m)throw new Se.MissingAPI;m.onerror=sn(c),m.onblocked=rt(e._fireOnBlocked),m.onupgradeneeded=rt(x=>{if(o=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Zr,o.abort(),m.result.close();const P=n.deleteDatabase(h);P.onsuccess=P.onerror=rt(()=>{c(new Se.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=sn(c);var S=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;l=S<1,e._novip.idbdb=m.result,jd(e,S/10,o,c)}},c),m.onsuccess=rt(()=>{o=null;const x=e._novip.idbdb=m.result,S=ji(x.objectStoreNames);if(S.length>0)try{const T=x.transaction((P=S).length===1?P[0]:P,"readonly");t.autoSchema?function({_novip:B},M,E){B.verno=M.version/10;const $=B._dbSchema=ro(0,M,E);B._storeNames=ji(M.objectStoreNames,0),Yi(B,[B._allTables],ft($),$)}(e,x,T):(io(e,e._dbSchema,T),function(B,M){const E=pc(ro(0,B.idbdb,M),B._dbSchema);return!(E.add.length||E.change.some($=>$.add.length||$.change.length))}(e,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),eo(e,T)}catch{}var P;Kr.push(e),x.onversionchange=rt(T=>{t.vcFired=!0,e.on("versionchange").fire(T)}),x.onclose=rt(T=>{e.on("close").fire(T)}),l&&function({indexedDB:T,IDBKeyRange:B},M){!Ko(T)&&M!==ss&&jo(T,B).put({name:M}).catch(Ge)}(e._deps,h),u()},c)}))]).then(()=>(i(),t.onReadyBeingFired=[],ce.resolve(so(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(Lo,Ge);return t.onReadyBeingFired=[],ce.resolve(so(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),ht(u)}).finally(()=>{t.openComplete=!0,s()})}function oo(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return o=>{var l=s(o),u=l.value;return l.done?u:u&&typeof u.then=="function"?u.then(n,r):Dt(u)?Promise.all(u).then(n,r):n(u)}}return i(t)()}function Hd(e,t,n){var r=arguments.length;if(r<2)throw new Se.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Yl(i),n]}function yc(e,t,n,r,i){return ce.resolve().then(()=>{const s=xe.transless||xe,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(m){return m.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>yc(e,t,n,null,i))):ht(m)}const u=Io(i);let c;u&&Or();const h=ce.follow(()=>{if(c=i.call(o,o),c)if(u){var m=bn.bind(null,null);c.then(m,m)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=oo(c))},l);return(c&&typeof c.then=="function"?ce.resolve(c).then(m=>o.active?m:ht(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>c)).then(m=>(r&&o._resolve(),o._completion.then(()=>m))).catch(m=>(o._reject(m),ht(m)))})}function xi(e,t,n){const r=Dt(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const qd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function o(h,m,x){const S=Vr(h),P=i[S]=i[S]||[],T=h==null?0:typeof h=="string"?1:h.length,B=m>0,M={...x,isVirtual:B,keyTail:m,keyLength:T,extractKey:Zs(h),unique:!B&&x.unique};return P.push(M),M.isPrimaryKey||s.push(M),T>1&&o(T===2?h[0]:h.slice(0,T-1),m+1,x),P.sort((E,$)=>E.keyTail-$.keyTail),M}const l=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const h of r.indexes)o(h.keyPath,0,h);function u(h){const m=h.query.index;return m.isVirtual?{...h,query:{index:m,range:(x=h.query.range,S=m.keyTail,{type:x.type===1?2:x.type,lower:xi(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:xi(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0})}}:h;var x,S}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:function(h){const m=i[Vr(h)];return m&&m[0]}},count:h=>n.count(u(h)),query:h=>n.query(u(h)),openCursor(h){const{keyTail:m,isVirtual:x,keyLength:S}=h.query.index;return x?n.openCursor(u(h)).then(P=>P&&function(T){return Object.create(T,{continue:{value:function(M){M!=null?T.continue(xi(M,h.reverse?e.MAX_KEY:e.MIN_KEY,m)):h.unique?T.continue(T.key.slice(0,S).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,m)):T.continue()}},continuePrimaryKey:{value(M,E){T.continuePrimaryKey(xi(M,e.MAX_KEY,m),E)}},primaryKey:{get:()=>T.primaryKey},key:{get(){const M=T.key;return S===1?M[0]:M.slice(0,S)}},value:{get:()=>T.value}})}(P)):n.openCursor(h)}}}}}};function Uo(e,t,n,r){return n=n||{},r=r||"",ft(e).forEach(i=>{if(Rt(t,i)){var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const l=Rs(s);l!==Rs(o)?n[r+i]=t[i]:l==="Object"?Uo(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0}),ft(t).forEach(i=>{Rt(e,i)||(n[r+i]=t[i])}),n}const Yd={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=xe.trans,{deleting:l,creating:u,updating:c}=o.table(t).hook;switch(s.type){case"add":if(u.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"put":if(u.fire===Ge&&c.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"delete":if(l.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"deleteRange":if(l.fire===Ge)break;return o._promise("readwrite",()=>function(x){return m(x.trans,x.range,1e4)}(s),!0)}return n.mutate(s);function h(x){const S=xe.trans,P=x.keys||function(T,B){return B.type==="delete"?B.keys:B.keys||B.values.map(T.extractKey)}(r,x);if(!P)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?{...x,keys:P}:{...x}).type!=="delete"&&(x.values=[...x.values]),x.keys&&(x.keys=[...x.keys]),function(T,B,M){return B.type==="add"?Promise.resolve([]):T.getMany({trans:B.trans,keys:M,cache:"immutable"})}(n,x,P).then(T=>{const B=P.map((M,E)=>{const $=T[E],I={onerror:null,onsuccess:null};if(x.type==="delete")l.fire.call(I,M,$,S);else if(x.type==="add"||$===void 0){const U=u.fire.call(I,M,x.values[E],S);M==null&&U!=null&&(M=U,x.keys[E]=M,r.outbound||tn(x.values[E],r.keyPath,M))}else{const U=Uo($,x.values[E]),Y=c.fire.call(I,U,M,$,S);if(Y){const H=x.values[E];Object.keys(Y).forEach(ne=>{Rt(H,ne)?H[ne]=Y[ne]:tn(H,ne,Y[ne])})}}return I});return n.mutate(x).then(({failures:M,results:E,numFailures:$,lastResult:I})=>{for(let U=0;U<P.length;++U){const Y=E?E[U]:P[U],H=B[U];Y==null?H.onerror&&H.onerror(M[U]):H.onsuccess&&H.onsuccess(x.type==="put"&&T[U]?x.values[U]:Y)}return{failures:M,results:E,numFailures:$,lastResult:I}}).catch(M=>(B.forEach(E=>E.onerror&&E.onerror(M)),Promise.reject(M)))})}function m(x,S,P){return n.query({trans:x,values:!1,query:{index:r,range:S},limit:P}).then(({result:T})=>h({type:"delete",keys:T,trans:x}).then(B=>B.numFailures>0?Promise.reject(B.failures[0]):T.length<P?{failures:[],numFailures:0,lastResult:void 0}:m(x,{...S,lower:T[T.length-1],lowerOpen:!0},P)))}}}}})};function mc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)Et(t.keys[i],e[s])===0&&(r.push(n?si(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const Jd={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=mc(r.keys,r.trans._cache,r.cache==="clone");return i?ce.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?si(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Vo(e){return!("from"in e)}const hn=function(e,t){if(!this){const n=new hn;return e&&"d"in e&&At(n,e),n}At(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function ni(e,t,n){const r=Et(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vo(e))return At(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(Et(n,e.from)<0)return i?ni(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Fa(e);if(Et(t,e.to)>0)return s?ni(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Fa(e);Et(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),Et(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Ji(e,i),s&&o&&Ji(e,s)}function Ji(e,t){Vo(t)||function n(r,{from:i,to:s,l:o,r:l}){ni(r,i,s),o&&n(r,o),l&&n(r,l)}(e,t)}function Wd(e,t){const n=ao(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=ao(e);let o=s.next(i.from),l=o.value;for(;!r.done&&!o.done;){if(Et(l.from,i.to)<=0&&Et(l.to,i.from)>=0)return!0;Et(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(o=s.next(i.from)).value}return!1}function ao(e){let t=Vo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Et(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Et(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Fa(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],o[i]=l[s],e[s]=o,o.d=La(o)}e.d=La(e)}function La({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Cr(hn.prototype,{add(e){return Ji(this,e),this},addKey(e){return ni(this,e,e),this},addKeys(e){return e.forEach(t=>ni(this,t,t)),this},[js](){return ao(this)}});const zd={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new hn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:l,outbound:u}=o,c={...i,mutate:x=>{const S=x.trans,P=S.mutatedParts||(S.mutatedParts={}),T=Y=>{const H=`idb://${t}/${r}/${Y}`;return P[H]||(P[H]=new hn)},B=T(""),M=T(":dels"),{type:E}=x;let[$,I]=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[[],x.values]:[];const U=x.trans._cache;return i.mutate(x).then(Y=>{if(Dt($)){E!=="delete"&&($=Y.results),B.addKeys($);const H=mc($,U);H||E==="add"||M.addKeys($),(H||I)&&function(ne,k,_,V){function R(_e){const le=ne(_e.name||"");function Pe(de){return de!=null?_e.extractKey(de):null}const be=de=>_e.multiEntry&&Dt(de)?de.forEach(ae=>le.addKey(ae)):le.addKey(de);(_||V).forEach((de,ae)=>{const Je=_&&Pe(_[ae]),He=V&&Pe(V[ae]);Et(Je,He)!==0&&(Je!=null&&be(Je),He!=null&&be(He))})}k.indexes.forEach(R)}(T,s,H,I)}else if($){const H={from:$.lower,to:$.upper};M.add(H),B.add(H)}else B.add(n),M.add(n),s.indexes.forEach(H=>T(H.name).add(n));return Y})}},h=({query:{index:x,range:S}})=>{var P,T;return[x,new hn((P=S.lower)!==null&&P!==void 0?P:e.MIN_KEY,(T=S.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},m={get:x=>[o,new hn(x.key)],getMany:x=>[o,new hn().addKeys(x.keys)],count:h,query:h,openCursor:h};return ft(m).forEach(x=>{c[x]=function(S){const{subscr:P}=xe;if(P){const T=I=>{const U=`idb://${t}/${r}/${I}`;return P[U]||(P[U]=new hn)},B=T(""),M=T(":dels"),[E,$]=m[x](S);if(T(E.name||"").add($),!E.isPrimaryKey){if(x!=="count"){const I=x==="query"&&u&&S.values&&i.query({...S,values:!1});return i[x].apply(this,arguments).then(U=>{if(x==="query"){if(u&&S.values)return I.then(({result:H})=>(B.addKeys(H),U));const Y=S.values?U.result.map(l):U.result;S.values?B.addKeys(Y):M.addKeys(Y)}else if(x==="openCursor"){const Y=U,H=S.values;return Y&&Object.create(Y,{key:{get:()=>(M.addKey(Y.primaryKey),Y.key)},primaryKey:{get(){const ne=Y.primaryKey;return M.addKey(ne),ne}},value:{get:()=>(H&&B.addKey(Y.primaryKey),Y.value)}})}return U})}M.add(n)}}return i[x].apply(this,arguments)}}),c}}}};class ct{constructor(t,n){this._middlewares={},this.verno=0;const r=ct.dependencies;this._options=n={addons:ct.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ge,dbReadyPromise:null,cancelOpen:Ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new ce(l=>{s.dbReadyResolve=l}),s.openCanceller=new ce((l,u)=>{s.cancelOpen=u}),this._state=s,this.name=t,this.on=Ur(this,"populate","blocked","versionchange","close",{ready:[Lo,Ge]}),this.on.ready.subscribe=Ul(this.on.ready.subscribe,l=>(u,c)=>{ct.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||ce.resolve().then(u),c&&l(u);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(u),c&&l(u);else{l(u);const m=this;c||l(function x(){m.on.ready.unsubscribe(u),m.on.ready.unsubscribe(x)})}})}),this.Collection=(o=this,Ar($d.prototype,function(l,u){this.db=o;let c=cc,h=null;if(u)try{c=u()}catch(P){h=P}const m=l._ctx,x=m.table,S=x.hook.reading.fire;this._ctx={table:x,index:m.index,isPrimKey:!m.index||x.schema.primKey.keyPath&&m.index===x.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:m.or,valueMapper:S!==Xr?S:null}})),this.Table=function(l){return Ar(Pd.prototype,function(u,c,h){this.db=l,this._tx=h,this.name=u,this.schema=c,this.hook=l._allTables[u]?l._allTables[u].hook:Ur(null,{creating:[bd,Ge],reading:[vd,Xr],updating:[wd,Ge],deleting:[_d,Ge]})})}(this),this.Transaction=function(l){return Ar(Ld.prototype,function(u,c,h,m,x){this.db=l,this.mode=u,this.storeNames=c,this.schema=h,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Ur(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ce((S,P)=>{this._resolve=S,this._reject=P}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},S=>{var P=this.active;return this.active=!1,this.on.error.fire(S),this.parent?this.parent._reject(S):P&&this.idbtrans&&this.idbtrans.abort(),ht(S)})})}(this),this.Version=function(l){return Ar(Kd.prototype,function(u){this.db=l,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Ar(fc.prototype,function(u,c,h){this.db=l,this._ctx={table:u,index:c===":id"?null:c,or:h};const m=l._deps.indexedDB;if(!m)throw new Se.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(x,S)=>m.cmp(S,x),this._max=(x,S)=>m.cmp(x,S)>0?x:S,this._min=(x,S)=>m.cmp(x,S)<0?x:S,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=ti(n.IDBKeyRange),this._createTransaction=(l,u,c,h)=>new this.Transaction(l,u,c,this._options.chromeTransactionDurability,h),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Kr.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(l))},this.use(qd),this.use(Yd),this.use(zd),this.use(Jd),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new Se.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Rd),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?t():new ce((n,r)=>{if(this._state.openComplete)return r(new Se.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Se.DatabaseClosed);this.open().catch(Ge)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Vd(this)}_close(){const t=this._state,n=Kr.indexOf(this);if(n>=0&&Kr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new ce(r=>{t.dbReadyResolve=r}),t.openCanceller=new ce((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Se.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new ce((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=rt(()=>{(function({indexedDB:l,IDBKeyRange:u},c){!Ko(l)&&c!==ss&&jo(l,u).delete(c).catch(Ge)})(this._deps,this.name),r()}),o.onerror=sn(i),o.onblocked=this._fireOnBlocked};if(t)throw new Se.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ft(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Hd.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=xe.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(c=>{var h=c instanceof this.Table?c.name:c;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),t=="r"||t===vs)o=vs;else{if(t!="rw"&&t!=bs)throw new Se.InvalidArgument("Invalid transaction mode: "+t);o=bs}if(i){if(i.mode===vs&&o===bs){if(!s)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new Se.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(h,m)=>{m(c)}):ht(c)}const u=yc.bind(null,this,o,l,i,r);return i?i._promise(o,u,"lock"):xe.trans?Er(xe.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!Rt(this._allTables,t))throw new Se.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const Gd=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Xd{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[Gd](){return this}}function gc(e,t){return ft(t).forEach(n=>{Ji(e[n]||(e[n]=new hn),t[n])}),e}function Qd(e){let t,n=!1;const r=new Xd(i=>{const s=Io(e);let o=!1,l={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Ln.storagemutated.unsubscribe(S)}};i.start&&i.start(c);let h=!1,m=!1;function x(){return ft(u).some(T=>l[T]&&Wd(l[T],u[T]))}const S=T=>{gc(l,T),x()&&P()},P=()=>{if(h||o)return;l={};const T={},B=function(M){s&&Or();const E=()=>Nn(e,{subscr:M,trans:null}),$=xe.trans?Er(xe.transless,E):E();return s&&$.then(bn,bn),$}(T);m||(Ln(ei,S),m=!0),h=!0,Promise.resolve(B).then(M=>{n=!0,t=M,h=!1,o||(x()?P():(l={},u=T,i.next&&i.next(M)))},M=>{h=!1,n=!1,i.error&&i.error(M),c.unsubscribe()})};return P(),c});return r.hasValue=()=>n,r.getValue=()=>t,r}let lo;try{lo={indexedDB:tt.indexedDB||tt.mozIndexedDB||tt.webkitIndexedDB||tt.msIndexedDB,IDBKeyRange:tt.IDBKeyRange||tt.webkitIDBKeyRange}}catch{lo={indexedDB:null,IDBKeyRange:null}}const Kn=ct;function Ni(e){let t=yn;try{yn=!0,Ln.storagemutated.fire(e)}finally{yn=t}}Cr(Kn,{...Oi,delete:e=>new Kn(e,{addons:[]}).delete(),exists:e=>new Kn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Ko(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==ss)):jo(t,n).toCollection().primaryKeys()}(Kn.dependencies).then(e)}catch{return ht(new Se.MissingAPI)}},defineClass:()=>function(e){At(this,e)},ignoreTransaction:e=>xe.trans?Er(xe.transless,e):e(),vip:so,async:function(e){return function(){try{var t=oo(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ce.resolve(t)}catch(n){return ht(n)}}},spawn:function(e,t,n){try{var r=oo(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:ce.resolve(r)}catch(i){return ht(i)}},currentTransaction:{get:()=>xe.trans||null},waitFor:function(e,t){const n=ce.resolve(typeof e=="function"?Kn.ignoreTransaction(e):e).timeout(t||6e4);return xe.trans?xe.trans.waitFor(n):n},Promise:ce,debug:{get:()=>ln,set:e=>{Wl(e,e==="dexie"?()=>!0:lc)}},derive:mr,extend:At,props:Cr,override:Ul,Events:Ur,on:Ln,liveQuery:Qd,extendObservabilitySet:gc,getByKeyPath:gn,setByKeyPath:tn,delByKeyPath:function(e,t){typeof t=="string"?tn(e,t,void 0):"length"in t&&[].map.call(t,function(n){tn(e,n,void 0)})},shallowClone:ql,deepClone:si,getObjectDiff:Uo,cmp:Et,asap:Vl,minKey:Xs,addons:[],connections:Kr,errnames:Fo,dependencies:lo,semVer:Ea,version:Ea.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Kn.maxKey=ti(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ln(ei,e=>{if(!yn){let t;is?(t=document.createEvent("CustomEvent"),t.initCustomEvent(On,!0,!0,e)):t=new CustomEvent(On,{detail:e}),yn=!0,dispatchEvent(t),yn=!1}}),addEventListener(On,({detail:e})=>{yn||Ni(e)}));let yn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(On);typeof e.unref=="function"&&e.unref(),Ln(ei,t=>{yn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ni(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ln(ei,t=>{try{yn||(typeof localStorage<"u"&&localStorage.setItem(On,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:On,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===On){const n=JSON.parse(t.newValue);n&&Ni(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===On&&Ni(t.changedParts)})}ce.rejectionMapper=function(e,t){if(!e||e instanceof gr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Da[e.name])return e;var n=new Da[e.name](t||e.message,e);return"stack"in e&&mn(n,"stack",{get:function(){return this.inner.stack}}),n},Wl(ln,lc);const lt=new ct("avito_scraper");function Zd(e=1){lt.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,profileInfoList:`
            ++id,
            &url,
            name,
            comment,
            marked,
            *reviewsList
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class eh{constructor(t){rn(this,"canvas",null);rn(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var u,c;const i={...this.settings,...r,type:t},s=(u=this.canvas)==null?void 0:u.querySelector(`.${this.settings.groupContainerClass}.position-${i.position}`),o=this.createToast(n,i);if(s)return s.append(o),o;const l=this.createContainer(i);return l.append(o),(c=this.canvas)==null||c.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),i=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...i),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const s=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(s),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const qe=new eh({hideOnClick:!0,position:"bottom-right"});var Ye=(e=>(e.ReviewsFilterSaved=" ",e.ReviewsFilterSaveError="   ",e.ReviewsFilterCleared=" ",e.ReviewsFilterClearError="     ",e.ReviewsFilterGetError="     ",e.ReviewsFilterAllLinksParsed="    ",e.ReviewsFilterSimilarLinks="    ",e.ParsingReviewsCanceled="  ",e.ParsingReviewsStarted="  ",e.ParsingReviewsFinished="  ",e.TabOpenError="   ",e.ProfileCreated="   ",e.ProfileCreateError="     ",e.ProfileEdited="  ",e.ProfileEditeError="   ",e.ProfileDeleted="  ",e.ProfileDeleteError="   ",e.ProfileLinkCopied="   ",e.ProfileLinkAddedInReviewsFilter="     ",e.ProfileInfoListAddedInDB="  ",e.ProfileInfoListRemovedFromDB="  ",e.InfoCopied="   ",e.InfoNotFound="  ",e.ResultsNotFound="  ",e.ProductNameCopied="    ",e.WaitOpenPage="    ...",e.DBExportSuccess="   ",e.DBExportError="   ",e.DBImportError="   ",e.DBImportSuccess="   ",e.DBDropSuccess="   ",e.DBDropError="    ",e))(Ye||{});function Ma(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function br(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ba(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}async function th(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(i,s){s.status==="complete"&&i===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function nh(){const t=(await chrome.tabs.query({active:!1})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function rh(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Ho(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("    ",n)}t.remove()}function ih(e,t){return Math.floor(Math.random()*(t-e+1))+e}class sh{constructor(){rn(this,"list",Zt([]));rn(this,"state",Tr({contentModalData:[],contentModalVisible:!1,viewAllButtonVisible:!1,viewMoreThanButtonVisible:!1,removeInfoListButtonVisible:!1}))}pushProfileInfo(t){this.list.value.push(t)}pushResultsByUrl(t,n){const r=this.list.value.find(i=>i.url===t);r&&(r.reviewsList=n,this.sortResults(r,"product_name_asc"))}sortResults(t,n){t.reviewsList&&(t.reviewsSortedBy=n,n==="product_name_asc"&&t.reviewsList.sort((r,i)=>r.productName.localeCompare(i.productName)),n==="product_name_desc"&&t.reviewsList.sort((r,i)=>i.productName.localeCompare(r.productName)),n==="rating_desc"&&t.reviewsList.sort((r,i)=>i.rating-r.rating),n==="rating_asc"&&t.reviewsList.sort((r,i)=>r.rating-i.rating),n==="date_desc"&&t.reviewsList.sort((r,i)=>i.date-r.date),n==="date_asc"&&t.reviewsList.sort((r,i)=>r.date-i.date))}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}
`,n+=`${br(t.parsingDate)}



`,this.sortResults(t,"product_name_asc"),(r=t.reviewsList)==null||r.forEach(i=>{let s=new Date(i.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(s);n+=`${i.productName}~${o}${i.delivery?"~Delivery":""}
`}),n&&(Ho(n),qe.show("success",Ye.InfoCopied))}getMoreThanResults(t=5){let n=[],r=new Map;return this.list.value.forEach(i=>{var s;(s=i.reviewsList)==null||s.forEach(o=>{if(r.has(o.productName)){let l=r.get(o.productName);if(l){let u=[...l,{...o,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`}];r.set(o.productName,u)}}else r.set(o.productName,[{...o,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`}])})}),r.forEach((i,s)=>{i.length>=t&&(i[0]&&(i[0].count=i.length),n.push(i[0]))}),r.clear(),n}getAllResults(){let t=[];return this.list.value.forEach(n=>{var r;(r=n.reviewsList)==null||r.forEach(i=>{t.push({...i,color:n.color,info:`${n.name} / ${n.rating} / ${n.reviewsCount} / ${n.subscribers} / ${n.deliveryInfo}`})})}),t.sort((n,r)=>n.productName.localeCompare(r.productName)),t}async apiProfileCheckInDB(t){let n=await lt.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiCreateInfoList(){try{let t=JSON.parse(JSON.stringify(this.list.value));t.length&&(lt.profileInfoList.clear(),lt.profileInfoList.bulkAdd(t),qe.show("success",Ye.ProfileInfoListAddedInDB))}catch(t){console.log(t)}finally{}}async apiGetInfoList(){try{const t=await lt.profileInfoList.toArray();if(t.length)return t}catch(t){console.log(t)}finally{}return[]}async apiRemoveInfoList(){try{await lt.profileInfoList.clear(),qe.show("success",Ye.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiRemoveInfoListOnlyUnmarked(){try{let n=(await lt.profileInfoList.filter(r=>r.marked===!1).toArray()).map(r=>r.id);await lt.profileInfoList.bulkDelete(n),qe.show("warning",Ye.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers,activeAdds:n.activeAdds,completedAdds:n.completedAdds}]};const i=await lt.savedProfiles.add(r);t.id=i,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,qe.show("success",Ye.ProfileCreated)}catch(n){console.log(n),qe.show("error",Ye.ProfileCreateError)}finally{}}}const Oe=new sh,oh={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},ah={class:"centered py-3 flex flex-wrap items-center gap-3"},lh={class:"flex items-center gap-3 ml-auto"},ch=nn({__name:"Header",setup(e){async function t(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getAllResults()}async function n(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getMoreThanResults()}async function r(){window.confirm("   ?")&&(Oe.list.value=[],Oe.apiRemoveInfoList())}return(i,s)=>(se(),me("header",oh,[j("div",ah,[(se(!0),me(it,null,En(fe(Wt).list,o=>(se(),_t(Bt,{key:o.value,icon:o.icon,class:pt([fe(Wt).active.value===o.value?"ring-2 ring-white":""]),onClick:l=>fe(Wt).changeTab(o.value)},{default:$t(()=>[Ht(Ie(o.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),j("div",lh,[fe(Oe).state.viewAllButtonVisible&&fe(Oe).list.value.length>1?(se(),_t(Bt,{key:0,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(t,["stop","prevent"])},{default:$t(()=>[Ht(" ")]),_:1},8,["onClick"])):Be("",!0),fe(Oe).state.viewMoreThanButtonVisible&&fe(Oe).list.value.length>1?(se(),_t(Bt,{key:1,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(n,["stop","prevent"])},{default:$t(()=>[Ht(" >= 5")]),_:1},8,["onClick"])):Be("",!0),fe(Oe).state.removeInfoListButtonVisible&&fe(Oe).list.value.length?(se(),_t(Bt,{key:2,theme:"danger",type:"button",icon:"delete_sweep",onClick:ut(r,["stop","prevent"])},null,8,["onClick"])):Be("",!0)]),ot(Bt,{theme:"info",type:"button",icon:"settings",class:pt(["ml-auto",[fe(Wt).active.value===fe(dn).Settings?"ring-2 ring-white":""]]),onClick:s[0]||(s[0]=o=>fe(Wt).changeTab(fe(dn).Settings))},null,8,["class"])])]))}}),uh={class:"switch"},fh=["tabindex","checked"],dh=["tabindex","checked"],hh=j("div",{class:"switch__label"},null,-1),ph=nn({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,i)=>(se(),me("div",uh,[r.type==="checkbox"?(se(),me("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,fh)):Be("",!0),r.type==="radio"?(se(),me("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,dh)):Be("",!0),hh]))}});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vc={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(yh,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return J}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function l(){let{tagName:D="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=document.createElement(D);return a&&v.classList.add(...a.split(" ")),p&&(v.id=p),f&&(v.innerHTML=f),y&&u(v,y),v}function u(D,a){for(let[f,p]of Object.entries(a))p!==void 0&&D.setAttribute(f,p);return D}function c(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function h(D){let a=D.getHours(),{hours:f,dayPeriod:p}=m(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:x(a),hours12:f,dayPeriod:p,fullHours12:x(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function m(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function x(D){return D<10?"0"+D:D}function S(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function P(){let D=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let v in y)y[v]&&D.push(v);else y&&D.push(y)}),D.join(" ")}function T(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!D||!a)return!1;let p=h(D),y=h(a);return{[i.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[i.months]:p.month===y.month&&p.year===y.year,[i.years]:p.year===y.year}[f]}function B(D,a,f){let p=E(D,!1).getTime(),y=E(a,!1).getTime();return f?p>=y:p>y}function M(D,a){return!B(D,a,!0)}function E(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||$(f),f}function $(D){return D.setHours(0,0,0,0),D}function I(D,a,f){D.length?D.forEach(p=>{p.addEventListener(a,f)}):D.addEventListener(a,f)}function U(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:U(D.parentNode,a))}function Y(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[v,w]of Object.entries(y))if(w!==void 0&&w.toString()==="[object Object]"){let C=D[v]!==void 0?D[v].toString():void 0,A=w.toString(),F=Array.isArray(w)?[]:{};D[v]=D[v]?C!==A?F:D[v]:F,H(D[v],w)}else D[v]=w}),D}function ne(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function _(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class V{constructor(){let{type:a,date:f,dp:p,opts:y,body:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),_(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),_(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),_(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),_(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),_(this,"onChangeFocusDate",w=>{if(!w)return void(this.focused&&this.removeFocus());let C=T(w,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),_(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=v,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=h(this.date),v=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...v}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:v}=this.opts,{minDate:w,maxDate:C}=this.dp,{day:A}=h(this.date),F=this._isOutOfMinMaxRange(),L=(a=this.customData)===null||a===void 0?void 0:a.disabled,W=P("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(p,this.date,this.type),"-min-date-":w&&T(w,this.date,this.type),"-max-date-":C&&T(C,this.date,this.type)}),q="";switch(this.type){case i.days:q=P({"-weekend-":this.dp.isWeekend(A),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||F||L});break;case i.months:q=P({"-disabled-":F||L});break;case i.years:q=P({"-other-decade-":this.isOtherDecade,"-disabled-":F||this.isOtherDecade&&!v||L})}return P(W,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=h(this.date),{showOtherMonths:v,showOtherYears:w}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case i.days:return!v&&this.isOtherMonth?"":y;case i.months:return this.dp.locale[this.opts.monthsField][p];case i.years:return!w&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:v,year:w,date:C}=h(y),A=p===i.days,F=p===i.years,L=!!a&&new Date(w,F?a.getMonth():v,A?C:a.getDate()),W=!!f&&new Date(w,F?f.getMonth():v,A?C:f.getDate());return a&&f?M(L,a)||B(W,f):a?M(L,a):f?B(W,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=P({"-in-range-":a&&f&&(y=this.date,v=a,w=f,B(y,v)&&M(y,w)),"-range-from-":a&&T(this.date,a,this.type),"-range-to-":f&&T(this.date,f,this.type)});var y,v,w;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function R(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let _e={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const le=".air-datepicker-cell";class Pe{constructor(a){let{dp:f,type:p,opts:y}=a;R(this,"handleClick",v=>{let w=v.target.closest(le).adpCell;if(w.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(w.date,w.type);C?this.dp._handleAlreadySelectedDates(C,w.date):this.dp.selectDate(w.date)}),R(this,"handleDayNameClick",v=>{let w=v.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(w),datepicker:this.dp})}),R(this,"onChangeCurrentView",v=>{v!==this.type?this.hide():(this.show(),this.render())}),R(this,"onMouseOverCell",v=>{let w=U(v.target,le);this.dp.setFocusDate(!!w&&w.adpCell.date)}),R(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),R(this,"onClickBody",v=>{let{onClickDayName:w}=this.opts,C=v.target;C.closest(le)&&this.handleClick(v),w&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(v)}),R(this,"onMouseDown",v=>{this.pressed=!0;let w=U(v.target,le),C=w&&w.adpCell;T(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),R(this,"onMouseMove",v=>{if(!this.pressed||!this.dp.isMinViewReached)return;v.preventDefault();let w=U(v.target,le),C=w&&w.adpCell,{selectedDates:A,rangeDateTo:F,rangeDateFrom:L}=this.dp;if(!C||C.isDisabled)return;let{date:W}=C;if(A.length===2){if(this.rangeFromFocused&&!B(W,F)){let{hours:q,minutes:G}=h(L);W.setHours(q),W.setMinutes(G),this.dp.rangeDateFrom=W,this.dp.replaceDate(L,W)}if(this.rangeToFocused&&!M(W,L)){let{hours:q,minutes:G}=h(F);W.setHours(q),W.setMinutes(G),this.dp.rangeDateTo=W,this.dp.replaceDate(F,W)}}}),R(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),R(this,"onChangeViewDate",(v,w)=>{if(!this.isVisible)return;let C=S(v),A=S(w);switch(this.dp.currentView){case i.days:if(T(v,w,i.months))return;break;case i.months:if(T(v,w,i.years))return;break;case i.years:if(C[0]===A[0]&&C[1]===A[1])return}this.render()}),R(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(v=>{this.$cells.appendChild(v.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;I(this.$el,"mouseover",this.onMouseOverCell),I(this.$el,"mouseout",this.onMouseOutCell),I(this.$el,"click",this.onClickBody),a&&f&&(I(this.$el,"mousedown",this.onMouseDown),I(this.$el,"mousemove",this.onMouseMove),I(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:_e[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,v=a,w=0;for(;w<7;){let C=v%7;f+=`<div class="${P("air-datepicker-body--day-name",{[i.cssClassWeekend]:p(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,w++,v++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=c(a),{year:y,month:v}=h(a),w=new Date(y,v,1),C=new Date(y,v,p),A=w.getDay()-f,F=6-C.getDay()+f;A=A<0?A+7:A,F=F>6?F-7:F;let L=function(he,ve){let{year:te,month:g,date:d}=h(he);return new Date(te,g,d-ve)}(w,A),W=p+A+F,q=L.getDate(),{year:G,month:Z}=h(L),ie=0;for(;ie<W;){let he=new Date(G,Z,q+ie);this._generateCell(he),ie++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,v=new V({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(v),v}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=S(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case i.days:this._generateDayCells();break;case i.months:this._generateMonthCells();break;case i.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}}function be(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class de{constructor(a){let{dp:f,opts:p}=a;be(this,"onClickNav",y=>{let v=U(y.target,".air-datepicker-nav--action");if(!v)return;let w=v.dataset.action;this.dp[w]()}),be(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),be(this,"update",()=>{let{prevHtml:y,nextHtml:v}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=v,this._resetNavStatus(),this.render(),this.handleNavStatus()}),be(this,"renderDelay",()=>{setTimeout(this.render)}),be(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,v){for(let w in v)v[w]?y.classList.add(w):y.classList.remove(w)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:v}=this.dp.parsedViewDate,w=!!f&&h(f),C=!!p&&h(p);switch(this.dp.currentView){case i.days:f&&w.month>=v&&w.year>=y&&this._disableNav("prev"),p&&C.month<=v&&C.year<=y&&this._disableNav("next");break;case i.months:f&&w.year>=y&&this._disableNav("prev"),p&&C.year<=y&&this._disableNav("next");break;case i.years:{let A=S(this.dp.viewDate);f&&w.year>=A[0]&&this._disableNav("prev"),p&&C.year<=A[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(v=>{v.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var ae={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class Je{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&ae[f]&&(p=ae[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:v={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:P("air-datepicker-button",p),attrs:v})}render(){this.generateButtons()}}function He(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class nt{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),He(this,"onChangeSelectedDate",y=>{let{date:v,updateTime:w=!1}=y;v&&(this.setMinMaxTime(v),this.setCurrentTime(!!w&&v),this.addTimeToDate(v))}),He(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),He(this,"onChangeInputRange",y=>{let v=y.target;this[v.getAttribute("name")]=v.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),He(this,"onMouseEnterLeave",y=>{let v=y.target.getAttribute("name"),w=this.$minutesText;v==="hours"&&(w=this.$hoursText),w.classList.toggle("-focus-")}),He(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),He(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(k("h"))||p.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),I(this.$ranges,a,this.onChangeInputRange),I(this.$ranges,"mouseenter",this.onMouseEnterLeave),I(this.$ranges,"mouseleave",this.onMouseEnterLeave),I(this.$ranges,"focus",this.onFocus),I(this.$ranges,"mousedown",this.onFocus),I(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:P("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:v,minMinutes:w,maxHours:C,maxMinutes:A,dayPeriod:F,opts:{hoursStep:L,minutesStep:W}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${x(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${x(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${F}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${v}" max="${C}" step="${L}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${w}" max="${A}" step="${W}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&T(a,f)&&this.setMinTimeFromMinDate(f),p&&T(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?h(a):this;this.hours=Y(f,this.minHours,this.maxHours),this.minutes=Y(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=Y(a,0,23),this.minMinutes=Y(f,0,59),this.maxHours=Y(p,0,23),this.maxMinutes=Y(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){u(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,u(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=x(this.displayHours),this.$minutesText.innerHTML=x(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=m(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function Ue(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Nt{constructor(a){let{dp:f,opts:p}=a;Ue(this,"pressedKeys",new Set),Ue(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,v)=>v.up()]])),Ue(this,"handleHotKey",y=>{let v=this.hotKeys.get(y),w=h(this.getInitialFocusDate());v(w,this.dp);let{year:C,month:A,date:F}=w,L=c(new Date(C,A));L<F&&(F=L);let W=this.dp.getClampedDate(new Date(C,A,F));this.dp.setFocusDate(W,{viewDateTransition:!0})}),Ue(this,"isHotKeyPressed",()=>{let y=!1,v=this.pressedKeys.size,w=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(A=>{y||v!==A.length||(y=A.every(w)&&C)});else{if(v!==C.length)continue;y=C.every(w)&&C}}return y}),Ue(this,"isArrow",y=>y>=37&&y<=40),Ue(this,"onKeyDown",y=>{let{key:v,which:w}=y,{dp:C,dp:{focusDate:A},opts:F}=this;this.registerKey(v);let L=this.isHotKeyPressed();if(L)return y.preventDefault(),void this.handleHotKey(L);if(this.isArrow(w))return y.preventDefault(),void this.focusNextCell(v);if(v==="Enter"){if(C.currentView!==F.minView)return void C.down();if(A){let W=C._checkIfDateIsSelected(A);return void(W?C._handleAlreadySelectedDates(W,A):C.selectDate(A))}}v==="Escape"&&this.dp.hide()}),Ue(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:v}}=this.dp,w=a||p[p.length-1];if(!w)switch(f){case i.days:w=new Date(y,v,new Date().getDate());break;case i.months:w=new Date(y,v,1);break;case i.years:w=new Date(y,0,1)}return w}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:v,years:w}=i,C=h(f),A=C.year,F=C.month,L=C.date;switch(a){case"ArrowLeft":p===y&&(L-=1),p===v&&(F-=1),p===w&&(A-=1);break;case"ArrowUp":p===y&&(L-=7),p===v&&(F-=3),p===w&&(A-=4);break;case"ArrowRight":p===y&&(L+=1),p===v&&(F+=1),p===w&&(A+=1);break;case"ArrowDown":p===y&&(L+=7),p===v&&(F+=3),p===w&&(A+=4)}let W=this.dp.getClampedDate(new Date(A,F,L));this.dp.setFocusDate(W,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ge={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function ue(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Le="",K="",z=!1;class J{static buildGlobalContainer(a){z=!0,Le=l({className:a,id:a}),o("body").appendChild(Le)}constructor(a,f){var p=this;if(ue(this,"viewIndexes",[i.days,i.months,i.years]),ue(this,"next",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(w,C+1,1));break;case i.months:this.setViewDate(new Date(w+1,C,1));break;case i.years:this.setViewDate(new Date(w+10,0,1))}}),ue(this,"prev",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(w,C-1,1));break;case i.months:this.setViewDate(new Date(w-1,C,1));break;case i.years:this.setViewDate(new Date(w-10,0,1))}}),ue(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),ue(this,"setPosition",function(w){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(w=w||p.opts.position)=="function")return void(p.customHide=w({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:C,done:p._finishHide}));let A,F,{isMobile:L}=p.opts,W=p.$el.getBoundingClientRect(),q=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,ie=p.$datepicker.getBoundingClientRect(),he=w.split(" "),ve=window.scrollY,te=window.scrollX,g=p.opts.offset,d=he[0],b=he[1];if(L)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:W.width,height:p.$el.offsetHeight},ve=0,te=0),G!==Z&&G!==document.body){let O=G.getBoundingClientRect();q={top:W.top-O.top,left:W.left-O.left,width:W.width,height:W.height},ve=0,te=0}switch(d){case"top":A=q.top-ie.height-g;break;case"right":F=q.left+q.width+g;break;case"bottom":A=q.top+q.height+g;break;case"left":F=q.left-ie.width-g}switch(b){case"top":A=q.top;break;case"right":F=q.left+q.width-ie.width;break;case"bottom":A=q.top+q.height-ie.height;break;case"left":F=q.left;break;case"center":/left|right/.test(d)?A=q.top+q.height/2-ie.height/2:F=q.left+q.width/2-ie.width/2}p.$datepicker.style.cssText=`left: ${F+te}px; top: ${A+ve}px`}}),ue(this,"_setInputValue",()=>{let{opts:w,$altField:C,locale:{dateFormat:A}}=this,{altFieldDateFormat:F,altField:L}=w;L&&C&&(C.value=this._getInputValue(F)),this.$el.value=this._getInputValue(A)}),ue(this,"_getInputValue",w=>{let{selectedDates:C,opts:A}=this,{multipleDates:F,multipleDatesSeparator:L}=A;if(!C.length)return"";let W=typeof w=="function",q=W?w(F?C:C[0]):C.map(G=>this.formatDate(G,w));return q=W?q:q.join(L),q}),ue(this,"_checkIfDateIsSelected",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,A=!1;return p.selectedDates.some(F=>{let L=T(w,F,C);return A=L&&F,L}),A}),ue(this,"_scheduleCallAfterTransition",w=>{this._cancelScheduledCall(),w&&w(!1),this._onTransitionEnd=()=>{w&&w(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),ue(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),ue(this,"setViewDate",w=>{if(!((w=ne(w))instanceof Date)||T(w,this.viewDate))return;let C=this.viewDate;this.viewDate=w;let{onChangeViewDate:A}=this.opts;if(A){let{month:F,year:L}=this.parsedViewDate;A({month:F,year:L,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,w,C)}),ue(this,"setFocusDate",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!w||(w=ne(w))instanceof Date)&&(p.focusDate=w,p.opts.range&&w&&p._handleRangeOnFocus(),p.trigger(i.eventChangeFocusDate,w,C))}),ue(this,"setCurrentView",w=>{if(this.viewIndexes.includes(w)){if(this.currentView=w,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(i.eventChangeCurrentView,w),!this.views[w]){let C=this.views[w]=new Pe({dp:this,opts:this.opts,type:w});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(w)}}),ue(this,"_updateLastSelectedDate",w=>{this.lastSelectedDate=w,this.trigger(i.eventChangeLastSelectedDate,w)}),ue(this,"destroy",()=>{let{showEvent:w,isMobile:C}=this.opts,A=this.$datepicker.parentNode;A&&A.removeChild(this.$datepicker),this.$el.removeEventListener(w,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),ue(this,"update",w=>{let C=H({},this.opts);H(this.opts,w);let{timepicker:A,buttons:F,range:L,selectedDates:W,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&W&&this.selectDate(W),w.view&&this.setCurrentView(w.view),this._setInputValue(),C.range&&!L?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&L&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!A?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&A&&this._addTimepicker(),!C.buttons&&F?this._addButtons():C.buttons&&!F?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&F&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===i.days&&this.views[this.currentView].renderDayNames())}),ue(this,"isOtherMonth",w=>{let{month:C}=h(w);return C!==this.parsedViewDate.month}),ue(this,"isOtherYear",w=>{let{year:C}=h(w);return C!==this.parsedViewDate.year}),ue(this,"isOtherDecade",w=>{let{year:C}=h(w),[A,F]=S(this.viewDate);return C<A||C>F}),ue(this,"_onChangeSelectedDate",w=>{let{silent:C}=w;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),ue(this,"_onChangeFocusedDate",function(w){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!w)return;let A=!1;C&&(A=p.isOtherMonth(w)||p.isOtherYear(w)||p.isOtherDecade(w)),A&&p.setViewDate(w)}),ue(this,"_onChangeTime",w=>{let{hours:C,minutes:A}=w,F=new Date,{lastSelectedDate:L,opts:{onSelect:W}}=this,q=L;L||(q=F);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(A),L?(this._setInputValue(),W&&this._triggerOnSelect()):this.selectDate(q))}),ue(this,"_onFocus",w=>{this.visible||this.show()}),ue(this,"_onBlur",w=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),ue(this,"_onMouseDown",w=>{this.inFocus=!0}),ue(this,"_onMouseUp",w=>{this.inFocus=!1,this.$el.focus()}),ue(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),ue(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),ue(this,"isWeekend",w=>this.opts.weekends.includes(w)),ue(this,"getClampedDate",w=>{let{minDate:C,maxDate:A}=this,F=w;return A&&B(w,A)?F=A:C&&M(w,C)&&(F=C),F}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=H({},s,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:v}=this.opts;v||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=ne(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:v,keyboardNav:w,onlyTimepicker:C}}=this,A=o("body");(!z||z&&Le&&!A.contains(Le))&&!p&&this.elIsInput&&!this.$customContainer&&J.buildGlobalContainer(J.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),w&&!C&&(this.keyboardNav=new Nt({dp:this,opts:a}))),v&&this.selectDate(v,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Le.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:v,position:w,classes:C,onlyTimepicker:A,isMobile:F}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(w)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),A&&this.$datepicker.classList.add("-only-timepicker-"),F&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Pe({dp:this,type:this.currentView,opts:a}),this.nav=new de({dp:this,opts:a}),v&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&ne(a),this.maxDate=!!f&&ne(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new nt({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Je({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:v,timeFormat:w,dateTimeSeparator:C}=this.opts;var A;this.locale=(A=a,JSON.parse(JSON.stringify(A))),f&&(this.locale.dateFormat=f),w!==void 0&&w!==""&&(this.locale.timeFormat=w);let{timeFormat:F}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let L=F?C:"";this.locale.dateFormat=[this.locale.dateFormat,F||""].join(L)}v&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&B(a,p)&&this.setViewDate(p),f&&M(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=ne(a),!(a instanceof Date))return;let p=f,y=this.locale,v=h(a),w=v.dayPeriod,C=S(a),A=J.replacer,F={T:a.getTime(),m:v.minutes,mm:v.fullMinutes,h:v.hours12,hh:v.fullHours12,H:v.hours,HH:v.fullHours,aa:w,AA:w.toUpperCase(),E:y.daysShort[v.day],EEEE:y.days[v.day],d:v.date,dd:v.fullDate,M:v.month+1,MM:v.fullMonth,MMM:y.monthsShort[v.month],MMMM:y.months[v.month],yy:v.year.toString().slice(-2),yyyy:v.year,yyyy1:C[0],yyyy2:C[1]};for(let[L,W]of Object.entries(F))p=A(p,k(L),W);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:v,selectedDates:w}=this,{updateTime:C}=p,{moveToOtherMonthsOnSelect:A,moveToOtherYearsOnSelect:F,multipleDates:L,range:W,autoClose:q}=this.opts,G=w.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=ne(a))instanceof Date){if(y===i.days&&a.getMonth()!==v.month&&A&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===i.years&&a.getFullYear()!==v.year&&F&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),L&&!W){if(G===L)return;this._checkIfDateIsSelected(a)||w.push(a)}else if(W)switch(G){case 1:w.push(a),this.rangeDateTo||(this.rangeDateTo=a),B(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(L||W?W&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=ne(a))instanceof Date)return f.some((y,v)=>{if(T(y,a))return f.splice(v,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(v=>T(v,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||T(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:v,multipleDates:w,range:C}}=this,A=w||C,F=typeof y.dateFormat=="function";p.length&&(a=p.map(E),f=F?w?y.dateFormat(a):a.map(L=>y.dateFormat(L)):a.map(L=>this.formatDate(L,y.dateFormat))),v({date:A?a:a[0],formattedDate:A?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=ne(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(B(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!((a=ne(a))instanceof Date))return;let{year:p,month:y,date:v}=h(a),w=`[data-year="${p}"]`,C=`[data-month="${y}"]`,A={[i.day]:`${w}${C}[data-date="${v}"]`,[i.month]:`${w}${C}`,[i.year]:`${w}`};return this.views[this.currentView].$el.querySelector(A[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return S(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Le}static replacer(a,f,p){return a.replace(f,function(y,v,w,C){return v+p+C})}}var X;return ue(J,"defaults",s),ue(J,"version","3.3.5"),ue(J,"defaultGlobalContainerId","air-datepicker-global-container"),X=J.prototype,Object.assign(X,ge),r.default}()})})(vc);var gh=vc.exports;const Ra=mh(gh);class vh{constructor(){rn(this,"fields",Tr({profilesLinks:[{url:"",status:"new",highlight:!1}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,deliveryOnly:!1}));rn(this,"openedTab",Zt({}))}get profileLinkNew(){return this.fields.profilesLinks.find(t=>t.status==="new")}get profileLinkHighlighted(){return this.fields.profilesLinks.find(t=>t.highlight)}profileLinkGetByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}profileLinkPushNew(t=""){this.fields.profilesLinks.push({url:t,status:"new",highlight:!1})}profileLinksRemoveEmpty(){this.fields.profilesLinks.forEach((t,n,r)=>{t.url===""&&r.splice(n,1)})}profileLinkRemove(t){this.fields.profilesLinks.splice(t,1),this.profileLinksHighlightDuplicates()}profileLinksHighlightDuplicates(){this.fields.profilesLinks.forEach((t,n,r)=>{let i=r.filter(s=>s.url===t.url&&t.url!=="");t.highlight=i.length>1})}profileLinkSetInfo(t,n){const r=this.profileLinkGetByUrl(t);r&&(r.info=n)}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.deliveryOnly=t.deliveryOnly,this.fields.productName=t.productName,t}catch(t){console.log(t),qe.show("error",Ye.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new",highlight:!1}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.deliveryOnly=!1,await this.apiRemoveFilter()}async parsingStart(){try{if(this.profileLinkNew){const t=this.fields.profilesLinks.map(r=>r.url);Oe.list.value=Oe.list.value.filter(r=>t.includes(r.url)||r.marked);const n=await th(this.profileLinkNew.url);this.openedTab.value=n,n.id&&chrome.tabs.sendMessage(n.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.profileLinkNew.url})}else qe.show("warning",Ye.ReviewsFilterAllLinksParsed)}catch{qe.show("error",Ye.TabOpenError)}}async apiRemoveFilter(){try{await lt.reviewsFilter.where("key").equals("reviewsFilter").delete(),qe.show("warning",Ye.ReviewsFilterCleared)}catch(t){console.log(t),qe.show("warning",Ye.ReviewsFilterClearError)}}async apiGetFilter(){const t=await lt.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ba(t.dateFrom),t.dateTo=Ba(t.dateTo),(await lt.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?lt.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):lt.reviewsFilter.add({...t,key:"reviewsFilter"}),qe.show("success",Ye.ReviewsFilterSaved)}catch(t){console.log(t),qe.show("error",Ye.ReviewsFilterSaveError)}}}const Me=new vh,bh=["onSubmit"],_h={class:"grid grid-cols-4 gap-5"},wh={class:"col-span-4"},xh=j("div",{class:"text-sm font-medium mb-2"},"  ",-1),kh={class:"flex items-center gap-4"},Ch={class:"flex-none select-none"},Dh={key:0,class:"font-icon text-3xl block text-green-400"},Sh={key:1,class:"font-icon text-3xl block text-red-400"},Th={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Oh={key:3,class:"font-icon text-3xl block text-gray-400"},Eh=["onUpdate:modelValue","onInput"],Ah={key:0,class:"flex-none cursor-pointer select-none"},Ph=["onClick"],$h={class:"flex-none cursor-pointer select-none ml-auto"},Ih=["innerHTML"],Nh=j("div",{class:"mb-2 text-sm font-medium"}," ",-1),Fh=j("div",{class:"mb-2 text-sm font-medium"}," ",-1),Lh={class:"col-span-2"},Mh=j("div",{class:"mb-2 text-sm font-medium"}," ",-1),Bh=j("div",{class:"mb-2 text-sm font-medium"}," ",-1),Rh=j("div",{class:"mb-2 text-sm font-medium"}," ",-1),jh={class:"col-span-4 select-none"},Kh={class:"inline-block"},Uh=j("div",{class:"mb-3 text-sm font-medium"},"  ",-1),Vh={class:"flex items-center gap-4 mt-10"},Hh=nn({__name:"ReviewsFilter",setup(e){const t=Zt(!1),n={dateFrom:null,dateTo:null},r={autoClose:!0,onSelect:({formattedDate:u,datepicker:c})=>{c.$el.id==="dateFrom"&&(Me.fields.dateFrom=u),c.$el.id==="dateTo"&&(Me.fields.dateTo=u)}};function i(u,c){Me.profileLinksHighlightDuplicates(),u.status="new",u.info=""}async function s(){window.confirm("  ?")&&(Me.resetFields(),n.dateFrom.selectDate(Ma()),n.dateTo.selectDate(new Date),Oe.list.value=Oe.list.value.filter(u=>u.marked),Oe.apiRemoveInfoListOnlyUnmarked())}async function o(){if(Me.profileLinkHighlighted){qe.show("error",Ye.ReviewsFilterSimilarLinks);return}Me.apiCreateFilter(),Oe.apiCreateInfoList()}async function l(){if(Me.profileLinkHighlighted){qe.show("error",Ye.ReviewsFilterSimilarLinks);return}Me.parsingStart()}return er(()=>{n.dateFrom=new Ra("#dateFrom",r),n.dateTo=new Ra("#dateTo",r),n.dateFrom.selectDate(Ma()),n.dateTo.selectDate(new Date),setTimeout(async()=>{const u=await Me.setFilterFromDB();u&&(n.dateFrom.selectDate(u.dateFrom),n.dateTo.selectDate(u.dateTo)),t.value=!0},0)}),ii(()=>{n.dateFrom.destroy(),n.dateTo.destroy()}),(u,c)=>(se(),me("form",{class:pt(["pb-20 transition-opacity duration-300 delay-100",t.value?"opacity-100":"opacity-0"]),onSubmit:ut(l,["prevent"])},[j("div",_h,[j("div",wh,[xh,(se(!0),me(it,null,En(fe(Me).fields.profilesLinks,(h,m)=>(se(),me("div",{key:m,class:pt(m>0?"mt-5":"")},[j("div",kh,[j("div",Ch,[h.status==="success"?(se(),me("i",Dh,"check_circle")):Be("",!0),h.status==="error"?(se(),me("i",Sh,"cancel")):Be("",!0),h.status==="wait"?(se(),me("i",Th,"rotate_right")):Be("",!0),h.status==="new"?(se(),me("i",Oh,"watch_later")):Be("",!0)]),Cn(j("input",{"onUpdate:modelValue":x=>h.url=x,tabindex:"1",type:"search",required:"",class:pt(["text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",{"ring-4 ring-red-400":h.highlight}]),onInput:x=>i(h)},null,42,Eh),[[Sn,h.url]]),fe(Me).fields.profilesLinks.length>1?(se(),me("div",Ah,[j("i",{class:"font-icon text-3xl block text-red-400",onClick:x=>fe(Me).profileLinkRemove(m)},"remove_circle_outline",8,Ph)])):Be("",!0),j("div",$h,[j("i",{class:"font-icon text-3xl block text-green-400",onClick:c[0]||(c[0]=x=>fe(Me).profileLinkPushNew())},"add_circle_outline")])]),h.info?(se(),me("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:h.info},null,8,Ih)):Be("",!0)],2))),128))]),j("div",null,[Nh,Cn(j("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>fe(Me).fields.dateFrom=h),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,fe(Me).fields.dateFrom]])]),j("div",null,[Fh,Cn(j("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>fe(Me).fields.dateTo=h),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,fe(Me).fields.dateTo]])]),j("div",Lh,[Mh,Cn(j("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>fe(Me).fields.productName=h),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,fe(Me).fields.productName]])]),j("div",null,[Bh,Cn(j("input",{"onUpdate:modelValue":c[4]||(c[4]=h=>fe(Me).fields.ratingFrom=h),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,fe(Me).fields.ratingFrom]])]),j("div",null,[Rh,Cn(j("input",{"onUpdate:modelValue":c[5]||(c[5]=h=>fe(Me).fields.ratingTo=h),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,fe(Me).fields.ratingTo]])]),j("div",jh,[j("label",Kh,[Uh,ot(ph,{tabindex:6,modelValue:fe(Me).fields.deliveryOnly,"onUpdate:modelValue":c[6]||(c[6]=h=>fe(Me).fields.deliveryOnly=h)},null,8,["modelValue"])])])]),j("div",Vh,[ot(Bt,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:$t(()=>[Ht(" ")]),_:1}),ot(Bt,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:ut(o,["stop","prevent"])},{default:$t(()=>[Ht(" ")]),_:1},8,["onClick"]),ot(Bt,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:ut(s,["stop","prevent"])},{default:$t(()=>[Ht(" ")]),_:1},8,["onClick"])])],42,bh))}}),qh=["onKeydown"],bc=nn({__name:"Modal",props:{width:{default:"580px"}},emits:["close"],setup(e,{emit:t}){const n=e,r=Zt();function i(o){const l=o.target;!l.classList.contains("app-modal__body")&&!l.closest(".app-modal__body")&&s()}function s(){t("close")}return ii(()=>{document.body.classList.remove("overflow-hidden")}),er(()=>{var o;(o=r==null?void 0:r.value)==null||o.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(o,l)=>(se(),me("div",{ref_key:"modalRef",ref:r,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-60 z-100 overflow-y-scroll p-10 flex",onClick:i,onKeydown:Gf(s,["esc"])},[j("div",{class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-10 m-auto max-w-full min-h-[100px] break-all",style:wr({width:n.width})},[j("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:s},"close"),Cl(o.$slots,"default")],4)],40,qh))}}),Yh=["onClick"],Jh={class:"min-w-0 flex-1"},Wh={class:"flex items-center gap-4 mb-4"},zh=["onClick"],Gh={key:0,class:"text-[16px] text-sky-300 font-medium italic"},Xh={class:"flex flex-wrap items-center gap-x-4 gap-y-2 text-[16px] font-medium"},Qh={class:"text-orange-300"},Zh={class:"text-yellow-300"},ep={class:"text-teal-300"},tp={class:"text-rose-300"},np={class:"text-amber-300"},rp={key:0,class:"text-lime-300"},ip={key:1,class:"text-gray-300"},sp={class:"flex-none flex items-center gap-4"},op={key:0,class:"flex-none"},ap=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"storage",-1),lp=[ap],cp=["onClick"],up=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"cloud_upload",-1),fp=[up],dp=["onClick"],hp=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"content_copy",-1),pp=[hp],yp=["onClick"],mp={class:"font-icon text-3xl drop-shadow-xl"},gp={key:0,class:"text-[14px] px-4 p-5"},vp={key:0,class:"mb-8"},bp=j("div",{class:"mb-3 opacity-80"},":",-1),_p=["onUpdate:modelValue"],wp={key:0},xp={class:"mb-8 font-bold text-xl"},kp={class:"w-full relative"},Cp={class:"text-[16px] sticky top-[64px] bg-gray-600"},Dp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Sp=["onClick"],Tp=j("div",null,"",-1),Op={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ep=["onClick"],Ap=j("div",null,"",-1),Pp={class:"text-left px-4 py-2 border border-white border-opacity-50"},$p=["onClick"],Ip=j("div",null," ",-1),Np=j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"",-1),Fp={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Lp={class:"px-4 py-2 border border-white border-opacity-50"},Mp={class:"flex-none flex items-center"},Bp={class:"text-base font-medium mr-1"},Rp={class:"text-[18px] font-icon text-yellow-400"},jp={class:"px-4 py-2 border border-white border-opacity-50"},Kp={class:"flex items-center gap-4"},Up=["onClick"],Vp={class:"px-4 py-2 border border-white border-opacity-50"},Hp={key:2,class:"text-xl font-bold text-red-300"},qp=["title"],Yp=["onClick"],Jp={key:0},Wp={key:1},zp={key:1,class:"text-center text-xl font-bold"},Gp={key:1,class:"text-center text-xl font-bold"},Xp=nn({__name:"ProfileInfoList",setup(e){function t(){Oe.state.contentModalVisible=!1,Oe.state.contentModalData=[]}function n(c){Ho(c),qe.show("success",Ye.ProductNameCopied)}function r(c,h){Oe.sortResults(c,h)}function i(c){c.opened===void 0&&(c.opened=!0),c.opened=!c.opened}function s(c){c.url&&window.open(c.url,"_blank")}function o(c){c.marked=!c.marked}async function l(c){Oe.apiProfileCreate(c)}async function u(c){Oe.copyItemInfo(c)}return ii(()=>{Oe.state.viewAllButtonVisible=!1,Oe.state.viewMoreThanButtonVisible=!1,Oe.state.removeInfoListButtonVisible=!1}),er(async()=>{Oe.state.viewAllButtonVisible=!0,Oe.state.viewMoreThanButtonVisible=!0,Oe.state.removeInfoListButtonVisible=!0,Oe.list.value.forEach(async c=>{await Oe.apiProfileCheckInDB(c)}),Oe.list.value.length===1&&(Oe.list.value[0].opened=!0)}),(c,h)=>fe(Oe).list.value.length?(se(),me(it,{key:0},[(se(!0),me(it,null,En(fe(Oe).list.value,m=>{var x;return se(),me("div",{key:m.url,class:pt(["relative rounded-xl shadow-xl bg-gray-600 text-[16px] mb-3",m.opened?"ring ring-blue-400":""])},[j("div",{class:"relative flex items-start p-4 select-none cursor-pointer rounded-xl",style:wr({"background-image":`linear-gradient(45deg, rgb(75 85 99) 0%, rgb(75 85 99) 70%, ${m.color.bg} 100%)`}),onClick:S=>i(m)},[j("div",Jh,[j("div",Wh,[j("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(S=>s(m),["stop"])},Ie(m.name),9,zh),m.comment?(se(),me("div",Gh,Ie(m.comment),1)):Be("",!0)]),j("div",Xh,[j("div",Qh,Ie(m.rating),1),j("div",Zh,Ie(m.reviewsCount),1),j("div",ep,Ie(m.subscribers),1),j("div",tp,Ie(m.deliveryInfo),1),j("div",np," - "+Ie(m.activeAdds),1),m.completedAdds?(se(),me("div",rp," - "+Ie(m.completedAdds),1)):Be("",!0),m.savedDate?(se(),me("div",ip,Ie(m.savedDate?fe(br)(m.savedDate):""),1)):Be("",!0)])]),j("div",sp,[m.existsInDataBase?(se(),me("div",op,lp)):(se(),me("div",{key:1,class:"flex-none ml-auto",onClick:ut(S=>l(m),["stop"])},fp,8,cp)),j("div",{class:"flex-none",onClick:ut(S=>u(m),["stop"])},pp,8,dp),j("div",{class:"flex-none",onClick:ut(S=>o(m),["stop"])},[j("div",mp,Ie(m.marked?"bookmark":"bookmark_border"),1)],8,yp)])],12,Yh),m.opened?(se(),me("div",gp,[m.existsInDataBase?Be("",!0):(se(),me("div",vp,[bp,Cn(j("input",{"onUpdate:modelValue":S=>m.comment=S,type:"search",required:"",class:"text-base w-1/4 max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,_p),[[Sn,m.comment]])])),(x=m.reviewsList)!=null&&x.length?(se(),me(it,{key:1},[m.opened?(se(),me("div",wp,[j("div",xp,[j("div",null,[Ht("  - "),j("strong",null,Ie(m.reviewsList.length),1)])]),j("table",kp,[j("tr",Cp,[j("th",Dp,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="date_desc"?"date_asc":"date_desc")},[j("div",{class:pt(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="date_desc"||m.reviewsSortedBy==="date_asc"},{"rotate-180":m.reviewsSortedBy==="date_asc"}]])},"sort",2),Tp],8,Sp)]),j("th",Op,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="rating_desc"?"rating_asc":"rating_desc")},[j("div",{class:pt(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="rating_desc"||m.reviewsSortedBy==="rating_asc"},{"rotate-180":m.reviewsSortedBy==="rating_asc"}]])},"sort",2),Ap],8,Ep)]),j("th",Pp,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="product_name_desc"?"product_name_asc":"product_name_desc")},[j("div",{class:pt(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="product_name_desc"||m.reviewsSortedBy==="product_name_asc"},{"rotate-180":m.reviewsSortedBy==="product_name_asc"}]])},"sort",2),Ip],8,$p)]),Np]),(se(!0),me(it,null,En(m.reviewsList,(S,P)=>{var T;return se(),me("tr",{key:m.reviewsSortedBy+P,class:"text-[14px] hover:bg-gray-600"},[j("td",Fp,Ie((T=fe(br)(S.date))==null?void 0:T.slice(0,10)),1),j("td",Lp,[j("div",Mp,[j("div",Bp,"("+Ie(S.rating)+") - ",1),(se(!0),me(it,null,En(S.rating,B=>(se(),me("div",Rp,"star"))),256))])]),j("td",jp,[j("div",Kp,[j("div",{class:"font-icon text-green-400 cursor-pointer",onClick:ut(B=>n(S.productName),["stop"])},"content_copy",8,Up),j("div",null,Ie(S.productName),1)])]),j("td",Vp,[j("strong",{class:pt(S.delivery?"text-green-400":"text-red-400")},Ie(S.delivery?"":""),3)])])}),128))])])):Be("",!0)],64)):(se(),me("div",Hp,"  "))])):Be("",!0)],2)}),128)),fe(Oe).state.contentModalVisible?(se(),_t(bc,{key:0,width:"800px",onClose:t},{default:$t(()=>[fe(Oe).state.contentModalData.length?(se(!0),me(it,{key:0},En(fe(Oe).state.contentModalData,m=>{var x;return se(),me("div",{class:"flex text-sm items-center gap-2 py-0.5 px-1 mb-[2px] mr-5 font-medium",style:wr({"background-color":m.color.bg,color:m.color.text}),title:m.info},[j("i",{class:"font-icon text-xl cursor-pointer drop-shadow-xl",onClick:S=>n(m.productName)},"content_copy",8,Yp),j("div",null,Ie(m.productName),1),m.count?Be("",!0):(se(),me("div",Jp,Ie((x=fe(br)(m.date))==null?void 0:x.slice(0,10)),1)),m.count?(se(),me("strong",Wp,"("+Ie(m.count)+")",1)):Be("",!0)],12,qp)}),256)):(se(),me("div",zp,"  "))]),_:1})):Be("",!0)],64)):(se(),me("div",Gp,"  "))}}),Qp=nn({__name:"ParsingResult",setup(e){return(t,n)=>(se(),_t(Xp))}});const Zp=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},ey={},ty=j("svg",{class:"spinner",viewBox:"0 0 50 50"},[j("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),ny=[ty];function ry(e,t){return se(),me("div",null,ny)}const _c=Zp(ey,[["render",ry]]);class iy{constructor(){rn(this,"list",Zt([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Oe.list.value.find(i=>i.url===t),r=await lt.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let i=JSON.parse(JSON.stringify(n)),s=r[0];s.parsingResults.unshift({parsingDate:i.parsingDate,rating:i.rating,reviewsCount:i.reviewsCount,deliveryInfo:i.deliveryInfo,subscribers:i.subscribers,activeAdds:i.activeAdds,completedAdds:i.completedAdds});const o=await lt.savedProfiles.put(s)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){t===0&&n===0&&(this.list.value=await lt.savedProfiles.toArray())}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await lt.savedProfiles.put(n))qe.show("success",Ye.ProfileEdited);else throw new Error}catch{qe.show("error",Ye.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await lt.savedProfiles.delete(t.id),qe.show("success",Ye.ProfileDeleted)}catch(n){console.log(n),qe.show("error",Ye.ProfileDeleteError)}finally{}}}const gt=new iy,sy={key:0,class:"flex justify-center"},oy=["onClick"],ay={class:"min-w-0 flex-1"},ly={class:"flex items-center gap-4 mb-4"},cy=["onClick"],uy={key:0,class:"text-[16px] text-sky-300 font-medium italic"},fy={class:"flex flex-wrap items-center gap-4 text-[16px] font-medium"},dy={class:"text-orange-300"},hy={class:"text-yellow-300"},py={class:"text-teal-300"},yy={class:"text-rose-300"},my={class:"text-amber-300"},gy={key:0,class:"text-lime-300"},vy={class:"text-gray-300"},by={class:"flex-none flex items-center gap-4"},_y=["onClick"],wy=j("i",{class:"font-icon text-3xl text-amber-400"},"add_to_photos",-1),xy=[wy],ky=["onClick"],Cy=j("i",{class:"font-icon text-3xl text-green-400"},"edit",-1),Dy=[Cy],Sy=["onClick"],Ty=j("i",{class:"font-icon text-3xl text-sky-400"},"content_copy",-1),Oy=[Ty],Ey=["onClick"],Ay=j("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),Py=[Ay],$y={key:0,class:"text-[14px] px-4 p-5"},Iy={key:0,class:"w-full"},Ny=j("tr",null,[j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"}," "),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"  "),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},""),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"")],-1),Fy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ly={class:"text-left px-4 py-2 border border-white border-opacity-50"},My={class:"text-left px-4 py-2 border border-white border-opacity-50"},By={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ry={class:"text-left px-4 py-2 border border-white border-opacity-50"},jy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ky={class:"text-left px-4 py-2 border border-white border-opacity-50"},Uy={key:1,class:"text-center text-xl font-medium"},Vy={key:2,class:"text-center text-xl font-bold"},Hy={key:0},qy={class:"text-2xl font-bold mb-5 pr-10"},Yy={class:"mb-6"},Jy=j("div",{class:"mb-2 text-sm font-medium"},"",-1),Wy=nn({__name:"ProfileSavedList",setup(e){const t=Zt(!1),n=Zt(null),r=Zt(!1);function i(x){x.url&&window.open(x.url,"_blank")}function s(x){x.url&&(Ho(x.url),qe.show("success",Ye.ProfileLinkCopied))}function o(x){x.opened=!x.opened}function l(){t.value=!1,n.value=null}function u(x){t.value=!0,n.value=x}function c(x){Me.profileLinkPushNew(x.url),Me.profileLinksHighlightDuplicates(),Me.profileLinksRemoveEmpty(),qe.show("success",Ye.ProfileLinkAddedInReviewsFilter)}async function h(x){gt.apiProfileUpdate(x),t.value=!1,n.value=null}async function m(x){window.confirm(` "${x.name}" ?`)&&x.id&&(await gt.apiProfileDelete(x),setTimeout(()=>{gt.apiGetList()},0))}return er(async()=>{setTimeout(()=>{gt.apiGetList()},0)}),wl(()=>{gt.list.value.forEach(x=>x.opened=!1)}),(x,S)=>(se(),me(it,null,[r.value?(se(),me("div",sy,[ot(_c,{class:"w-10 h-10 flex-none"})])):fe(gt).list.value.length?(se(!0),me(it,{key:1},En(fe(gt).list.value,P=>{var T,B,M,E,$,I,U,Y,H,ne;return se(),me("div",{key:P.id,class:pt([P.opened?"ring ring-blue-400":"","rounded-xl bg-gray-600 shadow-xl mb-3"])},[j("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:k=>o(P)},[j("div",ay,[j("div",ly,[j("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(k=>i(P),["stop"])},Ie(P.name),9,cy),P.comment?(se(),me("div",uy,Ie(P.comment),1)):Be("",!0)]),j("div",fy,[j("div",dy,Ie((T=fe(gt).getLastParsingInfo(P))==null?void 0:T.rating),1),j("div",hy,Ie((B=fe(gt).getLastParsingInfo(P))==null?void 0:B.reviewsCount),1),j("div",py,Ie((M=fe(gt).getLastParsingInfo(P))==null?void 0:M.subscribers),1),j("div",yy,Ie((E=fe(gt).getLastParsingInfo(P))==null?void 0:E.deliveryInfo),1),j("div",my," - "+Ie(($=fe(gt).getLastParsingInfo(P))==null?void 0:$.activeAdds),1),(I=fe(gt).getLastParsingInfo(P))!=null&&I.completedAdds?(se(),me("div",gy," - "+Ie((U=fe(gt).getLastParsingInfo(P))==null?void 0:U.completedAdds),1)):Be("",!0),j("div",vy,Ie((Y=fe(gt).getLastParsingInfo(P))!=null&&Y.parsingDate?fe(br)((H=fe(gt).getLastParsingInfo(P))==null?void 0:H.parsingDate):""),1)])]),j("div",by,[j("div",{class:"flex-none ml-auto",onClick:ut(k=>c(P),["stop"])},xy,8,_y),j("div",{class:"flex-none ml-auto",onClick:ut(k=>u(P),["stop"])},Dy,8,ky),j("div",{class:"flex-none",onClick:ut(k=>s(P),["stop"])},Oy,8,Sy),j("div",{class:"flex-none",onClick:ut(k=>m(P),["stop"])},Py,8,Ey)])],8,oy),P.opened?(se(),me("div",$y,[(ne=P.parsingResults)!=null&&ne.length?(se(),me("table",Iy,[Ny,(se(!0),me(it,null,En(P.parsingResults,k=>(se(),me("tr",null,[j("td",Fy,Ie(fe(br)(k.parsingDate)),1),j("td",Ly,Ie(k.rating),1),j("td",My,Ie(k.reviewsCount),1),j("td",By,Ie(k.subscribers),1),j("td",Ry,Ie(k.deliveryInfo),1),j("td",jy,Ie(k.activeAdds),1),j("td",Ky,Ie(k.completedAdds||fe(Ye).InfoNotFound),1)]))),256))])):(se(),me("div",Uy,"  "))])):Be("",!0)],2)}),128)):(se(),me("div",Vy,"  ")),t.value?(se(),_t(bc,{key:3,onClose:l},{default:$t(()=>[n.value?(se(),me("div",Hy,[j("form",{onSubmit:S[1]||(S[1]=ut(P=>h(n.value),["prevent"]))},[j("div",qy,Ie(n.value.name),1),j("div",Yy,[Jy,Cn(j("input",{"onUpdate:modelValue":S[0]||(S[0]=P=>n.value.comment=P),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Sn,n.value.comment]])]),j("div",null,[ot(Bt,{type:"submit",theme:"success"},{default:$t(()=>[Ht("")]),_:1})])],32)])):Be("",!0)]),_:1})):Be("",!0)],64))}}),zy=j("div",{class:"grid grid-cols-4"},[j("div",{class:"col-span-2"},[j("div",{class:"mb-2 text-sm font-medium"}," "),j("input",{tabindex:"2",required:"",autocomplete:"off",type:"search",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"})])],-1),Gy=[zy],Xy=nn({__name:"ProfilesFilter",setup(e){async function t(){}return(n,r)=>(se(),me("form",{onSubmit:r[0]||(r[0]=ut(i=>t(),["prevent"]))},Gy,32))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Mn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(h){try{c(r.next(h))}catch(m){o(m)}}function u(h){try{c(r.throw(h))}catch(m){o(m)}}function c(h){h.done?s(h.value):i(h.value).then(l,u)}c((r=r.apply(e,t||[])).next())})}function Xt(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Qy(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function Zy(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function wc(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function xc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var os=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(K)}function r(K,z,J,X,D,a,f){try{var p=K[a](f),y=p.value}catch(v){J(v);return}p.done?z(y):Promise.resolve(y).then(X,D)}function i(K){return function(){var z=this,J=arguments;return new Promise(function(X,D){var a=K.apply(z,J);function f(y){r(a,X,D,f,p,"next",y)}function p(y){r(a,X,D,f,p,"throw",y)}f(void 0)})}}function s(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function o(K,z){for(var J=0;J<z.length;J++){var X=z[J];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,z,J){return z&&o(K.prototype,z),J&&o(K,J),K}function u(K,z,J){return z in K?Object.defineProperty(K,z,{value:J,enumerable:!0,configurable:!0,writable:!0}):K[z]=J,K}function c(K,z){var J=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);z&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),J.push.apply(J,X)}return J}function h(K){for(var z=1;z<arguments.length;z++){var J=arguments[z]!=null?arguments[z]:{};z%2?c(Object(J),!0).forEach(function(X){u(K,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(J)):c(Object(J)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(J,X))})}return K}function m(K,z){return P(K)||B(K,z)||E()}function x(K){return S(K)||T(K)||M()}function S(K){if(Array.isArray(K)){for(var z=0,J=new Array(K.length);z<K.length;z++)J[z]=K[z];return J}}function P(K){if(Array.isArray(K))return K}function T(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function B(K,z){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var J=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(J.push(p.value),!(z&&J.length===z));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return J}}function M(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $=function K(z){s(this,K),this.p=new Promise(z)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(K,z){var J=this;return new $(function(X,D){J.p.then(function(a){X(K?K(a):a)}).catch(function(a){return z?z(a):Promise.reject(a)}).then(X,D)})},$.prototype.catch=function(K){return this.then(null,K)},$.resolve=function(K){return new $(function(z){z(K)})},$.reject=function(K){return new $(function(z,J){J(K)})},["all","race"].forEach(function(K){$[K]=function(z){return new $(function(J,X){Promise[K](z.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(J,X)})}});var I={},U=I.toString,Y={}.hasOwnProperty,H=Object.getPrototypeOf,ne=Y.toString;function k(K,z){return le(K)&&typeof K.then=="function"&&(!z||typeof K.catch=="function")}function _(K){return U.call(K).slice(8,-1)}function V(K,z){if(!K||n(K)!=="object")return!1;var J=H(K);if(!J)return z===null;var X=Y.call(J,"constructor")&&J.constructor;return typeof X!="function"?z===null:z===X||z!==null&&ne.call(X)===ne.call(z)||typeof z=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===z.__typeson__type__}function R(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object):!0}function _e(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?V(K,Object)||_e(z):!0}function le(K){return K&&n(K)==="object"}function Pe(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function be(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function de(K,z){if(z==="")return K;var J=z.indexOf(".");if(J>-1){var X=K[be(z.slice(0,J))];return X===void 0?void 0:de(X,z.slice(J+1))}return K[be(z)]}function ae(K,z,J){if(z==="")return J;var X=z.indexOf(".");if(X>-1){var D=K[be(z.slice(0,X))];return ae(D,z.slice(X+1),J)}return K[be(z)]=J,K}function Je(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var He=Object.keys,nt=Array.isArray,Ue={}.hasOwnProperty,Nt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ge(K,z){if(K.keypath==="")return-1;var J=K.keypath.match(/\./g)||0,X=z.keypath.match(/\./g)||0;return J&&(J=J.length),X&&(X=X.length),J>X?-1:J<X?1:K.keypath<z.keypath?-1:K.keypath>z.keypath}var ue=function(){function K(z){s(this,K),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(J,X,D,a){a=h({},this.options,{},a,{stringification:!0});var f=this.encapsulate(J,null,a);return nt(f)?JSON.stringify(f[0],X,D):f.then(function(p){return JSON.stringify(p,X,D)})}},{key:"stringifySync",value:function(J,X,D,a){return this.stringify(J,X,D,h({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(J,X,D,a){return this.stringify(J,X,D,h({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(J,X,D){return D=h({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(J,X),D)}},{key:"parseSync",value:function(J,X,D){return this.parse(J,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(J,X,D){return this.parse(J,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(J,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(J,X,D)}},{key:"rootTypeName",value:function(J,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(J,X,D)}},{key:"encapsulate",value:function(J,X,D){D=h({sync:!0},this.options,{},D);var a=D,f=a.sync,p=this,y={},v=[],w=[],C=[],A="cyclic"in D?D.cyclic:!0,F=D,L=F.encapsulateObserver,W=he("",J,A,X||{},C);function q(te){var g=Object.values(y);if(D.iterateNone)return g.length?g[0]:K.getJSONType(te);if(g.length){if(D.returnTypeNames)return x(new Set(g));!te||!R(te)||Ue.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else le(te)&&Ue.call(te,"$types")&&(te={$:te,$types:!0});return D.returnTypeNames?!1:te}function G(te,g){return Z.apply(this,arguments)}function Z(){return Z=i(regeneratorRuntime.mark(function te(g,d){var b;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Promise.all(d.map(function(Q){return Q[1].p}));case 2:return b=N.sent,N.next=5,Promise.all(b.map(function(){var Q=i(regeneratorRuntime.mark(function ee(ye){var oe,Ce,$e,Ne,We,Ke,Re,Xe,Qe,Ee,mt,pe,re,ke;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(oe=[],Ce=d.splice(0,1),$e=m(Ce,1),Ne=$e[0],We=m(Ne,7),Ke=We[0],Re=We[2],Xe=We[3],Qe=We[4],Ee=We[5],mt=We[6],pe=he(Ke,ye,Re,Xe,oe,!0,mt),re=V(pe,$),!(Ke&&re)){De.next=11;break}return De.next=8,pe.p;case 8:return ke=De.sent,Qe[Ee]=ke,De.abrupt("return",G(g,oe));case 11:return Ke?Qe[Ee]=pe:re?g=pe.p:g=pe,De.abrupt("return",G(g,oe));case 13:case"end":return De.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return N.abrupt("return",g);case 6:case"end":return N.stop()}},te)})),Z.apply(this,arguments)}function ie(te,g,d){Object.assign(te,g);var b=Nt.map(function(O){var N=te[O];return delete te[O],N});d(),Nt.forEach(function(O,N){te[O]=b[N]})}function he(te,g,d,b,O,N,Q){var ee,ye={},oe=n(g),Ce=L?function(re){var ke=Q||b.type||K.getJSONType(g);L(Object.assign(re||ye,{keypath:te,value:g,cyclic:d,stateObj:b,promisesData:O,resolvingTypesonPromise:N,awaitingTypesonPromise:V(g,$)},{type:ke}))}:null;if(["string","boolean","number","undefined"].includes(oe))return g===void 0||oe==="number"&&(isNaN(g)||g===-1/0||g===1/0)?(b.replaced?ee=g:ee=ve(te,g,b,O,!1,N,Ce),ee!==g&&(ye={replaced:ee})):ee=g,Ce&&Ce(),ee;if(g===null)return Ce&&Ce(),g;if(d&&!b.iterateIn&&!b.iterateUnsetNumeric&&g&&n(g)==="object"){var $e=v.indexOf(g);if($e<0)d===!0&&(v.push(g),w.push(te));else return y[te]="#",Ce&&Ce({cyclicKeypath:w[$e]}),"#"+w[$e]}var Ne=R(g),We=nt(g),Ke=(Ne||We)&&(!p.plainObjectReplacers.length||b.replaced)||b.iterateIn?g:ve(te,g,b,O,Ne||We,null,Ce),Re;if(Ke!==g?(ee=Ke,ye={replaced:Ke}):te===""&&V(g,$)?(O.push([te,g,d,b,void 0,void 0,b.type]),ee=g):We&&b.iterateIn!=="object"||b.iterateIn==="array"?(Re=new Array(g.length),ye={clone:Re}):!["function","symbol"].includes(n(g))&&!("toJSON"in g)&&!V(g,$)&&!V(g,Promise)&&!V(g,ArrayBuffer)||Ne||b.iterateIn==="object"?(Re={},b.addLength&&(Re.length=g.length),ye={clone:Re}):ee=g,Ce&&Ce(),D.iterateNone)return Re||ee;if(!Re)return ee;if(b.iterateIn){var Xe=function(ke){var we={ownKeys:Ue.call(g,ke)};ie(b,we,function(){var De=te+(te?".":"")+Pe(ke),Fe=he(De,g[ke],!!d,b,O,N);V(Fe,$)?O.push([De,Fe,!!d,b,Re,ke,b.type]):Fe!==void 0&&(Re[ke]=Fe)})};for(var Qe in g)Xe(Qe);Ce&&Ce({endIterateIn:!0,end:!0})}else He(g).forEach(function(re){var ke=te+(te?".":"")+Pe(re),we={ownKeys:!0};ie(b,we,function(){var De=he(ke,g[re],!!d,b,O,N);V(De,$)?O.push([ke,De,!!d,b,Re,re,b.type]):De!==void 0&&(Re[re]=De)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(b.iterateUnsetNumeric){for(var Ee=g.length,mt=function(ke){if(!(ke in g)){var we=te+(te?".":"")+ke,De={ownKeys:!1};ie(b,De,function(){var Fe=he(we,void 0,!!d,b,O,N);V(Fe,$)?O.push([we,Fe,!!d,b,Re,ke,b.type]):Fe!==void 0&&(Re[ke]=Fe)})}},pe=0;pe<Ee;pe++)mt(pe);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return Re}function ve(te,g,d,b,O,N,Q){for(var ee=O?p.plainObjectReplacers:p.nonplainObjectReplacers,ye=ee.length;ye--;){var oe=ee[ye];if(oe.test(g,d)){var Ce=oe.type;if(p.revivers[Ce]){var $e=y[te];y[te]=$e?[Ce].concat($e):Ce}if(Object.assign(d,{type:Ce,replaced:!0}),(f||!oe.replaceAsync)&&!oe.replace)return Q&&Q({typeDetected:!0}),he(te,g,A&&"readonly",d,b,N,Ce);Q&&Q({replacing:!0});var Ne=f||!oe.replaceAsync?"replace":"replaceAsync";return he(te,oe[Ne](g,d),A&&"readonly",d,b,N,Ce)}}return g}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(W,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(W)]:f?q(W):Promise.resolve(q(W))}},{key:"encapsulateSync",value:function(J,X,D){return this.encapsulate(J,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(J,X,D){return this.encapsulate(J,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(J,X){var D=J&&J.$types;if(!D)return J;if(D===!0)return J.$;X=h({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},v=!0;D.$&&R(D.$)&&(J=J.$,D=D.$,v=!1);var w=this;function C(Z,ie){var he=w.revivers[Z]||[],ve=m(he,1),te=ve[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?ie:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](ie,y)}function A(){var Z=[];if(Object.entries(D).forEach(function(ie){var he=m(ie,2),ve=he[0],te=he[1];te!=="#"&&[].concat(te).forEach(function(g){var d=w.revivers[g]||[null,{}],b=m(d,2),O=b[1].plain;O&&(Z.push({keypath:ve,type:g}),delete D[ve])})}),!!Z.length)return Z.sort(ge).reduce(function ie(he,ve){var te=ve.keypath,g=ve.type;if(k(he))return he.then(function(O){return ie(O,{keypath:te,type:g})});var d=de(J,te);if(d=C(g,d),V(d,$))return d.then(function(O){var N=ae(J,te,O);N===O&&(J=N)});var b=ae(J,te,d);b===d&&(J=b)},void 0)}var F=[];function L(Z,ie,he,ve,te){if(!(v&&Z==="$types")){var g=D[Z],d=nt(ie);if(d||R(ie)){var b=d?new Array(ie.length):{};for(He(ie).forEach(function($e){var Ne=L(Z+(Z?".":"")+Pe($e),ie[$e],he||b,b,$e),We=function(Re){return V(Re,Le)?b[$e]=void 0:Re!==void 0&&(b[$e]=Re),Re};V(Ne,$)?F.push(Ne.then(function(Ke){return We(Ke)})):We(Ne)}),ie=b;p.length;){var O=m(p[0],4),N=O[0],Q=O[1],ee=O[2],ye=O[3],oe=de(N,Q);if(oe!==void 0)ee[ye]=oe;else break;p.splice(0,1)}}if(!g)return ie;if(g==="#"){var Ce=de(he,ie.slice(1));return Ce===void 0&&p.push([he,ie.slice(1),ve,te]),Ce}return[].concat(g).reduce(function $e(Ne,We){return V(Ne,$)?Ne.then(function(Ke){return $e(Ke,We)}):C(We,Ne)},ie)}}function W(Z){return V(Z,Le)?void 0:Z}var q=A(),G;return V(q,$)?G=q.then(function(){return J}):(G=L("",J,null),F.length&&(G=$.resolve(G).then(function(Z){return $.all([Z].concat(F))}).then(function(Z){var ie=m(Z,1),he=ie[0];return he}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(G,$)?G.p.then(W):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?W(G):Promise.resolve(W(G))}},{key:"reviveSync",value:function(J,X){return this.revive(J,h({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(J,X){return this.revive(J,h({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(J,X){return X=X||{},[].concat(J).forEach(function D(a){var f=this;if(nt(a))return a.map(function(p){return D.call(f,p)});a&&He(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],v=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,w=v.filter(function(he){return he.type===p});if(w.length&&(v.splice(v.indexOf(w[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var C=y;y={test:function(ve){return ve&&ve.constructor===C},replace:function(ve){return h({},ve)},revive:function(ve){return Object.assign(Object.create(C.prototype),ve)}}}else if(nt(y)){var A=y,F=m(A,3),L=F[0],W=F[1],q=F[2];y={test:L,replace:W,revive:q}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var ie={};y.revive&&(ie.revive=y.revive.bind(y)),y.reviveAsync&&(ie.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[ie,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Le=function K(){s(this,K)};return Le.__typeson__type__="TypesonUndefined",ue.Undefined=Le,ue.Promise=$,ue.isThenable=k,ue.toStringTag=_,ue.hasConstructorOf=V,ue.isObject=le,ue.isPlainObject=R,ue.isUserObject=_e,ue.escapeKeyPathComponent=Pe,ue.unescapeKeyPathComponent=be,ue.getByKeyPath=de,ue.getJSONType=Je,ue.JSON_TYPES=["null","boolean","number","string","array","object"],ue})}),em=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function r(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function i(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function s(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function o(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,O)}return b}function l(g){return function(b){if(Array.isArray(b))return u(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||function(b,O){if(b){if(typeof b=="string")return u(b,O);var N=Object.prototype.toString.call(b).slice(8,-1);if(N==="Object"&&b.constructor&&(N=b.constructor.name),N==="Map"||N==="Set")return Array.from(b);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return u(b,O)}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(g)}function h(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function m(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function x(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function S(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,O)}return b}function P(g){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?S(Object(b),!0).forEach(function(O){x(g,O,b[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(b)):S(Object(b)).forEach(function(O){Object.defineProperty(g,O,Object.getOwnPropertyDescriptor(b,O))})}return g}function T(g,d){return function(O){if(Array.isArray(O))return O}(g)||function(O,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var Q=[],ee=!0,ye=!1,oe=void 0;try{for(var Ce,$e=O[Symbol.iterator]();!(ee=(Ce=$e.next()).done)&&(Q.push(Ce.value),!N||Q.length!==N);ee=!0);}catch(Ne){ye=!0,oe=Ne}finally{try{ee||$e.return==null||$e.return()}finally{if(ye)throw oe}}return Q}}(g,d)||M(g,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(g){return function(b){if(Array.isArray(b))return E(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||M(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M(g,d){if(g){if(typeof g=="string")return E(g,d);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?E(g,d):void 0}}function E(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}var $=function g(d){h(this,g),this.p=new Promise(d)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(g,d){var b=this;return new $(function(O,N){b.p.then(function(Q){O(g?g(Q):Q)}).catch(function(Q){return d?d(Q):Promise.reject(Q)}).then(O,N)})},$.prototype.catch=function(g){return this.then(null,g)},$.resolve=function(g){return new $(function(d){d(g)})},$.reject=function(g){return new $(function(d,b){b(g)})},["all","race"].forEach(function(g){$[g]=function(d){return new $(function(b,O){Promise[g](d.map(function(N){return N&&N.constructor&&N.constructor.__typeson__type__==="TypesonPromise"?N.p:N})).then(b,O)})}});var I={}.toString,U={}.hasOwnProperty,Y=Object.getPrototypeOf,H=U.toString;function ne(g,d){return R(g)&&typeof g.then=="function"&&(!d||typeof g.catch=="function")}function k(g){return I.call(g).slice(8,-1)}function _(g,d){if(!g||c(g)!=="object")return!1;var b=Y(g);if(!b)return d===null;var O=U.call(b,"constructor")&&b.constructor;return typeof O!="function"?d===null:d===O||d!==null&&H.call(O)===H.call(d)||typeof d=="function"&&typeof O.__typeson__type__=="string"&&O.__typeson__type__===d.__typeson__type__}function V(g){return!(!g||k(g)!=="Object")&&(!Y(g)||_(g,Object))}function R(g){return g&&c(g)==="object"}function _e(g){return g.replace(/~/g,"~0").replace(/\./g,"~1")}function le(g){return g.replace(/~1/g,".").replace(/~0/g,"~")}function Pe(g,d){if(d==="")return g;var b=d.indexOf(".");if(b>-1){var O=g[le(d.slice(0,b))];return O===void 0?void 0:Pe(O,d.slice(b+1))}return g[le(d)]}function be(g,d,b){if(d==="")return b;var O=d.indexOf(".");return O>-1?be(g[le(d.slice(0,O))],d.slice(O+1),b):(g[le(d)]=b,g)}function de(g,d,b){return b?d?d(g):g:(g&&g.then||(g=Promise.resolve(g)),d?g.then(d):g)}var ae=Object.keys,Je=Array.isArray,He={}.hasOwnProperty,nt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ue(g){return function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];try{return Promise.resolve(g.apply(this,d))}catch(O){return Promise.reject(O)}}}function Nt(g,d){if(g.keypath==="")return-1;var b=g.keypath.match(/\./g)||0,O=d.keypath.match(/\./g)||0;return b&&(b=b.length),O&&(O=O.length),b>O?-1:b<O?1:g.keypath<d.keypath?-1:g.keypath>d.keypath}var ge=function(){function g(d){h(this,g),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(b,O,N){return O&&m(b.prototype,O),N&&m(b,N),b}(g,[{key:"stringify",value:function(b,O,N,Q){Q=P(P(P({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(b,null,Q);return Je(ee)?JSON.stringify(ee[0],O,N):ee.then(function(ye){return JSON.stringify(ye,O,N)})}},{key:"stringifySync",value:function(b,O,N,Q){return this.stringify(b,O,N,P(P({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(b,O,N,Q){return this.stringify(b,O,N,P(P({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(b,O,N){return N=P(P(P({},this.options),N),{},{parse:!0}),this.revive(JSON.parse(b,O),N)}},{key:"parseSync",value:function(b,O,N){return this.parse(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"parseAsync",value:function(b,O,N){return this.parse(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"specialTypeNames",value:function(b,O){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.returnTypeNames=!0,this.encapsulate(b,O,N)}},{key:"rootTypeName",value:function(b,O){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.iterateNone=!0,this.encapsulate(b,O,N)}},{key:"encapsulate",value:function(b,O,N){var Q=Ue(function(pe,re){return de(Promise.all(re.map(function(ke){return ke[1].p})),function(ke){return de(Promise.all(ke.map(Ue(function(we){var De=!1,Fe=[],Ft=T(re.splice(0,1),1),at=T(Ft[0],7),Pt=at[0],jt=at[2],ze=at[3],Kt=at[4],Ze=at[5],Lt=at[6],St=Ee(Pt,we,jt,ze,Fe,!0,Lt),qt=_(St,$);return function(as,li){var nr=as();return nr&&nr.then?nr.then(li):li(nr)}(function(){if(Pt&&qt)return de(St.p,function(Yt){return Kt[Ze]=Yt,De=!0,Q(pe,Fe)})},function(Yt){return De?Yt:(Pt?Kt[Ze]=St:pe=qt?St.p:St,Q(pe,Fe))})}))),function(){return pe})})}),ee=(N=P(P({sync:!0},this.options),N)).sync,ye=this,oe={},Ce=[],$e=[],Ne=[],We=!("cyclic"in N)||N.cyclic,Ke=N.encapsulateObserver,Re=Ee("",b,We,O||{},Ne);function Xe(pe){var re=Object.values(oe);if(N.iterateNone)return re.length?re[0]:g.getJSONType(pe);if(re.length){if(N.returnTypeNames)return B(new Set(re));pe&&V(pe)&&!He.call(pe,"$types")?pe.$types=oe:pe={$:pe,$types:{$:oe}}}else R(pe)&&He.call(pe,"$types")&&(pe={$:pe,$types:!0});return!N.returnTypeNames&&pe}function Qe(pe,re,ke){Object.assign(pe,re);var we=nt.map(function(De){var Fe=pe[De];return delete pe[De],Fe});ke(),nt.forEach(function(De,Fe){pe[De]=we[Fe]})}function Ee(pe,re,ke,we,De,Fe,Ft){var at,Pt={},jt=c(re),ze=Ke?function(wn){var Tt=Ft||we.type||g.getJSONType(re);Ke(Object.assign(wn||Pt,{keypath:pe,value:re,cyclic:ke,stateObj:we,promisesData:De,resolvingTypesonPromise:Fe,awaitingTypesonPromise:_(re,$)},{type:Tt}))}:null;if(["string","boolean","number","undefined"].includes(jt))return re===void 0||Number.isNaN(re)||re===Number.NEGATIVE_INFINITY||re===Number.POSITIVE_INFINITY?(at=we.replaced?re:mt(pe,re,we,De,!1,Fe,ze))!==re&&(Pt={replaced:at}):at=re,ze&&ze(),at;if(re===null)return ze&&ze(),re;if(ke&&!we.iterateIn&&!we.iterateUnsetNumeric&&re&&c(re)==="object"){var Kt=Ce.indexOf(re);if(!(Kt<0))return oe[pe]="#",ze&&ze({cyclicKeypath:$e[Kt]}),"#"+$e[Kt];ke===!0&&(Ce.push(re),$e.push(pe))}var Ze,Lt=V(re),St=Je(re),qt=(Lt||St)&&(!ye.plainObjectReplacers.length||we.replaced)||we.iterateIn?re:mt(pe,re,we,De,Lt||St,null,ze);if(qt!==re?(at=qt,Pt={replaced:qt}):pe===""&&_(re,$)?(De.push([pe,re,ke,we,void 0,void 0,we.type]),at=re):St&&we.iterateIn!=="object"||we.iterateIn==="array"?(Ze=new Array(re.length),Pt={clone:Ze}):(["function","symbol"].includes(c(re))||"toJSON"in re||_(re,$)||_(re,Promise)||_(re,ArrayBuffer))&&!Lt&&we.iterateIn!=="object"?at=re:(Ze={},we.addLength&&(Ze.length=re.length),Pt={clone:Ze}),ze&&ze(),N.iterateNone)return Ze||at;if(!Ze)return at;if(we.iterateIn){var Yt=function(Tt){var cn={ownKeys:He.call(re,Tt)};Qe(we,cn,function(){var Bn=pe+(pe?".":"")+_e(Tt),ci=Ee(Bn,re[Tt],!!ke,we,De,Fe);_(ci,$)?De.push([Bn,ci,!!ke,we,Ze,Tt,we.type]):ci!==void 0&&(Ze[Tt]=ci)})};for(var as in re)Yt(as);ze&&ze({endIterateIn:!0,end:!0})}else ae(re).forEach(function(wn){var Tt=pe+(pe?".":"")+_e(wn);Qe(we,{ownKeys:!0},function(){var cn=Ee(Tt,re[wn],!!ke,we,De,Fe);_(cn,$)?De.push([Tt,cn,!!ke,we,Ze,wn,we.type]):cn!==void 0&&(Ze[wn]=cn)})}),ze&&ze({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var li=re.length,nr=function(Tt){if(!(Tt in re)){var cn=pe+(pe?".":"")+Tt;Qe(we,{ownKeys:!1},function(){var Bn=Ee(cn,void 0,!!ke,we,De,Fe);_(Bn,$)?De.push([cn,Bn,!!ke,we,Ze,Tt,we.type]):Bn!==void 0&&(Ze[Tt]=Bn)})}},ls=0;ls<li;ls++)nr(ls);ze&&ze({endIterateUnsetNumeric:!0,end:!0})}return Ze}function mt(pe,re,ke,we,De,Fe,Ft){for(var at=De?ye.plainObjectReplacers:ye.nonplainObjectReplacers,Pt=at.length;Pt--;){var jt=at[Pt];if(jt.test(re,ke)){var ze=jt.type;if(ye.revivers[ze]){var Kt=oe[pe];oe[pe]=Kt?[ze].concat(Kt):ze}return Object.assign(ke,{type:ze,replaced:!0}),!ee&&jt.replaceAsync||jt.replace?(Ft&&Ft({replacing:!0}),Ee(pe,jt[ee||!jt.replaceAsync?"replace":"replaceAsync"](re,ke),We&&"readonly",ke,we,Fe,ze)):(Ft&&Ft({typeDetected:!0}),Ee(pe,re,We&&"readonly",ke,we,Fe,ze))}}return re}return Ne.length?ee&&N.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(Re,Ne)).then(Xe):!ee&&N.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():N.stringification&&ee?[Xe(Re)]:ee?Xe(Re):Promise.resolve(Xe(Re))}},{key:"encapsulateSync",value:function(b,O,N){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(b,O,N){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"revive",value:function(b,O){var N=b&&b.$types;if(!N)return b;if(N===!0)return b.$;var Q=(O=P(P({sync:!0},this.options),O)).sync,ee=[],ye={},oe=!0;N.$&&V(N.$)&&(b=b.$,N=N.$,oe=!1);var Ce=this;function $e(Xe,Qe){var Ee=T(Ce.revivers[Xe]||[],1)[0];if(!Ee)throw new Error("Unregistered type: "+Xe);return Q&&!("revive"in Ee)?Qe:Ee[Q&&Ee.revive?"revive":!Q&&Ee.reviveAsync?"reviveAsync":"revive"](Qe,ye)}var Ne=[];function We(Xe){return _(Xe,ue)?void 0:Xe}var Ke,Re=function(){var Qe=[];if(Object.entries(N).forEach(function(Ee){var mt=T(Ee,2),pe=mt[0],re=mt[1];re!=="#"&&[].concat(re).forEach(function(ke){T(Ce.revivers[ke]||[null,{}],2)[1].plain&&(Qe.push({keypath:pe,type:ke}),delete N[pe])})}),Qe.length)return Qe.sort(Nt).reduce(function Ee(mt,pe){var re=pe.keypath,ke=pe.type;if(ne(mt))return mt.then(function(Fe){return Ee(Fe,{keypath:re,type:ke})});var we=Pe(b,re);if(_(we=$e(ke,we),$))return we.then(function(Fe){var Ft=be(b,re,Fe);Ft===Fe&&(b=Ft)});var De=be(b,re,we);De===we&&(b=De)},void 0)}();return _(Re,$)?Ke=Re.then(function(){return b}):(Ke=function Xe(Qe,Ee,mt,pe,re){if(!oe||Qe!=="$types"){var ke=N[Qe],we=Je(Ee);if(we||V(Ee)){var De=we?new Array(Ee.length):{};for(ae(Ee).forEach(function(Ze){var Lt=Xe(Qe+(Qe?".":"")+_e(Ze),Ee[Ze],mt||De,De,Ze),St=function(Yt){return _(Yt,ue)?De[Ze]=void 0:Yt!==void 0&&(De[Ze]=Yt),Yt};_(Lt,$)?Ne.push(Lt.then(function(qt){return St(qt)})):St(Lt)}),Ee=De;ee.length;){var Fe=T(ee[0],4),Ft=Fe[0],at=Fe[1],Pt=Fe[2],jt=Fe[3],ze=Pe(Ft,at);if(ze===void 0)break;Pt[jt]=ze,ee.splice(0,1)}}if(!ke)return Ee;if(ke==="#"){var Kt=Pe(mt,Ee.slice(1));return Kt===void 0&&ee.push([mt,Ee.slice(1),pe,re]),Kt}return[].concat(ke).reduce(function Ze(Lt,St){return _(Lt,$)?Lt.then(function(qt){return Ze(qt,St)}):$e(St,Lt)},Ee)}}("",b,null),Ne.length&&(Ke=$.resolve(Ke).then(function(Xe){return $.all([Xe].concat(Ne))}).then(function(Xe){return T(Xe,1)[0]}))),ne(Ke)?Q&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(Ke,$)?Ke.p.then(We):Ke:!Q&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?We(Ke):Promise.resolve(We(Ke))}},{key:"reviveSync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"reviveAsync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"register",value:function(b,O){return O=O||{},[].concat(b).forEach(function N(Q){var ee=this;if(Je(Q))return Q.map(function(ye){return N.call(ee,ye)});Q&&ae(Q).forEach(function(ye){if(ye==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(ye))throw new TypeError("Plain JSON object types are reserved as type names");var oe=Q[ye],Ce=oe&&oe.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,$e=Ce.filter(function(Qe){return Qe.type===ye});if($e.length&&(Ce.splice(Ce.indexOf($e[0]),1),delete this.revivers[ye],delete this.types[ye]),typeof oe=="function"){var Ne=oe;oe={test:function(Ee){return Ee&&Ee.constructor===Ne},replace:function(Ee){return P({},Ee)},revive:function(Ee){return Object.assign(Object.create(Ne.prototype),Ee)}}}else if(Je(oe)){var We=T(oe,3);oe={test:We[0],replace:We[1],revive:We[2]}}if(oe&&oe.test){var Ke={type:ye,test:oe.test.bind(oe)};oe.replace&&(Ke.replace=oe.replace.bind(oe)),oe.replaceAsync&&(Ke.replaceAsync=oe.replaceAsync.bind(oe));var Re=typeof O.fallback=="number"?O.fallback:O.fallback?0:Number.POSITIVE_INFINITY;if(oe.testPlainObjects?this.plainObjectReplacers.splice(Re,0,Ke):this.nonplainObjectReplacers.splice(Re,0,Ke),oe.revive||oe.reviveAsync){var Xe={};oe.revive&&(Xe.revive=oe.revive.bind(oe)),oe.reviveAsync&&(Xe.reviveAsync=oe.reviveAsync.bind(oe)),this.revivers[ye]=[Xe,{plain:oe.testPlainObjects}]}this.types[ye]=oe}},this)},this),this}}]),g}(),ue=function g(){h(this,g)};ue.__typeson__type__="TypesonUndefined",ge.Undefined=ue,ge.Promise=$,ge.isThenable=ne,ge.toStringTag=k,ge.hasConstructorOf=_,ge.isObject=R,ge.isPlainObject=V,ge.isUserObject=function g(d){if(!d||k(d)!=="Object")return!1;var b=Y(d);return!b||_(d,Object)||g(b)},ge.escapeKeyPathComponent=_e,ge.unescapeKeyPathComponent=le,ge.getByKeyPath=Pe,ge.getJSONType=function(d){return d===null?"null":Array.isArray(d)?"array":c(d)},ge.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Le={userObject:{test:function(d,b){return ge.isUserObject(d)},replace:function(d){return function(O){for(var N=1;N<arguments.length;N++){var Q=arguments[N]!=null?arguments[N]:{};N%2?o(Object(Q),!0).forEach(function(ee){s(O,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(O,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return O}({},d)},revive:function(d){return d}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(d,b){return!!Array.isArray(d)&&(Object.keys(d).some(function(O){return String(Number.parseInt(O))!==O})&&(b.iterateIn="object",b.addLength=!0),!0)},replace:function(d,b){return b.iterateUnsetNumeric=!0,d},revive:function(d){if(Array.isArray(d))return d;var b=[];return Object.keys(d).forEach(function(O){var N=d[O];b[O]=N}),b}}},{sparseUndefined:{test:function(d,b){return d===void 0&&b.ownKeys===!1},replace:function(d){return 0},revive:function(d){}}}],z={undef:{test:function(d,b){return d===void 0&&(b.ownKeys||!("ownKeys"in b))},replace:function(d){return 0},revive:function(d){return new ge.Undefined}}},J={StringObject:{test:function(d){return ge.toStringTag(d)==="String"&&n(d)==="object"},replace:function(d){return String(d)},revive:function(d){return new String(d)}},BooleanObject:{test:function(d){return ge.toStringTag(d)==="Boolean"&&n(d)==="object"},replace:function(d){return!!d},revive:function(d){return new Boolean(d)}},NumberObject:{test:function(d){return ge.toStringTag(d)==="Number"&&n(d)==="object"},replace:function(d){return Number(d)},revive:function(d){return new Number(d)}}},X=[{nan:{test:function(d){return Number.isNaN(d)},replace:function(d){return"NaN"},revive:function(d){return Number.NaN}}},{infinity:{test:function(d){return d===Number.POSITIVE_INFINITY},replace:function(d){return"Infinity"},revive:function(d){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(d){return d===Number.NEGATIVE_INFINITY},replace:function(d){return"-Infinity"},revive:function(d){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(d){return ge.toStringTag(d)==="Date"},replace:function(d){var b=d.getTime();return Number.isNaN(b)?"NaN":b},revive:function(d){return d==="NaN"?new Date(Number.NaN):new Date(d)}}},a={regexp:{test:function(d){return ge.toStringTag(d)==="RegExp"},replace:function(d){return{source:d.source,flags:(d.global?"g":"")+(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.sticky?"y":"")+(d.unicode?"u":"")}},revive:function(d){var b=d.source,O=d.flags;return new RegExp(b,O)}}},f={map:{test:function(d){return ge.toStringTag(d)==="Map"},replace:function(d){return l(d.entries())},revive:function(d){return new Map(d)}}},p={set:{test:function(d){return ge.toStringTag(d)==="Set"},replace:function(d){return l(d.values())},revive:function(d){return new Set(d)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Uint8Array(256),w=0;w<y.length;w++)v[y.charCodeAt(w)]=w;var C=function(d,b,O){O==null&&(O=d.byteLength);for(var N=new Uint8Array(d,b||0,O),Q=N.length,ee="",ye=0;ye<Q;ye+=3)ee+=y[N[ye]>>2],ee+=y[(3&N[ye])<<4|N[ye+1]>>4],ee+=y[(15&N[ye+1])<<2|N[ye+2]>>6],ee+=y[63&N[ye+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},A=function(d){var b,O,N,Q,ee=d.length,ye=.75*d.length,oe=0;d[d.length-1]==="="&&(ye--,d[d.length-2]==="="&&ye--);for(var Ce=new ArrayBuffer(ye),$e=new Uint8Array(Ce),Ne=0;Ne<ee;Ne+=4)b=v[d.charCodeAt(Ne)],O=v[d.charCodeAt(Ne+1)],N=v[d.charCodeAt(Ne+2)],Q=v[d.charCodeAt(Ne+3)],$e[oe++]=b<<2|O>>4,$e[oe++]=(15&O)<<4|N>>2,$e[oe++]=(3&N)<<6|63&Q;return Ce},F={arraybuffer:{test:function(d){return ge.toStringTag(d)==="ArrayBuffer"},replace:function(d,b){b.buffers||(b.buffers=[]);var O=b.buffers.indexOf(d);return O>-1?{index:O}:(b.buffers.push(d),C(d))},revive:function(d,b){if(b.buffers||(b.buffers=[]),n(d)==="object")return b.buffers[d.index];var O=A(d);return b.buffers.push(O),O}}},L=typeof self>"u"?co:self,W={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(g){var d=g,b=L[d];b&&(W[g.toLowerCase()]={test:function(N){return ge.toStringTag(N)===d},replace:function(N,Q){var ee=N.buffer,ye=N.byteOffset,oe=N.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:ye,length:oe}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:ye,length:oe})},revive:function(N,Q){Q.buffers||(Q.buffers=[]);var ee,ye=N.byteOffset,oe=N.length,Ce=N.encoded,$e=N.index;return"index"in N?ee=Q.buffers[$e]:(ee=A(Ce),Q.buffers.push(ee)),new b(ee,ye,oe)}})});var q={dataview:{test:function(d){return ge.toStringTag(d)==="DataView"},replace:function(d,b){var O=d.buffer,N=d.byteOffset,Q=d.byteLength;b.buffers||(b.buffers=[]);var ee=b.buffers.indexOf(O);return ee>-1?{index:ee,byteOffset:N,byteLength:Q}:(b.buffers.push(O),{encoded:C(O),byteOffset:N,byteLength:Q})},revive:function(d,b){b.buffers||(b.buffers=[]);var O,N=d.byteOffset,Q=d.byteLength,ee=d.encoded,ye=d.index;return"index"in d?O=b.buffers[ye]:(O=A(ee),b.buffers.push(O)),new DataView(O,N,Q)}}},G={IntlCollator:{test:function(d){return ge.hasConstructorOf(d,Intl.Collator)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.Collator(d.locale,d)}},IntlDateTimeFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.DateTimeFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.DateTimeFormat(d.locale,d)}},IntlNumberFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.NumberFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.NumberFormat(d.locale,d)}}};function Z(g){for(var d=new Uint8Array(g.length),b=0;b<g.length;b++)d[b]=g.charCodeAt(b);return d.buffer}var ie={file:{test:function(d){return ge.toStringTag(d)==="File"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad File access: "+b.status);return{type:d.type,stringContents:b.responseText,name:d.name,lastModified:d.lastModified}},revive:function(d){var b=d.name,O=d.type,N=d.stringContents,Q=d.lastModified;return new File([Z(N)],b,{type:O,lastModified:Q})},replaceAsync:function(d){return new ge.Promise(function(b,O){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result,name:d.name,lastModified:d.lastModified})}),N.addEventListener("error",function(){O(N.error)}),N.readAsBinaryString(d)})}}},he={bigint:{test:function(d){return typeof d=="bigint"},replace:function(d){return String(d)},revive:function(d){return BigInt(d)}}},ve={bigintObject:{test:function(d){return n(d)==="object"&&ge.hasConstructorOf(d,BigInt)},replace:function(d){return String(d)},revive:function(d){return new Object(BigInt(d))}}},te={cryptokey:{test:function(d){return ge.toStringTag(d)==="CryptoKey"&&d.extractable},replaceAsync:function(d){return new ge.Promise(function(b,O){crypto.subtle.exportKey("jwk",d).catch(function(N){O(N)}).then(function(N){b({jwk:N,algorithm:d.algorithm,usages:d.usages})})})},revive:function(d){var b=d.jwk,O=d.algorithm,N=d.usages;return crypto.subtle.importKey("jwk",b,O,!0,N)}}};return[Le,z,K,J,X,D,a,{imagedata:{test:function(d){return ge.toStringTag(d)==="ImageData"},replace:function(d){return{array:l(d.data),width:d.width,height:d.height}},revive:function(d){return new ImageData(new Uint8ClampedArray(d.array),d.width,d.height)}}},{imagebitmap:{test:function(d){return ge.toStringTag(d)==="ImageBitmap"||d&&d.dataset&&d.dataset.toStringTag==="ImageBitmap"},replace:function(d){var b=document.createElement("canvas");return b.getContext("2d").drawImage(d,0,0),b.toDataURL()},revive:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){O.drawImage(N,0,0)}),N.src=d,b},reviveAsync:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){O.drawImage(N,0,0)}),N.src=d,createImageBitmap(b)}}},ie,{file:ie.file,filelist:{test:function(d){return ge.toStringTag(d)==="FileList"},replace:function(d){for(var b=[],O=0;O<d.length;O++)b[O]=d.item(O);return b},revive:function(d){return new(function(){function b(){r(this,b),this._files=arguments[0],this.length=this._files.length}return function(N,Q,ee){return Q&&i(N.prototype,Q),ee&&i(N,ee),N}(b,[{key:"item",value:function(N){return this._files[N]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),b}())(d)}}},{blob:{test:function(d){return ge.toStringTag(d)==="Blob"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad Blob access: "+b.status);return{type:d.type,stringContents:b.responseText}},revive:function(d){var b=d.type,O=d.stringContents;return new Blob([Z(O)],{type:b})},replaceAsync:function(d){return new ge.Promise(function(b,O){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result})}),N.addEventListener("error",function(){O(N.error)}),N.readAsBinaryString(d)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?F:[],typeof Uint8Array=="function"?W:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[he,ve]:[])})}),cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr=new Uint8Array(256);for(var ki=0;ki<cr.length;ki++)Lr[cr.codePointAt(ki)]=ki;var uo=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),s=i.length,o="",l=0;l<s;l+=3)o+=cr[i[l]>>2],o+=cr[(i[l]&3)<<4|i[l+1]>>4],o+=cr[(i[l+1]&15)<<2|i[l+2]>>6],o+=cr[i[l+2]&63];return s%3===2?o=o.slice(0,-1)+"=":s%3===1&&(o=o.slice(0,-2)+"=="),o},kc=function(t){var n=t.length,r=t.length*.75,i=0,s,o,l,u;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),h=new Uint8Array(c),m=0;m<n;m+=4)s=Lr[t.codePointAt(m)],o=Lr[t.codePointAt(m+1)],l=Lr[t.codePointAt(m+2)],u=Lr[t.codePointAt(m+3)],h[i++]=s<<2|o>>4,h[i++]=(o&15)<<4|l>>2,h[i++]=(l&3)<<6|u&63;return c},tm=typeof self>"u"?global:self,Cc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=tm[t];n&&(Cc[e.toLowerCase()+"2"]={test:function(r){return os.toStringTag(r)===t},replace:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return{buffer:i,byteOffset:s,length:o}},revive:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return new n(i,s,o)}})});var nm={arraybuffer:{test:function(e){return os.toStringTag(e)==="ArrayBuffer"},replace:function(e){return uo(e,0,e.byteLength)},revive:function(e){var t=kc(e);return t}}},Vt=new os().register(em),rm="FileReaderSync"in self,Wi=[],Cs=0;Vt.register([nm,Cc,{blob2:{test:function(e){return os.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(rm){var t=xc(e,"binary"),n=uo(t,0,t.byteLength);return{type:e.type,data:n}}else{Wi.push(e);var r={type:e.type,data:{start:Cs,end:Cs+e.size}};return Cs+=e.size,r}},finalize:function(e,t){e.data=uo(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([kc(n)],{type:t})}}}]);Vt.mustFinalize=function(){return Wi.length>0};Vt.finalize=function(e){return Mn(void 0,void 0,void 0,function(){var t,n,r,i,s,o,l,u,c,h;return Xt(this,function(m){switch(m.label){case 0:return[4,wc(new Blob(Wi),"binary")];case 1:if(t=m.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,o=s.$,o&&(s=s.$);for(l in s)u=s[l],c=Vt.types[u],c&&c.finalize&&(h=ct.getByKeyPath(i,o?"$."+l:l),c.finalize(h,t.slice(h.start,h.end)))}}return Wi=[],[2]}})})};var im=2e3;function Dc(e,t){return Mn(this,void 0,void 0,function(){function n(){return Mn(this,void 0,void 0,function(){var c,h,m,x,S,P,T,B,M;return Xt(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function($){return $.count()}))];case 1:c=E.sent(),c.forEach(function($,I){return i[I].rowCount=$}),u.totalRows=c.reduce(function($,I){return $+I}),h=JSON.stringify(o,void 0,s?2:void 0),m=h.lastIndexOf("]"),x=h.substring(0,m),r.push(x),S=t.filter,P=function($){var I,U,Y,H,ne,k,_,V,R,_e,le,Pe;return Xt(this,function(be){switch(be.label){case 0:I=e.table($),U=I.schema.primKey,Y=!!U.keyPath,H=t.numRowsPerChunk||im,ne=Y?{tableName:I.name,inbound:!0,rows:[]}:{tableName:I.name,inbound:!1,rows:[]},k=JSON.stringify(ne,void 0,s?2:void 0),s&&(k=k.split(`
`).join(`
    `)),_=k.lastIndexOf("]"),r.push(k.substring(0,_)),V=null,R=0,_e=!0,le=function(){var de,ae,Je,He,ge,nt,Ue,Nt,ge;return Xt(this,function(ue){switch(ue.label){case 0:return l&&ct.ignoreTransaction(function(){return l(u)}),de=V==null?I.limit(H):I.where(":id").above(V).limit(H),[4,de.toArray()];case 1:return ae=ue.sent(),ae.length===0?[2,"break"]:(V!=null&&R>0&&(r.push(","),s&&r.push(`
      `)),_e=ae.length===H,Y?(Je=S?ae.filter(function(Le){return S($,Le)}):ae,He=Je.map(function(Le){return Vt.encapsulate(Le)}),Vt.mustFinalize()?[4,ct.waitFor(Vt.finalize(He))]:[3,3]):[3,4]);case 2:ue.sent(),ue.label=3;case 3:return ge=JSON.stringify(He,void 0,s?2:void 0),s&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),R=Je.length,V=ae.length>0?ct.getByKeyPath(ae[ae.length-1],U.keyPath):null,[3,8];case 4:return[4,de.primaryKeys()];case 5:return nt=ue.sent(),Ue=nt.map(function(Le,K){return[Le,ae[K]]}),S&&(Ue=Ue.filter(function(Le){var K=Le[0],z=Le[1];return S($,z,K)})),Nt=Ue.map(function(Le){return Vt.encapsulate(Le)}),Vt.mustFinalize()?[4,ct.waitFor(Vt.finalize(Nt))]:[3,7];case 6:ue.sent(),ue.label=7;case 7:ge=JSON.stringify(Nt,void 0,s?2:void 0),s&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),R=Ue.length,V=nt.length>0?nt[nt.length-1]:null,ue.label=8;case 8:return u.completedRows+=ae.length,[2]}})},be.label=1;case 1:return _e?[5,le()]:[3,3];case 2:return Pe=be.sent(),Pe==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(_)),u.completedTables+=1,u.completedTables<u.totalTables&&r.push(","),[2]}})},T=0,B=i,E.label=2;case 2:return T<B.length?(M=B[T].name,[5,P(M)]):[3,5];case 3:E.sent(),E.label=4;case 4:return T++,[3,2];case 5:return r.push(h.substr(m)),u.done=!0,l&&ct.ignoreTransaction(function(){return l(u)}),[2]}})})}var r,i,s,o,l,u;return Xt(this,function(c){switch(c.label){case 0:t=t||{},r=[],i=e.tables.map(function(h){return{name:h.name,schema:Qy(h),rowCount:0}}),s=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},l=t.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return Vt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var sm=1,om={Stream:function(){}},am=qo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new S(k)},n.CParser=S,n.CStream=T,n.createStream=P,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var u in n.STATE)n.STATE[n.STATE[u]]=u;o=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function _(){this.__proto__=k}return _.prototype=k,new _}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var _=[];for(var V in k)k.hasOwnProperty(V)&&_.push(V);return _});function h(k){var _=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var R in i){var _e=k[R]===void 0?0:k[R].length;if(_e>_)switch(R){case"text":closeText(k);break;default:U(k,"Max buffer length exceeded: "+R)}V=Math.max(V,_e)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+k.position}function m(k){for(var _ in i)k[_]=i[_]}var x=/[\\"\n]/g;function S(k){if(!(this instanceof S))return new S(k);var _=this;m(_),_.bufferCheckPosition=n.MAX_BUFFER_LENGTH,_.q=_.c=_.p="",_.opt=k||{},_.closed=_.closedRoot=_.sawRoot=!1,_.tag=_.error=null,_.state=o.BEGIN,_.stack=new Array,_.position=_.column=0,_.line=1,_.slashed=!1,_.unicodeI=0,_.unicodeS=null,_.depth=0,B(_,"onready")}S.prototype={end:function(){Y(this)},write:ne,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=om.Stream}catch{l=function(){}}function P(k){return new T(k)}function T(k){if(!(this instanceof T))return new T(k);this._parser=new S(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var _=this;l.apply(_),this._parser.onend=function(){_.emit("end")},this._parser.onerror=function(V){_.emit("error",V),_._parser.error=null},s.forEach(function(V){Object.defineProperty(_,"on"+V,{get:function(){return _._parser["on"+V]},set:function(R){if(!R)return _.removeAllListeners(V),_._parser["on"+V]=R,R;_.on(V,R)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(l.prototype,{constructor:{value:T}}),T.prototype.write=function(k){k=new Buffer(k);for(var _=0;_<k.length;_++){var V=k[_];if(this.bytes_remaining>0){for(var R=0;R<this.bytes_remaining;R++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+R]=k[R];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,_=_+R-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+_>k.length){for(var _e=0;_e<=k.length-1-_;_e++)this.temp_buffs[this.bytes_in_sequence][_e]=k[_+_e];return this.bytes_remaining=_+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(_,_+this.bytes_in_sequence).toString(),_=_+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var le=_;le<k.length&&!(k[le]>=128);le++);this.string=k.slice(_,le).toString(),this._parser.write(this.string),this.emit("data",this.string),_=le-1}},T.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},T.prototype.on=function(k,_){var V=this;return!V._parser["on"+k]&&s.indexOf(k)!==-1&&(V._parser["on"+k]=function(){var R=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);R.splice(0,0,k),V.emit.apply(V,R)}),l.prototype.on.call(V,k,_)},T.prototype.destroy=function(){m(this._parser),this.emit("close")};function B(k,_,V){n.INFO&&console.log("-- emit",_,V),k[_]&&k[_](V)}function M(k,_,V){E(k),B(k,_,V)}function E(k,_){k.textNode=I(k.opt,k.textNode),k.textNode!==void 0&&B(k,_||"onvalue",k.textNode),k.textNode=void 0}function $(k){k.numberNode&&B(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function I(k,_){return _===void 0||(k.trim&&(_=_.trim()),k.normalize&&(_=_.replace(/\s+/g," "))),_}function U(k,_){return E(k),_+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,_=new Error(_),k.error=_,B(k,"onerror",_),k}function Y(k){return(k.state!==o.VALUE||k.depth!==0)&&U(k,"Unexpected end"),E(k),k.c="",k.closed=!0,B(k,"onend"),S.call(k,k.opt),k}function H(k){return k===c.carriageReturn||k===c.lineFeed||k===c.space||k===c.tab}function ne(k){var _=this;if(this.error)throw this.error;if(_.closed)return U(_,"Cannot write after close. Assign an onready handler.");if(k===null)return Y(_);var V=0,R=k.charCodeAt(0),_e=_.p;for(n.DEBUG&&console.log("write -> ["+k+"]");R&&(_e=R,_.c=R=k.charCodeAt(V++),_e!==R?_.p=_e:_e=_.p,!!R);)switch(n.DEBUG&&console.log(V,R,n.STATE[_.state]),_.position++,R===c.lineFeed?(_.line++,_.column=0):_.column++,_.state){case o.BEGIN:R===c.openBrace?_.state=o.OPEN_OBJECT:R===c.openBracket?_.state=o.OPEN_ARRAY:H(R)||U(_,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(R))continue;if(_.state===o.OPEN_KEY)_.stack.push(o.CLOSE_KEY);else if(R===c.closeBrace){B(_,"onopenobject"),this.depth++,B(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_OBJECT);R===c.doubleQuote?_.state=o.STRING:U(_,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(R))continue;_.state,o.CLOSE_KEY,R===c.colon?(_.state===o.CLOSE_OBJECT?(_.stack.push(o.CLOSE_OBJECT),E(_,"onopenobject"),this.depth++):E(_,"onkey"),_.state=o.VALUE):R===c.closeBrace?(M(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE):R===c.comma?(_.state===o.CLOSE_OBJECT&&_.stack.push(o.CLOSE_OBJECT),E(_),_.state=o.OPEN_KEY):U(_,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(R))continue;if(_.state===o.OPEN_ARRAY)if(B(_,"onopenarray"),this.depth++,_.state=o.VALUE,R===c.closeBracket){B(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_ARRAY);R===c.doubleQuote?_.state=o.STRING:R===c.openBrace?_.state=o.OPEN_OBJECT:R===c.openBracket?_.state=o.OPEN_ARRAY:R===c.t?_.state=o.TRUE:R===c.f?_.state=o.FALSE:R===c.n?_.state=o.NULL:R===c.minus?_.numberNode+="-":c._0<=R&&R<=c._9?(_.numberNode+=String.fromCharCode(R),_.state=o.NUMBER_DIGIT):U(_,"Bad value");continue;case o.CLOSE_ARRAY:if(R===c.comma)_.stack.push(o.CLOSE_ARRAY),E(_,"onvalue"),_.state=o.VALUE;else if(R===c.closeBracket)M(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;else{if(H(R))continue;U(_,"Bad array")}continue;case o.STRING:_.textNode===void 0&&(_.textNode="");var le=V-1,Pe=_.slashed,be=_.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,R,n.STATE[_.state],Pe);be>0;)if(_.unicodeS+=String.fromCharCode(R),R=k.charCodeAt(V++),_.position++,be===4?(_.textNode+=String.fromCharCode(parseInt(_.unicodeS,16)),be=0,le=V-1):be++,!R)break e;if(R===c.doubleQuote&&!Pe){_.state=_.stack.pop()||o.VALUE,_.textNode+=k.substring(le,V-1),_.position+=V-1-le;break}if(R===c.backslash&&!Pe&&(Pe=!0,_.textNode+=k.substring(le,V-1),_.position+=V-1-le,R=k.charCodeAt(V++),_.position++,!R))break;if(Pe){if(Pe=!1,R===c.n?_.textNode+=`
`:R===c.r?_.textNode+="\r":R===c.t?_.textNode+="	":R===c.f?_.textNode+="\f":R===c.b?_.textNode+="\b":R===c.u?(be=1,_.unicodeS=""):_.textNode+=String.fromCharCode(R),R=k.charCodeAt(V++),_.position++,le=V-1,R)continue;break}x.lastIndex=V;var de=x.exec(k);if(de===null){V=k.length+1,_.textNode+=k.substring(le,V-1),_.position+=V-1-le;break}if(V=de.index+1,R=k.charCodeAt(de.index),!R){_.textNode+=k.substring(le,V-1),_.position+=V-1-le;break}}_.slashed=Pe,_.unicodeI=be;continue;case o.TRUE:R===c.r?_.state=o.TRUE2:U(_,"Invalid true started with t"+R);continue;case o.TRUE2:R===c.u?_.state=o.TRUE3:U(_,"Invalid true started with tr"+R);continue;case o.TRUE3:R===c.e?(B(_,"onvalue",!0),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid true started with tru"+R);continue;case o.FALSE:R===c.a?_.state=o.FALSE2:U(_,"Invalid false started with f"+R);continue;case o.FALSE2:R===c.l?_.state=o.FALSE3:U(_,"Invalid false started with fa"+R);continue;case o.FALSE3:R===c.s?_.state=o.FALSE4:U(_,"Invalid false started with fal"+R);continue;case o.FALSE4:R===c.e?(B(_,"onvalue",!1),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid false started with fals"+R);continue;case o.NULL:R===c.u?_.state=o.NULL2:U(_,"Invalid null started with n"+R);continue;case o.NULL2:R===c.l?_.state=o.NULL3:U(_,"Invalid null started with nu"+R);continue;case o.NULL3:R===c.l?(B(_,"onvalue",null),_.state=_.stack.pop()||o.VALUE):U(_,"Invalid null started with nul"+R);continue;case o.NUMBER_DECIMAL_POINT:R===c.period?(_.numberNode+=".",_.state=o.NUMBER_DIGIT):U(_,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:c._0<=R&&R<=c._9?_.numberNode+=String.fromCharCode(R):R===c.period?(_.numberNode.indexOf(".")!==-1&&U(_,"Invalid number has two dots"),_.numberNode+="."):R===c.e||R===c.E?((_.numberNode.indexOf("e")!==-1||_.numberNode.indexOf("E")!==-1)&&U(_,"Invalid number has two exponential"),_.numberNode+="e"):R===c.plus||R===c.minus?(_e===c.e||_e===c.E||U(_,"Invalid symbol in number"),_.numberNode+=String.fromCharCode(R)):($(_),V--,_.state=_.stack.pop()||o.VALUE);continue;default:U(_,"Unknown state: "+_.state)}return _.position>=_.bufferCheckPosition&&h(_),_}})(t)});function lm(e){var t=0,n=cm(!0),r={pullAsync:function(i){return Mn(this,void 0,void 0,function(){var s,o,l;return Xt(this,function(u){switch(u.label){case 0:return s=e.slice(t,t+i),t+=i,[4,wc(s,"text")];case 1:return o=u.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=xc(s,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function cm(e){var t=am.parser(),n=0,r,i=[],s,o,l=!1,u=!1;return t.onopenobject=function(c){var h={};h.incomplete=!0,r||(r=h),s&&(i.push([o,s,u]),e&&(u?s.push(h):s[o]=h)),s=h,o=c,u=!1,++n},t.onkey=function(c){return o=c},t.onvalue=function(c){return u?s.push(c):s[o]=c},t.oncloseobject=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var h=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(h):s[o]=h)}},t.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),s&&(i.push([o,s,u]),e&&(u?s.push(c):s[o]=c)),s=c,u=!0,o=null,++n},t.onclosearray=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var h=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(h):s[o]=h)}},{write:function(c){return t.write(c),r},done:function(){return l}}}var Sc=1024;function um(e,t){return Mn(this,void 0,void 0,function(){var n,r,i,s;return Xt(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Sc*1024,[4,Oc(e,n)];case 1:return r=o.sent(),i=r.result.data,s=new ct(i.databaseName),s.version(i.databaseVersion).stores(Zy(i)),[4,Tc(s,r,t)];case 2:return o.sent(),[2,s]}})})}function Tc(e,t,n){return Mn(this,void 0,void 0,function(){function r(){return Mn(this,void 0,void 0,function(){var P,T,B,M,E;return Xt(this,function($){switch($.label){case 0:P=function(I){var U,Y,H,ne,k,_,V,R,_e,le,Pe,be;return Xt(this,function(de){switch(de.label){case 0:if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(c&&ct.ignoreTransaction(function(){return c(h)}),U=I.tableName,Y=e.table(U),H=u.tables.filter(function(ae){return ae.name===U})[0].schema,!Y){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=Y.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(ne=I.rows,k=[],_=0;_<ne.length&&(V=ne[_],!V.incomplete);_++)k.push(Vt.revive(V));return R=n.filter,_e=R?I.inbound?k.filter(function(ae){return R(U,ae)}):k.filter(function(ae){var Je=ae[0],He=ae[1];return R(U,He,Je)}):k,le=I.inbound?[void 0,_e]:[_e.map(function(ae){return ae[0]}),k.map(function(ae){return ae[1]})],Pe=le[0],be=le[1],n.overwriteValues?[4,Y.bulkPut(be,Pe)]:[3,2];case 1:return de.sent(),[3,4];case 2:return[4,Y.bulkAdd(be,Pe)];case 3:de.sent(),de.label=4;case 4:return h.completedRows+=k.length,k.incomplete||(h.completedTables+=1),ne.splice(0,k.length),[2]}})},T=0,B=u.data,$.label=1;case 1:return T<B.length?(M=B[T],[5,P(M)]):[3,4];case 2:if(E=$.sent(),E==="break")return[3,4];$.label=3;case 3:return T++,[3,1];case 4:for(;u.data.length>0&&u.data[0].rows&&!u.data[0].rows.incomplete;)u.data.splice(0,1);return!s.done()&&!s.eof()?l?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,ct.waitFor(s.pullAsync(i))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,l,u,c,h,m,x,S;return Xt(this,function(P){switch(P.label){case 0:return n=n||{},i=n.chunkSizeBytes||Sc*1024,[4,Oc(t,i)];case 1:if(s=P.sent(),o=s.result,l="FileReaderSync"in self,u=o.data,!n.acceptNameDiff&&e.name!==u.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(u.databaseName));if(!n.acceptVersionDiff&&e.verno!==u.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(u.databaseVersion));if(c=n.progressCallback,h={done:!1,completedRows:0,completedTables:0,totalRows:u.tables.reduce(function(T,B){return T+B.rowCount},0),totalTables:u.tables.length},c&&ct.ignoreTransaction(function(){return c(h)}),!n.clearTablesBeforeImport)return[3,5];m=0,x=e.tables,P.label=2;case 2:return m<x.length?(S=x[m],[4,S.clear()]):[3,5];case 3:P.sent(),P.label=4;case 4:return m++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return P.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:P.sent(),P.label=9;case 9:return h.done=!0,c&&ct.ignoreTransaction(function(){return c(h)}),[2]}})})}function Oc(e,t){return Mn(this,void 0,void 0,function(){var n,r;return Xt(this,function(i){switch(i.label){case 0:n="slice"in e?lm(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>sm)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}ct.prototype.export=function(e){return Dc(this,e)};ct.prototype.import=function(e,t){return Tc(this,e,t)};ct.import=function(e,t){return um(e,t)};const fm={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},dm=j("div",{class:"text-2xl font-bold mb-6"}," ",-1),hm={class:"flex flex-wrap items-center gap-5"},pm=j("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),ym=j("span",{class:"pointer-events-none"},"",-1),mm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},gm=j("div",{class:"text-2xl font-bold mb-6 text-red-400"},"!",-1),vm={class:"flex flex-wrap items-center gap-5"},bm=nn({__name:"Settings",setup(e){const t=Tr({dbLoading:!1});jl(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("   ?"))try{await lt.close(),window.indexedDB.deleteDatabase("avito_scraper"),qe.show("error",Ye.DBDropSuccess),window.location.reload()}catch{qe.show("error",Ye.DBDropError)}}async function r(){window.confirm("  ?")&&(await chrome.storage.local.remove(["profileList","parsingResults","filterFields","reviewsFilter"]),window.location.reload())}async function i(){t.dbLoading=!0;try{const l=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,u=await Dc(lt),c=new Blob([u],{type:"text/json"}),h=document.createElement("a");h.href=URL.createObjectURL(c),h.download=l,h.click(),h.remove(),qe.show("success",Ye.DBExportSuccess)}catch{qe.show("error",Ye.DBExportError)}finally{t.dbLoading=!1}}return(s,o)=>(se(),me(it,null,[j("div",fm,[t.dbLoading?(se(),_t(_c,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):Be("",!0),dm,j("div",hm,[ot(Bt,{theme:"success",icon:"cloud_upload"},{default:$t(()=>[pm,ym]),_:1}),ot(Bt,{theme:"info",icon:"cloud_download",onClick:i},{default:$t(()=>[Ht("")]),_:1})])]),j("div",mm,[gm,j("div",vm,[ot(Bt,{theme:"danger",icon:"delete_sweep",onClick:ut(r,["stop"])},{default:$t(()=>[Ht(" localStorage")]),_:1},8,["onClick"]),ot(Bt,{theme:"danger",icon:"delete_forever",onClick:ut(n,["stop"])},{default:$t(()=>[Ht(" IndexedDB")]),_:1},8,["onClick"])])])],64))}}),_m={class:"centered"},wm=nn({__name:"App",setup(e){const t=Zt(!1);return er(async()=>{Zd(),chrome.runtime.onMessage.addListener(async({message:n,action:r,status:i,currentUrl:s,data:o})=>{if(i&&n&&qe.show(i,n),r==="reviews-parsing-started"){const l=Me.profileLinkGetByUrl(s);l&&(l.status="wait")}if(r==="reviews-parsing-ended"){if(i==="success"){Oe.pushResultsByUrl(s,o),gt.pushParsingResult(s);const l=Me.profileLinkGetByUrl(s);l&&(l.status="success")}if(i==="error"){const l=Me.profileLinkGetByUrl(s);l&&(l.status="error")}if(Me.profileLinkNew){const l=qe.show("success",Ye.WaitOpenPage,{duration:172800});await rh(ih(2,10)*1e3),qe.drop(l),Me.parsingStart()}else qe.show("success",Ye.ParsingReviewsFinished,{duration:172800}),Wt.changeTab(dn.ParsingResult),nh()}if(r==="profile-info"){Oe.list.value.push(o);let l=`
                ${o.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.deliveryInfo}
            `;Me.profileLinkSetInfo(s,l)}}),document.fonts.onloadingdone=()=>{t.value=!0},Oe.list.value=await Oe.apiGetInfoList()}),(n,r)=>(se(),me("div",{class:pt(["app-wrapper transition-opacity duration-200 delay-100",t.value?"opacity-100":"opacity-0"])},[ot(ch),j("main",_m,[fe(Wt).active.value===fe(dn).ProfilesFilter?(se(),_t(Xy,{key:0})):Be("",!0),fe(Wt).active.value===fe(dn).ParsingResult?(se(),_t(Qp,{key:1})):Be("",!0),fe(Wt).active.value===fe(dn).ProfileSavedList?(se(),_t(Wy,{key:2})):Be("",!0),fe(Wt).active.value===fe(dn).Settings?(se(),_t(bm,{key:3})):Be("",!0),(se(),_t(Ru,null,[fe(Wt).active.value===fe(dn).ReviewsFilter?(se(),_t(Hh,{key:0})):Be("",!0)],1024))])],2))}}),xm=rd();Zf(wm).use(xm).mount("#options");

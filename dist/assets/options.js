var Lc=Object.defineProperty;var Mc=(e,t,n)=>t in e?Lc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bt=(e,t,n)=>(Mc(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vo(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const et={},dr=[],tn=()=>{},Bc=()=>!1,Rc=/^on[^a-z]/,es=e=>Rc.test(e),bo=e=>e.startsWith("onUpdate:"),yt=Object.assign,_o=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},jc=Object.prototype.hasOwnProperty,je=(e,t)=>jc.call(e,t),De=Array.isArray,hr=e=>Tr(e)==="[object Map]",ts=e=>Tr(e)==="[object Set]",Xo=e=>Tr(e)==="[object Date]",Kc=e=>Tr(e)==="[object RegExp]",Ae=e=>typeof e=="function",dt=e=>typeof e=="string",Jr=e=>typeof e=="symbol",rt=e=>e!==null&&typeof e=="object",Ya=e=>rt(e)&&Ae(e.then)&&Ae(e.catch),Wa=Object.prototype.toString,Tr=e=>Wa.call(e),Vc=e=>Tr(e).slice(8,-1),za=e=>Tr(e)==="[object Object]",wo=e=>dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Si=vo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ns=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Uc=/-(\w)/g,xr=ns(e=>e.replace(Uc,(t,n)=>n?n.toUpperCase():"")),Hc=/\B([A-Z])/g,nr=ns(e=>e.replace(Hc,"-$1").toLowerCase()),Ga=ns(e=>e.charAt(0).toUpperCase()+e.slice(1)),ms=ns(e=>e?`on${Ga(e)}`:""),Yr=(e,t)=>!Object.is(e,t),pr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Mi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Bi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Qo;const $s=()=>Qo||(Qo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kr(e){if(De(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=dt(r)?Wc(r):kr(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(dt(e))return e;if(rt(e))return e}}const qc=/;(?![^(]*\))/g,Jc=/:([^]+)/,Yc=/\/\*[^]*?\*\//g;function Wc(e){const t={};return e.replace(Yc,"").split(qc).forEach(n=>{if(n){const r=n.split(Jc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ht(e){let t="";if(dt(e))t=e;else if(De(e))for(let n=0;n<e.length;n++){const r=ht(e[n]);r&&(t+=r+" ")}else if(rt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const zc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gc=vo(zc);function Xa(e){return!!e||e===""}function Xc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=rs(e[r],t[r]);return n}function rs(e,t){if(e===t)return!0;let n=Xo(e),r=Xo(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Jr(e),r=Jr(t),n||r)return e===t;if(n=De(e),r=De(t),n||r)return n&&r?Xc(e,t):!1;if(n=rt(e),r=rt(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const l=e.hasOwnProperty(o),u=t.hasOwnProperty(o);if(l&&!u||!l&&u||!rs(e[o],t[o]))return!1}}return String(e)===String(t)}function Qc(e,t){return e.findIndex(n=>rs(n,t))}const $e=e=>dt(e)?e:e==null?"":De(e)||rt(e)&&(e.toString===Wa||!Ae(e.toString))?JSON.stringify(e,Qa,2):String(e),Qa=(e,t)=>t&&t.__v_isRef?Qa(e,t.value):hr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ts(t)?{[`Set(${t.size})`]:[...t.values()]}:rt(t)&&!De(t)&&!za(t)?String(t):t;let Gt;class Za{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Gt,!t&&Gt&&(this.index=(Gt.scopes||(Gt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Gt;try{return Gt=this,t()}finally{Gt=n}}}on(){Gt=this}off(){Gt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Zc(e){return new Za(e)}function eu(e,t=Gt){t&&t.active&&t.effects.push(e)}function tu(){return Gt}const xo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},el=e=>(e.w&In)>0,tl=e=>(e.n&In)>0,nu=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=In},ru=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];el(i)&&!tl(i)?i.delete(e):t[n++]=i,i.w&=~In,i.n&=~In}t.length=n}},Is=new WeakMap;let Ir=0,In=1;const Ns=30;let Qt;const zn=Symbol(""),Fs=Symbol("");class ko{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,eu(this,r)}run(){if(!this.active)return this.fn();let t=Qt,n=Pn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Qt,Qt=this,Pn=!0,In=1<<++Ir,Ir<=Ns?nu(this):Zo(this),this.fn()}finally{Ir<=Ns&&ru(this),In=1<<--Ir,Qt=this.parent,Pn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Qt===this?this.deferStop=!0:this.active&&(Zo(this),this.onStop&&this.onStop(),this.active=!1)}}function Zo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Pn=!0;const nl=[];function Or(){nl.push(Pn),Pn=!1}function Er(){const e=nl.pop();Pn=e===void 0?!0:e}function Nt(e,t,n){if(Pn&&Qt){let r=Is.get(e);r||Is.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=xo()),rl(i)}}function rl(e,t){let n=!1;Ir<=Ns?tl(e)||(e.n|=In,n=!el(e)):n=!e.has(Qt),n&&(e.add(Qt),Qt.deps.push(e))}function wn(e,t,n,r,i,s){const o=Is.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&De(e)){const u=Number(r);o.forEach((c,h)=>{(h==="length"||h>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":De(e)?wo(n)&&l.push(o.get("length")):(l.push(o.get(zn)),hr(e)&&l.push(o.get(Fs)));break;case"delete":De(e)||(l.push(o.get(zn)),hr(e)&&l.push(o.get(Fs)));break;case"set":hr(e)&&l.push(o.get(zn));break}if(l.length===1)l[0]&&Ls(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);Ls(xo(u))}}function Ls(e,t){const n=De(e)?e:[...e];for(const r of n)r.computed&&ea(r);for(const r of n)r.computed||ea(r)}function ea(e,t){(e!==Qt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const iu=vo("__proto__,__v_isRef,__isVue"),il=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jr)),su=Co(),ou=Co(!1,!0),au=Co(!0),ta=lu();function lu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=qe(this);for(let s=0,o=this.length;s<o;s++)Nt(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(qe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Or();const r=qe(this)[t].apply(this,n);return Er(),r}}),e}function cu(e){const t=qe(this);return Nt(t,"has",e),t.hasOwnProperty(e)}function Co(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?Du:cl:t?ll:al).get(r))return r;const o=De(r);if(!e){if(o&&je(ta,i))return Reflect.get(ta,i,s);if(i==="hasOwnProperty")return cu}const l=Reflect.get(r,i,s);return(Jr(i)?il.has(i):iu(i))||(e||Nt(r,"get",i),t)?l:kt(l)?o&&wo(i)?l:l.value:rt(l)?e?ul(l):Nn(l):l}}const uu=sl(),fu=sl(!0);function sl(e=!1){return function(n,r,i,s){let o=n[r];if(Cr(o)&&kt(o)&&!kt(i))return!1;if(!e&&(!Ri(i)&&!Cr(i)&&(o=qe(o),i=qe(i)),!De(n)&&kt(o)&&!kt(i)))return o.value=i,!0;const l=De(n)&&wo(r)?Number(r)<n.length:je(n,r),u=Reflect.set(n,r,i,s);return n===qe(s)&&(l?Yr(i,o)&&wn(n,"set",r,i):wn(n,"add",r,i)),u}}function du(e,t){const n=je(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&wn(e,"delete",t,void 0),r}function hu(e,t){const n=Reflect.has(e,t);return(!Jr(t)||!il.has(t))&&Nt(e,"has",t),n}function pu(e){return Nt(e,"iterate",De(e)?"length":zn),Reflect.ownKeys(e)}const ol={get:su,set:uu,deleteProperty:du,has:hu,ownKeys:pu},yu={get:au,set(e,t){return!0},deleteProperty(e,t){return!0}},mu=yt({},ol,{get:ou,set:fu}),Do=e=>e,is=e=>Reflect.getPrototypeOf(e);function di(e,t,n=!1,r=!1){e=e.__v_raw;const i=qe(e),s=qe(t);n||(t!==s&&Nt(i,"get",t),Nt(i,"get",s));const{has:o}=is(i),l=r?Do:n?Eo:Wr;if(o.call(i,t))return l(e.get(t));if(o.call(i,s))return l(e.get(s));e!==i&&e.get(t)}function hi(e,t=!1){const n=this.__v_raw,r=qe(n),i=qe(e);return t||(e!==i&&Nt(r,"has",e),Nt(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function pi(e,t=!1){return e=e.__v_raw,!t&&Nt(qe(e),"iterate",zn),Reflect.get(e,"size",e)}function na(e){e=qe(e);const t=qe(this);return is(t).has.call(t,e)||(t.add(e),wn(t,"add",e,e)),this}function ra(e,t){t=qe(t);const n=qe(this),{has:r,get:i}=is(n);let s=r.call(n,e);s||(e=qe(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?Yr(t,o)&&wn(n,"set",e,t):wn(n,"add",e,t),this}function ia(e){const t=qe(this),{has:n,get:r}=is(t);let i=n.call(t,e);i||(e=qe(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&wn(t,"delete",e,void 0),s}function sa(){const e=qe(this),t=e.size!==0,n=e.clear();return t&&wn(e,"clear",void 0,void 0),n}function yi(e,t){return function(r,i){const s=this,o=s.__v_raw,l=qe(o),u=t?Do:e?Eo:Wr;return!e&&Nt(l,"iterate",zn),o.forEach((c,h)=>r.call(i,u(c),u(h),s))}}function mi(e,t,n){return function(...r){const i=this.__v_raw,s=qe(i),o=hr(s),l=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=i[e](...r),h=n?Do:t?Eo:Wr;return!t&&Nt(s,"iterate",u?Fs:zn),{next(){const{value:m,done:x}=c.next();return x?{value:m,done:x}:{value:l?[h(m[0]),h(m[1])]:h(m),done:x}},[Symbol.iterator](){return this}}}}function Dn(e){return function(...t){return e==="delete"?!1:this}}function gu(){const e={get(s){return di(this,s)},get size(){return pi(this)},has:hi,add:na,set:ra,delete:ia,clear:sa,forEach:yi(!1,!1)},t={get(s){return di(this,s,!1,!0)},get size(){return pi(this)},has:hi,add:na,set:ra,delete:ia,clear:sa,forEach:yi(!1,!0)},n={get(s){return di(this,s,!0)},get size(){return pi(this,!0)},has(s){return hi.call(this,s,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:yi(!0,!1)},r={get(s){return di(this,s,!0,!0)},get size(){return pi(this,!0)},has(s){return hi.call(this,s,!0)},add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear"),forEach:yi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=mi(s,!1,!1),n[s]=mi(s,!0,!1),t[s]=mi(s,!1,!0),r[s]=mi(s,!0,!0)}),[e,n,t,r]}const[vu,bu,_u,wu]=gu();function So(e,t){const n=t?e?wu:_u:e?bu:vu;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(je(n,i)&&i in r?n:r,i,s)}const xu={get:So(!1,!1)},ku={get:So(!1,!0)},Cu={get:So(!0,!1)},al=new WeakMap,ll=new WeakMap,cl=new WeakMap,Du=new WeakMap;function Su(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tu(e){return e.__v_skip||!Object.isExtensible(e)?0:Su(Vc(e))}function Nn(e){return Cr(e)?e:To(e,!1,ol,xu,al)}function Ou(e){return To(e,!1,mu,ku,ll)}function ul(e){return To(e,!0,yu,Cu,cl)}function To(e,t,n,r,i){if(!rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=Tu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return i.set(e,l),l}function yr(e){return Cr(e)?yr(e.__v_raw):!!(e&&e.__v_isReactive)}function Cr(e){return!!(e&&e.__v_isReadonly)}function Ri(e){return!!(e&&e.__v_isShallow)}function fl(e){return yr(e)||Cr(e)}function qe(e){const t=e&&e.__v_raw;return t?qe(t):e}function Oo(e){return Mi(e,"__v_skip",!0),e}const Wr=e=>rt(e)?Nn(e):e,Eo=e=>rt(e)?ul(e):e;function dl(e){Pn&&Qt&&(e=qe(e),rl(e.dep||(e.dep=xo())))}function hl(e,t){e=qe(e);const n=e.dep;n&&Ls(n)}function kt(e){return!!(e&&e.__v_isRef===!0)}function Yt(e){return Eu(e,!1)}function Eu(e,t){return kt(e)?e:new Au(e,t)}class Au{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:qe(t),this._value=n?t:Wr(t)}get value(){return dl(this),this._value}set value(t){const n=this.__v_isShallow||Ri(t)||Cr(t);t=n?t:qe(t),Yr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Wr(t),hl(this))}}function ae(e){return kt(e)?e.value:e}const Pu={get:(e,t,n)=>ae(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return kt(i)&&!kt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function pl(e){return yr(e)?e:new Proxy(e,Pu)}class $u{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ko(t,()=>{this._dirty||(this._dirty=!0,hl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=qe(this);return dl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Iu(e,t,n=!1){let r,i;const s=Ae(e);return s?(r=e,i=tn):(r=e.get,i=e.set),new $u(r,i,s||!i,n)}function $n(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){ss(s,t,n)}return i}function nn(e,t,n,r){if(Ae(e)){const s=$n(e,t,n,r);return s&&Ya(s)&&s.catch(o=>{ss(o,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(nn(e[s],t,n,r));return i}function ss(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,l=n;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,o,l)===!1)return}s=s.parent}const u=t.appContext.config.errorHandler;if(u){$n(u,null,10,[e,o,l]);return}}Nu(e,n,i,r)}function Nu(e,t,n,r=!0){console.error(e)}let zr=!1,Ms=!1;const wt=[];let ln=0;const mr=[];let hn=null,Hn=0;const yl=Promise.resolve();let Ao=null;function Fu(e){const t=Ao||yl;return e?t.then(this?e.bind(this):e):t}function Lu(e){let t=ln+1,n=wt.length;for(;t<n;){const r=t+n>>>1;Gr(wt[r])<e?t=r+1:n=r}return t}function Po(e){(!wt.length||!wt.includes(e,zr&&e.allowRecurse?ln+1:ln))&&(e.id==null?wt.push(e):wt.splice(Lu(e.id),0,e),ml())}function ml(){!zr&&!Ms&&(Ms=!0,Ao=yl.then(vl))}function Mu(e){const t=wt.indexOf(e);t>ln&&wt.splice(t,1)}function Bu(e){De(e)?mr.push(...e):(!hn||!hn.includes(e,e.allowRecurse?Hn+1:Hn))&&mr.push(e),ml()}function oa(e,t=zr?ln+1:0){for(;t<wt.length;t++){const n=wt[t];n&&n.pre&&(wt.splice(t,1),t--,n())}}function gl(e){if(mr.length){const t=[...new Set(mr)];if(mr.length=0,hn){hn.push(...t);return}for(hn=t,hn.sort((n,r)=>Gr(n)-Gr(r)),Hn=0;Hn<hn.length;Hn++)hn[Hn]();hn=null,Hn=0}}const Gr=e=>e.id==null?1/0:e.id,Ru=(e,t)=>{const n=Gr(e)-Gr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function vl(e){Ms=!1,zr=!0,wt.sort(Ru);const t=tn;try{for(ln=0;ln<wt.length;ln++){const n=wt[ln];n&&n.active!==!1&&$n(n,null,14)}}finally{ln=0,wt.length=0,gl(),zr=!1,Ao=null,(wt.length||mr.length)&&vl()}}function ju(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||et;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:m,trim:x}=r[h]||et;x&&(i=n.map(S=>dt(S)?S.trim():S)),m&&(i=n.map(Bi))}let l,u=r[l=ms(t)]||r[l=ms(xr(t))];!u&&s&&(u=r[l=ms(nr(t))]),u&&nn(u,e,6,i);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,nn(c,e,6,i)}}function bl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},l=!1;if(!Ae(e)){const u=c=>{const h=bl(c,t,!0);h&&(l=!0,yt(o,h))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!l?(rt(e)&&r.set(e,null),null):(De(s)?s.forEach(u=>o[u]=null):yt(o,s),rt(e)&&r.set(e,o),o)}function os(e,t){return!e||!es(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(e,t[0].toLowerCase()+t.slice(1))||je(e,nr(t))||je(e,t))}let Ct=null,_l=null;function ji(e){const t=Ct;return Ct=e,_l=e&&e.type.__scopeId||null,t}function At(e,t=Ct,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ma(-1);const s=ji(t);let o;try{o=e(...i)}finally{ji(s),r._d&&ma(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function gs(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:l,attrs:u,emit:c,render:h,renderCache:m,data:x,setupState:S,ctx:P,inheritAttrs:T}=e;let B,M;const E=ji(e);try{if(n.shapeFlag&4){const I=i||r;B=an(h.call(I,I,m,s,S,x,P)),M=u}else{const I=t;B=an(I.length>1?I(s,{attrs:u,slots:l,emit:c}):I(s,null)),M=t.props?u:Ku(u)}}catch(I){jr.length=0,ss(I,e,1),B=ot(Fn)}let $=B;if(M&&T!==!1){const I=Object.keys(M),{shapeFlag:V}=$;I.length&&V&7&&(o&&I.some(bo)&&(M=Vu(M,o)),$=Zn($,M))}return n.dirs&&($=Zn($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),B=$,ji(E),B}const Ku=e=>{let t;for(const n in e)(n==="class"||n==="style"||es(n))&&((t||(t={}))[n]=e[n]);return t},Vu=(e,t)=>{const n={};for(const r in e)(!bo(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Uu(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:l,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?aa(r,o,c):!!o;if(u&8){const h=t.dynamicProps;for(let m=0;m<h.length;m++){const x=h[m];if(o[x]!==r[x]&&!os(c,x))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?aa(r,o,c):!0:!!o;return!1}function aa(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!os(n,s))return!0}return!1}function Hu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const wl=e=>e.__isSuspense;function qu(e,t){t&&t.pendingBranch?De(e)?t.effects.push(...e):t.effects.push(e):Bu(e)}const gi={};function Ti(e,t,n){return xl(e,t,n)}function xl(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=et){var l;const u=tu()===((l=bt)==null?void 0:l.scope)?bt:null;let c,h=!1,m=!1;if(kt(e)?(c=()=>e.value,h=Ri(e)):yr(e)?(c=()=>e,r=!0):De(e)?(m=!0,h=e.some(I=>yr(I)||Ri(I)),c=()=>e.map(I=>{if(kt(I))return I.value;if(yr(I))return Yn(I);if(Ae(I))return $n(I,u,2)})):Ae(e)?t?c=()=>$n(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return x&&x(),nn(e,u,3,[S])}:c=tn,t&&r){const I=c;c=()=>Yn(I())}let x,S=I=>{x=E.onStop=()=>{$n(I,u,4)}},P;if(Qr)if(S=tn,t?n&&nn(t,u,3,[c(),m?[]:void 0,S]):c(),i==="sync"){const I=Mf();P=I.__watcherHandles||(I.__watcherHandles=[])}else return tn;let T=m?new Array(e.length).fill(gi):gi;const B=()=>{if(E.active)if(t){const I=E.run();(r||h||(m?I.some((V,J)=>Yr(V,T[J])):Yr(I,T)))&&(x&&x(),nn(t,u,3,[I,T===gi?void 0:m&&T[0]===gi?[]:T,S]),T=I)}else E.run()};B.allowRecurse=!!t;let M;i==="sync"?M=B:i==="post"?M=()=>vt(B,u&&u.suspense):(B.pre=!0,u&&(B.id=u.uid),M=()=>Po(B));const E=new ko(c,M);t?n?B():T=E.run():i==="post"?vt(E.run.bind(E),u&&u.suspense):E.run();const $=()=>{E.stop(),u&&u.scope&&_o(u.scope.effects,E)};return P&&P.push($),$}function Ju(e,t,n){const r=this.proxy,i=dt(e)?e.includes(".")?kl(r,e):()=>r[e]:e.bind(r,r);let s;Ae(t)?s=t:(s=t.handler,n=t);const o=bt;Dr(this);const l=xl(i,s.bind(r),n);return o?Dr(o):Gn(),l}function kl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Yn(e,t){if(!rt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))Yn(e.value,t);else if(De(e))for(let n=0;n<e.length;n++)Yn(e[n],t);else if(ts(e)||hr(e))e.forEach(n=>{Yn(n,t)});else if(za(e))for(const n in e)Yn(e[n],t);return e}function pn(e,t){const n=Ct;if(n===null)return e;const r=us(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,l,u,c=et]=t[s];o&&(Ae(o)&&(o={mounted:o,updated:o}),o.deep&&Yn(l),i.push({dir:o,instance:r,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function Kn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let u=l.dir[r];u&&(Or(),nn(u,n,8,[e.el,l,e,t]),Er())}}function Cl(e,t){e.shapeFlag&6&&e.component?Cl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sn(e,t){return Ae(e)?(()=>yt({name:e.name},t,{setup:e}))():e}const gr=e=>!!e.type.__asyncLoader,Dl=e=>e.type.__isKeepAlive,Yu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Vl(),r=n.ctx;if(!r.renderer)return()=>{const E=t.default&&t.default();return E&&E.length===1?E[0]:E};const i=new Map,s=new Set;let o=null;const l=n.suspense,{renderer:{p:u,m:c,um:h,o:{createElement:m}}}=r,x=m("div");r.activate=(E,$,I,V,J)=>{const H=E.component;c(E,$,I,0,l),u(H.vnode,E,$,I,H,l,V,E.slotScopeIds,J),vt(()=>{H.isDeactivated=!1,H.a&&pr(H.a);const ne=E.props&&E.props.onVnodeMounted;ne&&Ht(ne,H.parent,E)},l)},r.deactivate=E=>{const $=E.component;c(E,x,null,1,l),vt(()=>{$.da&&pr($.da);const I=E.props&&E.props.onVnodeUnmounted;I&&Ht(I,$.parent,E),$.isDeactivated=!0},l)};function S(E){vs(E),h(E,n,l,!0)}function P(E){i.forEach(($,I)=>{const V=_a($.type);V&&(!E||!E(V))&&T(I)})}function T(E){const $=i.get(E);!o||!cr($,o)?S($):o&&vs(o),i.delete(E),s.delete(E)}Ti(()=>[e.include,e.exclude],([E,$])=>{E&&P(I=>Nr(E,I)),$&&P(I=>!Nr($,I))},{flush:"post",deep:!0});let B=null;const M=()=>{B!=null&&i.set(B,bs(n.subTree))};return rr(M),Ol(M),oi(()=>{i.forEach(E=>{const{subTree:$,suspense:I}=n,V=bs($);if(E.type===V.type&&E.key===V.key){vs(V);const J=V.component.da;J&&vt(J,I);return}S(E)})}),()=>{if(B=null,!t.default)return null;const E=t.default(),$=E[0];if(E.length>1)return o=null,E;if(!No($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let I=bs($);const V=I.type,J=_a(gr(I)?I.type.__asyncResolved||{}:V),{include:H,exclude:ne,max:k}=e;if(H&&(!J||!Nr(H,J))||ne&&J&&Nr(ne,J))return o=I,$;const _=I.key==null?V:I.key,U=i.get(_);return I.el&&(I=Zn(I),$.shapeFlag&128&&($.ssContent=I)),B=_,U?(I.el=U.el,I.component=U.component,I.transition&&Cl(I,I.transition),I.shapeFlag|=512,s.delete(_),s.add(_)):(s.add(_),k&&s.size>parseInt(k,10)&&T(s.values().next().value)),I.shapeFlag|=256,o=I,wl($.type)?$:I}}},Wu=Yu;function Nr(e,t){return De(e)?e.some(n=>Nr(n,t)):dt(e)?e.split(",").includes(t):Kc(e)?e.test(t):!1}function zu(e,t){Sl(e,"a",t)}function Gu(e,t){Sl(e,"da",t)}function Sl(e,t,n=bt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(as(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Dl(i.parent.vnode)&&Xu(r,t,n,i),i=i.parent}}function Xu(e,t,n,r){const i=as(t,e,r,!0);El(()=>{_o(r[t],i)},n)}function vs(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function bs(e){return e.shapeFlag&128?e.ssContent:e}function as(e,t,n=bt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Or(),Dr(n);const l=nn(t,n,e,o);return Gn(),Er(),l});return r?i.unshift(s):i.push(s),s}}const kn=e=>(t,n=bt)=>(!Qr||e==="sp")&&as(e,(...r)=>t(...r),n),Tl=kn("bm"),rr=kn("m"),Qu=kn("bu"),Ol=kn("u"),oi=kn("bum"),El=kn("um"),Zu=kn("sp"),ef=kn("rtg"),tf=kn("rtc");function nf(e,t=bt){as("ec",e,t)}const rf=Symbol.for("v-ndc");function cn(e,t,n,r){let i;const s=n&&n[r];if(De(e)||dt(e)){i=new Array(e.length);for(let o=0,l=e.length;o<l;o++)i[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(rt(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];i[l]=t(e[c],c,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function Al(e,t,n={},r,i){if(Ct.isCE||Ct.parent&&gr(Ct.parent)&&Ct.parent.isCE)return t!=="default"&&(n.name=t),ot("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),re();const o=s&&Pl(s(n)),l=_t(tt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Pl(e){return e.some(t=>No(t)?!(t.type===Fn||t.type===tt&&!Pl(t.children)):!0)?e:null}const Bs=e=>e?Ul(e)?us(e)||e.proxy:Bs(e.parent):null,Rr=yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Bs(e.parent),$root:e=>Bs(e.root),$emit:e=>e.emit,$options:e=>$o(e),$forceUpdate:e=>e.f||(e.f=()=>Po(e.update)),$nextTick:e=>e.n||(e.n=Fu.bind(e.proxy)),$watch:e=>Ju.bind(e)}),_s=(e,t)=>e!==et&&!e.__isScriptSetup&&je(e,t),sf={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const S=o[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(_s(r,t))return o[t]=1,r[t];if(i!==et&&je(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&je(c,t))return o[t]=3,s[t];if(n!==et&&je(n,t))return o[t]=4,n[t];Rs&&(o[t]=0)}}const h=Rr[t];let m,x;if(h)return t==="$attrs"&&Nt(e,"get",t),h(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==et&&je(n,t))return o[t]=4,n[t];if(x=u.config.globalProperties,je(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return _s(i,t)?(i[t]=n,!0):r!==et&&je(r,t)?(r[t]=n,!0):je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||e!==et&&je(e,o)||_s(t,o)||(l=s[0])&&je(l,o)||je(r,o)||je(Rr,o)||je(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:je(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function of(){return af().slots}function af(){const e=Vl();return e.setupContext||(e.setupContext=ql(e))}function la(e){return De(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Rs=!0;function lf(e){const t=$o(e),n=e.proxy,r=e.ctx;Rs=!1,t.beforeCreate&&ca(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:l,provide:u,inject:c,created:h,beforeMount:m,mounted:x,beforeUpdate:S,updated:P,activated:T,deactivated:B,beforeDestroy:M,beforeUnmount:E,destroyed:$,unmounted:I,render:V,renderTracked:J,renderTriggered:H,errorCaptured:ne,serverPrefetch:k,expose:_,inheritAttrs:U,components:R,directives:_e,filters:ce}=t;if(c&&cf(c,r,null),o)for(const he in o){const le=o[he];Ae(le)&&(r[he]=le.bind(n))}if(i){const he=i.call(n,n);rt(he)&&(e.data=Nn(he))}if(Rs=!0,s)for(const he in s){const le=s[he],Ye=Ae(le)?le.bind(n,n):Ae(le.get)?le.get.bind(n,n):tn,Je=!Ae(le)&&Ae(le.set)?le.set.bind(n):tn,it=Jl({get:Ye,set:Je});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>it.value,set:Ve=>it.value=Ve})}if(l)for(const he in l)$l(l[he],r,n,he);if(u){const he=Ae(u)?u.call(n):u;Reflect.ownKeys(he).forEach(le=>{yf(le,he[le])})}h&&ca(h,e,"c");function be(he,le){De(le)?le.forEach(Ye=>he(Ye.bind(n))):le&&he(le.bind(n))}if(be(Tl,m),be(rr,x),be(Qu,S),be(Ol,P),be(zu,T),be(Gu,B),be(nf,ne),be(tf,J),be(ef,H),be(oi,E),be(El,I),be(Zu,k),De(_))if(_.length){const he=e.exposed||(e.exposed={});_.forEach(le=>{Object.defineProperty(he,le,{get:()=>n[le],set:Ye=>n[le]=Ye})})}else e.exposed||(e.exposed={});V&&e.render===tn&&(e.render=V),U!=null&&(e.inheritAttrs=U),R&&(e.components=R),_e&&(e.directives=_e)}function cf(e,t,n=tn){De(e)&&(e=js(e));for(const r in e){const i=e[r];let s;rt(i)?"default"in i?s=Oi(i.from||r,i.default,!0):s=Oi(i.from||r):s=Oi(i),kt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ca(e,t,n){nn(De(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function $l(e,t,n,r){const i=r.includes(".")?kl(n,r):()=>n[r];if(dt(e)){const s=t[e];Ae(s)&&Ti(i,s)}else if(Ae(e))Ti(i,e.bind(n));else if(rt(e))if(De(e))e.forEach(s=>$l(s,t,n,r));else{const s=Ae(e.handler)?e.handler.bind(n):t[e.handler];Ae(s)&&Ti(i,s,e)}}function $o(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let u;return l?u=l:!i.length&&!n&&!r?u=t:(u={},i.length&&i.forEach(c=>Ki(u,c,o,!0)),Ki(u,t,o)),rt(t)&&s.set(t,u),u}function Ki(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Ki(e,s,n,!0),i&&i.forEach(o=>Ki(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=uf[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const uf={data:ua,props:fa,emits:fa,methods:Fr,computed:Fr,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:Fr,directives:Fr,watch:df,provide:ua,inject:ff};function ua(e,t){return t?e?function(){return yt(Ae(e)?e.call(this,this):e,Ae(t)?t.call(this,this):t)}:t:e}function ff(e,t){return Fr(js(e),js(t))}function js(e){if(De(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ot(e,t){return e?[...new Set([].concat(e,t))]:t}function Fr(e,t){return e?yt(Object.create(null),e,t):t}function fa(e,t){return e?De(e)&&De(t)?[...new Set([...e,...t])]:yt(Object.create(null),la(e),la(t??{})):t}function df(e,t){if(!e)return t;if(!t)return e;const n=yt(Object.create(null),e);for(const r in t)n[r]=Ot(e[r],t[r]);return n}function Il(){return{app:null,config:{isNativeTag:Bc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hf=0;function pf(e,t){return function(r,i=null){Ae(r)||(r=yt({},r)),i!=null&&!rt(i)&&(i=null);const s=Il(),o=new Set;let l=!1;const u=s.app={_uid:hf++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Bf,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&Ae(c.install)?(o.add(c),c.install(u,...h)):Ae(c)&&(o.add(c),c(u,...h))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,h){return h?(s.components[c]=h,u):s.components[c]},directive(c,h){return h?(s.directives[c]=h,u):s.directives[c]},mount(c,h,m){if(!l){const x=ot(r,i);return x.appContext=s,h&&t?t(x,c):e(x,c,m),l=!0,u._container=c,c.__vue_app__=u,us(x.component)||x.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,h){return s.provides[c]=h,u},runWithContext(c){Vi=u;try{return c()}finally{Vi=null}}};return u}}let Vi=null;function yf(e,t){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[e]=t}}function Oi(e,t,n=!1){const r=bt||Ct;if(r||Vi){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Vi._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ae(t)?t.call(r&&r.proxy):t}}function mf(e,t,n,r=!1){const i={},s={};Mi(s,cs,1),e.propsDefaults=Object.create(null),Nl(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:Ou(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function gf(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,l=qe(i),[u]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let m=0;m<h.length;m++){let x=h[m];if(os(e.emitsOptions,x))continue;const S=t[x];if(u)if(je(s,x))S!==s[x]&&(s[x]=S,c=!0);else{const P=xr(x);i[P]=Ks(u,l,P,S,e,!1)}else S!==s[x]&&(s[x]=S,c=!0)}}}else{Nl(e,t,i,s)&&(c=!0);let h;for(const m in l)(!t||!je(t,m)&&((h=nr(m))===m||!je(t,h)))&&(u?n&&(n[m]!==void 0||n[h]!==void 0)&&(i[m]=Ks(u,l,m,void 0,e,!0)):delete i[m]);if(s!==l)for(const m in s)(!t||!je(t,m))&&(delete s[m],c=!0)}c&&wn(e,"set","$attrs")}function Nl(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,l;if(t)for(let u in t){if(Si(u))continue;const c=t[u];let h;i&&je(i,h=xr(u))?!s||!s.includes(h)?n[h]=c:(l||(l={}))[h]=c:os(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(s){const u=qe(n),c=l||et;for(let h=0;h<s.length;h++){const m=s[h];n[m]=Ks(i,u,m,c[m],e,!je(c,m))}}return o}function Ks(e,t,n,r,i,s){const o=e[n];if(o!=null){const l=je(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(u)){const{propsDefaults:c}=i;n in c?r=c[n]:(Dr(i),r=c[n]=u.call(null,t),Gn())}else r=u}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===nr(n))&&(r=!0))}return r}function Fl(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},l=[];let u=!1;if(!Ae(e)){const h=m=>{u=!0;const[x,S]=Fl(m,t,!0);yt(o,x),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!u)return rt(e)&&r.set(e,dr),dr;if(De(s))for(let h=0;h<s.length;h++){const m=xr(s[h]);da(m)&&(o[m]=et)}else if(s)for(const h in s){const m=xr(h);if(da(m)){const x=s[h],S=o[m]=De(x)||Ae(x)?{type:x}:yt({},x);if(S){const P=ya(Boolean,S.type),T=ya(String,S.type);S[0]=P>-1,S[1]=T<0||P<T,(P>-1||je(S,"default"))&&l.push(m)}}}const c=[o,l];return rt(e)&&r.set(e,c),c}function da(e){return e[0]!=="$"}function ha(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function pa(e,t){return ha(e)===ha(t)}function ya(e,t){return De(t)?t.findIndex(n=>pa(n,e)):Ae(t)&&pa(t,e)?0:-1}const Ll=e=>e[0]==="_"||e==="$stable",Io=e=>De(e)?e.map(an):[an(e)],vf=(e,t,n)=>{if(t._n)return t;const r=At((...i)=>Io(t(...i)),n);return r._c=!1,r},Ml=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Ll(i))continue;const s=e[i];if(Ae(s))t[i]=vf(i,s,r);else if(s!=null){const o=Io(s);t[i]=()=>o}}},Bl=(e,t)=>{const n=Io(t);e.slots.default=()=>n},bf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=qe(t),Mi(t,"_",n)):Ml(t,e.slots={})}else e.slots={},t&&Bl(e,t);Mi(e.slots,cs,1)},_f=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=et;if(r.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:(yt(i,t),!n&&l===1&&delete i._):(s=!t.$stable,Ml(t,i)),o=t}else t&&(Bl(e,t),o={default:1});if(s)for(const l in i)!Ll(l)&&!(l in o)&&delete i[l]};function Vs(e,t,n,r,i=!1){if(De(e)){e.forEach((x,S)=>Vs(x,t&&(De(t)?t[S]:t),n,r,i));return}if(gr(r)&&!i)return;const s=r.shapeFlag&4?us(r.component)||r.component.proxy:r.el,o=i?null:s,{i:l,r:u}=e,c=t&&t.r,h=l.refs===et?l.refs={}:l.refs,m=l.setupState;if(c!=null&&c!==u&&(dt(c)?(h[c]=null,je(m,c)&&(m[c]=null)):kt(c)&&(c.value=null)),Ae(u))$n(u,l,12,[o,h]);else{const x=dt(u),S=kt(u);if(x||S){const P=()=>{if(e.f){const T=x?je(m,u)?m[u]:h[u]:u.value;i?De(T)&&_o(T,s):De(T)?T.includes(s)||T.push(s):x?(h[u]=[s],je(m,u)&&(m[u]=h[u])):(u.value=[s],e.k&&(h[e.k]=u.value))}else x?(h[u]=o,je(m,u)&&(m[u]=o)):S&&(u.value=o,e.k&&(h[e.k]=o))};o?(P.id=-1,vt(P,n)):P()}}}const vt=qu;function wf(e){return xf(e)}function xf(e,t){const n=$s();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:u,setText:c,setElementText:h,parentNode:m,nextSibling:x,setScopeId:S=tn,insertStaticContent:P}=e,T=(a,f,p,y=null,v=null,w=null,C=!1,A=null,F=!!f.dynamicChildren)=>{if(a===f)return;a&&!cr(a,f)&&(y=K(a),Ve(a,v,w,!0),a=null),f.patchFlag===-2&&(F=!1,f.dynamicChildren=null);const{type:L,ref:W,shapeFlag:q}=f;switch(L){case ls:B(a,f,p,y);break;case Fn:M(a,f,p,y);break;case ws:a==null&&E(f,p,y,C);break;case tt:R(a,f,p,y,v,w,C,A,F);break;default:q&1?V(a,f,p,y,v,w,C,A,F):q&6?_e(a,f,p,y,v,w,C,A,F):(q&64||q&128)&&L.process(a,f,p,y,v,w,C,A,F,Y)}W!=null&&v&&Vs(W,a&&a.ref,w,f||a,!f)},B=(a,f,p,y)=>{if(a==null)r(f.el=l(f.children),p,y);else{const v=f.el=a.el;f.children!==a.children&&c(v,f.children)}},M=(a,f,p,y)=>{a==null?r(f.el=u(f.children||""),p,y):f.el=a.el},E=(a,f,p,y)=>{[a.el,a.anchor]=P(a.children,f,p,y,a.el,a.anchor)},$=({el:a,anchor:f},p,y)=>{let v;for(;a&&a!==f;)v=x(a),r(a,p,y),a=v;r(f,p,y)},I=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=x(a),i(a),a=p;i(f)},V=(a,f,p,y,v,w,C,A,F)=>{C=C||f.type==="svg",a==null?J(f,p,y,v,w,C,A,F):k(a,f,v,w,C,A,F)},J=(a,f,p,y,v,w,C,A)=>{let F,L;const{type:W,props:q,shapeFlag:G,transition:Z,dirs:se}=a;if(F=a.el=o(a.type,w,q&&q.is,q),G&8?h(F,a.children):G&16&&ne(a.children,F,null,y,v,w&&W!=="foreignObject",C,A),se&&Kn(a,null,y,"created"),H(F,a,a.scopeId,C,y),q){for(const ve in q)ve!=="value"&&!Si(ve)&&s(F,ve,null,q[ve],w,a.children,y,v,Be);"value"in q&&s(F,"value",null,q.value),(L=q.onVnodeBeforeMount)&&Ht(L,y,a)}se&&Kn(a,null,y,"beforeMount");const pe=(!v||v&&!v.pendingBranch)&&Z&&!Z.persisted;pe&&Z.beforeEnter(F),r(F,f,p),((L=q&&q.onVnodeMounted)||pe||se)&&vt(()=>{L&&Ht(L,y,a),pe&&Z.enter(F),se&&Kn(a,null,y,"mounted")},v)},H=(a,f,p,y,v)=>{if(p&&S(a,p),y)for(let w=0;w<y.length;w++)S(a,y[w]);if(v){let w=v.subTree;if(f===w){const C=v.vnode;H(a,C,C.scopeId,C.slotScopeIds,v.parent)}}},ne=(a,f,p,y,v,w,C,A,F=0)=>{for(let L=F;L<a.length;L++){const W=a[L]=A?Tn(a[L]):an(a[L]);T(null,W,f,p,y,v,w,C,A)}},k=(a,f,p,y,v,w,C)=>{const A=f.el=a.el;let{patchFlag:F,dynamicChildren:L,dirs:W}=f;F|=a.patchFlag&16;const q=a.props||et,G=f.props||et;let Z;p&&Vn(p,!1),(Z=G.onVnodeBeforeUpdate)&&Ht(Z,p,f,a),W&&Kn(f,a,p,"beforeUpdate"),p&&Vn(p,!0);const se=v&&f.type!=="foreignObject";if(L?_(a.dynamicChildren,L,A,p,y,se,w):C||le(a,f,A,null,p,y,se,w,!1),F>0){if(F&16)U(A,f,q,G,p,y,v);else if(F&2&&q.class!==G.class&&s(A,"class",null,G.class,v),F&4&&s(A,"style",q.style,G.style,v),F&8){const pe=f.dynamicProps;for(let ve=0;ve<pe.length;ve++){const te=pe[ve],g=q[te],d=G[te];(d!==g||te==="value")&&s(A,te,g,d,v,a.children,p,y,Be)}}F&1&&a.children!==f.children&&h(A,f.children)}else!C&&L==null&&U(A,f,q,G,p,y,v);((Z=G.onVnodeUpdated)||W)&&vt(()=>{Z&&Ht(Z,p,f,a),W&&Kn(f,a,p,"updated")},y)},_=(a,f,p,y,v,w,C)=>{for(let A=0;A<f.length;A++){const F=a[A],L=f[A],W=F.el&&(F.type===tt||!cr(F,L)||F.shapeFlag&70)?m(F.el):p;T(F,L,W,null,y,v,w,C,!0)}},U=(a,f,p,y,v,w,C)=>{if(p!==y){if(p!==et)for(const A in p)!Si(A)&&!(A in y)&&s(a,A,p[A],null,C,f.children,v,w,Be);for(const A in y){if(Si(A))continue;const F=y[A],L=p[A];F!==L&&A!=="value"&&s(a,A,L,F,C,f.children,v,w,Be)}"value"in y&&s(a,"value",p.value,y.value)}},R=(a,f,p,y,v,w,C,A,F)=>{const L=f.el=a?a.el:l(""),W=f.anchor=a?a.anchor:l("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(A=A?A.concat(Z):Z),a==null?(r(L,p,y),r(W,p,y),ne(f.children,p,W,v,w,C,A,F)):q>0&&q&64&&G&&a.dynamicChildren?(_(a.dynamicChildren,G,p,v,w,C,A),(f.key!=null||v&&f===v.subTree)&&Rl(a,f,!0)):le(a,f,p,W,v,w,C,A,F)},_e=(a,f,p,y,v,w,C,A,F)=>{f.slotScopeIds=A,a==null?f.shapeFlag&512?v.ctx.activate(f,p,y,C,F):ce(f,p,y,v,w,C,F):Pe(a,f,F)},ce=(a,f,p,y,v,w,C)=>{const A=a.component=Pf(a,y,v);if(Dl(a)&&(A.ctx.renderer=Y),$f(A),A.asyncDep){if(v&&v.registerDep(A,be),!a.el){const F=A.subTree=ot(Fn);M(null,F,f,p)}return}be(A,a,f,p,v,w,C)},Pe=(a,f,p)=>{const y=f.component=a.component;if(Uu(a,f,p))if(y.asyncDep&&!y.asyncResolved){he(y,f,p);return}else y.next=f,Mu(y.update),y.update();else f.el=a.el,y.vnode=f},be=(a,f,p,y,v,w,C)=>{const A=()=>{if(a.isMounted){let{next:W,bu:q,u:G,parent:Z,vnode:se}=a,pe=W,ve;Vn(a,!1),W?(W.el=se.el,he(a,W,C)):W=se,q&&pr(q),(ve=W.props&&W.props.onVnodeBeforeUpdate)&&Ht(ve,Z,W,se),Vn(a,!0);const te=gs(a),g=a.subTree;a.subTree=te,T(g,te,m(g.el),K(g),a,v,w),W.el=te.el,pe===null&&Hu(a,te.el),G&&vt(G,v),(ve=W.props&&W.props.onVnodeUpdated)&&vt(()=>Ht(ve,Z,W,se),v)}else{let W;const{el:q,props:G}=f,{bm:Z,m:se,parent:pe}=a,ve=gr(f);if(Vn(a,!1),Z&&pr(Z),!ve&&(W=G&&G.onVnodeBeforeMount)&&Ht(W,pe,f),Vn(a,!0),q&&D){const te=()=>{a.subTree=gs(a),D(q,a.subTree,a,v,null)};ve?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=gs(a);T(null,te,p,y,a,v,w),f.el=te.el}if(se&&vt(se,v),!ve&&(W=G&&G.onVnodeMounted)){const te=f;vt(()=>Ht(W,pe,te),v)}(f.shapeFlag&256||pe&&gr(pe.vnode)&&pe.vnode.shapeFlag&256)&&a.a&&vt(a.a,v),a.isMounted=!0,f=p=y=null}},F=a.effect=new ko(A,()=>Po(L),a.scope),L=a.update=()=>F.run();L.id=a.uid,Vn(a,!0),L()},he=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,gf(a,f.props,y,p),_f(a,f.children,p),Or(),oa(),Er()},le=(a,f,p,y,v,w,C,A,F=!1)=>{const L=a&&a.children,W=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Je(L,q,p,y,v,w,C,A,F);return}else if(G&256){Ye(L,q,p,y,v,w,C,A,F);return}}Z&8?(W&16&&Be(L,v,w),q!==L&&h(p,q)):W&16?Z&16?Je(L,q,p,y,v,w,C,A,F):Be(L,v,w,!0):(W&8&&h(p,""),Z&16&&ne(q,p,y,v,w,C,A,F))},Ye=(a,f,p,y,v,w,C,A,F)=>{a=a||dr,f=f||dr;const L=a.length,W=f.length,q=Math.min(L,W);let G;for(G=0;G<q;G++){const Z=f[G]=F?Tn(f[G]):an(f[G]);T(a[G],Z,p,null,v,w,C,A,F)}L>W?Be(a,v,w,!0,!1,q):ne(f,p,y,v,w,C,A,F,q)},Je=(a,f,p,y,v,w,C,A,F)=>{let L=0;const W=f.length;let q=a.length-1,G=W-1;for(;L<=q&&L<=G;){const Z=a[L],se=f[L]=F?Tn(f[L]):an(f[L]);if(cr(Z,se))T(Z,se,p,null,v,w,C,A,F);else break;L++}for(;L<=q&&L<=G;){const Z=a[q],se=f[G]=F?Tn(f[G]):an(f[G]);if(cr(Z,se))T(Z,se,p,null,v,w,C,A,F);else break;q--,G--}if(L>q){if(L<=G){const Z=G+1,se=Z<W?f[Z].el:y;for(;L<=G;)T(null,f[L]=F?Tn(f[L]):an(f[L]),p,se,v,w,C,A,F),L++}}else if(L>G)for(;L<=q;)Ve(a[L],v,w,!0),L++;else{const Z=L,se=L,pe=new Map;for(L=se;L<=G;L++){const Q=f[L]=F?Tn(f[L]):an(f[L]);Q.key!=null&&pe.set(Q.key,L)}let ve,te=0;const g=G-se+1;let d=!1,b=0;const O=new Array(g);for(L=0;L<g;L++)O[L]=0;for(L=Z;L<=q;L++){const Q=a[L];if(te>=g){Ve(Q,v,w,!0);continue}let ee;if(Q.key!=null)ee=pe.get(Q.key);else for(ve=se;ve<=G;ve++)if(O[ve-se]===0&&cr(Q,f[ve])){ee=ve;break}ee===void 0?Ve(Q,v,w,!0):(O[ee-se]=L+1,ee>=b?b=ee:d=!0,T(Q,f[ee],p,null,v,w,C,A,F),te++)}const N=d?kf(O):dr;for(ve=N.length-1,L=g-1;L>=0;L--){const Q=se+L,ee=f[Q],me=Q+1<W?f[Q+1].el:y;O[L]===0?T(null,ee,p,me,v,w,C,A,F):d&&(ve<0||L!==N[ve]?it(ee,p,me,2):ve--)}}},it=(a,f,p,y,v=null)=>{const{el:w,type:C,transition:A,children:F,shapeFlag:L}=a;if(L&6){it(a.component.subTree,f,p,y);return}if(L&128){a.suspense.move(f,p,y);return}if(L&64){C.move(a,f,p,Y);return}if(C===tt){r(w,f,p);for(let q=0;q<F.length;q++)it(F[q],f,p,y);r(a.anchor,f,p);return}if(C===ws){$(a,f,p);return}if(y!==2&&L&1&&A)if(y===0)A.beforeEnter(w),r(w,f,p),vt(()=>A.enter(w),v);else{const{leave:q,delayLeave:G,afterLeave:Z}=A,se=()=>r(w,f,p),pe=()=>{q(w,()=>{se(),Z&&Z()})};G?G(w,se,pe):pe()}else r(w,f,p)},Ve=(a,f,p,y=!1,v=!1)=>{const{type:w,props:C,ref:A,children:F,dynamicChildren:L,shapeFlag:W,patchFlag:q,dirs:G}=a;if(A!=null&&Vs(A,null,p,a,!0),W&256){f.ctx.deactivate(a);return}const Z=W&1&&G,se=!gr(a);let pe;if(se&&(pe=C&&C.onVnodeBeforeUnmount)&&Ht(pe,f,a),W&6)fe(a.component,p,y);else{if(W&128){a.suspense.unmount(p,y);return}Z&&Kn(a,null,f,"beforeUnmount"),W&64?a.type.remove(a,f,p,v,Y,y):L&&(w!==tt||q>0&&q&64)?Be(L,f,p,!1,!0):(w===tt&&q&384||!v&&W&16)&&Be(F,f,p),y&&Ft(a)}(se&&(pe=C&&C.onVnodeUnmounted)||Z)&&vt(()=>{pe&&Ht(pe,f,a),Z&&Kn(a,null,f,"unmounted")},p)},Ft=a=>{const{type:f,el:p,anchor:y,transition:v}=a;if(f===tt){ge(p,y);return}if(f===ws){I(a);return}const w=()=>{i(p),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(a.shapeFlag&1&&v&&!v.persisted){const{leave:C,delayLeave:A}=v,F=()=>C(p,w);A?A(a.el,w,F):F()}else w()},ge=(a,f)=>{let p;for(;a!==f;)p=x(a),i(a),a=p;i(f)},fe=(a,f,p)=>{const{bum:y,scope:v,update:w,subTree:C,um:A}=a;y&&pr(y),v.stop(),w&&(w.active=!1,Ve(C,a,f,p)),A&&vt(A,f),vt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Be=(a,f,p,y=!1,v=!1,w=0)=>{for(let C=w;C<a.length;C++)Ve(a[C],f,p,y,v)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():x(a.anchor||a.el),z=(a,f,p)=>{a==null?f._vnode&&Ve(f._vnode,null,null,!0):T(f._vnode||null,a,f,null,null,null,p),oa(),gl(),f._vnode=a},Y={p:T,um:Ve,m:it,r:Ft,mt:ce,mc:ne,pc:le,pbc:_,n:K,o:e};let X,D;return t&&([X,D]=t(Y)),{render:z,hydrate:X,createApp:pf(z,X)}}function Vn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Rl(e,t,n=!1){const r=e.children,i=t.children;if(De(r)&&De(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Tn(i[s]),l.el=o.el),n||Rl(o,l)),l.type===ls&&(l.el=o.el)}}function kf(e){const t=e.slice(),n=[0];let r,i,s,o,l;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,e[n[l]]<c?s=l+1:o=l;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const Cf=e=>e.__isTeleport,tt=Symbol.for("v-fgt"),ls=Symbol.for("v-txt"),Fn=Symbol.for("v-cmt"),ws=Symbol.for("v-stc"),jr=[];let Zt=null;function re(e=!1){jr.push(Zt=e?null:[])}function Df(){jr.pop(),Zt=jr[jr.length-1]||null}let Xr=1;function ma(e){Xr+=e}function jl(e){return e.dynamicChildren=Xr>0?Zt||dr:null,Df(),Xr>0&&Zt&&Zt.push(e),e}function de(e,t,n,r,i,s){return jl(j(e,t,n,r,i,s,!0))}function _t(e,t,n,r,i){return jl(ot(e,t,n,r,i,!0))}function No(e){return e?e.__v_isVNode===!0:!1}function cr(e,t){return e.type===t.type&&e.key===t.key}const cs="__vInternal",Kl=({key:e})=>e??null,Ei=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?dt(e)||kt(e)||Ae(e)?{i:Ct,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,r=0,i=null,s=e===tt?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Kl(t),ref:t&&Ei(t),scopeId:_l,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ct};return l?(Fo(u,n),s&128&&e.normalize(u)):n&&(u.shapeFlag|=dt(n)?8:16),Xr>0&&!o&&Zt&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&Zt.push(u),u}const ot=Sf;function Sf(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===rf)&&(e=Fn),No(e)){const l=Zn(e,t,!0);return n&&Fo(l,n),Xr>0&&!s&&Zt&&(l.shapeFlag&6?Zt[Zt.indexOf(e)]=l:Zt.push(l)),l.patchFlag|=-2,l}if(Ff(e)&&(e=e.__vccOpts),t){t=Tf(t);let{class:l,style:u}=t;l&&!dt(l)&&(t.class=ht(l)),rt(u)&&(fl(u)&&!De(u)&&(u=yt({},u)),t.style=kr(u))}const o=dt(e)?1:wl(e)?128:Cf(e)?64:rt(e)?4:Ae(e)?2:0;return j(e,t,n,r,i,o,s,!0)}function Tf(e){return e?fl(e)||cs in e?yt({},e):e:null}function Zn(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=e,l=t?Of(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Kl(l),ref:t&&t.ref?n&&i?De(i)?i.concat(Ei(t)):[i,Ei(t)]:Ei(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==tt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zn(e.ssContent),ssFallback:e.ssFallback&&Zn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function jt(e=" ",t=0){return ot(ls,null,e,t)}function Me(e="",t=!1){return t?(re(),_t(Fn,null,e)):ot(Fn,null,e)}function an(e){return e==null||typeof e=="boolean"?ot(Fn):De(e)?ot(tt,null,e.slice()):typeof e=="object"?Tn(e):ot(ls,null,String(e))}function Tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zn(e)}function Fo(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(De(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Fo(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(cs in t)?t._ctx=Ct:i===3&&Ct&&(Ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ae(t)?(t={default:t,_ctx:Ct},n=32):(t=String(t),r&64?(n=16,t=[jt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Of(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=ht([t.class,r.class]));else if(i==="style")t.style=kr([t.style,r.style]);else if(es(i)){const s=t[i],o=r[i];o&&s!==o&&!(De(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function Ht(e,t,n,r=null){nn(e,t,7,[n,r])}const Ef=Il();let Af=0;function Pf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Ef,s={uid:Af++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Za(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fl(r,i),emitsOptions:bl(r,i),emit:null,emitted:null,propsDefaults:et,inheritAttrs:r.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ju.bind(null,s),e.ce&&e.ce(s),s}let bt=null;const Vl=()=>bt||Ct;let Lo,or,ga="__VUE_INSTANCE_SETTERS__";(or=$s()[ga])||(or=$s()[ga]=[]),or.push(e=>bt=e),Lo=e=>{or.length>1?or.forEach(t=>t(e)):or[0](e)};const Dr=e=>{Lo(e),e.scope.on()},Gn=()=>{bt&&bt.scope.off(),Lo(null)};function Ul(e){return e.vnode.shapeFlag&4}let Qr=!1;function $f(e,t=!1){Qr=t;const{props:n,children:r}=e.vnode,i=Ul(e);mf(e,n,i,t),bf(e,r);const s=i?If(e,t):void 0;return Qr=!1,s}function If(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Oo(new Proxy(e.ctx,sf));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?ql(e):null;Dr(e),Or();const s=$n(r,e,0,[e.props,i]);if(Er(),Gn(),Ya(s)){if(s.then(Gn,Gn),t)return s.then(o=>{va(e,o,t)}).catch(o=>{ss(o,e,0)});e.asyncDep=s}else va(e,s,t)}else Hl(e,t)}function va(e,t,n){Ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:rt(t)&&(e.setupState=pl(t)),Hl(e,n)}let ba;function Hl(e,t,n){const r=e.type;if(!e.render){if(!t&&ba&&!r.render){const i=r.template||$o(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:u}=r,c=yt(yt({isCustomElement:s,delimiters:l},o),u);r.render=ba(i,c)}}e.render=r.render||tn}Dr(e),Or(),lf(e),Er(),Gn()}function Nf(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Nt(e,"get","$attrs"),t[n]}}))}function ql(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Nf(e)},slots:e.slots,emit:e.emit,expose:t}}function us(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(pl(Oo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rr)return Rr[n](e)},has(t,n){return n in t||n in Rr}}))}function _a(e,t=!0){return Ae(e)?e.displayName||e.name:e.name||t&&e.__name}function Ff(e){return Ae(e)&&"__vccOpts"in e}const Jl=(e,t)=>Iu(e,t,Qr),Lf=Symbol.for("v-scx"),Mf=()=>Oi(Lf),Bf="3.3.4",Rf="http://www.w3.org/2000/svg",qn=typeof document<"u"?document:null,wa=qn&&qn.createElement("template"),jf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?qn.createElementNS(Rf,e):qn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>qn.createTextNode(e),createComment:e=>qn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{wa.innerHTML=r?`<svg>${e}</svg>`:e;const l=wa.content;if(r){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Kf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Vf(e,t,n){const r=e.style,i=dt(n);if(n&&!i){if(t&&!dt(t))for(const s in t)n[s]==null&&Us(r,s,"");for(const s in n)Us(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const xa=/\s*!important$/;function Us(e,t,n){if(De(n))n.forEach(r=>Us(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Uf(e,t);xa.test(n)?e.setProperty(nr(r),n.replace(xa,""),"important"):e[r]=n}}const ka=["Webkit","Moz","ms"],xs={};function Uf(e,t){const n=xs[t];if(n)return n;let r=xr(t);if(r!=="filter"&&r in e)return xs[t]=r;r=Ga(r);for(let i=0;i<ka.length;i++){const s=ka[i]+r;if(s in e)return xs[t]=s}return t}const Ca="http://www.w3.org/1999/xlink";function Hf(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Ca,t.slice(6,t.length)):e.setAttributeNS(Ca,t,n);else{const s=Gc(t);n==null||s&&!Xa(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function qf(e,t,n,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const c=l==="OPTION"?e.getAttribute("value"):e.value,h=n??"";c!==h&&(e.value=h),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Xa(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function Jn(e,t,n,r){e.addEventListener(t,n,r)}function Jf(e,t,n,r){e.removeEventListener(t,n,r)}function Yf(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[l,u]=Wf(t);if(r){const c=s[t]=Xf(r,i);Jn(e,l,c,u)}else o&&(Jf(e,l,o,u),s[t]=void 0)}}const Da=/(?:Once|Passive|Capture)$/;function Wf(e){let t;if(Da.test(e)){t={};let r;for(;r=e.match(Da);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):nr(e.slice(2)),t]}let ks=0;const zf=Promise.resolve(),Gf=()=>ks||(zf.then(()=>ks=0),ks=Date.now());function Xf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;nn(Qf(r,n.value),t,5,[r])};return n.value=e,n.attached=Gf(),n}function Qf(e,t){if(De(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Sa=/^on[a-z]/,Zf=(e,t,n,r,i=!1,s,o,l,u)=>{t==="class"?Kf(e,r,i):t==="style"?Vf(e,n,r):es(t)?bo(t)||Yf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ed(e,t,r,i))?qf(e,t,r,s,o,l,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Hf(e,t,r,i))};function ed(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Sa.test(t)&&Ae(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Sa.test(t)&&dt(n)?!1:t in e}const Ui=e=>{const t=e.props["onUpdate:modelValue"]||!1;return De(t)?n=>pr(t,n):t};function td(e){e.target.composing=!0}function Ta(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const On={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=Ui(i);const s=r||i.props&&i.props.type==="number";Jn(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=Bi(l)),e._assign(l)}),n&&Jn(e,"change",()=>{e.value=e.value.trim()}),t||(Jn(e,"compositionstart",td),Jn(e,"compositionend",Ta),Jn(e,"change",Ta))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=Ui(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Bi(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},nd={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=ts(t);Jn(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Bi(Hi(o)):Hi(o));e._assign(e.multiple?i?new Set(s):s:s[0])}),e._assign=Ui(r)},mounted(e,{value:t}){Oa(e,t)},beforeUpdate(e,t,n){e._assign=Ui(n)},updated(e,{value:t}){Oa(e,t)}};function Oa(e,t){const n=e.multiple;if(!(n&&!De(t)&&!ts(t))){for(let r=0,i=e.options.length;r<i;r++){const s=e.options[r],o=Hi(s);if(n)De(t)?s.selected=Qc(t,o)>-1:s.selected=t.has(o);else if(rs(Hi(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hi(e){return"_value"in e?e._value:e.value}const rd=["ctrl","shift","alt","meta"],id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>rd.some(n=>e[`${n}Key`]&&!t.includes(n))},ut=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=id[t[i]];if(s&&s(n,t))return}return e(n,...r)},sd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},od=(e,t)=>n=>{if(!("key"in n))return;const r=nr(n.key);if(t.some(i=>i===r||sd[i]===r))return e(n)},ad=yt({patchProp:Zf},jf);let Ea;function ld(){return Ea||(Ea=wf(ad))}const cd=(...e)=>{const t=ld().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=ud(r);if(!i)return;const s=t._component;!Ae(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ud(e){return dt(e)?document.querySelector(e):e}var fd=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const dd=Symbol();var Aa;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Aa||(Aa={}));function hd(){const e=Zc(!0),t=e.run(()=>Yt({}));let n=[],r=[];const i=Oo({install(s){i._a=s,s.provide(dd,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!fd?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const pd={key:0,class:"button-loader"},yd=j("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),md=[yd],It=sn({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=of();return(r,i)=>(re(),de("button",{class:ht(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(re(),de("div",pd,md)):Me("",!0),t.icon?(re(),de("i",{key:1,class:ht([{"opacity-0":t.loading,"mr-2":ae(n).default},"font-icon"])},$e(t.icon),3)):Me("",!0),ae(n).default?(re(),de("span",{key:2,class:ht({"opacity-0":t.loading})},[Al(r.$slots,"default")],2)):Me("",!0)],2))}});var yn=(e=>(e.ProfilesFilter="profile_parsing",e.ReviewsFilter="reviews_filter",e.ParsingResult="parsing_result",e.ProfileSavedList="profile_saved_list",e.Settings="settings",e))(yn||{});class gd{constructor(){Bt(this,"active",Yt("profile_parsing"));Bt(this,"list",[{value:"profile_parsing",text:"Поиск продавцов",icon:"group_add"},{value:"reviews_filter",text:"Парсинг",icon:"tune"},{value:"parsing_result",text:"Результаты",icon:"view_list"},{value:"profile_saved_list",text:"БД",icon:"people"}])}changeTab(t){this.active.value=t}}const Xt=new gd,nt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ft=Object.keys,Dt=Array.isArray;function Pt(e,t){return typeof t!="object"||ft(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||nt.Promise||(nt.Promise=Promise);const Zr=Object.getPrototypeOf,vd={}.hasOwnProperty;function Kt(e,t){return vd.call(e,t)}function Sr(e,t){typeof t=="function"&&(t=t(Zr(e))),(typeof Reflect>"u"?ft:Reflect.ownKeys)(t).forEach(n=>{bn(e,n,t[n])})}const Yl=Object.defineProperty;function bn(e,t,n,r){Yl(e,t,Pt(n&&Kt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function vr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),bn(e.prototype,"constructor",e),{extend:Sr.bind(null,e.prototype)}}}}const bd=Object.getOwnPropertyDescriptor;function Mo(e,t){let n;return bd(e,t)||(n=Zr(e))&&Mo(n,t)}const _d=[].slice;function qi(e,t,n){return _d.call(e,t,n)}function Wl(e,t){return t(e)}function Lr(e){if(!e)throw new Error("Assertion Failed")}function zl(e){nt.setImmediate?setImmediate(e):setTimeout(e,0)}function Gl(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function _n(e,t){if(Kt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=_n(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:_n(l,t.substr(o+1))}}function rn(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Lr(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)rn(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),l=t.substr(s+1);if(l==="")n===void 0?Dt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&Kt(e,o)||(u=e[o]={}),rn(u,l,n)}}else n===void 0?Dt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Xl(e){var t={};for(var n in e)Kt(e,n)&&(t[n]=e[n]);return t}const wd=[].concat;function Ql(e){return wd.apply([],e)}const Zl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ql([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>nt[e]),xd=Zl.map(e=>nt[e]);Gl(Zl,e=>[e,!0]);let En=null;function ai(e){En=typeof WeakMap<"u"&&new WeakMap;const t=Hs(e);return En=null,t}function Hs(e){if(!e||typeof e!="object")return e;let t=En&&En.get(e);if(t)return t;if(Dt(e)){t=[],En&&En.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Hs(e[n]))}else if(xd.indexOf(e.constructor)>=0)t=e;else{const s=Zr(e);for(var i in t=s===Object.prototype?{}:Object.create(s),En&&En.set(e,t),e)Kt(e,i)&&(t[i]=Hs(e[i]))}return t}const{toString:kd}={};function qs(e){return kd.call(e).slice(8,-1)}const Js=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Cd=typeof Js=="symbol"?function(e){var t;return e!=null&&(t=e[Js])&&t.apply(e)}:function(){return null},ur={};function gn(e){var t,n,r,i;if(arguments.length===1){if(Dt(e))return e.slice();if(this===ur&&typeof e=="string")return[e];if(i=Cd(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Bo=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ec(e,t){un=e,tc=t}var tc=()=>!0;const Dd=!new Error("").stack;function ir(){if(Dd)try{throw ir.arguments,new Error}catch(e){return e}return new Error}function Ys(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(tc).map(r=>`
`+r).join("")):""}var nc=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ro=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(nc),Sd={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function br(e,t){this._e=ir(),this.name=e,this.message=t}function rc(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ji(e,t,n,r){this._e=ir(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=rc(e,t)}function Kr(e,t){this._e=ir(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=rc(e,t)}vr(br).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ys(this._e,2))}},toString:function(){return this.name+": "+this.message}}),vr(Ji).from(br),vr(Kr).from(br);var jo=Ro.reduce((e,t)=>(e[t]=t+"Error",e),{});const Td=br;var Te=Ro.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=ir(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Sd[t]||n,this.inner=null)}return vr(r).from(Td),e[t]=r,e},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var Pa=nc.reduce((e,t)=>(e[t+"Error"]=Te[t],e),{}),Ai=Ro.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Te[t]),e),{});function Ge(){}function ei(e){return e}function Od(e,t){return e==null||e===ei?t:function(n){return t(e(n))}}function er(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ed(e,t){return e===Ge?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?er(r,this.onsuccess):r),i&&(this.onerror=this.onerror?er(i,this.onerror):i),s!==void 0?s:n}}function Ad(e,t){return e===Ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?er(n,this.onsuccess):n),r&&(this.onerror=this.onerror?er(r,this.onerror):r)}}function Pd(e,t){return e===Ge?t:function(n){var r=e.apply(this,arguments);Pt(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?er(i,this.onsuccess):i),s&&(this.onerror=this.onerror?er(s,this.onerror):s),r===void 0?o===void 0?void 0:o:Pt(r,o)}}function $d(e,t){return e===Ge?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ko(e,t){return e===Ge?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Ai.ModifyError=Ji,Ai.DexieError=br,Ai.BulkError=Kr;var ti={};const ic=100,[Ws,Yi,zs]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Zr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Zr(t),e]})(),sc=Yi&&Yi.then,Pi=Ws&&Ws.constructor,Vo=!!zs;var Gs=!1,Id=zs?()=>{zs.then(vi)}:nt.setImmediate?setImmediate.bind(null,vi):nt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{vi(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(vi,0)},Vr=function(e,t){Mr.push([e,t]),Wi&&(Id(),Wi=!1)},Xs=!0,Wi=!0,Xn=[],$i=[],Qs=null,Zs=ei,_r={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Na,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Na(e[0],e[1])}catch{}})}},xe=_r,Mr=[],Qn=0,Ii=[];function ue(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ge,this._lib=!1;var t=this._PSD=xe;if(un&&(this._stackHolder=ir(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ti)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&to(this,this._value))}this._state=null,this._value=null,++t.ref,ac(this,e)}const eo={get:function(){var e=xe,t=zi;function n(r,i){var s=!e.global&&(e!==xe||t!==zi);const o=s&&!xn();var l=new ue((u,c)=>{Uo(this,new oc(Gi(r,e,s,o),Gi(i,e,s,o),u,c,e))});return un&&uc(l,this),l}return n.prototype=ti,n},set:function(e){bn(this,"then",e&&e.prototype===ti?eo:{get:function(){return e},set:eo.set})}};function oc(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function ac(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&li();n&&typeof n.then=="function"?ac(e,(i,s)=>{n instanceof ue?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,lc(e)),r&&ci()}},to.bind(null,e))}catch(n){to(e,n)}}function to(e,t){if($i.push(t),e._state===null){var n=e._lib&&li();t=Zs(t),e._state=!1,e._value=t,un&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=Mo(t,"stack");t._promise=e,bn(t,"stack",{get:()=>Gs?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Xn.some(i=>i._value===r._value)||Xn.push(r)}(e),lc(e),n&&ci()}}function lc(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Uo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Qn===0&&(++Qn,Vr(()=>{--Qn==0&&Ho()},[]))}function Uo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Qn,Vr(Nd,[n,e,t])}else e._listeners.push(t)}function Nd(e,t,n){try{Qs=t;var r,i=t._value;t._state?r=e(i):($i.length&&($i=[]),r=e(i),$i.indexOf(i)===-1&&function(s){for(var o=Xn.length;o;)if(Xn[--o]._value===s._value)return void Xn.splice(o,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{Qs=null,--Qn==0&&Ho(),--n.psd.ref||n.psd.finalize()}}function cc(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Ys(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return un&&((r=Ys(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&cc(e._prev,t,n)),t}function uc(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function vi(){li()&&ci()}function li(){var e=Xs;return Xs=!1,Wi=!1,e}function ci(){var e,t,n;do for(;Mr.length>0;)for(e=Mr,Mr=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Mr.length>0);Xs=!0,Wi=!0}function Ho(){var e=Xn;Xn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ii.slice(0),n=t.length;n;)t[--n]()}function bi(e){return new ue(ti,!1,e)}function st(e,t){var n=xe;return function(){var r=li(),i=xe;try{return Mn(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Mn(i,!1),r&&ci()}}}Sr(ue.prototype,{then:eo,_then:function(e,t){Uo(this,new oc(null,null,e,t,xe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):bi(r)):this.then(null,r=>r&&r.name===t?n(r):bi(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),bi(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Gs=!0;var e=cc(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Gs=!1}}},timeout:function(e,t){return e<1/0?new ue((n,r)=>{var i=setTimeout(()=>r(new Te.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&bn(ue.prototype,Symbol.toStringTag,"Dexie.Promise"),_r.env=fc(),Sr(ue,{all:function(){var e=gn.apply(null,arguments).map(_i);return new ue(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>ue.resolve(i).then(o=>{e[s]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof ue)return e;if(e&&typeof e.then=="function")return new ue((n,r)=>{e.then(n,r)});var t=new ue(ti,!0,e);return uc(t,Qs),t},reject:bi,race:function(){var e=gn.apply(null,arguments).map(_i);return new ue((t,n)=>{e.map(r=>ue.resolve(r).then(t,n))})},PSD:{get:()=>xe,set:e=>xe=e},totalEchoes:{get:()=>zi},newPSD:Ln,usePSD:Pr,scheduler:{get:()=>Vr,set:e=>{Vr=e}},rejectionMapper:{get:()=>Zs,set:e=>{Zs=e}},follow:(e,t)=>new ue((n,r)=>Ln((i,s)=>{var o=xe;o.unhandleds=[],o.onunhandled=s,o.finalize=er(function(){(function(l){function u(){l(),Ii.splice(Ii.indexOf(u),1)}Ii.push(u),++Qn,Vr(()=>{--Qn==0&&Ho()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Pi&&(Pi.allSettled&&bn(ue,"allSettled",function(){const e=gn.apply(null,arguments).map(_i);return new ue(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>ue.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Pi.any&&typeof AggregateError<"u"&&bn(ue,"any",function(){const e=gn.apply(null,arguments).map(_i);return new ue((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,o)=>ue.resolve(s).then(l=>t(l),l=>{i[o]=l,--r||n(new AggregateError(i))}))})}));const xt={awaits:0,echoes:0,id:0};var Fd=0,Ni=[],Cs=0,zi=0,Ld=0;function Ln(e,t,n,r){var i=xe,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Ld;var o=_r.env;s.env=Vo?{Promise:ue,PromiseProp:{value:ue,configurable:!0,writable:!0},all:ue.all,race:ue.race,allSettled:ue.allSettled,any:ue.any,resolve:ue.resolve,reject:ue.reject,nthen:$a(o.nthen,s),gthen:$a(o.gthen,s)}:{},t&&Pt(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Pr(s,e,n,r);return s.ref===0&&s.finalize(),l}function Ar(){return xt.id||(xt.id=++Fd),++xt.awaits,xt.echoes+=ic,xt.id}function xn(){return!!xt.awaits&&(--xt.awaits==0&&(xt.id=0),xt.echoes=xt.awaits*ic,!0)}function _i(e){return xt.echoes&&e&&e.constructor===Pi?(Ar(),e.then(t=>(xn(),t),t=>(xn(),pt(t)))):e}function Md(e){++zi,xt.echoes&&--xt.echoes!=0||(xt.echoes=xt.id=0),Ni.push(xe),Mn(e,!0)}function Bd(){var e=Ni[Ni.length-1];Ni.pop(),Mn(e,!1)}function Mn(e,t){var n=xe;if((t?!xt.echoes||Cs++&&e===xe:!Cs||--Cs&&e===xe)||dc(t?Md.bind(null,e):Bd),e!==xe&&(xe=e,n===_r&&(_r.env=fc()),Vo)){var r=_r.env.Promise,i=e.env;Yi.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(nt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function fc(){var e=nt.Promise;return Vo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(nt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Yi.then,gthen:e.prototype.then}:{}}function Pr(e,t,n,r,i){var s=xe;try{return Mn(e,!0),t(n,r,i)}finally{Mn(s,!1)}}function dc(e){sc.call(Ws,e)}function Gi(e,t,n,r){return typeof e!="function"?e:function(){var i=xe;n&&Ar(),Mn(t,!0);try{return e.apply(this,arguments)}finally{Mn(i,!1),r&&dc(xn)}}}function $a(e,t){return function(n,r){return e.call(this,Gi(n,t),Gi(r,t))}}(""+sc).indexOf("[native code]")===-1&&(Ar=xn=Ge);const Ia="unhandledrejection";function Na(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(nt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Ia,!0,!0),Pt(r,i)):nt.CustomEvent&&Pt(r=new CustomEvent(Ia,{detail:i}),i),r&&nt.dispatchEvent&&(dispatchEvent(r),!nt.PromiseRejectionEvent&&nt.onunhandledrejection))try{nt.onunhandledrejection(r)}catch{}un&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var pt=ue.reject;function no(e,t,n,r){if(e.idbdb&&(e._state.openComplete||xe.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===jo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>no(e,t,n,r))):pt(s)}return i._promise(t,(s,o)=>Ln(()=>(xe.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return pt(new Te.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return pt(new Te.DatabaseClosed);e.open().catch(Ge)}return e._state.dbReadyPromise.then(()=>no(e,t,n,r))}const Fa="3.2.4",Wn=String.fromCharCode(65535),ro=-1/0,dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hc="String expected.",Ur=[],fs=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Rd=fs,jd=fs,pc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ds="__dbnames",Ds="readonly",Ss="readwrite";function tr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const yc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wi(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=ai(t))[e],t)}class Kd{_trans(t,n,r){const i=this._tx||xe.trans,s=this.name;function o(u,c,h){if(!h.schema[s])throw new Te.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}const l=li();try{return i&&i.db===this.db?i===xe.trans?i._promise(t,o,r):Ln(()=>i._promise(t,o,r),{trans:i,transless:xe.transless||xe}):no(this.db,t,[this.name],o)}finally{l&&ci()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Dt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ft(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(h=>c.keyPath.indexOf(h)>=0)&&c.keyPath.every(h=>n.indexOf(h)>=0))[0];if(r&&this.db._maxKey!==Wn)return this.where(r.name).equals(r.keyPath.map(c=>t[c]));!r&&un&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,h){try{return s.cmp(c,h)===0}catch{return!1}}const[l,u]=n.reduce(([c,h],m)=>{const x=i[m],S=t[m];return[c||x,c||!x?tr(h,x&&x.multi?P=>{const T=_n(P,m);return Dt(T)&&T.some(B=>o(S,B))}:P=>o(S,_n(P,m))):h]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Dt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(Kt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Pt(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=wi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?ue.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{rn(t,i,o)}catch{}return o})}update(t,n){if(typeof t!="object"||Dt(t))return this.where(":id").equals(t).modify(n);{const r=_n(t,this.schema.primKey.keyPath);if(r===void 0)return pt(new Te.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ft(n).forEach(i=>{rn(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=wi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?ue.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{rn(t,i,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?ue.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:yc})).then(t=>t.numFailures?ue.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let h=u&&l?t.map(wi(u)):t;return this.core.mutate({trans:o,type:"add",keys:i,values:h,wantResults:s}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return s?x:S;throw new Kr(`${this.name}.bulkAdd(): ${m} of ${c} operations failed`,P)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let h=u&&l?t.map(wi(u)):t;return this.core.mutate({trans:o,type:"put",keys:i,values:h,wantResults:s}).then(({numFailures:m,results:x,lastResult:S,failures:P})=>{if(m===0)return s?x:S;throw new Kr(`${this.name}.bulkPut(): ${m} of ${c} operations failed`,P)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Kr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Hr(e){var t={},n=function(o,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[o].subscribe.apply(null,c),e}if(typeof o=="string")return t[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,l,u){if(typeof o!="object"){var c;l||(l=$d),u||(u=Ge);var h={subscribers:[],fire:u,subscribe:function(m){h.subscribers.indexOf(m)===-1&&(h.subscribers.push(m),h.fire=l(h.fire,m))},unsubscribe:function(m){h.subscribers=h.subscribers.filter(function(x){return x!==m}),h.fire=h.subscribers.reduce(l,u)}};return t[o]=n[o]=h,h}ft(c=o).forEach(function(m){var x=c[m];if(Dt(x))s(m,c[m][0],c[m][1]);else{if(x!=="asap")throw new Te.InvalidArgument("Invalid event config");var S=s(m,ei,function(){for(var P=arguments.length,T=new Array(P);P--;)T[P]=arguments[P];S.subscribers.forEach(function(B){zl(function(){B.apply(null,T)})})})}})}}function $r(e,t){return vr(t).from({prototype:e}),t}function ar(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ts(e,t){e.filter=tr(e.filter,t)}function Os(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>tr(r(),t()):t,e.justLimit=n&&!r}function Fi(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function La(e,t,n){const r=Fi(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function xi(e,t,n,r){const i=e.replayFilter?tr(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(l,u,c)=>{if(!i||i(u,c,x=>u.stop(x),x=>u.fail(x))){var h=u.primaryKey,m=""+h;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(h)),Kt(s,m)||(s[m]=!0,t(l,u,c))}};return Promise.all([e.or._iterate(o,n),Ma(La(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Ma(La(e,r,n),tr(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ma(e,t,n,r){var i=st(r?(s,o,l)=>n(r(s),o,l):n);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();t&&!t(s,l=>o=l,l=>{s.stop(l),o=Ge},l=>{s.fail(l),o=Ge})||i(s.value,s,l=>o=l),o()})})}function Et(e,t){try{const n=Ba(e),r=Ba(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===l?0:o<l?-1:1}(Ra(e),Ra(t));case"Array":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c){const h=Et(i[c],s[c]);if(h!==0)return h}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Ba(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=qs(e);return n==="ArrayBuffer"?"binary":n}function Ra(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Vd{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,pt.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,pt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=tr(n.algorithm,t)}_iterate(t,n){return xi(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Pt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>xi(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(ar(r,!0))return i.count({trans:n,query:{index:Fi(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return xi(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(c,h){return h?o(c[r[h]],h-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function u(c,h){var m=o(c,s),x=o(h,s);return m<x?-l:m>x?l:0}return this.toArray(function(c){return c.sort(u)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ar(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Fi(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return xi(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ar(n)?Os(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):Os(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Os(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return Ts(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return Ts(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=tr(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ar(n,!0)&&n.limit>0)return this._read(i=>{var s=Fi(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Ts(this._ctx,function(i){var s=i.primaryKey.toString(),o=Kt(r,s);return r[s]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=ft(t),o=s.length;i=function(T){for(var B=!1,M=0;M<o;++M){var E=s[M],$=t[E];_n(T,E)!==$&&(rn(T,E,$),B=!0)}return B}}const l=n.table.core,{outbound:u,extractKey:c}=l.schema.primaryKey,h=this.db._options.modifyChunkSize||200,m=[];let x=0;const S=[],P=(T,B)=>{const{failures:M,numFailures:E}=B;x+=T-E;for(let $ of ft(M))m.push(M[$])};return this.clone().primaryKeys().then(T=>{const B=M=>{const E=Math.min(h,T.length-M);return l.getMany({trans:r,keys:T.slice(M,M+E),cache:"immutable"}).then($=>{const I=[],V=[],J=u?[]:null,H=[];for(let k=0;k<E;++k){const _=$[k],U={value:ai(_),primKey:T[M+k]};i.call(U,U.value,U)!==!1&&(U.value==null?H.push(T[M+k]):u||Et(c(_),c(U.value))===0?(V.push(U.value),u&&J.push(T[M+k])):(H.push(T[M+k]),I.push(U.value)))}const ne=ar(n)&&n.limit===1/0&&(typeof t!="function"||t===Es)&&{index:n.index,range:n.range};return Promise.resolve(I.length>0&&l.mutate({trans:r,type:"add",values:I}).then(k=>{for(let _ in k.failures)H.splice(parseInt(_),1);P(I.length,k)})).then(()=>(V.length>0||ne&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:J,values:V,criteria:ne,changeSpec:typeof t!="function"&&t}).then(k=>P(V.length,k))).then(()=>(H.length>0||ne&&t===Es)&&l.mutate({trans:r,type:"delete",keys:H,criteria:ne}).then(k=>P(H.length,k))).then(()=>T.length>M+E&&B(M+h))})};return B(0).then(()=>{if(m.length>0)throw new Ji("Error modifying one or more objects",m,x,S);return T.length})})})}delete(){var t=this._ctx,n=t.range;return ar(t)&&(t.isPrimKey&&!jd||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:u,results:c,numFailures:h})=>{if(h)throw new Ji("Could not delete some values",Object.keys(l).map(m=>l[m]),o-h);return o-h}))}):this.modify(Es)}}const Es=(e,t)=>t.value=null;function Ud(e,t){return e<t?-1:e===t?0:1}function Hd(e,t){return e>t?-1:e===t?0:1}function Rt(e,t,n){var r=e instanceof gc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function lr(e){return new e.Collection(e,()=>mc("")).limit(0)}function qd(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),l=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;i(e[u],c)<0&&(l=u)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function ki(e,t,n,r){var i,s,o,l,u,c,h,m=n.length;if(!n.every(T=>typeof T=="string"))return Rt(e,hc);function x(T){i=function(M){return M==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(T),s=function(M){return M==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(T),o=T==="next"?Ud:Hd;var B=n.map(function(M){return{lower:s(M),upper:i(M)}}).sort(function(M,E){return o(M.lower,E.lower)});l=B.map(function(M){return M.upper}),u=B.map(function(M){return M.lower}),c=T,h=T==="next"?"":r}x("next");var S=new e.Collection(e,()=>Sn(l[0],u[m-1]+r));S._ondirectionchange=function(T){x(T)};var P=0;return S._addAlgorithm(function(T,B,M){var E=T.key;if(typeof E!="string")return!1;var $=s(E);if(t($,u,P))return!0;for(var I=null,V=P;V<m;++V){var J=qd(E,$,l[V],u[V],o,c);J===null&&I===null?P=V+1:(I===null||o(I,J)>0)&&(I=J)}return B(I!==null?function(){T.continue(I+h)}:M),!1}),S}function Sn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function mc(e){return{type:1,lower:e,upper:e}}class gc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?lr(this):new this.Collection(this,()=>Sn(t,n,!r,!i))}catch{return Rt(this,dn)}}equals(t){return t==null?Rt(this,dn):new this.Collection(this,()=>mc(t))}above(t){return t==null?Rt(this,dn):new this.Collection(this,()=>Sn(t,void 0,!0))}aboveOrEqual(t){return t==null?Rt(this,dn):new this.Collection(this,()=>Sn(t,void 0,!1))}below(t){return t==null?Rt(this,dn):new this.Collection(this,()=>Sn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Rt(this,dn):new this.Collection(this,()=>Sn(void 0,t))}startsWith(t){return typeof t!="string"?Rt(this,hc):this.between(t,t+Wn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):ki(this,(n,r)=>n.indexOf(r[0])===0,[t],Wn)}equalsIgnoreCase(t){return ki(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=gn.apply(ur,arguments);return t.length===0?lr(this):ki(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=gn.apply(ur,arguments);return t.length===0?lr(this):ki(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Wn)}anyOf(){const t=gn.apply(ur,arguments);let n=this._cmp;try{t.sort(n)}catch{return Rt(this,dn)}if(t.length===0)return lr(this);const r=new this.Collection(this,()=>Sn(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,o,l)=>{const u=s.key;for(;n(u,t[i])>0;)if(++i,i===t.length)return o(l),!1;return n(u,t[i])===0||(o(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[ro,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=gn.apply(ur,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Rt(this,dn)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[ro,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,l=this._max;if(t.length===0)return lr(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&i(E[0],E[1])<=0))return Rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);const u=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let h,m=i;function x(E,$){return m(E[0],$[0])}try{h=t.reduce(function(E,$){let I=0,V=E.length;for(;I<V;++I){const J=E[I];if(r($[0],J[1])<0&&r($[1],J[0])>0){J[0]=o(J[0],$[0]),J[1]=l(J[1],$[1]);break}}return I===V&&E.push($),E},[]),h.sort(x)}catch{return Rt(this,dn)}let S=0;const P=c?E=>i(E,h[S][1])>0:E=>i(E,h[S][1])>=0,T=u?E=>s(E,h[S][0])>0:E=>s(E,h[S][0])>=0;let B=P;const M=new this.Collection(this,()=>Sn(h[0][0],h[h.length-1][1],!u,!c));return M._ondirectionchange=E=>{E==="next"?(B=P,m=i):(B=T,m=s),h.sort(x)},M._addAlgorithm((E,$,I)=>{for(var V=E.key;B(V);)if(++S,S===h.length)return $(I),!1;return!!function(J){return!P(J)&&!T(J)}(V)||(this._cmp(V,h[S][1])===0||this._cmp(V,h[S][0])===0||$(()=>{m===i?E.continue(h[S][0]):E.continue(h[S][1])}),!1)}),M}startsWithAnyOf(){const t=gn.apply(ur,arguments);return t.every(n=>typeof n=="string")?t.length===0?lr(this):this.inAnyRange(t.map(n=>[n,n+Wn])):Rt(this,"startsWithAnyOf() only works with strings")}}function on(e){return st(function(t){return ni(t),e(t.target.error),!1})}function ni(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const ri="storagemutated",An="x-storagemutated-1",Bn=Hr(null,ri);class Jd{_lock(){return Lr(!xe.global),++this._reculock,this._reculock!==1||xe.global||(xe.lockOwnerFor=this),this}_unlock(){if(Lr(!xe.global),--this._reculock==0)for(xe.global||(xe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Pr(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&xe.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Lr(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(r);case"MissingAPIError":throw new Te.MissingAPI(r.message,r);default:throw new Te.OpenFailed(r)}if(!this.active)throw new Te.TransactionInactive;return Lr(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=st(i=>{ni(i),this._reject(t.error)}),t.onabort=st(i=>{ni(i),this.active&&this._reject(new Te.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=st(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Bn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return pt(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new Te.TransactionInactive);if(this._locked())return new ue((s,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,o)},xe])});if(r)return Ln(()=>{var s=new ue((o,l)=>{this._lock();const u=n(o,l,this);u&&u.then&&u.then(o,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new ue((s,o)=>{var l=n(s,o,this);l&&l.then&&l.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=ue.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new ue((o,l)=>{r.then(u=>n._waitingQueue.push(st(o.bind(null,u))),u=>n._waitingQueue.push(st(l.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Kt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Te.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function io(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+vc(t)}}function vc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function bc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Gl(n,r=>[r.name,r])}}let ii=e=>{try{return e.only([[]]),ii=()=>[[]],[[]]}catch{return ii=()=>Wn,Wn}};function so(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>_n(r,t)}(e):t=>_n(t,e)}function ja(e){return[].slice.call(e)}let Yd=0;function qr(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Wd(e,t,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:h,lowerOpen:m,upperOpen:x}=u;return c===void 0?h===void 0?null:t.upperBound(h,!!x):h===void 0?t.lowerBound(c,!!m):t.bound(c,h,!!m,!!x)}const{schema:i,hasGetAll:s}=function(u,c){const h=ja(u.objectStoreNames);return{schema:{name:u.name,tables:h.map(m=>c.objectStore(m)).map(m=>{const{keyPath:x,autoIncrement:S}=m,P=Dt(x),T=x==null,B={},M={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:P,keyPath:x,autoIncrement:S,unique:!0,extractKey:so(x)},indexes:ja(m.indexNames).map(E=>m.index(E)).map(E=>{const{name:$,unique:I,multiEntry:V,keyPath:J}=E,H={name:$,compound:Dt(J),keyPath:J,unique:I,multiEntry:V,extractKey:so(J)};return B[qr(J)]=H,H}),getIndexByKeyPath:E=>B[qr(E)]};return B[":id"]=M.primaryKey,x!=null&&(B[qr(x)]=M.primaryKey),M})},hasGetAll:h.length>0&&"getAll"in c.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map(u=>function(c){const h=c.name;return{name:h,schema:c,mutate:function({trans:m,type:x,keys:S,values:P,range:T}){return new Promise((B,M)=>{B=st(B);const E=m.objectStore(h),$=E.keyPath==null,I=x==="put"||x==="add";if(!I&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);const{length:V}=S||P||{length:1};if(S&&P&&S.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(V===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});let J;const H=[],ne=[];let k=0;const _=R=>{++k,ni(R)};if(x==="deleteRange"){if(T.type===4)return B({numFailures:k,failures:ne,results:[],lastResult:void 0});T.type===3?H.push(J=E.clear()):H.push(J=E.delete(r(T)))}else{const[R,_e]=I?$?[P,S]:[P,null]:[S,null];if(I)for(let ce=0;ce<V;++ce)H.push(J=_e&&_e[ce]!==void 0?E[x](R[ce],_e[ce]):E[x](R[ce])),J.onerror=_;else for(let ce=0;ce<V;++ce)H.push(J=E[x](R[ce])),J.onerror=_}const U=R=>{const _e=R.target.result;H.forEach((ce,Pe)=>ce.error!=null&&(ne[Pe]=ce.error)),B({numFailures:k,failures:ne,results:x==="delete"?S:H.map(ce=>ce.result),lastResult:_e})};J.onerror=R=>{_(R),U(R)},J.onsuccess=U})},getMany:({trans:m,keys:x})=>new Promise((S,P)=>{S=st(S);const T=m.objectStore(h),B=x.length,M=new Array(B);let E,$=0,I=0;const V=H=>{const ne=H.target;M[ne._pos]=ne.result,++I===$&&S(M)},J=on(P);for(let H=0;H<B;++H)x[H]!=null&&(E=T.get(x[H]),E._pos=H,E.onsuccess=V,E.onerror=J,++$);$===0&&S(M)}),get:({trans:m,key:x})=>new Promise((S,P)=>{S=st(S);const T=m.objectStore(h).get(x);T.onsuccess=B=>S(B.target.result),T.onerror=on(P)}),query:function(m){return x=>new Promise((S,P)=>{S=st(S);const{trans:T,values:B,limit:M,query:E}=x,$=M===1/0?void 0:M,{index:I,range:V}=E,J=T.objectStore(h),H=I.isPrimaryKey?J:J.index(I.name),ne=r(V);if(M===0)return S({result:[]});if(m){const k=B?H.getAll(ne,$):H.getAllKeys(ne,$);k.onsuccess=_=>S({result:_.target.result}),k.onerror=on(P)}else{let k=0;const _=B||!("openKeyCursor"in H)?H.openCursor(ne):H.openKeyCursor(ne),U=[];_.onsuccess=R=>{const _e=_.result;return _e?(U.push(B?_e.value:_e.primaryKey),++k===M?S({result:U}):void _e.continue()):S({result:U})},_.onerror=on(P)}})}(s),openCursor:function({trans:m,values:x,query:S,reverse:P,unique:T}){return new Promise((B,M)=>{B=st(B);const{index:E,range:$}=S,I=m.objectStore(h),V=E.isPrimaryKey?I:I.index(E.name),J=P?T?"prevunique":"prev":T?"nextunique":"next",H=x||!("openKeyCursor"in V)?V.openCursor(r($),J):V.openKeyCursor(r($),J);H.onerror=on(M),H.onsuccess=st(ne=>{const k=H.result;if(!k)return void B(null);k.___id=++Yd,k.done=!1;const _=k.continue.bind(k);let U=k.continuePrimaryKey;U&&(U=U.bind(k));const R=k.advance.bind(k),_e=()=>{throw new Error("Cursor not stopped")};k.trans=m,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=st(M),k.next=function(){let ce=1;return this.start(()=>ce--?this.continue():this.stop()).then(()=>this)},k.start=ce=>{const Pe=new Promise((he,le)=>{he=st(he),H.onerror=on(le),k.fail=le,k.stop=Ye=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=_e,he(Ye)}}),be=()=>{if(H.result)try{ce()}catch(he){k.fail(he)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=st(he=>{H.onsuccess=be,be()}),k.continue=_,k.continuePrimaryKey=U,k.advance=R,be(),Pe},B(k)},M)})},count({query:m,trans:x}){const{index:S,range:P}=m;return new Promise((T,B)=>{const M=x.objectStore(h),E=S.isPrimaryKey?M:M.index(S.name),$=r(P),I=$?E.count($):E.count();I.onsuccess=st(V=>T(V.target.result)),I.onerror=on(B)})}}}(u)),l={};return o.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:ii(t),schema:i}}function oo({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:o,indexedDB:l},u){return{dbcore:function(h,m){return m.reduce((x,{create:S})=>({...x,...S(x)}),h)}(Wd(s,o,u),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Xi({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(o=>{const l=Mo(o,i);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?bn(o,i,{get(){return this.table(i)},set(u){Yl(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function ao({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function zd(e,t){return e._cfg.version-t._cfg.version}function Gd(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),l=xe.transless||xe;Ln(()=>{xe.trans=s,xe.transless=l,t===0?(ft(i).forEach(u=>{As(n,u,i[u].primKey,i[u].indexes)}),oo(e,n),ue.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:u},c,h,m){const x=[],S=u._versions;let P=u._dbSchema=co(u,u.idbdb,m),T=!1;const B=S.filter(E=>E._cfg.version>=c);function M(){return x.length?ue.resolve(x.shift()(h.idbtrans)).then(M):ue.resolve()}return B.forEach(E=>{x.push(()=>{const $=P,I=E._cfg.dbschema;uo(u,$,m),uo(u,I,m),P=u._dbSchema=I;const V=_c($,I);V.add.forEach(H=>{As(m,H[0],H[1].primKey,H[1].indexes)}),V.change.forEach(H=>{if(H.recreate)throw new Te.Upgrade("Not yet support for changing primary key");{const ne=m.objectStore(H.name);H.add.forEach(k=>lo(ne,k)),H.change.forEach(k=>{ne.deleteIndex(k.name),lo(ne,k)}),H.del.forEach(k=>ne.deleteIndex(k))}});const J=E._cfg.contentUpgrade;if(J&&E._cfg.version>c){oo(u,m),h._memoizedTables={},T=!0;let H=Xl(I);V.del.forEach(U=>{H[U]=$[U]}),ao(u,[u.Transaction.prototype]),Xi(u,[u.Transaction.prototype],ft(H),H),h.schema=H;const ne=Bo(J);let k;ne&&Ar();const _=ue.follow(()=>{if(k=J(h),k&&ne){var U=xn.bind(null,null);k.then(U,U)}});return k&&typeof k.then=="function"?ue.resolve(k):_.then(()=>k)}}),x.push($=>{(!T||!Rd)&&function(I,V){[].slice.call(V.db.objectStoreNames).forEach(J=>I[J]==null&&V.db.deleteObjectStore(J))}(E._cfg.dbschema,$),ao(u,[u.Transaction.prototype]),Xi(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),h.schema=u._dbSchema})}),M().then(()=>{var E,$;$=m,ft(E=P).forEach(I=>{$.db.objectStoreNames.contains(I)||As($,I,E[I].primKey,E[I].indexes)})})}(e,t,s,n).catch(o)})}function _c(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!fs)o.recreate=!0,n.change.push(o);else{const l=i.idxByName,u=s.idxByName;let c;for(c in l)u[c]||o.del.push(c);for(c in u){const h=l[c],m=u[c];h?h.src!==m.src&&o.change.push(m):o.add.push(m)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function As(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>lo(i,s)),i}function lo(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function co(e,t,n){const r={};return qi(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const l=io(vc(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),u=[];for(let h=0;h<s.indexNames.length;++h){const m=s.index(s.indexNames[h]);o=m.keyPath;var c=io(m.name,o,!!m.unique,!!m.multiEntry,!1,o&&typeof o!="string",!1);u.push(c)}r[i]=bc(i,l,u)}),r}function uo({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const u=o.indexNames[l],c=o.index(u).keyPath,h=typeof c=="string"?c:"["+qi(c).join("+")+"]";if(t[s]){const m=t[s].idxByName[h];m&&(m.name=u,delete t[s].idxByName[h],t[s].idxByName[u]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&nt.WorkerGlobalScope&&nt instanceof nt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Xd{_parseStoresSpec(t,n){ft(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((o,l)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return io(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Dt(c),l===0)}),s=i.shift();if(s.multi)throw new Te.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),n[r]=bc(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Pt(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(o=>{Pt(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,ao(n,[n._allTables,n,n.Transaction.prototype]),Xi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ft(s),s),n._storeNames=ft(s),this}upgrade(t){return this._cfg.contentUpgrade=Ko(this._cfg.contentUpgrade||Ge,t),this}}function qo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ct(ds,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Jo(e){return e&&typeof e.databases=="function"}function fo(e){return Ln(function(){return xe.letThrough=!0,e()})}function Qd(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Zd(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?pt(t.dbOpenError):e);un&&(t.openCanceller._stackHolder=ir()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Te.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,l=!1;return ue.race([r,(typeof navigator>"u"?ue.resolve():Qd()).then(()=>new ue((u,c)=>{if(i(),!n)throw new Te.MissingAPI;const h=e.name,m=t.autoSchema?n.open(h):n.open(h,Math.round(10*e.verno));if(!m)throw new Te.MissingAPI;m.onerror=on(c),m.onblocked=st(e._fireOnBlocked),m.onupgradeneeded=st(x=>{if(o=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=ni,o.abort(),m.result.close();const P=n.deleteDatabase(h);P.onsuccess=P.onerror=st(()=>{c(new Te.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=on(c);var S=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;l=S<1,e._novip.idbdb=m.result,Gd(e,S/10,o,c)}},c),m.onsuccess=st(()=>{o=null;const x=e._novip.idbdb=m.result,S=qi(x.objectStoreNames);if(S.length>0)try{const T=x.transaction((P=S).length===1?P[0]:P,"readonly");t.autoSchema?function({_novip:B},M,E){B.verno=M.version/10;const $=B._dbSchema=co(0,M,E);B._storeNames=qi(M.objectStoreNames,0),Xi(B,[B._allTables],ft($),$)}(e,x,T):(uo(e,e._dbSchema,T),function(B,M){const E=_c(co(0,B.idbdb,M),B._dbSchema);return!(E.add.length||E.change.some($=>$.add.length||$.change.length))}(e,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),oo(e,T)}catch{}var P;Ur.push(e),x.onversionchange=st(T=>{t.vcFired=!0,e.on("versionchange").fire(T)}),x.onclose=st(T=>{e.on("close").fire(T)}),l&&function({indexedDB:T,IDBKeyRange:B},M){!Jo(T)&&M!==ds&&qo(T,B).put({name:M}).catch(Ge)}(e._deps,h),u()},c)}))]).then(()=>(i(),t.onReadyBeingFired=[],ue.resolve(fo(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(Ko,Ge);return t.onReadyBeingFired=[],ue.resolve(fo(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),pt(u)}).finally(()=>{t.openComplete=!0,s()})}function ho(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return o=>{var l=s(o),u=l.value;return l.done?u:u&&typeof u.then=="function"?u.then(n,r):Dt(u)?Promise.all(u).then(n,r):n(u)}}return i(t)()}function eh(e,t,n){var r=arguments.length;if(r<2)throw new Te.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Ql(i),n]}function wc(e,t,n,r,i){return ue.resolve().then(()=>{const s=xe.transless||xe,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(m){return m.name===jo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>wc(e,t,n,null,i))):pt(m)}const u=Bo(i);let c;u&&Ar();const h=ue.follow(()=>{if(c=i.call(o,o),c)if(u){var m=xn.bind(null,null);c.then(m,m)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=ho(c))},l);return(c&&typeof c.then=="function"?ue.resolve(c).then(m=>o.active?m:pt(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>c)).then(m=>(r&&o._resolve(),o._completion.then(()=>m))).catch(m=>(o._reject(m),pt(m)))})}function Ci(e,t,n){const r=Dt(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const th={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function o(h,m,x){const S=qr(h),P=i[S]=i[S]||[],T=h==null?0:typeof h=="string"?1:h.length,B=m>0,M={...x,isVirtual:B,keyTail:m,keyLength:T,extractKey:so(h),unique:!B&&x.unique};return P.push(M),M.isPrimaryKey||s.push(M),T>1&&o(T===2?h[0]:h.slice(0,T-1),m+1,x),P.sort((E,$)=>E.keyTail-$.keyTail),M}const l=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const h of r.indexes)o(h.keyPath,0,h);function u(h){const m=h.query.index;return m.isVirtual?{...h,query:{index:m,range:(x=h.query.range,S=m.keyTail,{type:x.type===1?2:x.type,lower:Ci(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:Ci(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0})}}:h;var x,S}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:function(h){const m=i[qr(h)];return m&&m[0]}},count:h=>n.count(u(h)),query:h=>n.query(u(h)),openCursor(h){const{keyTail:m,isVirtual:x,keyLength:S}=h.query.index;return x?n.openCursor(u(h)).then(P=>P&&function(T){return Object.create(T,{continue:{value:function(M){M!=null?T.continue(Ci(M,h.reverse?e.MAX_KEY:e.MIN_KEY,m)):h.unique?T.continue(T.key.slice(0,S).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,m)):T.continue()}},continuePrimaryKey:{value(M,E){T.continuePrimaryKey(Ci(M,e.MAX_KEY,m),E)}},primaryKey:{get:()=>T.primaryKey},key:{get(){const M=T.key;return S===1?M[0]:M.slice(0,S)}},value:{get:()=>T.value}})}(P)):n.openCursor(h)}}}}}};function Yo(e,t,n,r){return n=n||{},r=r||"",ft(e).forEach(i=>{if(Kt(t,i)){var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const l=qs(s);l!==qs(o)?n[r+i]=t[i]:l==="Object"?Yo(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0}),ft(t).forEach(i=>{Kt(e,i)||(n[r+i]=t[i])}),n}const nh={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=xe.trans,{deleting:l,creating:u,updating:c}=o.table(t).hook;switch(s.type){case"add":if(u.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"put":if(u.fire===Ge&&c.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"delete":if(l.fire===Ge)break;return o._promise("readwrite",()=>h(s),!0);case"deleteRange":if(l.fire===Ge)break;return o._promise("readwrite",()=>function(x){return m(x.trans,x.range,1e4)}(s),!0)}return n.mutate(s);function h(x){const S=xe.trans,P=x.keys||function(T,B){return B.type==="delete"?B.keys:B.keys||B.values.map(T.extractKey)}(r,x);if(!P)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?{...x,keys:P}:{...x}).type!=="delete"&&(x.values=[...x.values]),x.keys&&(x.keys=[...x.keys]),function(T,B,M){return B.type==="add"?Promise.resolve([]):T.getMany({trans:B.trans,keys:M,cache:"immutable"})}(n,x,P).then(T=>{const B=P.map((M,E)=>{const $=T[E],I={onerror:null,onsuccess:null};if(x.type==="delete")l.fire.call(I,M,$,S);else if(x.type==="add"||$===void 0){const V=u.fire.call(I,M,x.values[E],S);M==null&&V!=null&&(M=V,x.keys[E]=M,r.outbound||rn(x.values[E],r.keyPath,M))}else{const V=Yo($,x.values[E]),J=c.fire.call(I,V,M,$,S);if(J){const H=x.values[E];Object.keys(J).forEach(ne=>{Kt(H,ne)?H[ne]=J[ne]:rn(H,ne,J[ne])})}}return I});return n.mutate(x).then(({failures:M,results:E,numFailures:$,lastResult:I})=>{for(let V=0;V<P.length;++V){const J=E?E[V]:P[V],H=B[V];J==null?H.onerror&&H.onerror(M[V]):H.onsuccess&&H.onsuccess(x.type==="put"&&T[V]?x.values[V]:J)}return{failures:M,results:E,numFailures:$,lastResult:I}}).catch(M=>(B.forEach(E=>E.onerror&&E.onerror(M)),Promise.reject(M)))})}function m(x,S,P){return n.query({trans:x,values:!1,query:{index:r,range:S},limit:P}).then(({result:T})=>h({type:"delete",keys:T,trans:x}).then(B=>B.numFailures>0?Promise.reject(B.failures[0]):T.length<P?{failures:[],numFailures:0,lastResult:void 0}:m(x,{...S,lower:T[T.length-1],lowerOpen:!0},P)))}}}}})};function xc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)Et(t.keys[i],e[s])===0&&(r.push(n?ai(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const rh={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=xc(r.keys,r.trans._cache,r.cache==="clone");return i?ue.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?ai(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Wo(e){return!("from"in e)}const mn=function(e,t){if(!this){const n=new mn;return e&&"d"in e&&Pt(n,e),n}Pt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function si(e,t,n){const r=Et(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Wo(e))return Pt(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(Et(n,e.from)<0)return i?si(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ka(e);if(Et(t,e.to)>0)return s?si(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ka(e);Et(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),Et(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Qi(e,i),s&&o&&Qi(e,s)}function Qi(e,t){Wo(t)||function n(r,{from:i,to:s,l:o,r:l}){si(r,i,s),o&&n(r,o),l&&n(r,l)}(e,t)}function ih(e,t){const n=po(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=po(e);let o=s.next(i.from),l=o.value;for(;!r.done&&!o.done;){if(Et(l.from,i.to)<=0&&Et(l.to,i.from)>=0)return!0;Et(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(o=s.next(i.from)).value}return!1}function po(e){let t=Wo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Et(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Et(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ka(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],o[i]=l[s],e[s]=o,o.d=Va(o)}e.d=Va(e)}function Va({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Sr(mn.prototype,{add(e){return Qi(this,e),this},addKey(e){return si(this,e,e),this},addKeys(e){return e.forEach(t=>si(this,t,t)),this},[Js](){return po(this)}});const sh={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new mn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:l,outbound:u}=o,c={...i,mutate:x=>{const S=x.trans,P=S.mutatedParts||(S.mutatedParts={}),T=J=>{const H=`idb://${t}/${r}/${J}`;return P[H]||(P[H]=new mn)},B=T(""),M=T(":dels"),{type:E}=x;let[$,I]=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[[],x.values]:[];const V=x.trans._cache;return i.mutate(x).then(J=>{if(Dt($)){E!=="delete"&&($=J.results),B.addKeys($);const H=xc($,V);H||E==="add"||M.addKeys($),(H||I)&&function(ne,k,_,U){function R(_e){const ce=ne(_e.name||"");function Pe(he){return he!=null?_e.extractKey(he):null}const be=he=>_e.multiEntry&&Dt(he)?he.forEach(le=>ce.addKey(le)):ce.addKey(he);(_||U).forEach((he,le)=>{const Ye=_&&Pe(_[le]),Je=U&&Pe(U[le]);Et(Ye,Je)!==0&&(Ye!=null&&be(Ye),Je!=null&&be(Je))})}k.indexes.forEach(R)}(T,s,H,I)}else if($){const H={from:$.lower,to:$.upper};M.add(H),B.add(H)}else B.add(n),M.add(n),s.indexes.forEach(H=>T(H.name).add(n));return J})}},h=({query:{index:x,range:S}})=>{var P,T;return[x,new mn((P=S.lower)!==null&&P!==void 0?P:e.MIN_KEY,(T=S.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},m={get:x=>[o,new mn(x.key)],getMany:x=>[o,new mn().addKeys(x.keys)],count:h,query:h,openCursor:h};return ft(m).forEach(x=>{c[x]=function(S){const{subscr:P}=xe;if(P){const T=I=>{const V=`idb://${t}/${r}/${I}`;return P[V]||(P[V]=new mn)},B=T(""),M=T(":dels"),[E,$]=m[x](S);if(T(E.name||"").add($),!E.isPrimaryKey){if(x!=="count"){const I=x==="query"&&u&&S.values&&i.query({...S,values:!1});return i[x].apply(this,arguments).then(V=>{if(x==="query"){if(u&&S.values)return I.then(({result:H})=>(B.addKeys(H),V));const J=S.values?V.result.map(l):V.result;S.values?B.addKeys(J):M.addKeys(J)}else if(x==="openCursor"){const J=V,H=S.values;return J&&Object.create(J,{key:{get:()=>(M.addKey(J.primaryKey),J.key)},primaryKey:{get(){const ne=J.primaryKey;return M.addKey(ne),ne}},value:{get:()=>(H&&B.addKey(J.primaryKey),J.value)}})}return V})}M.add(n)}}return i[x].apply(this,arguments)}}),c}}}};class ct{constructor(t,n){this._middlewares={},this.verno=0;const r=ct.dependencies;this._options=n={addons:ct.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ge,dbReadyPromise:null,cancelOpen:Ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new ue(l=>{s.dbReadyResolve=l}),s.openCanceller=new ue((l,u)=>{s.cancelOpen=u}),this._state=s,this.name=t,this.on=Hr(this,"populate","blocked","versionchange","close",{ready:[Ko,Ge]}),this.on.ready.subscribe=Wl(this.on.ready.subscribe,l=>(u,c)=>{ct.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||ue.resolve().then(u),c&&l(u);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(u),c&&l(u);else{l(u);const m=this;c||l(function x(){m.on.ready.unsubscribe(u),m.on.ready.unsubscribe(x)})}})}),this.Collection=(o=this,$r(Vd.prototype,function(l,u){this.db=o;let c=yc,h=null;if(u)try{c=u()}catch(P){h=P}const m=l._ctx,x=m.table,S=x.hook.reading.fire;this._ctx={table:x,index:m.index,isPrimKey:!m.index||x.schema.primKey.keyPath&&m.index===x.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:m.or,valueMapper:S!==ei?S:null}})),this.Table=function(l){return $r(Kd.prototype,function(u,c,h){this.db=l,this._tx=h,this.name=u,this.schema=c,this.hook=l._allTables[u]?l._allTables[u].hook:Hr(null,{creating:[Ed,Ge],reading:[Od,ei],updating:[Pd,Ge],deleting:[Ad,Ge]})})}(this),this.Transaction=function(l){return $r(Jd.prototype,function(u,c,h,m,x){this.db=l,this.mode=u,this.storeNames=c,this.schema=h,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Hr(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ue((S,P)=>{this._resolve=S,this._reject=P}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},S=>{var P=this.active;return this.active=!1,this.on.error.fire(S),this.parent?this.parent._reject(S):P&&this.idbtrans&&this.idbtrans.abort(),pt(S)})})}(this),this.Version=function(l){return $r(Xd.prototype,function(u){this.db=l,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return $r(gc.prototype,function(u,c,h){this.db=l,this._ctx={table:u,index:c===":id"?null:c,or:h};const m=l._deps.indexedDB;if(!m)throw new Te.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(x,S)=>m.cmp(S,x),this._max=(x,S)=>m.cmp(x,S)>0?x:S,this._min=(x,S)=>m.cmp(x,S)<0?x:S,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=ii(n.IDBKeyRange),this._createTransaction=(l,u,c,h)=>new this.Transaction(l,u,c,this._options.chromeTransactionDurability,h),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ur.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(l))},this.use(th),this.use(nh),this.use(sh),this.use(rh),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new Te.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(zd),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?t():new ue((n,r)=>{if(this._state.openComplete)return r(new Te.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Te.DatabaseClosed);this.open().catch(Ge)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Zd(this)}_close(){const t=this._state,n=Ur.indexOf(this);if(n>=0&&Ur.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new ue(r=>{t.dbReadyResolve=r}),t.openCanceller=new ue((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Te.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new ue((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=st(()=>{(function({indexedDB:l,IDBKeyRange:u},c){!Jo(l)&&c!==ds&&qo(l,u).delete(c).catch(Ge)})(this._deps,this.name),r()}),o.onerror=on(i),o.onblocked=this._fireOnBlocked};if(t)throw new Te.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ft(this._allTables).map(t=>this._allTables[t])}transaction(){const t=eh.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=xe.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(c=>{var h=c instanceof this.Table?c.name:c;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),t=="r"||t===Ds)o=Ds;else{if(t!="rw"&&t!=Ss)throw new Te.InvalidArgument("Invalid transaction mode: "+t);o=Ss}if(i){if(i.mode===Ds&&o===Ss){if(!s)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new Te.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(h,m)=>{m(c)}):pt(c)}const u=wc.bind(null,this,o,l,i,r);return i?i._promise(o,u,"lock"):xe.trans?Pr(xe.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!Kt(this._allTables,t))throw new Te.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const oh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ah{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[oh](){return this}}function kc(e,t){return ft(t).forEach(n=>{Qi(e[n]||(e[n]=new mn),t[n])}),e}function lh(e){let t,n=!1;const r=new ah(i=>{const s=Bo(e);let o=!1,l={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Bn.storagemutated.unsubscribe(S)}};i.start&&i.start(c);let h=!1,m=!1;function x(){return ft(u).some(T=>l[T]&&ih(l[T],u[T]))}const S=T=>{kc(l,T),x()&&P()},P=()=>{if(h||o)return;l={};const T={},B=function(M){s&&Ar();const E=()=>Ln(e,{subscr:M,trans:null}),$=xe.trans?Pr(xe.transless,E):E();return s&&$.then(xn,xn),$}(T);m||(Bn(ri,S),m=!0),h=!0,Promise.resolve(B).then(M=>{n=!0,t=M,h=!1,o||(x()?P():(l={},u=T,i.next&&i.next(M)))},M=>{h=!1,n=!1,i.error&&i.error(M),c.unsubscribe()})};return P(),c});return r.hasValue=()=>n,r.getValue=()=>t,r}let yo;try{yo={indexedDB:nt.indexedDB||nt.mozIndexedDB||nt.webkitIndexedDB||nt.msIndexedDB,IDBKeyRange:nt.IDBKeyRange||nt.webkitIDBKeyRange}}catch{yo={indexedDB:null,IDBKeyRange:null}}const Un=ct;function Li(e){let t=vn;try{vn=!0,Bn.storagemutated.fire(e)}finally{vn=t}}Sr(Un,{...Ai,delete:e=>new Un(e,{addons:[]}).delete(),exists:e=>new Un(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Jo(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==ds)):qo(t,n).toCollection().primaryKeys()}(Un.dependencies).then(e)}catch{return pt(new Te.MissingAPI)}},defineClass:()=>function(e){Pt(this,e)},ignoreTransaction:e=>xe.trans?Pr(xe.transless,e):e(),vip:fo,async:function(e){return function(){try{var t=ho(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ue.resolve(t)}catch(n){return pt(n)}}},spawn:function(e,t,n){try{var r=ho(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:ue.resolve(r)}catch(i){return pt(i)}},currentTransaction:{get:()=>xe.trans||null},waitFor:function(e,t){const n=ue.resolve(typeof e=="function"?Un.ignoreTransaction(e):e).timeout(t||6e4);return xe.trans?xe.trans.waitFor(n):n},Promise:ue,debug:{get:()=>un,set:e=>{ec(e,e==="dexie"?()=>!0:pc)}},derive:vr,extend:Pt,props:Sr,override:Wl,Events:Hr,on:Bn,liveQuery:lh,extendObservabilitySet:kc,getByKeyPath:_n,setByKeyPath:rn,delByKeyPath:function(e,t){typeof t=="string"?rn(e,t,void 0):"length"in t&&[].map.call(t,function(n){rn(e,n,void 0)})},shallowClone:Xl,deepClone:ai,getObjectDiff:Yo,cmp:Et,asap:zl,minKey:ro,addons:[],connections:Ur,errnames:jo,dependencies:yo,semVer:Fa,version:Fa.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Un.maxKey=ii(Un.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bn(ri,e=>{if(!vn){let t;fs?(t=document.createEvent("CustomEvent"),t.initCustomEvent(An,!0,!0,e)):t=new CustomEvent(An,{detail:e}),vn=!0,dispatchEvent(t),vn=!1}}),addEventListener(An,({detail:e})=>{vn||Li(e)}));let vn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(An);typeof e.unref=="function"&&e.unref(),Bn(ri,t=>{vn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Li(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Bn(ri,t=>{try{vn||(typeof localStorage<"u"&&localStorage.setItem(An,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:An,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===An){const n=JSON.parse(t.newValue);n&&Li(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===An&&Li(t.changedParts)})}ue.rejectionMapper=function(e,t){if(!e||e instanceof br||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Pa[e.name])return e;var n=new Pa[e.name](t||e.message,e);return"stack"in e&&bn(n,"stack",{get:function(){return this.inner.stack}}),n},ec(un,pc);const lt=new ct("avito_scraper");function ch(e=1){lt.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,profileInfoList:`
            ++id,
            &url,
            name,
            comment,
            marked,
            *reviewsList
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class uh{constructor(t){Bt(this,"canvas",null);Bt(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var u,c;const i={...this.settings,...r,type:t},s=(u=this.canvas)==null?void 0:u.querySelector(`.${this.settings.groupContainerClass}.position-${i.position}`),o=this.createToast(n,i);if(s)return s.append(o),o;const l=this.createContainer(i);return l.append(o),(c=this.canvas)==null||c.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),i=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...i),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const s=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(s),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const Ue=new uh({hideOnClick:!0,position:"bottom-right"});var He=(e=>(e.ReviewsFilterSaved="Фильтр сохранен",e.ReviewsFilterSaveError="Не удалось сохранить фильтр",e.ReviewsFilterCleared="Фильтр сброшен",e.ReviewsFilterClearError="Не удалось удалить фильтр из базы",e.ReviewsFilterGetError="Не удалось достать фильтр из базы",e.ReviewsFilterAllLinksParsed="Все ссылки уже прошли парсинг",e.ReviewsFilterSimilarLinks="В фильтре присутствуют одинаковые ссылки",e.ParsingReviewsCanceled="Парсинг отзывов отменен",e.ParsingReviewsStarted="Парсинг отзывов запущен",e.ParsingReviewsFinished="Парсинг отзывов завершен",e.TabOpenError="Не удалось открыть ссылку",e.ProfileCreated="Профиль добавлен в базу",e.ProfileCreateError="Не удалось сохранить профиль в базу",e.ProfileEdited="Профиль успешно обновлен",e.ProfileEditeError="Не удалось обновить профиль",e.ProfileDeleted="Профиль успешно удален",e.ProfileDeleteError="Не удалось удалить профиль",e.ProfileLinkCopied="Ссылка скопирована в буффер",e.ProfileLinkAddedInReviewsFilter="Ссылка профиля вставлена в форму фильтра",e.ProfileInfoListAddedInDB="Список профилей сохранен",e.ProfileInfoListRemovedFromDB="Список профилей очищен",e.InfoCopied="Информация скопирована в буффер",e.InfoNotFound="Информация не найдена",e.ResultsNotFound="Результаты не найдены",e.ProductNameCopied="Название товара скопировано в буффер",e.WaitOpenPage="Ожидаем открытия следующей страницы ...",e.DBExportSuccess="Экпорт базы успешно завершен",e.DBExportError="Не удалось экспортировать базу",e.DBImportError="Не удалось импортировать базу",e.DBImportSuccess="Импорт базы успешно завершен",e.DBDropSuccess="База данных успешно удалена",e.DBDropError="Не удалось удалить базу данных",e.CategoriesSaved="Категории сохранены",e.CategoriesNotSelected="Выберите категорию",e))(He||{});function Ua(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function wr(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ha(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}async function Cc(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(i,s){s.status==="complete"&&i===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function qa(){const t=(await chrome.tabs.query({active:!1})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function fh(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function zo(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("Ошибка при копировании в буффер",n)}t.remove()}function dh(e,t){return Math.floor(Math.random()*(t-e+1))+e}class hh{constructor(){Bt(this,"list",Yt([]));Bt(this,"state",Nn({contentModalData:[],contentModalVisible:!1,viewAllButtonVisible:!1,viewMoreThanButtonVisible:!1,removeInfoListButtonVisible:!1}))}pushProfileInfo(t){this.list.value.push(t)}pushResultsByUrl(t,n){const r=this.list.value.find(i=>i.url===t);r&&(r.reviewsList=n,this.sortResults(r,"product_name_asc"))}sortResults(t,n){t.reviewsList&&(t.reviewsSortedBy=n,n==="product_name_asc"&&t.reviewsList.sort((r,i)=>r.productName.localeCompare(i.productName)),n==="product_name_desc"&&t.reviewsList.sort((r,i)=>i.productName.localeCompare(r.productName)),n==="rating_desc"&&t.reviewsList.sort((r,i)=>i.rating-r.rating),n==="rating_asc"&&t.reviewsList.sort((r,i)=>r.rating-i.rating),n==="date_desc"&&t.reviewsList.sort((r,i)=>i.date-r.date),n==="date_asc"&&t.reviewsList.sort((r,i)=>r.date-i.date))}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}
`,n+=`${wr(t.parsingDate)}



`,this.sortResults(t,"product_name_asc"),(r=t.reviewsList)==null||r.forEach(i=>{let s=new Date(i.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(s);n+=`${i.productName}~${o}${i.delivery?"~Delivery":""}
`}),n&&(zo(n),Ue.show("success",He.InfoCopied))}getMoreThanResults(t=5){let n=[],r=new Map;return this.list.value.forEach(i=>{var s;(s=i.reviewsList)==null||s.forEach(o=>{if(r.has(o.productName)){let l=r.get(o.productName);if(l){let u=[...l,{...o,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`}];r.set(o.productName,u)}}else r.set(o.productName,[{...o,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`}])})}),r.forEach((i,s)=>{i.length>=t&&(i[0]&&(i[0].count=i.length),n.push(i[0]))}),r.clear(),n}getAllResults(){let t=[];return this.list.value.forEach(n=>{var r;(r=n.reviewsList)==null||r.forEach(i=>{t.push({...i,color:n.color,info:`${n.name} / ${n.rating} / ${n.reviewsCount} / ${n.subscribers} / ${n.deliveryInfo}`})})}),t.sort((n,r)=>n.productName.localeCompare(r.productName)),t}async apiProfileCheckInDB(t){let n=await lt.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiCreateInfoList(){try{let t=JSON.parse(JSON.stringify(this.list.value));t.length&&(lt.profileInfoList.clear(),lt.profileInfoList.bulkAdd(t),Ue.show("success",He.ProfileInfoListAddedInDB))}catch(t){console.log(t)}finally{}}async apiGetInfoList(){try{const t=await lt.profileInfoList.toArray();if(t.length)return t}catch(t){console.log(t)}finally{}return[]}async apiRemoveInfoList(){try{await lt.profileInfoList.clear(),Ue.show("success",He.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiRemoveInfoListOnlyUnmarked(){try{let n=(await lt.profileInfoList.filter(r=>r.marked===!1).toArray()).map(r=>r.id);await lt.profileInfoList.bulkDelete(n),Ue.show("warning",He.ProfileInfoListRemovedFromDB)}catch(t){console.log(t)}finally{}}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers,activeAdds:n.activeAdds,completedAdds:n.completedAdds}]};const i=await lt.savedProfiles.add(r);t.id=i,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,Ue.show("success",He.ProfileCreated)}catch(n){console.log(n),Ue.show("error",He.ProfileCreateError)}finally{}}}const Oe=new hh,ph={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},yh={class:"centered py-3 flex flex-wrap items-center gap-3"},mh={class:"flex items-center gap-3 ml-auto"},gh=sn({__name:"Header",setup(e){async function t(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getAllResults()}async function n(){Oe.state.contentModalVisible=!0,Oe.state.contentModalData=Oe.getMoreThanResults()}async function r(){window.confirm("Удаляем список профилей ?")&&(Oe.list.value=[],Oe.apiRemoveInfoList())}return(i,s)=>(re(),de("header",ph,[j("div",yh,[(re(!0),de(tt,null,cn(ae(Xt).list,o=>(re(),_t(It,{key:o.value,icon:o.icon,class:ht([ae(Xt).active.value===o.value?"ring-2 ring-white":""]),onClick:l=>ae(Xt).changeTab(o.value)},{default:At(()=>[jt($e(o.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),j("div",mh,[ae(Oe).state.viewAllButtonVisible&&ae(Oe).list.value.length>1?(re(),_t(It,{key:0,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(t,["stop","prevent"])},{default:At(()=>[jt("Все результаты")]),_:1},8,["onClick"])):Me("",!0),ae(Oe).state.viewMoreThanButtonVisible&&ae(Oe).list.value.length>1?(re(),_t(It,{key:1,theme:"success",type:"button",icon:"remove_red_eye",onClick:ut(n,["stop","prevent"])},{default:At(()=>[jt(" >= 5")]),_:1},8,["onClick"])):Me("",!0),ae(Oe).state.removeInfoListButtonVisible&&ae(Oe).list.value.length?(re(),_t(It,{key:2,theme:"danger",type:"button",icon:"delete_sweep",onClick:ut(r,["stop","prevent"])},null,8,["onClick"])):Me("",!0)]),ot(It,{theme:"info",type:"button",icon:"settings",class:ht(["ml-auto",[ae(Xt).active.value===ae(yn).Settings?"ring-2 ring-white":""]]),onClick:s[0]||(s[0]=o=>ae(Xt).changeTab(ae(yn).Settings))},null,8,["class"])])]))}}),vh={class:"switch"},bh=["tabindex","checked"],_h=["tabindex","checked"],wh=j("div",{class:"switch__label"},null,-1),xh=sn({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,i)=>(re(),de("div",vh,[r.type==="checkbox"?(re(),de("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,bh)):Me("",!0),r.type==="radio"?(re(),de("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,_h)):Me("",!0),wh]))}});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ch(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dc={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(kh,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return Y}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function l(){let{tagName:D="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=document.createElement(D);return a&&v.classList.add(...a.split(" ")),p&&(v.id=p),f&&(v.innerHTML=f),y&&u(v,y),v}function u(D,a){for(let[f,p]of Object.entries(a))p!==void 0&&D.setAttribute(f,p);return D}function c(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function h(D){let a=D.getHours(),{hours:f,dayPeriod:p}=m(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:x(a),hours12:f,dayPeriod:p,fullHours12:x(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function m(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function x(D){return D<10?"0"+D:D}function S(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function P(){let D=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let v in y)y[v]&&D.push(v);else y&&D.push(y)}),D.join(" ")}function T(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!D||!a)return!1;let p=h(D),y=h(a);return{[i.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[i.months]:p.month===y.month&&p.year===y.year,[i.years]:p.year===y.year}[f]}function B(D,a,f){let p=E(D,!1).getTime(),y=E(a,!1).getTime();return f?p>=y:p>y}function M(D,a){return!B(D,a,!0)}function E(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||$(f),f}function $(D){return D.setHours(0,0,0,0),D}function I(D,a,f){D.length?D.forEach(p=>{p.addEventListener(a,f)}):D.addEventListener(a,f)}function V(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:V(D.parentNode,a))}function J(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[v,w]of Object.entries(y))if(w!==void 0&&w.toString()==="[object Object]"){let C=D[v]!==void 0?D[v].toString():void 0,A=w.toString(),F=Array.isArray(w)?[]:{};D[v]=D[v]?C!==A?F:D[v]:F,H(D[v],w)}else D[v]=w}),D}function ne(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function _(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class U{constructor(){let{type:a,date:f,dp:p,opts:y,body:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),_(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),_(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),_(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),_(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),_(this,"onChangeFocusDate",w=>{if(!w)return void(this.focused&&this.removeFocus());let C=T(w,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),_(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=v,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=h(this.date),v=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...v}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:v}=this.opts,{minDate:w,maxDate:C}=this.dp,{day:A}=h(this.date),F=this._isOutOfMinMaxRange(),L=(a=this.customData)===null||a===void 0?void 0:a.disabled,W=P("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(p,this.date,this.type),"-min-date-":w&&T(w,this.date,this.type),"-max-date-":C&&T(C,this.date,this.type)}),q="";switch(this.type){case i.days:q=P({"-weekend-":this.dp.isWeekend(A),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||F||L});break;case i.months:q=P({"-disabled-":F||L});break;case i.years:q=P({"-other-decade-":this.isOtherDecade,"-disabled-":F||this.isOtherDecade&&!v||L})}return P(W,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=h(this.date),{showOtherMonths:v,showOtherYears:w}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case i.days:return!v&&this.isOtherMonth?"":y;case i.months:return this.dp.locale[this.opts.monthsField][p];case i.years:return!w&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:v,year:w,date:C}=h(y),A=p===i.days,F=p===i.years,L=!!a&&new Date(w,F?a.getMonth():v,A?C:a.getDate()),W=!!f&&new Date(w,F?f.getMonth():v,A?C:f.getDate());return a&&f?M(L,a)||B(W,f):a?M(L,a):f?B(W,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=P({"-in-range-":a&&f&&(y=this.date,v=a,w=f,B(y,v)&&M(y,w)),"-range-from-":a&&T(this.date,a,this.type),"-range-to-":f&&T(this.date,f,this.type)});var y,v,w;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function R(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let _e={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const ce=".air-datepicker-cell";class Pe{constructor(a){let{dp:f,type:p,opts:y}=a;R(this,"handleClick",v=>{let w=v.target.closest(ce).adpCell;if(w.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(w.date,w.type);C?this.dp._handleAlreadySelectedDates(C,w.date):this.dp.selectDate(w.date)}),R(this,"handleDayNameClick",v=>{let w=v.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(w),datepicker:this.dp})}),R(this,"onChangeCurrentView",v=>{v!==this.type?this.hide():(this.show(),this.render())}),R(this,"onMouseOverCell",v=>{let w=V(v.target,ce);this.dp.setFocusDate(!!w&&w.adpCell.date)}),R(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),R(this,"onClickBody",v=>{let{onClickDayName:w}=this.opts,C=v.target;C.closest(ce)&&this.handleClick(v),w&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(v)}),R(this,"onMouseDown",v=>{this.pressed=!0;let w=V(v.target,ce),C=w&&w.adpCell;T(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),R(this,"onMouseMove",v=>{if(!this.pressed||!this.dp.isMinViewReached)return;v.preventDefault();let w=V(v.target,ce),C=w&&w.adpCell,{selectedDates:A,rangeDateTo:F,rangeDateFrom:L}=this.dp;if(!C||C.isDisabled)return;let{date:W}=C;if(A.length===2){if(this.rangeFromFocused&&!B(W,F)){let{hours:q,minutes:G}=h(L);W.setHours(q),W.setMinutes(G),this.dp.rangeDateFrom=W,this.dp.replaceDate(L,W)}if(this.rangeToFocused&&!M(W,L)){let{hours:q,minutes:G}=h(F);W.setHours(q),W.setMinutes(G),this.dp.rangeDateTo=W,this.dp.replaceDate(F,W)}}}),R(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),R(this,"onChangeViewDate",(v,w)=>{if(!this.isVisible)return;let C=S(v),A=S(w);switch(this.dp.currentView){case i.days:if(T(v,w,i.months))return;break;case i.months:if(T(v,w,i.years))return;break;case i.years:if(C[0]===A[0]&&C[1]===A[1])return}this.render()}),R(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(v=>{this.$cells.appendChild(v.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;I(this.$el,"mouseover",this.onMouseOverCell),I(this.$el,"mouseout",this.onMouseOutCell),I(this.$el,"click",this.onClickBody),a&&f&&(I(this.$el,"mousedown",this.onMouseDown),I(this.$el,"mousemove",this.onMouseMove),I(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:_e[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,v=a,w=0;for(;w<7;){let C=v%7;f+=`<div class="${P("air-datepicker-body--day-name",{[i.cssClassWeekend]:p(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,w++,v++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=c(a),{year:y,month:v}=h(a),w=new Date(y,v,1),C=new Date(y,v,p),A=w.getDay()-f,F=6-C.getDay()+f;A=A<0?A+7:A,F=F>6?F-7:F;let L=function(pe,ve){let{year:te,month:g,date:d}=h(pe);return new Date(te,g,d-ve)}(w,A),W=p+A+F,q=L.getDate(),{year:G,month:Z}=h(L),se=0;for(;se<W;){let pe=new Date(G,Z,q+se);this._generateCell(pe),se++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,v=new U({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(v),v}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=S(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case i.days:this._generateDayCells();break;case i.months:this._generateMonthCells();break;case i.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}}function be(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class he{constructor(a){let{dp:f,opts:p}=a;be(this,"onClickNav",y=>{let v=V(y.target,".air-datepicker-nav--action");if(!v)return;let w=v.dataset.action;this.dp[w]()}),be(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),be(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),be(this,"update",()=>{let{prevHtml:y,nextHtml:v}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=v,this._resetNavStatus(),this.render(),this.handleNavStatus()}),be(this,"renderDelay",()=>{setTimeout(this.render)}),be(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,v){for(let w in v)v[w]?y.classList.add(w):y.classList.remove(w)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:v}=this.dp.parsedViewDate,w=!!f&&h(f),C=!!p&&h(p);switch(this.dp.currentView){case i.days:f&&w.month>=v&&w.year>=y&&this._disableNav("prev"),p&&C.month<=v&&C.year<=y&&this._disableNav("next");break;case i.months:f&&w.year>=y&&this._disableNav("prev"),p&&C.year<=y&&this._disableNav("next");break;case i.years:{let A=S(this.dp.viewDate);f&&w.year>=A[0]&&this._disableNav("prev"),p&&C.year<=A[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(v=>{v.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var le={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class Ye{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&le[f]&&(p=le[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:v={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:P("air-datepicker-button",p),attrs:v})}render(){this.generateButtons()}}function Je(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class it{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Je(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Je(this,"onChangeSelectedDate",y=>{let{date:v,updateTime:w=!1}=y;v&&(this.setMinMaxTime(v),this.setCurrentTime(!!w&&v),this.addTimeToDate(v))}),Je(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Je(this,"onChangeInputRange",y=>{let v=y.target;this[v.getAttribute("name")]=v.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Je(this,"onMouseEnterLeave",y=>{let v=y.target.getAttribute("name"),w=this.$minutesText;v==="hours"&&(w=this.$hoursText),w.classList.toggle("-focus-")}),Je(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Je(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(k("h"))||p.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),I(this.$ranges,a,this.onChangeInputRange),I(this.$ranges,"mouseenter",this.onMouseEnterLeave),I(this.$ranges,"mouseleave",this.onMouseEnterLeave),I(this.$ranges,"focus",this.onFocus),I(this.$ranges,"mousedown",this.onFocus),I(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:P("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:v,minMinutes:w,maxHours:C,maxMinutes:A,dayPeriod:F,opts:{hoursStep:L,minutesStep:W}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${x(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${x(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${F}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${v}" max="${C}" step="${L}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${w}" max="${A}" step="${W}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&T(a,f)&&this.setMinTimeFromMinDate(f),p&&T(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?h(a):this;this.hours=J(f,this.minHours,this.maxHours),this.minutes=J(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=J(a,0,23),this.minMinutes=J(f,0,59),this.maxHours=J(p,0,23),this.maxMinutes=J(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){u(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,u(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=x(this.displayHours),this.$minutesText.innerHTML=x(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=m(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function Ve(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Ft{constructor(a){let{dp:f,opts:p}=a;Ve(this,"pressedKeys",new Set),Ve(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,v)=>v.up()]])),Ve(this,"handleHotKey",y=>{let v=this.hotKeys.get(y),w=h(this.getInitialFocusDate());v(w,this.dp);let{year:C,month:A,date:F}=w,L=c(new Date(C,A));L<F&&(F=L);let W=this.dp.getClampedDate(new Date(C,A,F));this.dp.setFocusDate(W,{viewDateTransition:!0})}),Ve(this,"isHotKeyPressed",()=>{let y=!1,v=this.pressedKeys.size,w=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(A=>{y||v!==A.length||(y=A.every(w)&&C)});else{if(v!==C.length)continue;y=C.every(w)&&C}}return y}),Ve(this,"isArrow",y=>y>=37&&y<=40),Ve(this,"onKeyDown",y=>{let{key:v,which:w}=y,{dp:C,dp:{focusDate:A},opts:F}=this;this.registerKey(v);let L=this.isHotKeyPressed();if(L)return y.preventDefault(),void this.handleHotKey(L);if(this.isArrow(w))return y.preventDefault(),void this.focusNextCell(v);if(v==="Enter"){if(C.currentView!==F.minView)return void C.down();if(A){let W=C._checkIfDateIsSelected(A);return void(W?C._handleAlreadySelectedDates(W,A):C.selectDate(A))}}v==="Escape"&&this.dp.hide()}),Ve(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:v}}=this.dp,w=a||p[p.length-1];if(!w)switch(f){case i.days:w=new Date(y,v,new Date().getDate());break;case i.months:w=new Date(y,v,1);break;case i.years:w=new Date(y,0,1)}return w}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:v,years:w}=i,C=h(f),A=C.year,F=C.month,L=C.date;switch(a){case"ArrowLeft":p===y&&(L-=1),p===v&&(F-=1),p===w&&(A-=1);break;case"ArrowUp":p===y&&(L-=7),p===v&&(F-=3),p===w&&(A-=4);break;case"ArrowRight":p===y&&(L+=1),p===v&&(F+=1),p===w&&(A+=1);break;case"ArrowDown":p===y&&(L+=7),p===v&&(F+=3),p===w&&(A+=4)}let W=this.dp.getClampedDate(new Date(A,F,L));this.dp.setFocusDate(W,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ge={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function fe(D,a,f){return(a=function(p){var y=function(v,w){if(typeof v!="object"||v===null)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Be="",K="",z=!1;class Y{static buildGlobalContainer(a){z=!0,Be=l({className:a,id:a}),o("body").appendChild(Be)}constructor(a,f){var p=this;if(fe(this,"viewIndexes",[i.days,i.months,i.years]),fe(this,"next",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(w,C+1,1));break;case i.months:this.setViewDate(new Date(w+1,C,1));break;case i.years:this.setViewDate(new Date(w+10,0,1))}}),fe(this,"prev",()=>{let{year:w,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(w,C-1,1));break;case i.months:this.setViewDate(new Date(w-1,C,1));break;case i.years:this.setViewDate(new Date(w-10,0,1))}}),fe(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),fe(this,"setPosition",function(w){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(w=w||p.opts.position)=="function")return void(p.customHide=w({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:C,done:p._finishHide}));let A,F,{isMobile:L}=p.opts,W=p.$el.getBoundingClientRect(),q=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,se=p.$datepicker.getBoundingClientRect(),pe=w.split(" "),ve=window.scrollY,te=window.scrollX,g=p.opts.offset,d=pe[0],b=pe[1];if(L)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:W.width,height:p.$el.offsetHeight},ve=0,te=0),G!==Z&&G!==document.body){let O=G.getBoundingClientRect();q={top:W.top-O.top,left:W.left-O.left,width:W.width,height:W.height},ve=0,te=0}switch(d){case"top":A=q.top-se.height-g;break;case"right":F=q.left+q.width+g;break;case"bottom":A=q.top+q.height+g;break;case"left":F=q.left-se.width-g}switch(b){case"top":A=q.top;break;case"right":F=q.left+q.width-se.width;break;case"bottom":A=q.top+q.height-se.height;break;case"left":F=q.left;break;case"center":/left|right/.test(d)?A=q.top+q.height/2-se.height/2:F=q.left+q.width/2-se.width/2}p.$datepicker.style.cssText=`left: ${F+te}px; top: ${A+ve}px`}}),fe(this,"_setInputValue",()=>{let{opts:w,$altField:C,locale:{dateFormat:A}}=this,{altFieldDateFormat:F,altField:L}=w;L&&C&&(C.value=this._getInputValue(F)),this.$el.value=this._getInputValue(A)}),fe(this,"_getInputValue",w=>{let{selectedDates:C,opts:A}=this,{multipleDates:F,multipleDatesSeparator:L}=A;if(!C.length)return"";let W=typeof w=="function",q=W?w(F?C:C[0]):C.map(G=>this.formatDate(G,w));return q=W?q:q.join(L),q}),fe(this,"_checkIfDateIsSelected",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,A=!1;return p.selectedDates.some(F=>{let L=T(w,F,C);return A=L&&F,L}),A}),fe(this,"_scheduleCallAfterTransition",w=>{this._cancelScheduledCall(),w&&w(!1),this._onTransitionEnd=()=>{w&&w(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),fe(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),fe(this,"setViewDate",w=>{if(!((w=ne(w))instanceof Date)||T(w,this.viewDate))return;let C=this.viewDate;this.viewDate=w;let{onChangeViewDate:A}=this.opts;if(A){let{month:F,year:L}=this.parsedViewDate;A({month:F,year:L,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,w,C)}),fe(this,"setFocusDate",function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!w||(w=ne(w))instanceof Date)&&(p.focusDate=w,p.opts.range&&w&&p._handleRangeOnFocus(),p.trigger(i.eventChangeFocusDate,w,C))}),fe(this,"setCurrentView",w=>{if(this.viewIndexes.includes(w)){if(this.currentView=w,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(i.eventChangeCurrentView,w),!this.views[w]){let C=this.views[w]=new Pe({dp:this,opts:this.opts,type:w});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(w)}}),fe(this,"_updateLastSelectedDate",w=>{this.lastSelectedDate=w,this.trigger(i.eventChangeLastSelectedDate,w)}),fe(this,"destroy",()=>{let{showEvent:w,isMobile:C}=this.opts,A=this.$datepicker.parentNode;A&&A.removeChild(this.$datepicker),this.$el.removeEventListener(w,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),fe(this,"update",w=>{let C=H({},this.opts);H(this.opts,w);let{timepicker:A,buttons:F,range:L,selectedDates:W,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&W&&this.selectDate(W),w.view&&this.setCurrentView(w.view),this._setInputValue(),C.range&&!L?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&L&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!A?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&A&&this._addTimepicker(),!C.buttons&&F?this._addButtons():C.buttons&&!F?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&F&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===i.days&&this.views[this.currentView].renderDayNames())}),fe(this,"isOtherMonth",w=>{let{month:C}=h(w);return C!==this.parsedViewDate.month}),fe(this,"isOtherYear",w=>{let{year:C}=h(w);return C!==this.parsedViewDate.year}),fe(this,"isOtherDecade",w=>{let{year:C}=h(w),[A,F]=S(this.viewDate);return C<A||C>F}),fe(this,"_onChangeSelectedDate",w=>{let{silent:C}=w;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),fe(this,"_onChangeFocusedDate",function(w){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!w)return;let A=!1;C&&(A=p.isOtherMonth(w)||p.isOtherYear(w)||p.isOtherDecade(w)),A&&p.setViewDate(w)}),fe(this,"_onChangeTime",w=>{let{hours:C,minutes:A}=w,F=new Date,{lastSelectedDate:L,opts:{onSelect:W}}=this,q=L;L||(q=F);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(A),L?(this._setInputValue(),W&&this._triggerOnSelect()):this.selectDate(q))}),fe(this,"_onFocus",w=>{this.visible||this.show()}),fe(this,"_onBlur",w=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),fe(this,"_onMouseDown",w=>{this.inFocus=!0}),fe(this,"_onMouseUp",w=>{this.inFocus=!1,this.$el.focus()}),fe(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),fe(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),fe(this,"isWeekend",w=>this.opts.weekends.includes(w)),fe(this,"getClampedDate",w=>{let{minDate:C,maxDate:A}=this,F=w;return A&&B(w,A)?F=A:C&&M(w,C)&&(F=C),F}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=H({},s,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:v}=this.opts;v||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=ne(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:v,keyboardNav:w,onlyTimepicker:C}}=this,A=o("body");(!z||z&&Be&&!A.contains(Be))&&!p&&this.elIsInput&&!this.$customContainer&&Y.buildGlobalContainer(Y.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),w&&!C&&(this.keyboardNav=new Ft({dp:this,opts:a}))),v&&this.selectDate(v,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Be.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:v,position:w,classes:C,onlyTimepicker:A,isMobile:F}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(w)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),A&&this.$datepicker.classList.add("-only-timepicker-"),F&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Pe({dp:this,type:this.currentView,opts:a}),this.nav=new he({dp:this,opts:a}),v&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&ne(a),this.maxDate=!!f&&ne(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new it({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Ye({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:v,timeFormat:w,dateTimeSeparator:C}=this.opts;var A;this.locale=(A=a,JSON.parse(JSON.stringify(A))),f&&(this.locale.dateFormat=f),w!==void 0&&w!==""&&(this.locale.timeFormat=w);let{timeFormat:F}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let L=F?C:"";this.locale.dateFormat=[this.locale.dateFormat,F||""].join(L)}v&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&B(a,p)&&this.setViewDate(p),f&&M(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=ne(a),!(a instanceof Date))return;let p=f,y=this.locale,v=h(a),w=v.dayPeriod,C=S(a),A=Y.replacer,F={T:a.getTime(),m:v.minutes,mm:v.fullMinutes,h:v.hours12,hh:v.fullHours12,H:v.hours,HH:v.fullHours,aa:w,AA:w.toUpperCase(),E:y.daysShort[v.day],EEEE:y.days[v.day],d:v.date,dd:v.fullDate,M:v.month+1,MM:v.fullMonth,MMM:y.monthsShort[v.month],MMMM:y.months[v.month],yy:v.year.toString().slice(-2),yyyy:v.year,yyyy1:C[0],yyyy2:C[1]};for(let[L,W]of Object.entries(F))p=A(p,k(L),W);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:v,selectedDates:w}=this,{updateTime:C}=p,{moveToOtherMonthsOnSelect:A,moveToOtherYearsOnSelect:F,multipleDates:L,range:W,autoClose:q}=this.opts,G=w.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=ne(a))instanceof Date){if(y===i.days&&a.getMonth()!==v.month&&A&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===i.years&&a.getFullYear()!==v.year&&F&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),L&&!W){if(G===L)return;this._checkIfDateIsSelected(a)||w.push(a)}else if(W)switch(G){case 1:w.push(a),this.rangeDateTo||(this.rangeDateTo=a),B(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(L||W?W&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=ne(a))instanceof Date)return f.some((y,v)=>{if(T(y,a))return f.splice(v,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(v=>T(v,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||T(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:v,multipleDates:w,range:C}}=this,A=w||C,F=typeof y.dateFormat=="function";p.length&&(a=p.map(E),f=F?w?y.dateFormat(a):a.map(L=>y.dateFormat(L)):a.map(L=>this.formatDate(L,y.dateFormat))),v({date:A?a:a[0],formattedDate:A?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=ne(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(B(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!((a=ne(a))instanceof Date))return;let{year:p,month:y,date:v}=h(a),w=`[data-year="${p}"]`,C=`[data-month="${y}"]`,A={[i.day]:`${w}${C}[data-date="${v}"]`,[i.month]:`${w}${C}`,[i.year]:`${w}`};return this.views[this.currentView].$el.querySelector(A[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return S(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Be}static replacer(a,f,p){return a.replace(f,function(y,v,w,C){return v+p+C})}}var X;return fe(Y,"defaults",s),fe(Y,"version","3.3.5"),fe(Y,"defaultGlobalContainerId","air-datepicker-global-container"),X=Y.prototype,Object.assign(X,ge),r.default}()})})(Dc);var Dh=Dc.exports;const Ja=Ch(Dh);class Sh{constructor(){Bt(this,"fields",Nn({profilesLinks:[{url:"",status:"new",highlight:!1}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,deliveryOnly:!1}));Bt(this,"openedTab",Yt({}))}get profileLinkNew(){return this.fields.profilesLinks.find(t=>t.status==="new")}get profileLinkHighlighted(){return this.fields.profilesLinks.find(t=>t.highlight)}profileLinkGetByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}profileLinkPushNew(t=""){this.fields.profilesLinks.push({url:t,status:"new",highlight:!1})}profileLinksRemoveEmpty(){this.fields.profilesLinks.forEach((t,n,r)=>{t.url===""&&r.splice(n,1)})}profileLinkRemove(t){this.fields.profilesLinks.splice(t,1),this.profileLinksHighlightDuplicates()}profileLinksHighlightDuplicates(){this.fields.profilesLinks.forEach((t,n,r)=>{let i=r.filter(s=>s.url===t.url&&t.url!=="");t.highlight=i.length>1})}profileLinkSetInfo(t,n){const r=this.profileLinkGetByUrl(t);r&&(r.info=n)}profileLinksPasteMultiple(t,n){let r=n.value.split(" ");if(r=r.filter(i=>i!==""),r.length>1){r.forEach((i,s)=>{s===0?t.url=i.trim():this.profileLinkPushNew(i.trim())});return}t.url=n.value.trim()}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.deliveryOnly=t.deliveryOnly,this.fields.productName=t.productName,t}catch(t){console.log(t),Ue.show("error",He.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new",highlight:!1}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.deliveryOnly=!1,await this.apiRemoveFilter()}async parsingStart(){try{if(this.profileLinkNew){const t=this.fields.profilesLinks.map(r=>r.url);Oe.list.value=Oe.list.value.filter(r=>t.includes(r.url)||r.marked);const n=await Cc(this.profileLinkNew.url);this.openedTab.value=n,n.id&&chrome.tabs.sendMessage(n.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.profileLinkNew.url})}else Ue.show("warning",He.ReviewsFilterAllLinksParsed)}catch{Ue.show("error",He.TabOpenError)}}async apiRemoveFilter(){try{await lt.reviewsFilter.where("key").equals("reviewsFilter").delete(),Ue.show("warning",He.ReviewsFilterCleared)}catch(t){console.log(t),Ue.show("warning",He.ReviewsFilterClearError)}}async apiGetFilter(){const t=await lt.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ha(t.dateFrom),t.dateTo=Ha(t.dateTo),(await lt.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?lt.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):lt.reviewsFilter.add({...t,key:"reviewsFilter"}),Ue.show("success",He.ReviewsFilterSaved)}catch(t){console.log(t),Ue.show("error",He.ReviewsFilterSaveError)}}}const Le=new Sh,Th=["onSubmit"],Oh={class:"grid grid-cols-4 gap-5"},Eh={class:"col-span-4"},Ah=j("div",{class:"text-sm font-medium mb-2"},"Ссылки на профили",-1),Ph={class:"flex items-center gap-4"},$h={class:"flex-none select-none"},Ih={key:0,class:"font-icon text-3xl block text-green-400"},Nh={key:1,class:"font-icon text-3xl block text-red-400"},Fh={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Lh={key:3,class:"font-icon text-3xl block text-gray-400"},Mh=["onUpdate:modelValue","onInput"],Bh={key:0,class:"flex-none cursor-pointer select-none"},Rh=["onClick"],jh={class:"flex-none cursor-pointer select-none ml-auto"},Kh=["innerHTML"],Vh=j("div",{class:"mb-2 text-sm font-medium"},"Дата от",-1),Uh=j("div",{class:"mb-2 text-sm font-medium"},"Дата до",-1),Hh={class:"col-span-2"},qh=j("div",{class:"mb-2 text-sm font-medium"},"Название товара",-1),Jh=j("div",{class:"mb-2 text-sm font-medium"},"Рейтинг от",-1),Yh=j("div",{class:"mb-2 text-sm font-medium"},"Рейтинг до",-1),Wh={class:"col-span-4 select-none"},zh={class:"inline-block"},Gh=j("div",{class:"mb-3 text-sm font-medium"},"Только с доставкой",-1),Xh={class:"flex items-center gap-4 mt-10"},Qh=sn({__name:"ReviewsFilter",setup(e){const t=Yt(!1),n={dateFrom:null,dateTo:null},r={autoClose:!0,onSelect:({formattedDate:u,datepicker:c})=>{c.$el.id==="dateFrom"&&(Le.fields.dateFrom=u),c.$el.id==="dateTo"&&(Le.fields.dateTo=u)}};function i(u,c){Le.profileLinksPasteMultiple(u,c.target),Le.profileLinksHighlightDuplicates(),u.status="new",u.info=""}async function s(){window.confirm("Сбросить фильтр ?")&&(Le.resetFields(),n.dateFrom.selectDate(Ua()),n.dateTo.selectDate(new Date),Oe.list.value=Oe.list.value.filter(u=>u.marked),Oe.apiRemoveInfoListOnlyUnmarked())}async function o(){if(Le.profileLinkHighlighted){Ue.show("error",He.ReviewsFilterSimilarLinks);return}Le.apiCreateFilter(),Oe.apiCreateInfoList()}async function l(){if(Le.profileLinkHighlighted){Ue.show("error",He.ReviewsFilterSimilarLinks);return}Le.parsingStart()}return rr(()=>{n.dateFrom=new Ja("#dateFrom",r),n.dateTo=new Ja("#dateTo",r),n.dateFrom.selectDate(Ua()),n.dateTo.selectDate(new Date),setTimeout(async()=>{const u=await Le.setFilterFromDB();u&&(n.dateFrom.selectDate(u.dateFrom),n.dateTo.selectDate(u.dateTo)),t.value=!0},0)}),oi(()=>{n.dateFrom.destroy(),n.dateTo.destroy()}),(u,c)=>(re(),de("form",{class:ht(["pb-20 transition-opacity duration-300 delay-100",t.value?"opacity-100":"opacity-0"]),onSubmit:ut(l,["prevent"])},[j("div",Oh,[j("div",Eh,[Ah,(re(!0),de(tt,null,cn(ae(Le).fields.profilesLinks,(h,m)=>(re(),de("div",{key:m,class:ht(m>0?"mt-5":"")},[j("div",Ph,[j("div",$h,[h.status==="success"?(re(),de("i",Ih,"check_circle")):Me("",!0),h.status==="error"?(re(),de("i",Nh,"cancel")):Me("",!0),h.status==="wait"?(re(),de("i",Fh,"rotate_right")):Me("",!0),h.status==="new"?(re(),de("i",Lh,"watch_later")):Me("",!0)]),pn(j("input",{"onUpdate:modelValue":x=>h.url=x,tabindex:"1",type:"search",required:"",class:ht(["text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",{"ring-4 ring-red-400":h.highlight}]),onInput:x=>i(h,x)},null,42,Mh),[[On,h.url]]),ae(Le).fields.profilesLinks.length>1?(re(),de("div",Bh,[j("i",{class:"font-icon text-3xl block text-red-400",onClick:x=>ae(Le).profileLinkRemove(m)},"remove_circle_outline",8,Rh)])):Me("",!0),j("div",jh,[j("i",{class:"font-icon text-3xl block text-green-400",onClick:c[0]||(c[0]=x=>ae(Le).profileLinkPushNew())},"add_circle_outline")])]),h.info?(re(),de("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:h.info},null,8,Kh)):Me("",!0)],2))),128))]),j("div",null,[Vh,pn(j("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>ae(Le).fields.dateFrom=h),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,ae(Le).fields.dateFrom]])]),j("div",null,[Uh,pn(j("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>ae(Le).fields.dateTo=h),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,ae(Le).fields.dateTo]])]),j("div",Hh,[qh,pn(j("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>ae(Le).fields.productName=h),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,ae(Le).fields.productName]])]),j("div",null,[Jh,pn(j("input",{"onUpdate:modelValue":c[4]||(c[4]=h=>ae(Le).fields.ratingFrom=h),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,ae(Le).fields.ratingFrom]])]),j("div",null,[Yh,pn(j("input",{"onUpdate:modelValue":c[5]||(c[5]=h=>ae(Le).fields.ratingTo=h),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,ae(Le).fields.ratingTo]])]),j("div",Wh,[j("label",zh,[Gh,ot(xh,{tabindex:6,modelValue:ae(Le).fields.deliveryOnly,"onUpdate:modelValue":c[6]||(c[6]=h=>ae(Le).fields.deliveryOnly=h)},null,8,["modelValue"])])])]),j("div",Xh,[ot(It,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:At(()=>[jt("Начать парсинг")]),_:1}),ot(It,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:ut(o,["stop","prevent"])},{default:At(()=>[jt("Сохранить фильтр")]),_:1},8,["onClick"]),ot(It,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:ut(s,["stop","prevent"])},{default:At(()=>[jt("Сбросить фильтр")]),_:1},8,["onClick"])])],42,Th))}}),Zh=["onKeydown"],Sc=sn({__name:"Modal",props:{width:{default:"580px"}},emits:["close"],setup(e,{emit:t}){const n=e,r=Yt();function i(o){const l=o.target;!l.classList.contains("app-modal__body")&&!l.closest(".app-modal__body")&&s()}function s(){t("close")}return oi(()=>{document.body.classList.remove("overflow-hidden")}),rr(()=>{var o;(o=r==null?void 0:r.value)==null||o.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(o,l)=>(re(),de("div",{ref_key:"modalRef",ref:r,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-60 z-100 overflow-y-scroll p-10 flex",onClick:i,onKeydown:od(s,["esc"])},[j("div",{class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-10 m-auto max-w-full min-h-[100px] break-all",style:kr({width:n.width})},[j("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:s},"close"),Al(o.$slots,"default")],4)],40,Zh))}}),ep=["onClick"],tp={class:"min-w-0 flex-1"},np={class:"flex items-center gap-4 mb-4"},rp=["onClick"],ip={key:0,class:"text-[16px] text-sky-300 font-medium italic"},sp={class:"flex flex-wrap items-center gap-x-4 gap-y-2 text-[16px] font-medium"},op={class:"text-orange-300"},ap={class:"text-yellow-300"},lp={class:"text-teal-300"},cp={class:"text-rose-300"},up={class:"text-amber-300"},fp={key:0,class:"text-lime-300"},dp={key:1,class:"text-gray-300"},hp={class:"flex-none flex items-center gap-4"},pp={key:0,class:"flex-none"},yp=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"storage",-1),mp=[yp],gp=["onClick"],vp=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"cloud_upload",-1),bp=[vp],_p=["onClick"],wp=j("i",{class:"font-icon text-3xl text-white drop-shadow-xl"},"content_copy",-1),xp=[wp],kp=["onClick"],Cp={class:"font-icon text-3xl drop-shadow-xl"},Dp={key:0,class:"text-[14px] px-4 p-5"},Sp={key:0,class:"mb-8"},Tp=j("div",{class:"mb-3 opacity-80"},"Комментарий:",-1),Op=["onUpdate:modelValue"],Ep={key:0},Ap={class:"mb-8 font-bold text-xl"},Pp={class:"w-full relative"},$p={class:"text-[16px] sticky top-[64px] bg-gray-600"},Ip={class:"text-left px-4 py-2 border border-white border-opacity-50"},Np=["onClick"],Fp=j("div",null,"Дата",-1),Lp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Mp=["onClick"],Bp=j("div",null,"Оценка",-1),Rp={class:"text-left px-4 py-2 border border-white border-opacity-50"},jp=["onClick"],Kp=j("div",null,"Название товара",-1),Vp=j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Доставка",-1),Up={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Hp={class:"px-4 py-2 border border-white border-opacity-50"},qp={class:"flex-none flex items-center"},Jp={class:"text-base font-medium mr-1"},Yp={class:"text-[18px] font-icon text-yellow-400"},Wp={class:"px-4 py-2 border border-white border-opacity-50"},zp={class:"flex items-center gap-4"},Gp=["onClick"],Xp={class:"px-4 py-2 border border-white border-opacity-50"},Qp={key:2,class:"text-xl font-bold text-red-300"},Zp=["title"],ey=["onClick"],ty={key:0},ny={key:1},ry={key:1,class:"text-center text-xl font-bold"},iy={key:1,class:"text-center text-xl font-bold"},sy=sn({__name:"ProfileInfoList",setup(e){function t(){Oe.state.contentModalVisible=!1,Oe.state.contentModalData=[]}function n(c){zo(c),Ue.show("success",He.ProductNameCopied)}function r(c,h){Oe.sortResults(c,h)}function i(c){c.opened===void 0&&(c.opened=!0),c.opened=!c.opened}function s(c){c.url&&window.open(c.url,"_blank")}function o(c){c.marked=!c.marked}async function l(c){Oe.apiProfileCreate(c)}async function u(c){Oe.copyItemInfo(c)}return oi(()=>{Oe.state.viewAllButtonVisible=!1,Oe.state.viewMoreThanButtonVisible=!1,Oe.state.removeInfoListButtonVisible=!1}),rr(async()=>{Oe.state.viewAllButtonVisible=!0,Oe.state.viewMoreThanButtonVisible=!0,Oe.state.removeInfoListButtonVisible=!0,Oe.list.value.forEach(async c=>{await Oe.apiProfileCheckInDB(c)}),Oe.list.value.length===1&&(Oe.list.value[0].opened=!0)}),(c,h)=>ae(Oe).list.value.length?(re(),de(tt,{key:0},[(re(!0),de(tt,null,cn(ae(Oe).list.value,m=>{var x;return re(),de("div",{key:m.url,class:ht(["relative rounded-xl shadow-xl bg-gray-600 text-[16px] mb-3",m.opened?"ring ring-blue-400":""])},[j("div",{class:"relative flex items-start p-4 select-none cursor-pointer rounded-xl",style:kr({"background-image":`linear-gradient(45deg, rgb(75 85 99) 0%, rgb(75 85 99) 70%, ${m.color.bg} 100%)`}),onClick:S=>i(m)},[j("div",tp,[j("div",np,[j("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(S=>s(m),["stop"])},$e(m.name),9,rp),m.comment?(re(),de("div",ip,$e(m.comment),1)):Me("",!0)]),j("div",sp,[j("div",op,$e(m.rating),1),j("div",ap,$e(m.reviewsCount),1),j("div",lp,$e(m.subscribers),1),j("div",cp,$e(m.deliveryInfo),1),j("div",up,"Активные - "+$e(m.activeAdds),1),m.completedAdds?(re(),de("div",fp,"Завершенные - "+$e(m.completedAdds),1)):Me("",!0),m.savedDate?(re(),de("div",dp,$e(m.savedDate?ae(wr)(m.savedDate):""),1)):Me("",!0)])]),j("div",hp,[m.existsInDataBase?(re(),de("div",pp,mp)):(re(),de("div",{key:1,class:"flex-none ml-auto",onClick:ut(S=>l(m),["stop"])},bp,8,gp)),j("div",{class:"flex-none",onClick:ut(S=>u(m),["stop"])},xp,8,_p),j("div",{class:"flex-none",onClick:ut(S=>o(m),["stop"])},[j("div",Cp,$e(m.marked?"bookmark":"bookmark_border"),1)],8,kp)])],12,ep),m.opened?(re(),de("div",Dp,[m.existsInDataBase?Me("",!0):(re(),de("div",Sp,[Tp,pn(j("input",{"onUpdate:modelValue":S=>m.comment=S,type:"search",required:"",class:"text-base w-1/4 max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,Op),[[On,m.comment]])])),(x=m.reviewsList)!=null&&x.length?(re(),de(tt,{key:1},[m.opened?(re(),de("div",Ep,[j("div",Ap,[j("div",null,[jt("Найдено отзывов - "),j("strong",null,$e(m.reviewsList.length),1)])]),j("table",Pp,[j("tr",$p,[j("th",Ip,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="date_desc"?"date_asc":"date_desc")},[j("div",{class:ht(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="date_desc"||m.reviewsSortedBy==="date_asc"},{"rotate-180":m.reviewsSortedBy==="date_asc"}]])},"sort",2),Fp],8,Np)]),j("th",Lp,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="rating_desc"?"rating_asc":"rating_desc")},[j("div",{class:ht(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="rating_desc"||m.reviewsSortedBy==="rating_asc"},{"rotate-180":m.reviewsSortedBy==="rating_asc"}]])},"sort",2),Bp],8,Mp)]),j("th",Rp,[j("div",{class:"flex items-center cursor-pointer",onClick:S=>r(m,m.reviewsSortedBy==="product_name_desc"?"product_name_asc":"product_name_desc")},[j("div",{class:ht(["font-icon mr-2",[{"text-cyan-400":m.reviewsSortedBy==="product_name_desc"||m.reviewsSortedBy==="product_name_asc"},{"rotate-180":m.reviewsSortedBy==="product_name_asc"}]])},"sort",2),Kp],8,jp)]),Vp]),(re(!0),de(tt,null,cn(m.reviewsList,(S,P)=>{var T;return re(),de("tr",{key:m.reviewsSortedBy+P,class:"text-[14px] hover:bg-gray-600"},[j("td",Up,$e((T=ae(wr)(S.date))==null?void 0:T.slice(0,10)),1),j("td",Hp,[j("div",qp,[j("div",Jp,"("+$e(S.rating)+") - ",1),(re(!0),de(tt,null,cn(S.rating,B=>(re(),de("div",Yp,"star"))),256))])]),j("td",Wp,[j("div",zp,[j("div",{class:"font-icon text-green-400 cursor-pointer",onClick:ut(B=>n(S.productName),["stop"])},"content_copy",8,Gp),j("div",null,$e(S.productName),1)])]),j("td",Xp,[j("strong",{class:ht(S.delivery?"text-green-400":"text-red-400")},$e(S.delivery?"Да":"Нет"),3)])])}),128))])])):Me("",!0)],64)):(re(),de("div",Qp,"Результатов не найдено"))])):Me("",!0)],2)}),128)),ae(Oe).state.contentModalVisible?(re(),_t(Sc,{key:0,width:"800px",onClose:t},{default:At(()=>[ae(Oe).state.contentModalData.length?(re(!0),de(tt,{key:0},cn(ae(Oe).state.contentModalData,m=>{var x;return re(),de("div",{class:"flex text-sm items-center gap-2 py-0.5 px-1 mb-[2px] mr-5 font-medium",style:kr({"background-color":m.color.bg,color:m.color.text}),title:m.info},[j("i",{class:"font-icon text-xl cursor-pointer drop-shadow-xl",onClick:S=>n(m.productName)},"content_copy",8,ey),j("div",null,$e(m.productName),1),m.count?Me("",!0):(re(),de("div",ty,$e((x=ae(wr)(m.date))==null?void 0:x.slice(0,10)),1)),m.count?(re(),de("strong",ny,"("+$e(m.count)+")",1)):Me("",!0)],12,Zp)}),256)):(re(),de("div",ry,"Результаты не найдены"))]),_:1})):Me("",!0)],64)):(re(),de("div",iy,"Ничего не найдено"))}}),oy=sn({__name:"ParsingResult",setup(e){return(t,n)=>(re(),_t(sy))}});const ay=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},ly={},cy=j("svg",{class:"spinner",viewBox:"0 0 50 50"},[j("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),uy=[cy];function fy(e,t){return re(),de("div",null,uy)}const Tc=ay(ly,[["render",fy]]);class dy{constructor(){Bt(this,"list",Yt([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Oe.list.value.find(i=>i.url===t),r=await lt.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let i=JSON.parse(JSON.stringify(n)),s=r[0];s.parsingResults.unshift({parsingDate:i.parsingDate,rating:i.rating,reviewsCount:i.reviewsCount,deliveryInfo:i.deliveryInfo,subscribers:i.subscribers,activeAdds:i.activeAdds,completedAdds:i.completedAdds});const o=await lt.savedProfiles.put(s)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){t===0&&n===0&&(this.list.value=await lt.savedProfiles.toArray())}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await lt.savedProfiles.put(n))Ue.show("success",He.ProfileEdited);else throw new Error}catch{Ue.show("error",He.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await lt.savedProfiles.delete(t.id),Ue.show("success",He.ProfileDeleted)}catch(n){console.log(n),Ue.show("error",He.ProfileDeleteError)}finally{}}}const gt=new dy,hy={key:0,class:"flex justify-center"},py=["onClick"],yy={class:"min-w-0 flex-1"},my={class:"flex items-center gap-4 mb-4"},gy=["onClick"],vy={key:0,class:"text-[16px] text-sky-300 font-medium italic"},by={class:"flex flex-wrap items-center gap-4 text-[16px] font-medium"},_y={class:"text-orange-300"},wy={class:"text-yellow-300"},xy={class:"text-teal-300"},ky={class:"text-rose-300"},Cy={class:"text-amber-300"},Dy={key:0,class:"text-lime-300"},Sy={class:"text-gray-300"},Ty={class:"flex-none flex items-center gap-4"},Oy=["onClick"],Ey=j("i",{class:"font-icon text-3xl text-amber-400"},"add_to_photos",-1),Ay=[Ey],Py=["onClick"],$y=j("i",{class:"font-icon text-3xl text-green-400"},"edit",-1),Iy=[$y],Ny=["onClick"],Fy=j("i",{class:"font-icon text-3xl text-sky-400"},"content_copy",-1),Ly=[Fy],My=["onClick"],By=j("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),Ry=[By],jy={key:0,class:"text-[14px] px-4 p-5"},Ky={key:0,class:"w-full"},Vy=j("tr",null,[j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Дата парсинга"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Рейтинг"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Отзывы"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Подписки"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Продаж с доставкой"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Активные"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Завершенные")],-1),Uy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Hy={class:"text-left px-4 py-2 border border-white border-opacity-50"},qy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Jy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Yy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Wy={class:"text-left px-4 py-2 border border-white border-opacity-50"},zy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Gy={key:1,class:"text-center text-xl font-medium"},Xy={key:2,class:"text-center text-xl font-bold"},Qy={key:0},Zy={class:"text-2xl font-bold mb-5 pr-10"},em={class:"mb-6"},tm=j("div",{class:"mb-2 text-sm font-medium"},"Комментарий",-1),nm=sn({__name:"ProfileSavedList",setup(e){const t=Yt(!1),n=Yt(null),r=Yt(!1);function i(x){x.url&&window.open(x.url,"_blank")}function s(x){x.url&&(zo(x.url),Ue.show("success",He.ProfileLinkCopied))}function o(x){x.opened=!x.opened}function l(){t.value=!1,n.value=null}function u(x){t.value=!0,n.value=x}function c(x){Le.profileLinkPushNew(x.url),Le.profileLinksHighlightDuplicates(),Le.profileLinksRemoveEmpty(),Ue.show("success",He.ProfileLinkAddedInReviewsFilter)}async function h(x){gt.apiProfileUpdate(x),t.value=!1,n.value=null}async function m(x){window.confirm(`Удаляем "${x.name}" ?`)&&x.id&&(await gt.apiProfileDelete(x),setTimeout(()=>{gt.apiGetList()},0))}return rr(async()=>{setTimeout(()=>{gt.apiGetList()},0)}),Tl(()=>{gt.list.value.forEach(x=>x.opened=!1)}),(x,S)=>(re(),de(tt,null,[r.value?(re(),de("div",hy,[ot(Tc,{class:"w-10 h-10 flex-none"})])):ae(gt).list.value.length?(re(!0),de(tt,{key:1},cn(ae(gt).list.value,P=>{var T,B,M,E,$,I,V,J,H,ne;return re(),de("div",{key:P.id,class:ht([P.opened?"ring ring-blue-400":"","rounded-xl bg-gray-600 shadow-xl mb-3"])},[j("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:k=>o(P)},[j("div",yy,[j("div",my,[j("a",{class:"text-white hover:text-white text-xl font-medium border-b border-dashed border-white",onClick:ut(k=>i(P),["stop"])},$e(P.name),9,gy),P.comment?(re(),de("div",vy,$e(P.comment),1)):Me("",!0)]),j("div",by,[j("div",_y,$e((T=ae(gt).getLastParsingInfo(P))==null?void 0:T.rating),1),j("div",wy,$e((B=ae(gt).getLastParsingInfo(P))==null?void 0:B.reviewsCount),1),j("div",xy,$e((M=ae(gt).getLastParsingInfo(P))==null?void 0:M.subscribers),1),j("div",ky,$e((E=ae(gt).getLastParsingInfo(P))==null?void 0:E.deliveryInfo),1),j("div",Cy,"Активные - "+$e(($=ae(gt).getLastParsingInfo(P))==null?void 0:$.activeAdds),1),(I=ae(gt).getLastParsingInfo(P))!=null&&I.completedAdds?(re(),de("div",Dy,"Завершенные - "+$e((V=ae(gt).getLastParsingInfo(P))==null?void 0:V.completedAdds),1)):Me("",!0),j("div",Sy,$e((J=ae(gt).getLastParsingInfo(P))!=null&&J.parsingDate?ae(wr)((H=ae(gt).getLastParsingInfo(P))==null?void 0:H.parsingDate):""),1)])]),j("div",Ty,[j("div",{class:"flex-none ml-auto",onClick:ut(k=>c(P),["stop"])},Ay,8,Oy),j("div",{class:"flex-none ml-auto",onClick:ut(k=>u(P),["stop"])},Iy,8,Py),j("div",{class:"flex-none",onClick:ut(k=>s(P),["stop"])},Ly,8,Ny),j("div",{class:"flex-none",onClick:ut(k=>m(P),["stop"])},Ry,8,My)])],8,py),P.opened?(re(),de("div",jy,[(ne=P.parsingResults)!=null&&ne.length?(re(),de("table",Ky,[Vy,(re(!0),de(tt,null,cn(P.parsingResults,k=>(re(),de("tr",null,[j("td",Uy,$e(ae(wr)(k.parsingDate)),1),j("td",Hy,$e(k.rating),1),j("td",qy,$e(k.reviewsCount),1),j("td",Jy,$e(k.subscribers),1),j("td",Yy,$e(k.deliveryInfo),1),j("td",Wy,$e(k.activeAdds),1),j("td",zy,$e(k.completedAdds||ae(He).InfoNotFound),1)]))),256))])):(re(),de("div",Gy,"Парсинги не найдены"))])):Me("",!0)],2)}),128)):(re(),de("div",Xy,"Ничего не найдено")),t.value?(re(),_t(Sc,{key:3,onClose:l},{default:At(()=>[n.value?(re(),de("div",Qy,[j("form",{onSubmit:S[1]||(S[1]=ut(P=>h(n.value),["prevent"]))},[j("div",Zy,$e(n.value.name),1),j("div",em,[tm,pn(j("input",{"onUpdate:modelValue":S[0]||(S[0]=P=>n.value.comment=P),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[On,n.value.comment]])]),j("div",null,[ot(It,{type:"submit",theme:"success"},{default:At(()=>[jt("Сохранить")]),_:1})])],32)])):Me("",!0)]),_:1})):Me("",!0)],64))}});class rm{constructor(){Bt(this,"openedTab",Yt({}));Bt(this,"state",Nn({categoriesLoading:!1,categories:{}}));Bt(this,"fields",Nn({category:""}))}async getCategories(){const t=await Cc("https://www.avito.ru/");this.openedTab.value=t,t.id&&chrome.tabs.sendMessage(t.id,{action:"get-categories"})}async apiCreateCategories(){try{const t=JSON.parse(JSON.stringify(this.state.categories));await chrome.storage.local.set({categories:t}),Ue.show("success",He.CategoriesSaved)}catch(t){console.log(t)}finally{}}async apiGetCategories(){return(await chrome.storage.local.get("categories")).categories||{}}}const qt=new rm,im={class:"grid grid-cols-4"},sm={class:"col-span-2"},om=j("div",{class:"mb-2 text-sm font-medium"},"Категория",-1),am={class:"flex items-center gap-4"},lm={key:0,value:""},cm=["label"],um=["value"],fm={class:"flex items-center gap-4 mt-10"},dm=sn({__name:"ProfilesFilter",setup(e){async function t(){}async function n(){qt.state.categoriesLoading=!0,qt.getCategories()}return(r,i)=>(re(),de("form",{onSubmit:i[1]||(i[1]=ut(s=>t(),["prevent"]))},[j("div",im,[j("div",sm,[om,j("div",am,[j("i",{class:ht(["font-icon text-3xl block text-white cursor-pointer",{"animate-spin":ae(qt).state.categoriesLoading}]),onClick:n},"refresh",2),pn(j("select",{"onUpdate:modelValue":i[0]||(i[0]=s=>ae(qt).fields.category=s),required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},[Object.keys(ae(qt).state.categories).length?(re(),de("option",lm,"Выберите категорию")):Me("",!0),(re(!0),de(tt,null,cn(ae(qt).state.categories,(s,o)=>(re(),de("optgroup",{label:o},[(re(!0),de(tt,null,cn(s,l=>(re(),de("option",{value:l.url},$e(l.text),9,um))),256))],8,cm))),256))],512),[[nd,ae(qt).fields.category]])])])]),j("div",fm,[ot(It,{theme:"success",type:"submit",icon:"find_in_page"},{default:At(()=>[jt("Начать поиск")]),_:1})])],32))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Rn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(h){try{c(r.next(h))}catch(m){o(m)}}function u(h){try{c(r.throw(h))}catch(m){o(m)}}function c(h){h.done?s(h.value):i(h.value).then(l,u)}c((r=r.apply(e,t||[])).next())})}function en(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function hm(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function pm(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function Oc(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function Ec(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Go(e,t){return t={exports:{}},e(t,t.exports),t.exports}var hs=Go(function(e,t){(function(n,r){e.exports=r()})(mo,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(K)}function r(K,z,Y,X,D,a,f){try{var p=K[a](f),y=p.value}catch(v){Y(v);return}p.done?z(y):Promise.resolve(y).then(X,D)}function i(K){return function(){var z=this,Y=arguments;return new Promise(function(X,D){var a=K.apply(z,Y);function f(y){r(a,X,D,f,p,"next",y)}function p(y){r(a,X,D,f,p,"throw",y)}f(void 0)})}}function s(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function o(K,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,z,Y){return z&&o(K.prototype,z),Y&&o(K,Y),K}function u(K,z,Y){return z in K?Object.defineProperty(K,z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):K[z]=Y,K}function c(K,z){var Y=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);z&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),Y.push.apply(Y,X)}return Y}function h(K){for(var z=1;z<arguments.length;z++){var Y=arguments[z]!=null?arguments[z]:{};z%2?c(Object(Y),!0).forEach(function(X){u(K,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(Y)):c(Object(Y)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(Y,X))})}return K}function m(K,z){return P(K)||B(K,z)||E()}function x(K){return S(K)||T(K)||M()}function S(K){if(Array.isArray(K)){for(var z=0,Y=new Array(K.length);z<K.length;z++)Y[z]=K[z];return Y}}function P(K){if(Array.isArray(K))return K}function T(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function B(K,z){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var Y=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(Y.push(p.value),!(z&&Y.length===z));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return Y}}function M(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $=function K(z){s(this,K),this.p=new Promise(z)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(K,z){var Y=this;return new $(function(X,D){Y.p.then(function(a){X(K?K(a):a)}).catch(function(a){return z?z(a):Promise.reject(a)}).then(X,D)})},$.prototype.catch=function(K){return this.then(null,K)},$.resolve=function(K){return new $(function(z){z(K)})},$.reject=function(K){return new $(function(z,Y){Y(K)})},["all","race"].forEach(function(K){$[K]=function(z){return new $(function(Y,X){Promise[K](z.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(Y,X)})}});var I={},V=I.toString,J={}.hasOwnProperty,H=Object.getPrototypeOf,ne=J.toString;function k(K,z){return ce(K)&&typeof K.then=="function"&&(!z||typeof K.catch=="function")}function _(K){return V.call(K).slice(8,-1)}function U(K,z){if(!K||n(K)!=="object")return!1;var Y=H(K);if(!Y)return z===null;var X=J.call(Y,"constructor")&&Y.constructor;return typeof X!="function"?z===null:z===X||z!==null&&ne.call(X)===ne.call(z)||typeof z=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===z.__typeson__type__}function R(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?U(K,Object):!0}function _e(K){if(!K||_(K)!=="Object")return!1;var z=H(K);return z?U(K,Object)||_e(z):!0}function ce(K){return K&&n(K)==="object"}function Pe(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function be(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function he(K,z){if(z==="")return K;var Y=z.indexOf(".");if(Y>-1){var X=K[be(z.slice(0,Y))];return X===void 0?void 0:he(X,z.slice(Y+1))}return K[be(z)]}function le(K,z,Y){if(z==="")return Y;var X=z.indexOf(".");if(X>-1){var D=K[be(z.slice(0,X))];return le(D,z.slice(X+1),Y)}return K[be(z)]=Y,K}function Ye(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Je=Object.keys,it=Array.isArray,Ve={}.hasOwnProperty,Ft=["type","replaced","iterateIn","iterateUnsetNumeric"];function ge(K,z){if(K.keypath==="")return-1;var Y=K.keypath.match(/\./g)||0,X=z.keypath.match(/\./g)||0;return Y&&(Y=Y.length),X&&(X=X.length),Y>X?-1:Y<X?1:K.keypath<z.keypath?-1:K.keypath>z.keypath}var fe=function(){function K(z){s(this,K),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(Y,X,D,a){a=h({},this.options,{},a,{stringification:!0});var f=this.encapsulate(Y,null,a);return it(f)?JSON.stringify(f[0],X,D):f.then(function(p){return JSON.stringify(p,X,D)})}},{key:"stringifySync",value:function(Y,X,D,a){return this.stringify(Y,X,D,h({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(Y,X,D,a){return this.stringify(Y,X,D,h({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(Y,X,D){return D=h({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(Y,X),D)}},{key:"parseSync",value:function(Y,X,D){return this.parse(Y,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(Y,X,D){return this.parse(Y,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(Y,X,D)}},{key:"rootTypeName",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(Y,X,D)}},{key:"encapsulate",value:function(Y,X,D){D=h({sync:!0},this.options,{},D);var a=D,f=a.sync,p=this,y={},v=[],w=[],C=[],A="cyclic"in D?D.cyclic:!0,F=D,L=F.encapsulateObserver,W=pe("",Y,A,X||{},C);function q(te){var g=Object.values(y);if(D.iterateNone)return g.length?g[0]:K.getJSONType(te);if(g.length){if(D.returnTypeNames)return x(new Set(g));!te||!R(te)||Ve.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else ce(te)&&Ve.call(te,"$types")&&(te={$:te,$types:!0});return D.returnTypeNames?!1:te}function G(te,g){return Z.apply(this,arguments)}function Z(){return Z=i(regeneratorRuntime.mark(function te(g,d){var b;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Promise.all(d.map(function(Q){return Q[1].p}));case 2:return b=N.sent,N.next=5,Promise.all(b.map(function(){var Q=i(regeneratorRuntime.mark(function ee(me){var oe,Ce,Ie,Ne,We,Ke,Re,Xe,Qe,Ee,mt,ye,ie,ke;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(oe=[],Ce=d.splice(0,1),Ie=m(Ce,1),Ne=Ie[0],We=m(Ne,7),Ke=We[0],Re=We[2],Xe=We[3],Qe=We[4],Ee=We[5],mt=We[6],ye=pe(Ke,me,Re,Xe,oe,!0,mt),ie=U(ye,$),!(Ke&&ie)){Se.next=11;break}return Se.next=8,ye.p;case 8:return ke=Se.sent,Qe[Ee]=ke,Se.abrupt("return",G(g,oe));case 11:return Ke?Qe[Ee]=ye:ie?g=ye.p:g=ye,Se.abrupt("return",G(g,oe));case 13:case"end":return Se.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return N.abrupt("return",g);case 6:case"end":return N.stop()}},te)})),Z.apply(this,arguments)}function se(te,g,d){Object.assign(te,g);var b=Ft.map(function(O){var N=te[O];return delete te[O],N});d(),Ft.forEach(function(O,N){te[O]=b[N]})}function pe(te,g,d,b,O,N,Q){var ee,me={},oe=n(g),Ce=L?function(ie){var ke=Q||b.type||K.getJSONType(g);L(Object.assign(ie||me,{keypath:te,value:g,cyclic:d,stateObj:b,promisesData:O,resolvingTypesonPromise:N,awaitingTypesonPromise:U(g,$)},{type:ke}))}:null;if(["string","boolean","number","undefined"].includes(oe))return g===void 0||oe==="number"&&(isNaN(g)||g===-1/0||g===1/0)?(b.replaced?ee=g:ee=ve(te,g,b,O,!1,N,Ce),ee!==g&&(me={replaced:ee})):ee=g,Ce&&Ce(),ee;if(g===null)return Ce&&Ce(),g;if(d&&!b.iterateIn&&!b.iterateUnsetNumeric&&g&&n(g)==="object"){var Ie=v.indexOf(g);if(Ie<0)d===!0&&(v.push(g),w.push(te));else return y[te]="#",Ce&&Ce({cyclicKeypath:w[Ie]}),"#"+w[Ie]}var Ne=R(g),We=it(g),Ke=(Ne||We)&&(!p.plainObjectReplacers.length||b.replaced)||b.iterateIn?g:ve(te,g,b,O,Ne||We,null,Ce),Re;if(Ke!==g?(ee=Ke,me={replaced:Ke}):te===""&&U(g,$)?(O.push([te,g,d,b,void 0,void 0,b.type]),ee=g):We&&b.iterateIn!=="object"||b.iterateIn==="array"?(Re=new Array(g.length),me={clone:Re}):!["function","symbol"].includes(n(g))&&!("toJSON"in g)&&!U(g,$)&&!U(g,Promise)&&!U(g,ArrayBuffer)||Ne||b.iterateIn==="object"?(Re={},b.addLength&&(Re.length=g.length),me={clone:Re}):ee=g,Ce&&Ce(),D.iterateNone)return Re||ee;if(!Re)return ee;if(b.iterateIn){var Xe=function(ke){var we={ownKeys:Ve.call(g,ke)};se(b,we,function(){var Se=te+(te?".":"")+Pe(ke),Fe=pe(Se,g[ke],!!d,b,O,N);U(Fe,$)?O.push([Se,Fe,!!d,b,Re,ke,b.type]):Fe!==void 0&&(Re[ke]=Fe)})};for(var Qe in g)Xe(Qe);Ce&&Ce({endIterateIn:!0,end:!0})}else Je(g).forEach(function(ie){var ke=te+(te?".":"")+Pe(ie),we={ownKeys:!0};se(b,we,function(){var Se=pe(ke,g[ie],!!d,b,O,N);U(Se,$)?O.push([ke,Se,!!d,b,Re,ie,b.type]):Se!==void 0&&(Re[ie]=Se)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(b.iterateUnsetNumeric){for(var Ee=g.length,mt=function(ke){if(!(ke in g)){var we=te+(te?".":"")+ke,Se={ownKeys:!1};se(b,Se,function(){var Fe=pe(we,void 0,!!d,b,O,N);U(Fe,$)?O.push([we,Fe,!!d,b,Re,ke,b.type]):Fe!==void 0&&(Re[ke]=Fe)})}},ye=0;ye<Ee;ye++)mt(ye);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return Re}function ve(te,g,d,b,O,N,Q){for(var ee=O?p.plainObjectReplacers:p.nonplainObjectReplacers,me=ee.length;me--;){var oe=ee[me];if(oe.test(g,d)){var Ce=oe.type;if(p.revivers[Ce]){var Ie=y[te];y[te]=Ie?[Ce].concat(Ie):Ce}if(Object.assign(d,{type:Ce,replaced:!0}),(f||!oe.replaceAsync)&&!oe.replace)return Q&&Q({typeDetected:!0}),pe(te,g,A&&"readonly",d,b,N,Ce);Q&&Q({replacing:!0});var Ne=f||!oe.replaceAsync?"replace":"replaceAsync";return pe(te,oe[Ne](g,d),A&&"readonly",d,b,N,Ce)}}return g}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(W,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(W)]:f?q(W):Promise.resolve(q(W))}},{key:"encapsulateSync",value:function(Y,X,D){return this.encapsulate(Y,X,h({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(Y,X,D){return this.encapsulate(Y,X,h({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(Y,X){var D=Y&&Y.$types;if(!D)return Y;if(D===!0)return Y.$;X=h({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},v=!0;D.$&&R(D.$)&&(Y=Y.$,D=D.$,v=!1);var w=this;function C(Z,se){var pe=w.revivers[Z]||[],ve=m(pe,1),te=ve[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?se:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](se,y)}function A(){var Z=[];if(Object.entries(D).forEach(function(se){var pe=m(se,2),ve=pe[0],te=pe[1];te!=="#"&&[].concat(te).forEach(function(g){var d=w.revivers[g]||[null,{}],b=m(d,2),O=b[1].plain;O&&(Z.push({keypath:ve,type:g}),delete D[ve])})}),!!Z.length)return Z.sort(ge).reduce(function se(pe,ve){var te=ve.keypath,g=ve.type;if(k(pe))return pe.then(function(O){return se(O,{keypath:te,type:g})});var d=he(Y,te);if(d=C(g,d),U(d,$))return d.then(function(O){var N=le(Y,te,O);N===O&&(Y=N)});var b=le(Y,te,d);b===d&&(Y=b)},void 0)}var F=[];function L(Z,se,pe,ve,te){if(!(v&&Z==="$types")){var g=D[Z],d=it(se);if(d||R(se)){var b=d?new Array(se.length):{};for(Je(se).forEach(function(Ie){var Ne=L(Z+(Z?".":"")+Pe(Ie),se[Ie],pe||b,b,Ie),We=function(Re){return U(Re,Be)?b[Ie]=void 0:Re!==void 0&&(b[Ie]=Re),Re};U(Ne,$)?F.push(Ne.then(function(Ke){return We(Ke)})):We(Ne)}),se=b;p.length;){var O=m(p[0],4),N=O[0],Q=O[1],ee=O[2],me=O[3],oe=he(N,Q);if(oe!==void 0)ee[me]=oe;else break;p.splice(0,1)}}if(!g)return se;if(g==="#"){var Ce=he(pe,se.slice(1));return Ce===void 0&&p.push([pe,se.slice(1),ve,te]),Ce}return[].concat(g).reduce(function Ie(Ne,We){return U(Ne,$)?Ne.then(function(Ke){return Ie(Ke,We)}):C(We,Ne)},se)}}function W(Z){return U(Z,Be)?void 0:Z}var q=A(),G;return U(q,$)?G=q.then(function(){return Y}):(G=L("",Y,null),F.length&&(G=$.resolve(G).then(function(Z){return $.all([Z].concat(F))}).then(function(Z){var se=m(Z,1),pe=se[0];return pe}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():U(G,$)?G.p.then(W):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?W(G):Promise.resolve(W(G))}},{key:"reviveSync",value:function(Y,X){return this.revive(Y,h({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Y,X){return this.revive(Y,h({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Y,X){return X=X||{},[].concat(Y).forEach(function D(a){var f=this;if(it(a))return a.map(function(p){return D.call(f,p)});a&&Je(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],v=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,w=v.filter(function(pe){return pe.type===p});if(w.length&&(v.splice(v.indexOf(w[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var C=y;y={test:function(ve){return ve&&ve.constructor===C},replace:function(ve){return h({},ve)},revive:function(ve){return Object.assign(Object.create(C.prototype),ve)}}}else if(it(y)){var A=y,F=m(A,3),L=F[0],W=F[1],q=F[2];y={test:L,replace:W,revive:q}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var se={};y.revive&&(se.revive=y.revive.bind(y)),y.reviveAsync&&(se.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[se,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Be=function K(){s(this,K)};return Be.__typeson__type__="TypesonUndefined",fe.Undefined=Be,fe.Promise=$,fe.isThenable=k,fe.toStringTag=_,fe.hasConstructorOf=U,fe.isObject=ce,fe.isPlainObject=R,fe.isUserObject=_e,fe.escapeKeyPathComponent=Pe,fe.unescapeKeyPathComponent=be,fe.getByKeyPath=he,fe.getJSONType=Ye,fe.JSON_TYPES=["null","boolean","number","string","array","object"],fe})}),ym=Go(function(e,t){(function(n,r){e.exports=r()})(mo,function(){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}function r(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function i(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function s(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function o(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,O)}return b}function l(g){return function(b){if(Array.isArray(b))return u(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||function(b,O){if(b){if(typeof b=="string")return u(b,O);var N=Object.prototype.toString.call(b).slice(8,-1);if(N==="Object"&&b.constructor&&(N=b.constructor.name),N==="Map"||N==="Set")return Array.from(b);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return u(b,O)}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(g)}function h(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function m(g,d){for(var b=0;b<d.length;b++){var O=d[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(g,O.key,O)}}function x(g,d,b){return d in g?Object.defineProperty(g,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[d]=b,g}function S(g,d){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(g);d&&(O=O.filter(function(N){return Object.getOwnPropertyDescriptor(g,N).enumerable})),b.push.apply(b,O)}return b}function P(g){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?S(Object(b),!0).forEach(function(O){x(g,O,b[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(b)):S(Object(b)).forEach(function(O){Object.defineProperty(g,O,Object.getOwnPropertyDescriptor(b,O))})}return g}function T(g,d){return function(O){if(Array.isArray(O))return O}(g)||function(O,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var Q=[],ee=!0,me=!1,oe=void 0;try{for(var Ce,Ie=O[Symbol.iterator]();!(ee=(Ce=Ie.next()).done)&&(Q.push(Ce.value),!N||Q.length!==N);ee=!0);}catch(Ne){me=!0,oe=Ne}finally{try{ee||Ie.return==null||Ie.return()}finally{if(me)throw oe}}return Q}}(g,d)||M(g,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(g){return function(b){if(Array.isArray(b))return E(b)}(g)||function(b){if(typeof Symbol<"u"&&Symbol.iterator in Object(b))return Array.from(b)}(g)||M(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M(g,d){if(g){if(typeof g=="string")return E(g,d);var b=Object.prototype.toString.call(g).slice(8,-1);return b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set"?Array.from(g):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?E(g,d):void 0}}function E(g,d){(d==null||d>g.length)&&(d=g.length);for(var b=0,O=new Array(d);b<d;b++)O[b]=g[b];return O}var $=function g(d){h(this,g),this.p=new Promise(d)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(g,d){var b=this;return new $(function(O,N){b.p.then(function(Q){O(g?g(Q):Q)}).catch(function(Q){return d?d(Q):Promise.reject(Q)}).then(O,N)})},$.prototype.catch=function(g){return this.then(null,g)},$.resolve=function(g){return new $(function(d){d(g)})},$.reject=function(g){return new $(function(d,b){b(g)})},["all","race"].forEach(function(g){$[g]=function(d){return new $(function(b,O){Promise[g](d.map(function(N){return N&&N.constructor&&N.constructor.__typeson__type__==="TypesonPromise"?N.p:N})).then(b,O)})}});var I={}.toString,V={}.hasOwnProperty,J=Object.getPrototypeOf,H=V.toString;function ne(g,d){return R(g)&&typeof g.then=="function"&&(!d||typeof g.catch=="function")}function k(g){return I.call(g).slice(8,-1)}function _(g,d){if(!g||c(g)!=="object")return!1;var b=J(g);if(!b)return d===null;var O=V.call(b,"constructor")&&b.constructor;return typeof O!="function"?d===null:d===O||d!==null&&H.call(O)===H.call(d)||typeof d=="function"&&typeof O.__typeson__type__=="string"&&O.__typeson__type__===d.__typeson__type__}function U(g){return!(!g||k(g)!=="Object")&&(!J(g)||_(g,Object))}function R(g){return g&&c(g)==="object"}function _e(g){return g.replace(/~/g,"~0").replace(/\./g,"~1")}function ce(g){return g.replace(/~1/g,".").replace(/~0/g,"~")}function Pe(g,d){if(d==="")return g;var b=d.indexOf(".");if(b>-1){var O=g[ce(d.slice(0,b))];return O===void 0?void 0:Pe(O,d.slice(b+1))}return g[ce(d)]}function be(g,d,b){if(d==="")return b;var O=d.indexOf(".");return O>-1?be(g[ce(d.slice(0,O))],d.slice(O+1),b):(g[ce(d)]=b,g)}function he(g,d,b){return b?d?d(g):g:(g&&g.then||(g=Promise.resolve(g)),d?g.then(d):g)}var le=Object.keys,Ye=Array.isArray,Je={}.hasOwnProperty,it=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ve(g){return function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];try{return Promise.resolve(g.apply(this,d))}catch(O){return Promise.reject(O)}}}function Ft(g,d){if(g.keypath==="")return-1;var b=g.keypath.match(/\./g)||0,O=d.keypath.match(/\./g)||0;return b&&(b=b.length),O&&(O=O.length),b>O?-1:b<O?1:g.keypath<d.keypath?-1:g.keypath>d.keypath}var ge=function(){function g(d){h(this,g),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(b,O,N){return O&&m(b.prototype,O),N&&m(b,N),b}(g,[{key:"stringify",value:function(b,O,N,Q){Q=P(P(P({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(b,null,Q);return Ye(ee)?JSON.stringify(ee[0],O,N):ee.then(function(me){return JSON.stringify(me,O,N)})}},{key:"stringifySync",value:function(b,O,N,Q){return this.stringify(b,O,N,P(P({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(b,O,N,Q){return this.stringify(b,O,N,P(P({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(b,O,N){return N=P(P(P({},this.options),N),{},{parse:!0}),this.revive(JSON.parse(b,O),N)}},{key:"parseSync",value:function(b,O,N){return this.parse(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"parseAsync",value:function(b,O,N){return this.parse(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"specialTypeNames",value:function(b,O){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.returnTypeNames=!0,this.encapsulate(b,O,N)}},{key:"rootTypeName",value:function(b,O){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N.iterateNone=!0,this.encapsulate(b,O,N)}},{key:"encapsulate",value:function(b,O,N){var Q=Ve(function(ye,ie){return he(Promise.all(ie.map(function(ke){return ke[1].p})),function(ke){return he(Promise.all(ke.map(Ve(function(we){var Se=!1,Fe=[],Lt=T(ie.splice(0,1),1),at=T(Lt[0],7),$t=at[0],Vt=at[2],ze=at[3],Ut=at[4],Ze=at[5],Mt=at[6],St=Ee($t,we,Vt,ze,Fe,!0,Mt),Wt=_(St,$);return function(ps,ui){var sr=ps();return sr&&sr.then?sr.then(ui):ui(sr)}(function(){if($t&&Wt)return he(St.p,function(zt){return Ut[Ze]=zt,Se=!0,Q(ye,Fe)})},function(zt){return Se?zt:($t?Ut[Ze]=St:ye=Wt?St.p:St,Q(ye,Fe))})}))),function(){return ye})})}),ee=(N=P(P({sync:!0},this.options),N)).sync,me=this,oe={},Ce=[],Ie=[],Ne=[],We=!("cyclic"in N)||N.cyclic,Ke=N.encapsulateObserver,Re=Ee("",b,We,O||{},Ne);function Xe(ye){var ie=Object.values(oe);if(N.iterateNone)return ie.length?ie[0]:g.getJSONType(ye);if(ie.length){if(N.returnTypeNames)return B(new Set(ie));ye&&U(ye)&&!Je.call(ye,"$types")?ye.$types=oe:ye={$:ye,$types:{$:oe}}}else R(ye)&&Je.call(ye,"$types")&&(ye={$:ye,$types:!0});return!N.returnTypeNames&&ye}function Qe(ye,ie,ke){Object.assign(ye,ie);var we=it.map(function(Se){var Fe=ye[Se];return delete ye[Se],Fe});ke(),it.forEach(function(Se,Fe){ye[Se]=we[Fe]})}function Ee(ye,ie,ke,we,Se,Fe,Lt){var at,$t={},Vt=c(ie),ze=Ke?function(Cn){var Tt=Lt||we.type||g.getJSONType(ie);Ke(Object.assign(Cn||$t,{keypath:ye,value:ie,cyclic:ke,stateObj:we,promisesData:Se,resolvingTypesonPromise:Fe,awaitingTypesonPromise:_(ie,$)},{type:Tt}))}:null;if(["string","boolean","number","undefined"].includes(Vt))return ie===void 0||Number.isNaN(ie)||ie===Number.NEGATIVE_INFINITY||ie===Number.POSITIVE_INFINITY?(at=we.replaced?ie:mt(ye,ie,we,Se,!1,Fe,ze))!==ie&&($t={replaced:at}):at=ie,ze&&ze(),at;if(ie===null)return ze&&ze(),ie;if(ke&&!we.iterateIn&&!we.iterateUnsetNumeric&&ie&&c(ie)==="object"){var Ut=Ce.indexOf(ie);if(!(Ut<0))return oe[ye]="#",ze&&ze({cyclicKeypath:Ie[Ut]}),"#"+Ie[Ut];ke===!0&&(Ce.push(ie),Ie.push(ye))}var Ze,Mt=U(ie),St=Ye(ie),Wt=(Mt||St)&&(!me.plainObjectReplacers.length||we.replaced)||we.iterateIn?ie:mt(ye,ie,we,Se,Mt||St,null,ze);if(Wt!==ie?(at=Wt,$t={replaced:Wt}):ye===""&&_(ie,$)?(Se.push([ye,ie,ke,we,void 0,void 0,we.type]),at=ie):St&&we.iterateIn!=="object"||we.iterateIn==="array"?(Ze=new Array(ie.length),$t={clone:Ze}):(["function","symbol"].includes(c(ie))||"toJSON"in ie||_(ie,$)||_(ie,Promise)||_(ie,ArrayBuffer))&&!Mt&&we.iterateIn!=="object"?at=ie:(Ze={},we.addLength&&(Ze.length=ie.length),$t={clone:Ze}),ze&&ze(),N.iterateNone)return Ze||at;if(!Ze)return at;if(we.iterateIn){var zt=function(Tt){var fn={ownKeys:Je.call(ie,Tt)};Qe(we,fn,function(){var jn=ye+(ye?".":"")+_e(Tt),fi=Ee(jn,ie[Tt],!!ke,we,Se,Fe);_(fi,$)?Se.push([jn,fi,!!ke,we,Ze,Tt,we.type]):fi!==void 0&&(Ze[Tt]=fi)})};for(var ps in ie)zt(ps);ze&&ze({endIterateIn:!0,end:!0})}else le(ie).forEach(function(Cn){var Tt=ye+(ye?".":"")+_e(Cn);Qe(we,{ownKeys:!0},function(){var fn=Ee(Tt,ie[Cn],!!ke,we,Se,Fe);_(fn,$)?Se.push([Tt,fn,!!ke,we,Ze,Cn,we.type]):fn!==void 0&&(Ze[Cn]=fn)})}),ze&&ze({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var ui=ie.length,sr=function(Tt){if(!(Tt in ie)){var fn=ye+(ye?".":"")+Tt;Qe(we,{ownKeys:!1},function(){var jn=Ee(fn,void 0,!!ke,we,Se,Fe);_(jn,$)?Se.push([fn,jn,!!ke,we,Ze,Tt,we.type]):jn!==void 0&&(Ze[Tt]=jn)})}},ys=0;ys<ui;ys++)sr(ys);ze&&ze({endIterateUnsetNumeric:!0,end:!0})}return Ze}function mt(ye,ie,ke,we,Se,Fe,Lt){for(var at=Se?me.plainObjectReplacers:me.nonplainObjectReplacers,$t=at.length;$t--;){var Vt=at[$t];if(Vt.test(ie,ke)){var ze=Vt.type;if(me.revivers[ze]){var Ut=oe[ye];oe[ye]=Ut?[ze].concat(Ut):ze}return Object.assign(ke,{type:ze,replaced:!0}),!ee&&Vt.replaceAsync||Vt.replace?(Lt&&Lt({replacing:!0}),Ee(ye,Vt[ee||!Vt.replaceAsync?"replace":"replaceAsync"](ie,ke),We&&"readonly",ke,we,Fe,ze)):(Lt&&Lt({typeDetected:!0}),Ee(ye,ie,We&&"readonly",ke,we,Fe,ze))}}return ie}return Ne.length?ee&&N.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(Re,Ne)).then(Xe):!ee&&N.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():N.stringification&&ee?[Xe(Re)]:ee?Xe(Re):Promise.resolve(Xe(Re))}},{key:"encapsulateSync",value:function(b,O,N){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(b,O,N){return this.encapsulate(b,O,P(P({throwOnBadSyncType:!0},N),{},{sync:!1}))}},{key:"revive",value:function(b,O){var N=b&&b.$types;if(!N)return b;if(N===!0)return b.$;var Q=(O=P(P({sync:!0},this.options),O)).sync,ee=[],me={},oe=!0;N.$&&U(N.$)&&(b=b.$,N=N.$,oe=!1);var Ce=this;function Ie(Xe,Qe){var Ee=T(Ce.revivers[Xe]||[],1)[0];if(!Ee)throw new Error("Unregistered type: "+Xe);return Q&&!("revive"in Ee)?Qe:Ee[Q&&Ee.revive?"revive":!Q&&Ee.reviveAsync?"reviveAsync":"revive"](Qe,me)}var Ne=[];function We(Xe){return _(Xe,fe)?void 0:Xe}var Ke,Re=function(){var Qe=[];if(Object.entries(N).forEach(function(Ee){var mt=T(Ee,2),ye=mt[0],ie=mt[1];ie!=="#"&&[].concat(ie).forEach(function(ke){T(Ce.revivers[ke]||[null,{}],2)[1].plain&&(Qe.push({keypath:ye,type:ke}),delete N[ye])})}),Qe.length)return Qe.sort(Ft).reduce(function Ee(mt,ye){var ie=ye.keypath,ke=ye.type;if(ne(mt))return mt.then(function(Fe){return Ee(Fe,{keypath:ie,type:ke})});var we=Pe(b,ie);if(_(we=Ie(ke,we),$))return we.then(function(Fe){var Lt=be(b,ie,Fe);Lt===Fe&&(b=Lt)});var Se=be(b,ie,we);Se===we&&(b=Se)},void 0)}();return _(Re,$)?Ke=Re.then(function(){return b}):(Ke=function Xe(Qe,Ee,mt,ye,ie){if(!oe||Qe!=="$types"){var ke=N[Qe],we=Ye(Ee);if(we||U(Ee)){var Se=we?new Array(Ee.length):{};for(le(Ee).forEach(function(Ze){var Mt=Xe(Qe+(Qe?".":"")+_e(Ze),Ee[Ze],mt||Se,Se,Ze),St=function(zt){return _(zt,fe)?Se[Ze]=void 0:zt!==void 0&&(Se[Ze]=zt),zt};_(Mt,$)?Ne.push(Mt.then(function(Wt){return St(Wt)})):St(Mt)}),Ee=Se;ee.length;){var Fe=T(ee[0],4),Lt=Fe[0],at=Fe[1],$t=Fe[2],Vt=Fe[3],ze=Pe(Lt,at);if(ze===void 0)break;$t[Vt]=ze,ee.splice(0,1)}}if(!ke)return Ee;if(ke==="#"){var Ut=Pe(mt,Ee.slice(1));return Ut===void 0&&ee.push([mt,Ee.slice(1),ye,ie]),Ut}return[].concat(ke).reduce(function Ze(Mt,St){return _(Mt,$)?Mt.then(function(Wt){return Ze(Wt,St)}):Ie(St,Mt)},Ee)}}("",b,null),Ne.length&&(Ke=$.resolve(Ke).then(function(Xe){return $.all([Xe].concat(Ne))}).then(function(Xe){return T(Xe,1)[0]}))),ne(Ke)?Q&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(Ke,$)?Ke.p.then(We):Ke:!Q&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?We(Ke):Promise.resolve(We(Ke))}},{key:"reviveSync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"reviveAsync",value:function(b,O){return this.revive(b,P(P({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"register",value:function(b,O){return O=O||{},[].concat(b).forEach(function N(Q){var ee=this;if(Ye(Q))return Q.map(function(me){return N.call(ee,me)});Q&&le(Q).forEach(function(me){if(me==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(me))throw new TypeError("Plain JSON object types are reserved as type names");var oe=Q[me],Ce=oe&&oe.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ie=Ce.filter(function(Qe){return Qe.type===me});if(Ie.length&&(Ce.splice(Ce.indexOf(Ie[0]),1),delete this.revivers[me],delete this.types[me]),typeof oe=="function"){var Ne=oe;oe={test:function(Ee){return Ee&&Ee.constructor===Ne},replace:function(Ee){return P({},Ee)},revive:function(Ee){return Object.assign(Object.create(Ne.prototype),Ee)}}}else if(Ye(oe)){var We=T(oe,3);oe={test:We[0],replace:We[1],revive:We[2]}}if(oe&&oe.test){var Ke={type:me,test:oe.test.bind(oe)};oe.replace&&(Ke.replace=oe.replace.bind(oe)),oe.replaceAsync&&(Ke.replaceAsync=oe.replaceAsync.bind(oe));var Re=typeof O.fallback=="number"?O.fallback:O.fallback?0:Number.POSITIVE_INFINITY;if(oe.testPlainObjects?this.plainObjectReplacers.splice(Re,0,Ke):this.nonplainObjectReplacers.splice(Re,0,Ke),oe.revive||oe.reviveAsync){var Xe={};oe.revive&&(Xe.revive=oe.revive.bind(oe)),oe.reviveAsync&&(Xe.reviveAsync=oe.reviveAsync.bind(oe)),this.revivers[me]=[Xe,{plain:oe.testPlainObjects}]}this.types[me]=oe}},this)},this),this}}]),g}(),fe=function g(){h(this,g)};fe.__typeson__type__="TypesonUndefined",ge.Undefined=fe,ge.Promise=$,ge.isThenable=ne,ge.toStringTag=k,ge.hasConstructorOf=_,ge.isObject=R,ge.isPlainObject=U,ge.isUserObject=function g(d){if(!d||k(d)!=="Object")return!1;var b=J(d);return!b||_(d,Object)||g(b)},ge.escapeKeyPathComponent=_e,ge.unescapeKeyPathComponent=ce,ge.getByKeyPath=Pe,ge.getJSONType=function(d){return d===null?"null":Array.isArray(d)?"array":c(d)},ge.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Be={userObject:{test:function(d,b){return ge.isUserObject(d)},replace:function(d){return function(O){for(var N=1;N<arguments.length;N++){var Q=arguments[N]!=null?arguments[N]:{};N%2?o(Object(Q),!0).forEach(function(ee){s(O,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(O,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return O}({},d)},revive:function(d){return d}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(d,b){return!!Array.isArray(d)&&(Object.keys(d).some(function(O){return String(Number.parseInt(O))!==O})&&(b.iterateIn="object",b.addLength=!0),!0)},replace:function(d,b){return b.iterateUnsetNumeric=!0,d},revive:function(d){if(Array.isArray(d))return d;var b=[];return Object.keys(d).forEach(function(O){var N=d[O];b[O]=N}),b}}},{sparseUndefined:{test:function(d,b){return d===void 0&&b.ownKeys===!1},replace:function(d){return 0},revive:function(d){}}}],z={undef:{test:function(d,b){return d===void 0&&(b.ownKeys||!("ownKeys"in b))},replace:function(d){return 0},revive:function(d){return new ge.Undefined}}},Y={StringObject:{test:function(d){return ge.toStringTag(d)==="String"&&n(d)==="object"},replace:function(d){return String(d)},revive:function(d){return new String(d)}},BooleanObject:{test:function(d){return ge.toStringTag(d)==="Boolean"&&n(d)==="object"},replace:function(d){return!!d},revive:function(d){return new Boolean(d)}},NumberObject:{test:function(d){return ge.toStringTag(d)==="Number"&&n(d)==="object"},replace:function(d){return Number(d)},revive:function(d){return new Number(d)}}},X=[{nan:{test:function(d){return Number.isNaN(d)},replace:function(d){return"NaN"},revive:function(d){return Number.NaN}}},{infinity:{test:function(d){return d===Number.POSITIVE_INFINITY},replace:function(d){return"Infinity"},revive:function(d){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(d){return d===Number.NEGATIVE_INFINITY},replace:function(d){return"-Infinity"},revive:function(d){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(d){return ge.toStringTag(d)==="Date"},replace:function(d){var b=d.getTime();return Number.isNaN(b)?"NaN":b},revive:function(d){return d==="NaN"?new Date(Number.NaN):new Date(d)}}},a={regexp:{test:function(d){return ge.toStringTag(d)==="RegExp"},replace:function(d){return{source:d.source,flags:(d.global?"g":"")+(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.sticky?"y":"")+(d.unicode?"u":"")}},revive:function(d){var b=d.source,O=d.flags;return new RegExp(b,O)}}},f={map:{test:function(d){return ge.toStringTag(d)==="Map"},replace:function(d){return l(d.entries())},revive:function(d){return new Map(d)}}},p={set:{test:function(d){return ge.toStringTag(d)==="Set"},replace:function(d){return l(d.values())},revive:function(d){return new Set(d)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Uint8Array(256),w=0;w<y.length;w++)v[y.charCodeAt(w)]=w;var C=function(d,b,O){O==null&&(O=d.byteLength);for(var N=new Uint8Array(d,b||0,O),Q=N.length,ee="",me=0;me<Q;me+=3)ee+=y[N[me]>>2],ee+=y[(3&N[me])<<4|N[me+1]>>4],ee+=y[(15&N[me+1])<<2|N[me+2]>>6],ee+=y[63&N[me+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},A=function(d){var b,O,N,Q,ee=d.length,me=.75*d.length,oe=0;d[d.length-1]==="="&&(me--,d[d.length-2]==="="&&me--);for(var Ce=new ArrayBuffer(me),Ie=new Uint8Array(Ce),Ne=0;Ne<ee;Ne+=4)b=v[d.charCodeAt(Ne)],O=v[d.charCodeAt(Ne+1)],N=v[d.charCodeAt(Ne+2)],Q=v[d.charCodeAt(Ne+3)],Ie[oe++]=b<<2|O>>4,Ie[oe++]=(15&O)<<4|N>>2,Ie[oe++]=(3&N)<<6|63&Q;return Ce},F={arraybuffer:{test:function(d){return ge.toStringTag(d)==="ArrayBuffer"},replace:function(d,b){b.buffers||(b.buffers=[]);var O=b.buffers.indexOf(d);return O>-1?{index:O}:(b.buffers.push(d),C(d))},revive:function(d,b){if(b.buffers||(b.buffers=[]),n(d)==="object")return b.buffers[d.index];var O=A(d);return b.buffers.push(O),O}}},L=typeof self>"u"?mo:self,W={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(g){var d=g,b=L[d];b&&(W[g.toLowerCase()]={test:function(N){return ge.toStringTag(N)===d},replace:function(N,Q){var ee=N.buffer,me=N.byteOffset,oe=N.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:me,length:oe}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:me,length:oe})},revive:function(N,Q){Q.buffers||(Q.buffers=[]);var ee,me=N.byteOffset,oe=N.length,Ce=N.encoded,Ie=N.index;return"index"in N?ee=Q.buffers[Ie]:(ee=A(Ce),Q.buffers.push(ee)),new b(ee,me,oe)}})});var q={dataview:{test:function(d){return ge.toStringTag(d)==="DataView"},replace:function(d,b){var O=d.buffer,N=d.byteOffset,Q=d.byteLength;b.buffers||(b.buffers=[]);var ee=b.buffers.indexOf(O);return ee>-1?{index:ee,byteOffset:N,byteLength:Q}:(b.buffers.push(O),{encoded:C(O),byteOffset:N,byteLength:Q})},revive:function(d,b){b.buffers||(b.buffers=[]);var O,N=d.byteOffset,Q=d.byteLength,ee=d.encoded,me=d.index;return"index"in d?O=b.buffers[me]:(O=A(ee),b.buffers.push(O)),new DataView(O,N,Q)}}},G={IntlCollator:{test:function(d){return ge.hasConstructorOf(d,Intl.Collator)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.Collator(d.locale,d)}},IntlDateTimeFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.DateTimeFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.DateTimeFormat(d.locale,d)}},IntlNumberFormat:{test:function(d){return ge.hasConstructorOf(d,Intl.NumberFormat)},replace:function(d){return d.resolvedOptions()},revive:function(d){return new Intl.NumberFormat(d.locale,d)}}};function Z(g){for(var d=new Uint8Array(g.length),b=0;b<g.length;b++)d[b]=g.charCodeAt(b);return d.buffer}var se={file:{test:function(d){return ge.toStringTag(d)==="File"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad File access: "+b.status);return{type:d.type,stringContents:b.responseText,name:d.name,lastModified:d.lastModified}},revive:function(d){var b=d.name,O=d.type,N=d.stringContents,Q=d.lastModified;return new File([Z(N)],b,{type:O,lastModified:Q})},replaceAsync:function(d){return new ge.Promise(function(b,O){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result,name:d.name,lastModified:d.lastModified})}),N.addEventListener("error",function(){O(N.error)}),N.readAsBinaryString(d)})}}},pe={bigint:{test:function(d){return typeof d=="bigint"},replace:function(d){return String(d)},revive:function(d){return BigInt(d)}}},ve={bigintObject:{test:function(d){return n(d)==="object"&&ge.hasConstructorOf(d,BigInt)},replace:function(d){return String(d)},revive:function(d){return new Object(BigInt(d))}}},te={cryptokey:{test:function(d){return ge.toStringTag(d)==="CryptoKey"&&d.extractable},replaceAsync:function(d){return new ge.Promise(function(b,O){crypto.subtle.exportKey("jwk",d).catch(function(N){O(N)}).then(function(N){b({jwk:N,algorithm:d.algorithm,usages:d.usages})})})},revive:function(d){var b=d.jwk,O=d.algorithm,N=d.usages;return crypto.subtle.importKey("jwk",b,O,!0,N)}}};return[Be,z,K,Y,X,D,a,{imagedata:{test:function(d){return ge.toStringTag(d)==="ImageData"},replace:function(d){return{array:l(d.data),width:d.width,height:d.height}},revive:function(d){return new ImageData(new Uint8ClampedArray(d.array),d.width,d.height)}}},{imagebitmap:{test:function(d){return ge.toStringTag(d)==="ImageBitmap"||d&&d.dataset&&d.dataset.toStringTag==="ImageBitmap"},replace:function(d){var b=document.createElement("canvas");return b.getContext("2d").drawImage(d,0,0),b.toDataURL()},revive:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){O.drawImage(N,0,0)}),N.src=d,b},reviveAsync:function(d){var b=document.createElement("canvas"),O=b.getContext("2d"),N=document.createElement("img");return N.addEventListener("load",function(){O.drawImage(N,0,0)}),N.src=d,createImageBitmap(b)}}},se,{file:se.file,filelist:{test:function(d){return ge.toStringTag(d)==="FileList"},replace:function(d){for(var b=[],O=0;O<d.length;O++)b[O]=d.item(O);return b},revive:function(d){return new(function(){function b(){r(this,b),this._files=arguments[0],this.length=this._files.length}return function(N,Q,ee){return Q&&i(N.prototype,Q),ee&&i(N,ee),N}(b,[{key:"item",value:function(N){return this._files[N]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),b}())(d)}}},{blob:{test:function(d){return ge.toStringTag(d)==="Blob"},replace:function(d){var b=new XMLHttpRequest;if(b.overrideMimeType("text/plain; charset=x-user-defined"),b.open("GET",URL.createObjectURL(d),!1),b.send(),b.status!==200&&b.status!==0)throw new Error("Bad Blob access: "+b.status);return{type:d.type,stringContents:b.responseText}},revive:function(d){var b=d.type,O=d.stringContents;return new Blob([Z(O)],{type:b})},replaceAsync:function(d){return new ge.Promise(function(b,O){var N=new FileReader;N.addEventListener("load",function(){b({type:d.type,stringContents:N.result})}),N.addEventListener("error",function(){O(N.error)}),N.readAsBinaryString(d)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?F:[],typeof Uint8Array=="function"?W:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[pe,ve]:[])})}),fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Br=new Uint8Array(256);for(var Di=0;Di<fr.length;Di++)Br[fr.codePointAt(Di)]=Di;var go=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),s=i.length,o="",l=0;l<s;l+=3)o+=fr[i[l]>>2],o+=fr[(i[l]&3)<<4|i[l+1]>>4],o+=fr[(i[l+1]&15)<<2|i[l+2]>>6],o+=fr[i[l+2]&63];return s%3===2?o=o.slice(0,-1)+"=":s%3===1&&(o=o.slice(0,-2)+"=="),o},Ac=function(t){var n=t.length,r=t.length*.75,i=0,s,o,l,u;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),h=new Uint8Array(c),m=0;m<n;m+=4)s=Br[t.codePointAt(m)],o=Br[t.codePointAt(m+1)],l=Br[t.codePointAt(m+2)],u=Br[t.codePointAt(m+3)],h[i++]=s<<2|o>>4,h[i++]=(o&15)<<4|l>>2,h[i++]=(l&3)<<6|u&63;return c},mm=typeof self>"u"?global:self,Pc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=mm[t];n&&(Pc[e.toLowerCase()+"2"]={test:function(r){return hs.toStringTag(r)===t},replace:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return{buffer:i,byteOffset:s,length:o}},revive:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return new n(i,s,o)}})});var gm={arraybuffer:{test:function(e){return hs.toStringTag(e)==="ArrayBuffer"},replace:function(e){return go(e,0,e.byteLength)},revive:function(e){var t=Ac(e);return t}}},Jt=new hs().register(ym),vm="FileReaderSync"in self,Zi=[],Ps=0;Jt.register([gm,Pc,{blob2:{test:function(e){return hs.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(vm){var t=Ec(e,"binary"),n=go(t,0,t.byteLength);return{type:e.type,data:n}}else{Zi.push(e);var r={type:e.type,data:{start:Ps,end:Ps+e.size}};return Ps+=e.size,r}},finalize:function(e,t){e.data=go(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Ac(n)],{type:t})}}}]);Jt.mustFinalize=function(){return Zi.length>0};Jt.finalize=function(e){return Rn(void 0,void 0,void 0,function(){var t,n,r,i,s,o,l,u,c,h;return en(this,function(m){switch(m.label){case 0:return[4,Oc(new Blob(Zi),"binary")];case 1:if(t=m.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,o=s.$,o&&(s=s.$);for(l in s)u=s[l],c=Jt.types[u],c&&c.finalize&&(h=ct.getByKeyPath(i,o?"$."+l:l),c.finalize(h,t.slice(h.start,h.end)))}}return Zi=[],[2]}})})};var bm=2e3;function $c(e,t){return Rn(this,void 0,void 0,function(){function n(){return Rn(this,void 0,void 0,function(){var c,h,m,x,S,P,T,B,M;return en(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function($){return $.count()}))];case 1:c=E.sent(),c.forEach(function($,I){return i[I].rowCount=$}),u.totalRows=c.reduce(function($,I){return $+I}),h=JSON.stringify(o,void 0,s?2:void 0),m=h.lastIndexOf("]"),x=h.substring(0,m),r.push(x),S=t.filter,P=function($){var I,V,J,H,ne,k,_,U,R,_e,ce,Pe;return en(this,function(be){switch(be.label){case 0:I=e.table($),V=I.schema.primKey,J=!!V.keyPath,H=t.numRowsPerChunk||bm,ne=J?{tableName:I.name,inbound:!0,rows:[]}:{tableName:I.name,inbound:!1,rows:[]},k=JSON.stringify(ne,void 0,s?2:void 0),s&&(k=k.split(`
`).join(`
    `)),_=k.lastIndexOf("]"),r.push(k.substring(0,_)),U=null,R=0,_e=!0,ce=function(){var he,le,Ye,Je,ge,it,Ve,Ft,ge;return en(this,function(fe){switch(fe.label){case 0:return l&&ct.ignoreTransaction(function(){return l(u)}),he=U==null?I.limit(H):I.where(":id").above(U).limit(H),[4,he.toArray()];case 1:return le=fe.sent(),le.length===0?[2,"break"]:(U!=null&&R>0&&(r.push(","),s&&r.push(`
      `)),_e=le.length===H,J?(Ye=S?le.filter(function(Be){return S($,Be)}):le,Je=Ye.map(function(Be){return Jt.encapsulate(Be)}),Jt.mustFinalize()?[4,ct.waitFor(Jt.finalize(Je))]:[3,3]):[3,4]);case 2:fe.sent(),fe.label=3;case 3:return ge=JSON.stringify(Je,void 0,s?2:void 0),s&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),R=Ye.length,U=le.length>0?ct.getByKeyPath(le[le.length-1],V.keyPath):null,[3,8];case 4:return[4,he.primaryKeys()];case 5:return it=fe.sent(),Ve=it.map(function(Be,K){return[Be,le[K]]}),S&&(Ve=Ve.filter(function(Be){var K=Be[0],z=Be[1];return S($,z,K)})),Ft=Ve.map(function(Be){return Jt.encapsulate(Be)}),Jt.mustFinalize()?[4,ct.waitFor(Jt.finalize(Ft))]:[3,7];case 6:fe.sent(),fe.label=7;case 7:ge=JSON.stringify(Ft,void 0,s?2:void 0),s&&(ge=ge.split(`
`).join(`
      `)),r.push(new Blob([ge.substring(1,ge.length-1)])),R=Ve.length,U=it.length>0?it[it.length-1]:null,fe.label=8;case 8:return u.completedRows+=le.length,[2]}})},be.label=1;case 1:return _e?[5,ce()]:[3,3];case 2:return Pe=be.sent(),Pe==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(_)),u.completedTables+=1,u.completedTables<u.totalTables&&r.push(","),[2]}})},T=0,B=i,E.label=2;case 2:return T<B.length?(M=B[T].name,[5,P(M)]):[3,5];case 3:E.sent(),E.label=4;case 4:return T++,[3,2];case 5:return r.push(h.substr(m)),u.done=!0,l&&ct.ignoreTransaction(function(){return l(u)}),[2]}})})}var r,i,s,o,l,u;return en(this,function(c){switch(c.label){case 0:t=t||{},r=[],i=e.tables.map(function(h){return{name:h.name,schema:hm(h),rowCount:0}}),s=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},l=t.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return Jt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var _m=1,wm={Stream:function(){}},xm=Go(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new S(k)},n.CParser=S,n.CStream=T,n.createStream=P,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var u in n.STATE)n.STATE[n.STATE[u]]=u;o=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function _(){this.__proto__=k}return _.prototype=k,new _}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var _=[];for(var U in k)k.hasOwnProperty(U)&&_.push(U);return _});function h(k){var _=Math.max(n.MAX_BUFFER_LENGTH,10),U=0;for(var R in i){var _e=k[R]===void 0?0:k[R].length;if(_e>_)switch(R){case"text":closeText(k);break;default:V(k,"Max buffer length exceeded: "+R)}U=Math.max(U,_e)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-U+k.position}function m(k){for(var _ in i)k[_]=i[_]}var x=/[\\"\n]/g;function S(k){if(!(this instanceof S))return new S(k);var _=this;m(_),_.bufferCheckPosition=n.MAX_BUFFER_LENGTH,_.q=_.c=_.p="",_.opt=k||{},_.closed=_.closedRoot=_.sawRoot=!1,_.tag=_.error=null,_.state=o.BEGIN,_.stack=new Array,_.position=_.column=0,_.line=1,_.slashed=!1,_.unicodeI=0,_.unicodeS=null,_.depth=0,B(_,"onready")}S.prototype={end:function(){J(this)},write:ne,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=wm.Stream}catch{l=function(){}}function P(k){return new T(k)}function T(k){if(!(this instanceof T))return new T(k);this._parser=new S(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var _=this;l.apply(_),this._parser.onend=function(){_.emit("end")},this._parser.onerror=function(U){_.emit("error",U),_._parser.error=null},s.forEach(function(U){Object.defineProperty(_,"on"+U,{get:function(){return _._parser["on"+U]},set:function(R){if(!R)return _.removeAllListeners(U),_._parser["on"+U]=R,R;_.on(U,R)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(l.prototype,{constructor:{value:T}}),T.prototype.write=function(k){k=new Buffer(k);for(var _=0;_<k.length;_++){var U=k[_];if(this.bytes_remaining>0){for(var R=0;R<this.bytes_remaining;R++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+R]=k[R];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,_=_+R-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&U>=128)if(U>=194&&U<=223&&(this.bytes_in_sequence=2),U>=224&&U<=239&&(this.bytes_in_sequence=3),U>=240&&U<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+_>k.length){for(var _e=0;_e<=k.length-1-_;_e++)this.temp_buffs[this.bytes_in_sequence][_e]=k[_+_e];return this.bytes_remaining=_+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(_,_+this.bytes_in_sequence).toString(),_=_+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ce=_;ce<k.length&&!(k[ce]>=128);ce++);this.string=k.slice(_,ce).toString(),this._parser.write(this.string),this.emit("data",this.string),_=ce-1}},T.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},T.prototype.on=function(k,_){var U=this;return!U._parser["on"+k]&&s.indexOf(k)!==-1&&(U._parser["on"+k]=function(){var R=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);R.splice(0,0,k),U.emit.apply(U,R)}),l.prototype.on.call(U,k,_)},T.prototype.destroy=function(){m(this._parser),this.emit("close")};function B(k,_,U){n.INFO&&console.log("-- emit",_,U),k[_]&&k[_](U)}function M(k,_,U){E(k),B(k,_,U)}function E(k,_){k.textNode=I(k.opt,k.textNode),k.textNode!==void 0&&B(k,_||"onvalue",k.textNode),k.textNode=void 0}function $(k){k.numberNode&&B(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function I(k,_){return _===void 0||(k.trim&&(_=_.trim()),k.normalize&&(_=_.replace(/\s+/g," "))),_}function V(k,_){return E(k),_+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,_=new Error(_),k.error=_,B(k,"onerror",_),k}function J(k){return(k.state!==o.VALUE||k.depth!==0)&&V(k,"Unexpected end"),E(k),k.c="",k.closed=!0,B(k,"onend"),S.call(k,k.opt),k}function H(k){return k===c.carriageReturn||k===c.lineFeed||k===c.space||k===c.tab}function ne(k){var _=this;if(this.error)throw this.error;if(_.closed)return V(_,"Cannot write after close. Assign an onready handler.");if(k===null)return J(_);var U=0,R=k.charCodeAt(0),_e=_.p;for(n.DEBUG&&console.log("write -> ["+k+"]");R&&(_e=R,_.c=R=k.charCodeAt(U++),_e!==R?_.p=_e:_e=_.p,!!R);)switch(n.DEBUG&&console.log(U,R,n.STATE[_.state]),_.position++,R===c.lineFeed?(_.line++,_.column=0):_.column++,_.state){case o.BEGIN:R===c.openBrace?_.state=o.OPEN_OBJECT:R===c.openBracket?_.state=o.OPEN_ARRAY:H(R)||V(_,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(R))continue;if(_.state===o.OPEN_KEY)_.stack.push(o.CLOSE_KEY);else if(R===c.closeBrace){B(_,"onopenobject"),this.depth++,B(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_OBJECT);R===c.doubleQuote?_.state=o.STRING:V(_,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(R))continue;_.state,o.CLOSE_KEY,R===c.colon?(_.state===o.CLOSE_OBJECT?(_.stack.push(o.CLOSE_OBJECT),E(_,"onopenobject"),this.depth++):E(_,"onkey"),_.state=o.VALUE):R===c.closeBrace?(M(_,"oncloseobject"),this.depth--,_.state=_.stack.pop()||o.VALUE):R===c.comma?(_.state===o.CLOSE_OBJECT&&_.stack.push(o.CLOSE_OBJECT),E(_),_.state=o.OPEN_KEY):V(_,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(R))continue;if(_.state===o.OPEN_ARRAY)if(B(_,"onopenarray"),this.depth++,_.state=o.VALUE,R===c.closeBracket){B(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;continue}else _.stack.push(o.CLOSE_ARRAY);R===c.doubleQuote?_.state=o.STRING:R===c.openBrace?_.state=o.OPEN_OBJECT:R===c.openBracket?_.state=o.OPEN_ARRAY:R===c.t?_.state=o.TRUE:R===c.f?_.state=o.FALSE:R===c.n?_.state=o.NULL:R===c.minus?_.numberNode+="-":c._0<=R&&R<=c._9?(_.numberNode+=String.fromCharCode(R),_.state=o.NUMBER_DIGIT):V(_,"Bad value");continue;case o.CLOSE_ARRAY:if(R===c.comma)_.stack.push(o.CLOSE_ARRAY),E(_,"onvalue"),_.state=o.VALUE;else if(R===c.closeBracket)M(_,"onclosearray"),this.depth--,_.state=_.stack.pop()||o.VALUE;else{if(H(R))continue;V(_,"Bad array")}continue;case o.STRING:_.textNode===void 0&&(_.textNode="");var ce=U-1,Pe=_.slashed,be=_.unicodeI;e:for(;;){for(n.DEBUG&&console.log(U,R,n.STATE[_.state],Pe);be>0;)if(_.unicodeS+=String.fromCharCode(R),R=k.charCodeAt(U++),_.position++,be===4?(_.textNode+=String.fromCharCode(parseInt(_.unicodeS,16)),be=0,ce=U-1):be++,!R)break e;if(R===c.doubleQuote&&!Pe){_.state=_.stack.pop()||o.VALUE,_.textNode+=k.substring(ce,U-1),_.position+=U-1-ce;break}if(R===c.backslash&&!Pe&&(Pe=!0,_.textNode+=k.substring(ce,U-1),_.position+=U-1-ce,R=k.charCodeAt(U++),_.position++,!R))break;if(Pe){if(Pe=!1,R===c.n?_.textNode+=`
`:R===c.r?_.textNode+="\r":R===c.t?_.textNode+="	":R===c.f?_.textNode+="\f":R===c.b?_.textNode+="\b":R===c.u?(be=1,_.unicodeS=""):_.textNode+=String.fromCharCode(R),R=k.charCodeAt(U++),_.position++,ce=U-1,R)continue;break}x.lastIndex=U;var he=x.exec(k);if(he===null){U=k.length+1,_.textNode+=k.substring(ce,U-1),_.position+=U-1-ce;break}if(U=he.index+1,R=k.charCodeAt(he.index),!R){_.textNode+=k.substring(ce,U-1),_.position+=U-1-ce;break}}_.slashed=Pe,_.unicodeI=be;continue;case o.TRUE:R===c.r?_.state=o.TRUE2:V(_,"Invalid true started with t"+R);continue;case o.TRUE2:R===c.u?_.state=o.TRUE3:V(_,"Invalid true started with tr"+R);continue;case o.TRUE3:R===c.e?(B(_,"onvalue",!0),_.state=_.stack.pop()||o.VALUE):V(_,"Invalid true started with tru"+R);continue;case o.FALSE:R===c.a?_.state=o.FALSE2:V(_,"Invalid false started with f"+R);continue;case o.FALSE2:R===c.l?_.state=o.FALSE3:V(_,"Invalid false started with fa"+R);continue;case o.FALSE3:R===c.s?_.state=o.FALSE4:V(_,"Invalid false started with fal"+R);continue;case o.FALSE4:R===c.e?(B(_,"onvalue",!1),_.state=_.stack.pop()||o.VALUE):V(_,"Invalid false started with fals"+R);continue;case o.NULL:R===c.u?_.state=o.NULL2:V(_,"Invalid null started with n"+R);continue;case o.NULL2:R===c.l?_.state=o.NULL3:V(_,"Invalid null started with nu"+R);continue;case o.NULL3:R===c.l?(B(_,"onvalue",null),_.state=_.stack.pop()||o.VALUE):V(_,"Invalid null started with nul"+R);continue;case o.NUMBER_DECIMAL_POINT:R===c.period?(_.numberNode+=".",_.state=o.NUMBER_DIGIT):V(_,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:c._0<=R&&R<=c._9?_.numberNode+=String.fromCharCode(R):R===c.period?(_.numberNode.indexOf(".")!==-1&&V(_,"Invalid number has two dots"),_.numberNode+="."):R===c.e||R===c.E?((_.numberNode.indexOf("e")!==-1||_.numberNode.indexOf("E")!==-1)&&V(_,"Invalid number has two exponential"),_.numberNode+="e"):R===c.plus||R===c.minus?(_e===c.e||_e===c.E||V(_,"Invalid symbol in number"),_.numberNode+=String.fromCharCode(R)):($(_),U--,_.state=_.stack.pop()||o.VALUE);continue;default:V(_,"Unknown state: "+_.state)}return _.position>=_.bufferCheckPosition&&h(_),_}})(t)});function km(e){var t=0,n=Cm(!0),r={pullAsync:function(i){return Rn(this,void 0,void 0,function(){var s,o,l;return en(this,function(u){switch(u.label){case 0:return s=e.slice(t,t+i),t+=i,[4,Oc(s,"text")];case 1:return o=u.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=Ec(s,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Cm(e){var t=xm.parser(),n=0,r,i=[],s,o,l=!1,u=!1;return t.onopenobject=function(c){var h={};h.incomplete=!0,r||(r=h),s&&(i.push([o,s,u]),e&&(u?s.push(h):s[o]=h)),s=h,o=c,u=!1,++n},t.onkey=function(c){return o=c},t.onvalue=function(c){return u?s.push(c):s[o]=c},t.oncloseobject=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var h=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(h):s[o]=h)}},t.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),s&&(i.push([o,s,u]),e&&(u?s.push(c):s[o]=c)),s=c,u=!0,o=null,++n},t.onclosearray=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var h=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(h):s[o]=h)}},{write:function(c){return t.write(c),r},done:function(){return l}}}var Ic=1024;function Dm(e,t){return Rn(this,void 0,void 0,function(){var n,r,i,s;return en(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Ic*1024,[4,Fc(e,n)];case 1:return r=o.sent(),i=r.result.data,s=new ct(i.databaseName),s.version(i.databaseVersion).stores(pm(i)),[4,Nc(s,r,t)];case 2:return o.sent(),[2,s]}})})}function Nc(e,t,n){return Rn(this,void 0,void 0,function(){function r(){return Rn(this,void 0,void 0,function(){var P,T,B,M,E;return en(this,function($){switch($.label){case 0:P=function(I){var V,J,H,ne,k,_,U,R,_e,ce,Pe,be;return en(this,function(he){switch(he.label){case 0:if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(c&&ct.ignoreTransaction(function(){return c(h)}),V=I.tableName,J=e.table(V),H=u.tables.filter(function(le){return le.name===V})[0].schema,!J){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=J.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(ne=I.rows,k=[],_=0;_<ne.length&&(U=ne[_],!U.incomplete);_++)k.push(Jt.revive(U));return R=n.filter,_e=R?I.inbound?k.filter(function(le){return R(V,le)}):k.filter(function(le){var Ye=le[0],Je=le[1];return R(V,Je,Ye)}):k,ce=I.inbound?[void 0,_e]:[_e.map(function(le){return le[0]}),k.map(function(le){return le[1]})],Pe=ce[0],be=ce[1],n.overwriteValues?[4,J.bulkPut(be,Pe)]:[3,2];case 1:return he.sent(),[3,4];case 2:return[4,J.bulkAdd(be,Pe)];case 3:he.sent(),he.label=4;case 4:return h.completedRows+=k.length,k.incomplete||(h.completedTables+=1),ne.splice(0,k.length),[2]}})},T=0,B=u.data,$.label=1;case 1:return T<B.length?(M=B[T],[5,P(M)]):[3,4];case 2:if(E=$.sent(),E==="break")return[3,4];$.label=3;case 3:return T++,[3,1];case 4:for(;u.data.length>0&&u.data[0].rows&&!u.data[0].rows.incomplete;)u.data.splice(0,1);return!s.done()&&!s.eof()?l?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,ct.waitFor(s.pullAsync(i))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,l,u,c,h,m,x,S;return en(this,function(P){switch(P.label){case 0:return n=n||{},i=n.chunkSizeBytes||Ic*1024,[4,Fc(t,i)];case 1:if(s=P.sent(),o=s.result,l="FileReaderSync"in self,u=o.data,!n.acceptNameDiff&&e.name!==u.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(u.databaseName));if(!n.acceptVersionDiff&&e.verno!==u.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(u.databaseVersion));if(c=n.progressCallback,h={done:!1,completedRows:0,completedTables:0,totalRows:u.tables.reduce(function(T,B){return T+B.rowCount},0),totalTables:u.tables.length},c&&ct.ignoreTransaction(function(){return c(h)}),!n.clearTablesBeforeImport)return[3,5];m=0,x=e.tables,P.label=2;case 2:return m<x.length?(S=x[m],[4,S.clear()]):[3,5];case 3:P.sent(),P.label=4;case 4:return m++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return P.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:P.sent(),P.label=9;case 9:return h.done=!0,c&&ct.ignoreTransaction(function(){return c(h)}),[2]}})})}function Fc(e,t){return Rn(this,void 0,void 0,function(){var n,r;return en(this,function(i){switch(i.label){case 0:n="slice"in e?km(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>_m)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}ct.prototype.export=function(e){return $c(this,e)};ct.prototype.import=function(e,t){return Nc(this,e,t)};ct.import=function(e,t){return Dm(e,t)};const Sm={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},Tm=j("div",{class:"text-2xl font-bold mb-6"},"База данных",-1),Om={class:"flex flex-wrap items-center gap-5"},Em=j("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),Am=j("span",{class:"pointer-events-none"},"Импорт",-1),Pm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},$m=j("div",{class:"text-2xl font-bold mb-6 text-red-400"},"Осторожно!",-1),Im={class:"flex flex-wrap items-center gap-5"},Nm=sn({__name:"Settings",setup(e){const t=Nn({dbLoading:!1});Jl(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("Удаляем базу данных ?"))try{await lt.close(),window.indexedDB.deleteDatabase("avito_scraper"),Ue.show("error",He.DBDropSuccess),window.location.reload()}catch{Ue.show("error",He.DBDropError)}}async function r(){window.confirm("Чистим хранилище ?")&&(await chrome.storage.local.remove(["profileList","parsingResults","filterFields","reviewsFilter"]),window.location.reload())}async function i(){t.dbLoading=!0;try{const l=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,u=await $c(lt),c=new Blob([u],{type:"text/json"}),h=document.createElement("a");h.href=URL.createObjectURL(c),h.download=l,h.click(),h.remove(),Ue.show("success",He.DBExportSuccess)}catch{Ue.show("error",He.DBExportError)}finally{t.dbLoading=!1}}return(s,o)=>(re(),de(tt,null,[j("div",Sm,[t.dbLoading?(re(),_t(Tc,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):Me("",!0),Tm,j("div",Om,[ot(It,{theme:"success",icon:"cloud_upload"},{default:At(()=>[Em,Am]),_:1}),ot(It,{theme:"info",icon:"cloud_download",onClick:i},{default:At(()=>[jt("Экспорт")]),_:1})])]),j("div",Pm,[$m,j("div",Im,[ot(It,{theme:"danger",icon:"delete_sweep",onClick:ut(r,["stop"])},{default:At(()=>[jt("Очистить localStorage")]),_:1},8,["onClick"]),ot(It,{theme:"danger",icon:"delete_forever",onClick:ut(n,["stop"])},{default:At(()=>[jt("Очистить IndexedDB")]),_:1},8,["onClick"])])])],64))}}),Fm={class:"centered"},Lm=sn({__name:"App",setup(e){const t=Yt(!1);return rr(async()=>{ch(),chrome.runtime.onMessage.addListener(async({message:n,action:r,status:i,currentUrl:s,data:o})=>{if(i&&n&&Ue.show(i,n),r==="reviews-parsing-started"){const l=Le.profileLinkGetByUrl(s);l&&(l.status="wait")}if(r==="reviews-parsing-ended"){if(i==="success"){Oe.pushResultsByUrl(s,o),gt.pushParsingResult(s);const l=Le.profileLinkGetByUrl(s);l&&(l.status="success")}if(i==="error"){const l=Le.profileLinkGetByUrl(s);l&&(l.status="error")}if(Le.profileLinkNew){const l=Ue.show("success",He.WaitOpenPage,{duration:172800});await fh(dh(2,10)*1e3),Ue.drop(l),Le.parsingStart()}else Ue.show("success",He.ParsingReviewsFinished,{duration:172800}),Xt.changeTab(yn.ParsingResult),qa()}if(r==="profile-info"){Oe.list.value.push(o);let l=`
                ${o.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${o.deliveryInfo}
            `;Le.profileLinkSetInfo(s,l)}r==="get-categories"&&i==="success"&&(qa(),qt.state.categories=o,qt.state.categoriesLoading=!1,qt.apiCreateCategories())}),document.fonts.onloadingdone=()=>{t.value=!0},Oe.list.value=await Oe.apiGetInfoList(),qt.state.categories=await qt.apiGetCategories()}),(n,r)=>(re(),de("div",{class:ht(["app-wrapper transition-opacity duration-200 delay-100",t.value?"opacity-100":"opacity-0"])},[ot(gh),j("main",Fm,[ae(Xt).active.value===ae(yn).ProfilesFilter?(re(),_t(dm,{key:0})):Me("",!0),ae(Xt).active.value===ae(yn).ParsingResult?(re(),_t(oy,{key:1})):Me("",!0),ae(Xt).active.value===ae(yn).ProfileSavedList?(re(),_t(nm,{key:2})):Me("",!0),ae(Xt).active.value===ae(yn).Settings?(re(),_t(Nm,{key:3})):Me("",!0),(re(),_t(Wu,null,[ae(Xt).active.value===ae(yn).ReviewsFilter?(re(),_t(Qh,{key:0})):Me("",!0)],1024))])],2))}}),Mm=hd();cd(Lm).use(Mm).mount("#options");

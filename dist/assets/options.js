var Ac=Object.defineProperty;var Pc=(e,t,n)=>t in e?Ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var as=(e,t,n)=>(Pc(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ho(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Xe={},ar=[],Wt=()=>{},$c=()=>!1,Nc=/^on[^a-z]/,Yi=e=>Nc.test(e),po=e=>e.startsWith("onUpdate:"),ct=Object.assign,yo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ic=Object.prototype.hasOwnProperty,Le=(e,t)=>Ic.call(e,t),Te=Array.isArray,lr=e=>Zr(e)==="[object Map]",Ua=e=>Zr(e)==="[object Set]",Fc=e=>Zr(e)==="[object RegExp]",Ae=e=>typeof e=="function",at=e=>typeof e=="string",mo=e=>typeof e=="symbol",nt=e=>e!==null&&typeof e=="object",Va=e=>nt(e)&&Ae(e.then)&&Ae(e.catch),Ha=Object.prototype.toString,Zr=e=>Ha.call(e),Mc=e=>Zr(e).slice(8,-1),qa=e=>Zr(e)==="[object Object]",go=e=>at(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_i=ho(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Lc=/-(\w)/g,mr=Ji(e=>e.replace(Lc,(t,n)=>n?n.toUpperCase():"")),Bc=/\B([A-Z])/g,Wn=Ji(e=>e.replace(Bc,"-$1").toLowerCase()),Ya=Ji(e=>e.charAt(0).toUpperCase()+e.slice(1)),ls=Ji(e=>e?`on${Ya(e)}`:""),Rr=(e,t)=>!Object.is(e,t),cr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},$i=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Jo;const Ss=()=>Jo||(Jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vo(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=at(r)?Uc(r):vo(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(at(e))return e;if(nt(e))return e}}const jc=/;(?![^(]*\))/g,Rc=/:([^]+)/,Kc=/\/\*[^]*?\*\//g;function Uc(e){const t={};return e.replace(Kc,"").split(jc).forEach(n=>{if(n){const r=n.split(Rc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function pt(e){let t="";if(at(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=pt(e[n]);r&&(t+=r+" ")}else if(nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Vc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hc=ho(Vc);function Ja(e){return!!e||e===""}const je=e=>at(e)?e:e==null?"":Te(e)||nt(e)&&(e.toString===Ha||!Ae(e.toString))?JSON.stringify(e,za,2):String(e),za=(e,t)=>t&&t.__v_isRef?za(e,t.value):lr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Ua(t)?{[`Set(${t.size})`]:[...t.values()]}:nt(t)&&!Te(t)&&!qa(t)?String(t):t;let qt;class qc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=qt,!t&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=qt;try{return qt=this,t()}finally{qt=n}}}on(){qt=this}off(){qt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Yc(e,t=qt){t&&t.active&&t.effects.push(e)}function Jc(){return qt}const bo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Wa=e=>(e.w&Tn)>0,Ga=e=>(e.n&Tn)>0,zc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Tn},Wc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];Wa(i)&&!Ga(i)?i.delete(e):t[n++]=i,i.w&=~Tn,i.n&=~Tn}t.length=n}},Ts=new WeakMap;let Sr=0,Tn=1;const Es=30;let Yt;const Kn=Symbol(""),Os=Symbol("");class _o{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Yc(this,r)}run(){if(!this.active)return this.fn();let t=Yt,n=Dn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Yt,Yt=this,Dn=!0,Tn=1<<++Sr,Sr<=Es?zc(this):zo(this),this.fn()}finally{Sr<=Es&&Wc(this),Tn=1<<--Sr,Yt=this.parent,Dn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Yt===this?this.deferStop=!0:this.active&&(zo(this),this.onStop&&this.onStop(),this.active=!1)}}function zo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Dn=!0;const Xa=[];function _r(){Xa.push(Dn),Dn=!1}function wr(){const e=Xa.pop();Dn=e===void 0?!0:e}function Et(e,t,n){if(Dn&&Yt){let r=Ts.get(e);r||Ts.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=bo()),Qa(i)}}function Qa(e,t){let n=!1;Sr<=Es?Ga(e)||(e.n|=Tn,n=!Wa(e)):n=!e.has(Yt),n&&(e.add(Yt),Yt.deps.push(e))}function yn(e,t,n,r,i,s){const o=Ts.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&Te(e)){const u=Number(r);o.forEach((c,d)=>{(d==="length"||d>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":Te(e)?go(n)&&l.push(o.get("length")):(l.push(o.get(Kn)),lr(e)&&l.push(o.get(Os)));break;case"delete":Te(e)||(l.push(o.get(Kn)),lr(e)&&l.push(o.get(Os)));break;case"set":lr(e)&&l.push(o.get(Kn));break}if(l.length===1)l[0]&&As(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);As(bo(u))}}function As(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&Wo(r);for(const r of n)r.computed||Wo(r)}function Wo(e,t){(e!==Yt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Gc=ho("__proto__,__v_isRef,__isVue"),Za=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(mo)),Xc=wo(),Qc=wo(!1,!0),Zc=wo(!0),Go=eu();function eu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ke(this);for(let s=0,o=this.length;s<o;s++)Et(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ke)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){_r();const r=Ke(this)[t].apply(this,n);return wr(),r}}),e}function tu(e){const t=Ke(this);return Et(t,"has",e),t.hasOwnProperty(e)}function wo(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?gu:il:t?rl:nl).get(r))return r;const o=Te(r);if(!e){if(o&&Le(Go,i))return Reflect.get(Go,i,s);if(i==="hasOwnProperty")return tu}const l=Reflect.get(r,i,s);return(mo(i)?Za.has(i):Gc(i))||(e||Et(r,"get",i),t)?l:gt(l)?o&&go(i)?l:l.value:nt(l)?e?sl(l):xr(l):l}}const nu=el(),ru=el(!0);function el(e=!1){return function(n,r,i,s){let o=n[r];if(gr(o)&&gt(o)&&!gt(i))return!1;if(!e&&(!Ni(i)&&!gr(i)&&(o=Ke(o),i=Ke(i)),!Te(n)&&gt(o)&&!gt(i)))return o.value=i,!0;const l=Te(n)&&go(r)?Number(r)<n.length:Le(n,r),u=Reflect.set(n,r,i,s);return n===Ke(s)&&(l?Rr(i,o)&&yn(n,"set",r,i):yn(n,"add",r,i)),u}}function iu(e,t){const n=Le(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&yn(e,"delete",t,void 0),r}function su(e,t){const n=Reflect.has(e,t);return(!mo(t)||!Za.has(t))&&Et(e,"has",t),n}function ou(e){return Et(e,"iterate",Te(e)?"length":Kn),Reflect.ownKeys(e)}const tl={get:Xc,set:nu,deleteProperty:iu,has:su,ownKeys:ou},au={get:Zc,set(e,t){return!0},deleteProperty(e,t){return!0}},lu=ct({},tl,{get:Qc,set:ru}),xo=e=>e,zi=e=>Reflect.getPrototypeOf(e);function oi(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ke(e),s=Ke(t);n||(t!==s&&Et(i,"get",t),Et(i,"get",s));const{has:o}=zi(i),l=r?xo:n?Do:Kr;if(o.call(i,t))return l(e.get(t));if(o.call(i,s))return l(e.get(s));e!==i&&e.get(t)}function ai(e,t=!1){const n=this.__v_raw,r=Ke(n),i=Ke(e);return t||(e!==i&&Et(r,"has",e),Et(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function li(e,t=!1){return e=e.__v_raw,!t&&Et(Ke(e),"iterate",Kn),Reflect.get(e,"size",e)}function Xo(e){e=Ke(e);const t=Ke(this);return zi(t).has.call(t,e)||(t.add(e),yn(t,"add",e,e)),this}function Qo(e,t){t=Ke(t);const n=Ke(this),{has:r,get:i}=zi(n);let s=r.call(n,e);s||(e=Ke(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?Rr(t,o)&&yn(n,"set",e,t):yn(n,"add",e,t),this}function Zo(e){const t=Ke(this),{has:n,get:r}=zi(t);let i=n.call(t,e);i||(e=Ke(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&yn(t,"delete",e,void 0),s}function ea(){const e=Ke(this),t=e.size!==0,n=e.clear();return t&&yn(e,"clear",void 0,void 0),n}function ci(e,t){return function(r,i){const s=this,o=s.__v_raw,l=Ke(o),u=t?xo:e?Do:Kr;return!e&&Et(l,"iterate",Kn),o.forEach((c,d)=>r.call(i,u(c),u(d),s))}}function ui(e,t,n){return function(...r){const i=this.__v_raw,s=Ke(i),o=lr(s),l=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=i[e](...r),d=n?xo:t?Do:Kr;return!t&&Et(s,"iterate",u?Os:Kn),{next(){const{value:w,done:x}=c.next();return x?{value:w,done:x}:{value:l?[d(w[0]),d(w[1])]:d(w),done:x}},[Symbol.iterator](){return this}}}}function bn(e){return function(...t){return e==="delete"?!1:this}}function cu(){const e={get(s){return oi(this,s)},get size(){return li(this)},has:ai,add:Xo,set:Qo,delete:Zo,clear:ea,forEach:ci(!1,!1)},t={get(s){return oi(this,s,!1,!0)},get size(){return li(this)},has:ai,add:Xo,set:Qo,delete:Zo,clear:ea,forEach:ci(!1,!0)},n={get(s){return oi(this,s,!0)},get size(){return li(this,!0)},has(s){return ai.call(this,s,!0)},add:bn("add"),set:bn("set"),delete:bn("delete"),clear:bn("clear"),forEach:ci(!0,!1)},r={get(s){return oi(this,s,!0,!0)},get size(){return li(this,!0)},has(s){return ai.call(this,s,!0)},add:bn("add"),set:bn("set"),delete:bn("delete"),clear:bn("clear"),forEach:ci(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=ui(s,!1,!1),n[s]=ui(s,!0,!1),t[s]=ui(s,!1,!0),r[s]=ui(s,!0,!0)}),[e,n,t,r]}const[uu,fu,hu,du]=cu();function Co(e,t){const n=t?e?du:hu:e?fu:uu;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,s)}const pu={get:Co(!1,!1)},yu={get:Co(!1,!0)},mu={get:Co(!0,!1)},nl=new WeakMap,rl=new WeakMap,il=new WeakMap,gu=new WeakMap;function vu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bu(e){return e.__v_skip||!Object.isExtensible(e)?0:vu(Mc(e))}function xr(e){return gr(e)?e:ko(e,!1,tl,pu,nl)}function _u(e){return ko(e,!1,lu,yu,rl)}function sl(e){return ko(e,!0,au,mu,il)}function ko(e,t,n,r,i){if(!nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=bu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return i.set(e,l),l}function ur(e){return gr(e)?ur(e.__v_raw):!!(e&&e.__v_isReactive)}function gr(e){return!!(e&&e.__v_isReadonly)}function Ni(e){return!!(e&&e.__v_isShallow)}function ol(e){return ur(e)||gr(e)}function Ke(e){const t=e&&e.__v_raw;return t?Ke(t):e}function al(e){return $i(e,"__v_skip",!0),e}const Kr=e=>nt(e)?xr(e):e,Do=e=>nt(e)?sl(e):e;function ll(e){Dn&&Yt&&(e=Ke(e),Qa(e.dep||(e.dep=bo())))}function cl(e,t){e=Ke(e);const n=e.dep;n&&As(n)}function gt(e){return!!(e&&e.__v_isRef===!0)}function rn(e){return wu(e,!1)}function wu(e,t){return gt(e)?e:new xu(e,t)}class xu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ke(t),this._value=n?t:Kr(t)}get value(){return ll(this),this._value}set value(t){const n=this.__v_isShallow||Ni(t)||gr(t);t=n?t:Ke(t),Rr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Kr(t),cl(this))}}function ke(e){return gt(e)?e.value:e}const Cu={get:(e,t,n)=>ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return gt(i)&&!gt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ul(e){return ur(e)?e:new Proxy(e,Cu)}class ku{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new _o(t,()=>{this._dirty||(this._dirty=!0,cl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ke(this);return ll(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Du(e,t,n=!1){let r,i;const s=Ae(e);return s?(r=e,i=Wt):(r=e.get,i=e.set),new ku(r,i,s||!i,n)}function Sn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Wi(s,t,n)}return i}function Gt(e,t,n,r){if(Ae(e)){const s=Sn(e,t,n,r);return s&&Va(s)&&s.catch(o=>{Wi(o,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Gt(e[s],t,n,r));return i}function Wi(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,l=n;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,o,l)===!1)return}s=s.parent}const u=t.appContext.config.errorHandler;if(u){Sn(u,null,10,[e,o,l]);return}}Su(e,n,i,r)}function Su(e,t,n,r=!0){console.error(e)}let Ur=!1,Ps=!1;const yt=[];let nn=0;const fr=[];let cn=null,Ln=0;const fl=Promise.resolve();let So=null;function Tu(e){const t=So||fl;return e?t.then(this?e.bind(this):e):t}function Eu(e){let t=nn+1,n=yt.length;for(;t<n;){const r=t+n>>>1;Vr(yt[r])<e?t=r+1:n=r}return t}function To(e){(!yt.length||!yt.includes(e,Ur&&e.allowRecurse?nn+1:nn))&&(e.id==null?yt.push(e):yt.splice(Eu(e.id),0,e),hl())}function hl(){!Ur&&!Ps&&(Ps=!0,So=fl.then(pl))}function Ou(e){const t=yt.indexOf(e);t>nn&&yt.splice(t,1)}function Au(e){Te(e)?fr.push(...e):(!cn||!cn.includes(e,e.allowRecurse?Ln+1:Ln))&&fr.push(e),hl()}function ta(e,t=Ur?nn+1:0){for(;t<yt.length;t++){const n=yt[t];n&&n.pre&&(yt.splice(t,1),t--,n())}}function dl(e){if(fr.length){const t=[...new Set(fr)];if(fr.length=0,cn){cn.push(...t);return}for(cn=t,cn.sort((n,r)=>Vr(n)-Vr(r)),Ln=0;Ln<cn.length;Ln++)cn[Ln]();cn=null,Ln=0}}const Vr=e=>e.id==null?1/0:e.id,Pu=(e,t)=>{const n=Vr(e)-Vr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function pl(e){Ps=!1,Ur=!0,yt.sort(Pu);const t=Wt;try{for(nn=0;nn<yt.length;nn++){const n=yt[nn];n&&n.active!==!1&&Sn(n,null,14)}}finally{nn=0,yt.length=0,dl(),Ur=!1,So=null,(yt.length||fr.length)&&pl()}}function $u(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xe;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:w,trim:x}=r[d]||Xe;x&&(i=n.map(k=>at(k)?k.trim():k)),w&&(i=n.map(Ds))}let l,u=r[l=ls(t)]||r[l=ls(mr(t))];!u&&s&&(u=r[l=ls(Wn(t))]),u&&Gt(u,e,6,i);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Gt(c,e,6,i)}}function yl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},l=!1;if(!Ae(e)){const u=c=>{const d=yl(c,t,!0);d&&(l=!0,ct(o,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!l?(nt(e)&&r.set(e,null),null):(Te(s)?s.forEach(u=>o[u]=null):ct(o,s),nt(e)&&r.set(e,o),o)}function Gi(e,t){return!e||!Yi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Le(e,t[0].toLowerCase()+t.slice(1))||Le(e,Wn(t))||Le(e,t))}let vt=null,ml=null;function Ii(e){const t=vt;return vt=e,ml=e&&e.type.__scopeId||null,t}function Tt(e,t=vt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&fa(-1);const s=Ii(t);let o;try{o=e(...i)}finally{Ii(s),r._d&&fa(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function cs(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:l,attrs:u,emit:c,render:d,renderCache:w,data:x,setupState:k,ctx:O,inheritAttrs:C}=e;let B,F;const A=Ii(e);try{if(n.shapeFlag&4){const N=i||r;B=tn(d.call(N,N,w,s,k,x,O)),F=u}else{const N=t;B=tn(N.length>1?N(s,{attrs:u,slots:l,emit:c}):N(s,null)),F=t.props?u:Nu(u)}}catch(N){Nr.length=0,Wi(N,e,1),B=tt(En)}let $=B;if(F&&C!==!1){const N=Object.keys(F),{shapeFlag:U}=$;N.length&&U&7&&(o&&N.some(po)&&(F=Iu(F,o)),$=Yn($,F))}return n.dirs&&($=Yn($),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),B=$,Ii(A),B}const Nu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Yi(n))&&((t||(t={}))[n]=e[n]);return t},Iu=(e,t)=>{const n={};for(const r in e)(!po(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Fu(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:l,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?na(r,o,c):!!o;if(u&8){const d=t.dynamicProps;for(let w=0;w<d.length;w++){const x=d[w];if(o[x]!==r[x]&&!Gi(c,x))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?na(r,o,c):!0:!!o;return!1}function na(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Gi(n,s))return!0}return!1}function Mu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const gl=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Au(e)}const fi={};function wi(e,t,n){return vl(e,t,n)}function vl(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Xe){var l;const u=Jc()===((l=ht)==null?void 0:l.scope)?ht:null;let c,d=!1,w=!1;if(gt(e)?(c=()=>e.value,d=Ni(e)):ur(e)?(c=()=>e,r=!0):Te(e)?(w=!0,d=e.some(N=>ur(N)||Ni(N)),c=()=>e.map(N=>{if(gt(N))return N.value;if(ur(N))return jn(N);if(Ae(N))return Sn(N,u,2)})):Ae(e)?t?c=()=>Sn(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return x&&x(),Gt(e,u,3,[k])}:c=Wt,t&&r){const N=c;c=()=>jn(N())}let x,k=N=>{x=A.onStop=()=>{Sn(N,u,4)}},O;if(qr)if(k=Wt,t?n&&Gt(t,u,3,[c(),w?[]:void 0,k]):c(),i==="sync"){const N=Af();O=N.__watcherHandles||(N.__watcherHandles=[])}else return Wt;let C=w?new Array(e.length).fill(fi):fi;const B=()=>{if(A.active)if(t){const N=A.run();(r||d||(w?N.some((U,H)=>Rr(U,C[H])):Rr(N,C)))&&(x&&x(),Gt(t,u,3,[N,C===fi?void 0:w&&C[0]===fi?[]:C,k]),C=N)}else A.run()};B.allowRecurse=!!t;let F;i==="sync"?F=B:i==="post"?F=()=>ft(B,u&&u.suspense):(B.pre=!0,u&&(B.id=u.uid),F=()=>To(B));const A=new _o(c,F);t?n?B():C=A.run():i==="post"?ft(A.run.bind(A),u&&u.suspense):A.run();const $=()=>{A.stop(),u&&u.scope&&yo(u.scope.effects,A)};return O&&O.push($),$}function Bu(e,t,n){const r=this.proxy,i=at(e)?e.includes(".")?bl(r,e):()=>r[e]:e.bind(r,r);let s;Ae(t)?s=t:(s=t.handler,n=t);const o=ht;vr(this);const l=vl(i,s.bind(r),n);return o?vr(o):Vn(),l}function bl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function jn(e,t){if(!nt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),gt(e))jn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)jn(e[n],t);else if(Ua(e)||lr(e))e.forEach(n=>{jn(n,t)});else if(qa(e))for(const n in e)jn(e[n],t);return e}function Qt(e,t){const n=vt;if(n===null)return e;const r=ts(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,l,u,c=Xe]=t[s];o&&(Ae(o)&&(o={mounted:o,updated:o}),o.deep&&jn(l),i.push({dir:o,instance:r,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function In(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let u=l.dir[r];u&&(_r(),Gt(u,n,8,[e.el,l,e,t]),wr())}}function _l(e,t){e.shapeFlag&6&&e.component?_l(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sn(e,t){return Ae(e)?(()=>ct({name:e.name},t,{setup:e}))():e}const hr=e=>!!e.type.__asyncLoader,wl=e=>e.type.__isKeepAlive,ju={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=$o(),r=n.ctx;if(!r.renderer)return()=>{const A=t.default&&t.default();return A&&A.length===1?A[0]:A};const i=new Map,s=new Set;let o=null;const l=n.suspense,{renderer:{p:u,m:c,um:d,o:{createElement:w}}}=r,x=w("div");r.activate=(A,$,N,U,H)=>{const q=A.component;c(A,$,N,0,l),u(q.vnode,A,$,N,q,l,U,A.slotScopeIds,H),ft(()=>{q.isDeactivated=!1,q.a&&cr(q.a);const re=A.props&&A.props.onVnodeMounted;re&&Rt(re,q.parent,A)},l)},r.deactivate=A=>{const $=A.component;c(A,x,null,1,l),ft(()=>{$.da&&cr($.da);const N=A.props&&A.props.onVnodeUnmounted;N&&Rt(N,$.parent,A),$.isDeactivated=!0},l)};function k(A){us(A),d(A,n,l,!0)}function O(A){i.forEach(($,N)=>{const U=ya($.type);U&&(!A||!A(U))&&C(N)})}function C(A){const $=i.get(A);!o||!nr($,o)?k($):o&&us(o),i.delete(A),s.delete(A)}wi(()=>[e.include,e.exclude],([A,$])=>{A&&O(N=>Tr(A,N)),$&&O(N=>!Tr($,N))},{flush:"post",deep:!0});let B=null;const F=()=>{B!=null&&i.set(B,fs(n.subTree))};return Gn(F),Cl(F),Qi(()=>{i.forEach(A=>{const{subTree:$,suspense:N}=n,U=fs($);if(A.type===U.type&&A.key===U.key){us(U);const H=U.component.da;H&&ft(H,N);return}k(A)})}),()=>{if(B=null,!t.default)return null;const A=t.default(),$=A[0];if(A.length>1)return o=null,A;if(!Ao($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let N=fs($);const U=N.type,H=ya(hr(N)?N.type.__asyncResolved||{}:U),{include:q,exclude:re,max:S}=e;if(q&&(!H||!Tr(q,H))||re&&H&&Tr(re,H))return o=N,$;const b=N.key==null?U:N.key,V=i.get(b);return N.el&&(N=Yn(N),$.shapeFlag&128&&($.ssContent=N)),B=b,V?(N.el=V.el,N.component=V.component,N.transition&&_l(N,N.transition),N.shapeFlag|=512,s.delete(b),s.add(b)):(s.add(b),S&&s.size>parseInt(S,10)&&C(s.values().next().value)),N.shapeFlag|=256,o=N,gl($.type)?$:N}}},Ru=ju;function Tr(e,t){return Te(e)?e.some(n=>Tr(n,t)):at(e)?e.split(",").includes(t):Fc(e)?e.test(t):!1}function Ku(e,t){xl(e,"a",t)}function Uu(e,t){xl(e,"da",t)}function xl(e,t,n=ht){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Xi(t,r,n),n){let i=n.parent;for(;i&&i.parent;)wl(i.parent.vnode)&&Vu(r,t,n,i),i=i.parent}}function Vu(e,t,n,r){const i=Xi(t,e,r,!0);kl(()=>{yo(r[t],i)},n)}function us(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function fs(e){return e.shapeFlag&128?e.ssContent:e}function Xi(e,t,n=ht,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;_r(),vr(n);const l=Gt(t,n,e,o);return Vn(),wr(),l});return r?i.unshift(s):i.push(s),s}}const gn=e=>(t,n=ht)=>(!qr||e==="sp")&&Xi(e,(...r)=>t(...r),n),Hu=gn("bm"),Gn=gn("m"),qu=gn("bu"),Cl=gn("u"),Qi=gn("bum"),kl=gn("um"),Yu=gn("sp"),Ju=gn("rtg"),zu=gn("rtc");function Wu(e,t=ht){Xi("ec",e,t)}const Gu=Symbol.for("v-ndc");function Un(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||at(e)){i=new Array(e.length);for(let o=0,l=e.length;o<l;o++)i[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(nt(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];i[l]=t(e[c],c,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function Dl(e,t,n={},r,i){if(vt.isCE||vt.parent&&hr(vt.parent)&&vt.parent.isCE)return t!=="default"&&(n.name=t),tt("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),he();const o=s&&Sl(s(n)),l=Nt(rt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Sl(e){return e.some(t=>Ao(t)?!(t.type===En||t.type===rt&&!Sl(t.children)):!0)?e:null}const $s=e=>e?Ll(e)?ts(e)||e.proxy:$s(e.parent):null,$r=ct(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$s(e.parent),$root:e=>$s(e.root),$emit:e=>e.emit,$options:e=>Eo(e),$forceUpdate:e=>e.f||(e.f=()=>To(e.update)),$nextTick:e=>e.n||(e.n=Tu.bind(e.proxy)),$watch:e=>Bu.bind(e)}),hs=(e,t)=>e!==Xe&&!e.__isScriptSetup&&Le(e,t),Xu={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const k=o[t];if(k!==void 0)switch(k){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(hs(r,t))return o[t]=1,r[t];if(i!==Xe&&Le(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Le(c,t))return o[t]=3,s[t];if(n!==Xe&&Le(n,t))return o[t]=4,n[t];Ns&&(o[t]=0)}}const d=$r[t];let w,x;if(d)return t==="$attrs"&&Et(e,"get",t),d(e);if((w=l.__cssModules)&&(w=w[t]))return w;if(n!==Xe&&Le(n,t))return o[t]=4,n[t];if(x=u.config.globalProperties,Le(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return hs(i,t)?(i[t]=n,!0):r!==Xe&&Le(r,t)?(r[t]=n,!0):Le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||e!==Xe&&Le(e,o)||hs(t,o)||(l=s[0])&&Le(l,o)||Le(r,o)||Le($r,o)||Le(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Le(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Qu(){return Zu().slots}function Zu(){const e=$o();return e.setupContext||(e.setupContext=jl(e))}function ra(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ns=!0;function ef(e){const t=Eo(e),n=e.proxy,r=e.ctx;Ns=!1,t.beforeCreate&&ia(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:l,provide:u,inject:c,created:d,beforeMount:w,mounted:x,beforeUpdate:k,updated:O,activated:C,deactivated:B,beforeDestroy:F,beforeUnmount:A,destroyed:$,unmounted:N,render:U,renderTracked:H,renderTriggered:q,errorCaptured:re,serverPrefetch:S,expose:b,inheritAttrs:V,components:j,directives:ve,filters:ae}=t;if(c&&tf(c,r,null),o)for(const ue in o){const oe=o[ue];Ae(oe)&&(r[ue]=oe.bind(n))}if(i){const ue=i.call(n,n);nt(ue)&&(e.data=xr(ue))}if(Ns=!0,s)for(const ue in s){const oe=s[ue],Ve=Ae(oe)?oe.bind(n,n):Ae(oe.get)?oe.get.bind(n,n):Wt,Ue=!Ae(oe)&&Ae(oe.set)?oe.set.bind(n):Wt,Ze=Rl({get:Ve,set:Ue});Object.defineProperty(r,ue,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:Re=>Ze.value=Re})}if(l)for(const ue in l)Tl(l[ue],r,n,ue);if(u){const ue=Ae(u)?u.call(n):u;Reflect.ownKeys(ue).forEach(oe=>{lf(oe,ue[oe])})}d&&ia(d,e,"c");function ge(ue,oe){Te(oe)?oe.forEach(Ve=>ue(Ve.bind(n))):oe&&ue(oe.bind(n))}if(ge(Hu,w),ge(Gn,x),ge(qu,k),ge(Cl,O),ge(Ku,C),ge(Uu,B),ge(Wu,re),ge(zu,H),ge(Ju,q),ge(Qi,A),ge(kl,N),ge(Yu,S),Te(b))if(b.length){const ue=e.exposed||(e.exposed={});b.forEach(oe=>{Object.defineProperty(ue,oe,{get:()=>n[oe],set:Ve=>n[oe]=Ve})})}else e.exposed||(e.exposed={});U&&e.render===Wt&&(e.render=U),V!=null&&(e.inheritAttrs=V),j&&(e.components=j),ve&&(e.directives=ve)}function tf(e,t,n=Wt){Te(e)&&(e=Is(e));for(const r in e){const i=e[r];let s;nt(i)?"default"in i?s=xi(i.from||r,i.default,!0):s=xi(i.from||r):s=xi(i),gt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ia(e,t,n){Gt(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Tl(e,t,n,r){const i=r.includes(".")?bl(n,r):()=>n[r];if(at(e)){const s=t[e];Ae(s)&&wi(i,s)}else if(Ae(e))wi(i,e.bind(n));else if(nt(e))if(Te(e))e.forEach(s=>Tl(s,t,n,r));else{const s=Ae(e.handler)?e.handler.bind(n):t[e.handler];Ae(s)&&wi(i,s,e)}}function Eo(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let u;return l?u=l:!i.length&&!n&&!r?u=t:(u={},i.length&&i.forEach(c=>Fi(u,c,o,!0)),Fi(u,t,o)),nt(t)&&s.set(t,u),u}function Fi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Fi(e,s,n,!0),i&&i.forEach(o=>Fi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=nf[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const nf={data:sa,props:oa,emits:oa,methods:Er,computed:Er,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:Er,directives:Er,watch:sf,provide:sa,inject:rf};function sa(e,t){return t?e?function(){return ct(Ae(e)?e.call(this,this):e,Ae(t)?t.call(this,this):t)}:t:e}function rf(e,t){return Er(Is(e),Is(t))}function Is(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ct(e,t){return e?[...new Set([].concat(e,t))]:t}function Er(e,t){return e?ct(Object.create(null),e,t):t}function oa(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:ct(Object.create(null),ra(e),ra(t??{})):t}function sf(e,t){if(!e)return t;if(!t)return e;const n=ct(Object.create(null),e);for(const r in t)n[r]=Ct(e[r],t[r]);return n}function El(){return{app:null,config:{isNativeTag:$c,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let of=0;function af(e,t){return function(r,i=null){Ae(r)||(r=ct({},r)),i!=null&&!nt(i)&&(i=null);const s=El(),o=new Set;let l=!1;const u=s.app={_uid:of++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Pf,get config(){return s.config},set config(c){},use(c,...d){return o.has(c)||(c&&Ae(c.install)?(o.add(c),c.install(u,...d)):Ae(c)&&(o.add(c),c(u,...d))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,d){return d?(s.components[c]=d,u):s.components[c]},directive(c,d){return d?(s.directives[c]=d,u):s.directives[c]},mount(c,d,w){if(!l){const x=tt(r,i);return x.appContext=s,d&&t?t(x,c):e(x,c,w),l=!0,u._container=c,c.__vue_app__=u,ts(x.component)||x.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return s.provides[c]=d,u},runWithContext(c){Mi=u;try{return c()}finally{Mi=null}}};return u}}let Mi=null;function lf(e,t){if(ht){let n=ht.provides;const r=ht.parent&&ht.parent.provides;r===n&&(n=ht.provides=Object.create(r)),n[e]=t}}function xi(e,t,n=!1){const r=ht||vt;if(r||Mi){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Mi._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ae(t)?t.call(r&&r.proxy):t}}function cf(e,t,n,r=!1){const i={},s={};$i(s,es,1),e.propsDefaults=Object.create(null),Ol(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:_u(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function uf(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,l=Ke(i),[u]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let w=0;w<d.length;w++){let x=d[w];if(Gi(e.emitsOptions,x))continue;const k=t[x];if(u)if(Le(s,x))k!==s[x]&&(s[x]=k,c=!0);else{const O=mr(x);i[O]=Fs(u,l,O,k,e,!1)}else k!==s[x]&&(s[x]=k,c=!0)}}}else{Ol(e,t,i,s)&&(c=!0);let d;for(const w in l)(!t||!Le(t,w)&&((d=Wn(w))===w||!Le(t,d)))&&(u?n&&(n[w]!==void 0||n[d]!==void 0)&&(i[w]=Fs(u,l,w,void 0,e,!0)):delete i[w]);if(s!==l)for(const w in s)(!t||!Le(t,w))&&(delete s[w],c=!0)}c&&yn(e,"set","$attrs")}function Ol(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,l;if(t)for(let u in t){if(_i(u))continue;const c=t[u];let d;i&&Le(i,d=mr(u))?!s||!s.includes(d)?n[d]=c:(l||(l={}))[d]=c:Gi(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(s){const u=Ke(n),c=l||Xe;for(let d=0;d<s.length;d++){const w=s[d];n[w]=Fs(i,u,w,c[w],e,!Le(c,w))}}return o}function Fs(e,t,n,r,i,s){const o=e[n];if(o!=null){const l=Le(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(u)){const{propsDefaults:c}=i;n in c?r=c[n]:(vr(i),r=c[n]=u.call(null,t),Vn())}else r=u}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===Wn(n))&&(r=!0))}return r}function Al(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},l=[];let u=!1;if(!Ae(e)){const d=w=>{u=!0;const[x,k]=Al(w,t,!0);ct(o,x),k&&l.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!u)return nt(e)&&r.set(e,ar),ar;if(Te(s))for(let d=0;d<s.length;d++){const w=mr(s[d]);aa(w)&&(o[w]=Xe)}else if(s)for(const d in s){const w=mr(d);if(aa(w)){const x=s[d],k=o[w]=Te(x)||Ae(x)?{type:x}:ct({},x);if(k){const O=ua(Boolean,k.type),C=ua(String,k.type);k[0]=O>-1,k[1]=C<0||O<C,(O>-1||Le(k,"default"))&&l.push(w)}}}const c=[o,l];return nt(e)&&r.set(e,c),c}function aa(e){return e[0]!=="$"}function la(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function ca(e,t){return la(e)===la(t)}function ua(e,t){return Te(t)?t.findIndex(n=>ca(n,e)):Ae(t)&&ca(t,e)?0:-1}const Pl=e=>e[0]==="_"||e==="$stable",Oo=e=>Te(e)?e.map(tn):[tn(e)],ff=(e,t,n)=>{if(t._n)return t;const r=Tt((...i)=>Oo(t(...i)),n);return r._c=!1,r},$l=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Pl(i))continue;const s=e[i];if(Ae(s))t[i]=ff(i,s,r);else if(s!=null){const o=Oo(s);t[i]=()=>o}}},Nl=(e,t)=>{const n=Oo(t);e.slots.default=()=>n},hf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ke(t),$i(t,"_",n)):$l(t,e.slots={})}else e.slots={},t&&Nl(e,t);$i(e.slots,es,1)},df=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=Xe;if(r.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:(ct(i,t),!n&&l===1&&delete i._):(s=!t.$stable,$l(t,i)),o=t}else t&&(Nl(e,t),o={default:1});if(s)for(const l in i)!Pl(l)&&!(l in o)&&delete i[l]};function Ms(e,t,n,r,i=!1){if(Te(e)){e.forEach((x,k)=>Ms(x,t&&(Te(t)?t[k]:t),n,r,i));return}if(hr(r)&&!i)return;const s=r.shapeFlag&4?ts(r.component)||r.component.proxy:r.el,o=i?null:s,{i:l,r:u}=e,c=t&&t.r,d=l.refs===Xe?l.refs={}:l.refs,w=l.setupState;if(c!=null&&c!==u&&(at(c)?(d[c]=null,Le(w,c)&&(w[c]=null)):gt(c)&&(c.value=null)),Ae(u))Sn(u,l,12,[o,d]);else{const x=at(u),k=gt(u);if(x||k){const O=()=>{if(e.f){const C=x?Le(w,u)?w[u]:d[u]:u.value;i?Te(C)&&yo(C,s):Te(C)?C.includes(s)||C.push(s):x?(d[u]=[s],Le(w,u)&&(w[u]=d[u])):(u.value=[s],e.k&&(d[e.k]=u.value))}else x?(d[u]=o,Le(w,u)&&(w[u]=o)):k&&(u.value=o,e.k&&(d[e.k]=o))};o?(O.id=-1,ft(O,n)):O()}}}const ft=Lu;function pf(e){return yf(e)}function yf(e,t){const n=Ss();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:u,setText:c,setElementText:d,parentNode:w,nextSibling:x,setScopeId:k=Wt,insertStaticContent:O}=e,C=(a,f,p,y=null,g=null,_=null,D=!1,P=null,M=!!f.dynamicChildren)=>{if(a===f)return;a&&!nr(a,f)&&(y=K(a),Re(a,g,_,!0),a=null),f.patchFlag===-2&&(M=!1,f.dynamicChildren=null);const{type:L,ref:z,shapeFlag:Y}=f;switch(L){case Zi:B(a,f,p,y);break;case En:F(a,f,p,y);break;case ds:a==null&&A(f,p,y,D);break;case rt:j(a,f,p,y,g,_,D,P,M);break;default:Y&1?U(a,f,p,y,g,_,D,P,M):Y&6?ve(a,f,p,y,g,_,D,P,M):(Y&64||Y&128)&&L.process(a,f,p,y,g,_,D,P,M,J)}z!=null&&g&&Ms(z,a&&a.ref,_,f||a,!f)},B=(a,f,p,y)=>{if(a==null)r(f.el=l(f.children),p,y);else{const g=f.el=a.el;f.children!==a.children&&c(g,f.children)}},F=(a,f,p,y)=>{a==null?r(f.el=u(f.children||""),p,y):f.el=a.el},A=(a,f,p,y)=>{[a.el,a.anchor]=O(a.children,f,p,y,a.el,a.anchor)},$=({el:a,anchor:f},p,y)=>{let g;for(;a&&a!==f;)g=x(a),r(a,p,y),a=g;r(f,p,y)},N=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=x(a),i(a),a=p;i(f)},U=(a,f,p,y,g,_,D,P,M)=>{D=D||f.type==="svg",a==null?H(f,p,y,g,_,D,P,M):S(a,f,g,_,D,P,M)},H=(a,f,p,y,g,_,D,P)=>{let M,L;const{type:z,props:Y,shapeFlag:G,transition:Z,dirs:ie}=a;if(M=a.el=o(a.type,_,Y&&Y.is,Y),G&8?d(M,a.children):G&16&&re(a.children,M,null,y,g,_&&z!=="foreignObject",D,P),ie&&In(a,null,y,"created"),q(M,a,a.scopeId,D,y),Y){for(const me in Y)me!=="value"&&!_i(me)&&s(M,me,null,Y[me],_,a.children,y,g,Fe);"value"in Y&&s(M,"value",null,Y.value),(L=Y.onVnodeBeforeMount)&&Rt(L,y,a)}ie&&In(a,null,y,"beforeMount");const fe=(!g||g&&!g.pendingBranch)&&Z&&!Z.persisted;fe&&Z.beforeEnter(M),r(M,f,p),((L=Y&&Y.onVnodeMounted)||fe||ie)&&ft(()=>{L&&Rt(L,y,a),fe&&Z.enter(M),ie&&In(a,null,y,"mounted")},g)},q=(a,f,p,y,g)=>{if(p&&k(a,p),y)for(let _=0;_<y.length;_++)k(a,y[_]);if(g){let _=g.subTree;if(f===_){const D=g.vnode;q(a,D,D.scopeId,D.slotScopeIds,g.parent)}}},re=(a,f,p,y,g,_,D,P,M=0)=>{for(let L=M;L<a.length;L++){const z=a[L]=P?wn(a[L]):tn(a[L]);C(null,z,f,p,y,g,_,D,P)}},S=(a,f,p,y,g,_,D)=>{const P=f.el=a.el;let{patchFlag:M,dynamicChildren:L,dirs:z}=f;M|=a.patchFlag&16;const Y=a.props||Xe,G=f.props||Xe;let Z;p&&Fn(p,!1),(Z=G.onVnodeBeforeUpdate)&&Rt(Z,p,f,a),z&&In(f,a,p,"beforeUpdate"),p&&Fn(p,!0);const ie=g&&f.type!=="foreignObject";if(L?b(a.dynamicChildren,L,P,p,y,ie,_):D||oe(a,f,P,null,p,y,ie,_,!1),M>0){if(M&16)V(P,f,Y,G,p,y,g);else if(M&2&&Y.class!==G.class&&s(P,"class",null,G.class,g),M&4&&s(P,"style",Y.style,G.style,g),M&8){const fe=f.dynamicProps;for(let me=0;me<fe.length;me++){const te=fe[me],m=Y[te],h=G[te];(h!==m||te==="value")&&s(P,te,m,h,g,a.children,p,y,Fe)}}M&1&&a.children!==f.children&&d(P,f.children)}else!D&&L==null&&V(P,f,Y,G,p,y,g);((Z=G.onVnodeUpdated)||z)&&ft(()=>{Z&&Rt(Z,p,f,a),z&&In(f,a,p,"updated")},y)},b=(a,f,p,y,g,_,D)=>{for(let P=0;P<f.length;P++){const M=a[P],L=f[P],z=M.el&&(M.type===rt||!nr(M,L)||M.shapeFlag&70)?w(M.el):p;C(M,L,z,null,y,g,_,D,!0)}},V=(a,f,p,y,g,_,D)=>{if(p!==y){if(p!==Xe)for(const P in p)!_i(P)&&!(P in y)&&s(a,P,p[P],null,D,f.children,g,_,Fe);for(const P in y){if(_i(P))continue;const M=y[P],L=p[P];M!==L&&P!=="value"&&s(a,P,L,M,D,f.children,g,_,Fe)}"value"in y&&s(a,"value",p.value,y.value)}},j=(a,f,p,y,g,_,D,P,M)=>{const L=f.el=a?a.el:l(""),z=f.anchor=a?a.anchor:l("");let{patchFlag:Y,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(P=P?P.concat(Z):Z),a==null?(r(L,p,y),r(z,p,y),re(f.children,p,z,g,_,D,P,M)):Y>0&&Y&64&&G&&a.dynamicChildren?(b(a.dynamicChildren,G,p,g,_,D,P),(f.key!=null||g&&f===g.subTree)&&Il(a,f,!0)):oe(a,f,p,z,g,_,D,P,M)},ve=(a,f,p,y,g,_,D,P,M)=>{f.slotScopeIds=P,a==null?f.shapeFlag&512?g.ctx.activate(f,p,y,D,M):ae(f,p,y,g,_,D,M):Pe(a,f,M)},ae=(a,f,p,y,g,_,D)=>{const P=a.component=kf(a,y,g);if(wl(a)&&(P.ctx.renderer=J),Df(P),P.asyncDep){if(g&&g.registerDep(P,ge),!a.el){const M=P.subTree=tt(En);F(null,M,f,p)}return}ge(P,a,f,p,g,_,D)},Pe=(a,f,p)=>{const y=f.component=a.component;if(Fu(a,f,p))if(y.asyncDep&&!y.asyncResolved){ue(y,f,p);return}else y.next=f,Ou(y.update),y.update();else f.el=a.el,y.vnode=f},ge=(a,f,p,y,g,_,D)=>{const P=()=>{if(a.isMounted){let{next:z,bu:Y,u:G,parent:Z,vnode:ie}=a,fe=z,me;Fn(a,!1),z?(z.el=ie.el,ue(a,z,D)):z=ie,Y&&cr(Y),(me=z.props&&z.props.onVnodeBeforeUpdate)&&Rt(me,Z,z,ie),Fn(a,!0);const te=cs(a),m=a.subTree;a.subTree=te,C(m,te,w(m.el),K(m),a,g,_),z.el=te.el,fe===null&&Mu(a,te.el),G&&ft(G,g),(me=z.props&&z.props.onVnodeUpdated)&&ft(()=>Rt(me,Z,z,ie),g)}else{let z;const{el:Y,props:G}=f,{bm:Z,m:ie,parent:fe}=a,me=hr(f);if(Fn(a,!1),Z&&cr(Z),!me&&(z=G&&G.onVnodeBeforeMount)&&Rt(z,fe,f),Fn(a,!0),Y&&T){const te=()=>{a.subTree=cs(a),T(Y,a.subTree,a,g,null)};me?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=cs(a);C(null,te,p,y,a,g,_),f.el=te.el}if(ie&&ft(ie,g),!me&&(z=G&&G.onVnodeMounted)){const te=f;ft(()=>Rt(z,fe,te),g)}(f.shapeFlag&256||fe&&hr(fe.vnode)&&fe.vnode.shapeFlag&256)&&a.a&&ft(a.a,g),a.isMounted=!0,f=p=y=null}},M=a.effect=new _o(P,()=>To(L),a.scope),L=a.update=()=>M.run();L.id=a.uid,Fn(a,!0),L()},ue=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,uf(a,f.props,y,p),df(a,f.children,p),_r(),ta(),wr()},oe=(a,f,p,y,g,_,D,P,M=!1)=>{const L=a&&a.children,z=a?a.shapeFlag:0,Y=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Ue(L,Y,p,y,g,_,D,P,M);return}else if(G&256){Ve(L,Y,p,y,g,_,D,P,M);return}}Z&8?(z&16&&Fe(L,g,_),Y!==L&&d(p,Y)):z&16?Z&16?Ue(L,Y,p,y,g,_,D,P,M):Fe(L,g,_,!0):(z&8&&d(p,""),Z&16&&re(Y,p,y,g,_,D,P,M))},Ve=(a,f,p,y,g,_,D,P,M)=>{a=a||ar,f=f||ar;const L=a.length,z=f.length,Y=Math.min(L,z);let G;for(G=0;G<Y;G++){const Z=f[G]=M?wn(f[G]):tn(f[G]);C(a[G],Z,p,null,g,_,D,P,M)}L>z?Fe(a,g,_,!0,!1,Y):re(f,p,y,g,_,D,P,M,Y)},Ue=(a,f,p,y,g,_,D,P,M)=>{let L=0;const z=f.length;let Y=a.length-1,G=z-1;for(;L<=Y&&L<=G;){const Z=a[L],ie=f[L]=M?wn(f[L]):tn(f[L]);if(nr(Z,ie))C(Z,ie,p,null,g,_,D,P,M);else break;L++}for(;L<=Y&&L<=G;){const Z=a[Y],ie=f[G]=M?wn(f[G]):tn(f[G]);if(nr(Z,ie))C(Z,ie,p,null,g,_,D,P,M);else break;Y--,G--}if(L>Y){if(L<=G){const Z=G+1,ie=Z<z?f[Z].el:y;for(;L<=G;)C(null,f[L]=M?wn(f[L]):tn(f[L]),p,ie,g,_,D,P,M),L++}}else if(L>G)for(;L<=Y;)Re(a[L],g,_,!0),L++;else{const Z=L,ie=L,fe=new Map;for(L=ie;L<=G;L++){const Q=f[L]=M?wn(f[L]):tn(f[L]);Q.key!=null&&fe.set(Q.key,L)}let me,te=0;const m=G-ie+1;let h=!1,v=0;const E=new Array(m);for(L=0;L<m;L++)E[L]=0;for(L=Z;L<=Y;L++){const Q=a[L];if(te>=m){Re(Q,g,_,!0);continue}let ee;if(Q.key!=null)ee=fe.get(Q.key);else for(me=ie;me<=G;me++)if(E[me-ie]===0&&nr(Q,f[me])){ee=me;break}ee===void 0?Re(Q,g,_,!0):(E[ee-ie]=L+1,ee>=v?v=ee:h=!0,C(Q,f[ee],p,null,g,_,D,P,M),te++)}const I=h?mf(E):ar;for(me=I.length-1,L=m-1;L>=0;L--){const Q=ie+L,ee=f[Q],pe=Q+1<z?f[Q+1].el:y;E[L]===0?C(null,ee,p,pe,g,_,D,P,M):h&&(me<0||L!==I[me]?Ze(ee,p,pe,2):me--)}}},Ze=(a,f,p,y,g=null)=>{const{el:_,type:D,transition:P,children:M,shapeFlag:L}=a;if(L&6){Ze(a.component.subTree,f,p,y);return}if(L&128){a.suspense.move(f,p,y);return}if(L&64){D.move(a,f,p,J);return}if(D===rt){r(_,f,p);for(let Y=0;Y<M.length;Y++)Ze(M[Y],f,p,y);r(a.anchor,f,p);return}if(D===ds){$(a,f,p);return}if(y!==2&&L&1&&P)if(y===0)P.beforeEnter(_),r(_,f,p),ft(()=>P.enter(_),g);else{const{leave:Y,delayLeave:G,afterLeave:Z}=P,ie=()=>r(_,f,p),fe=()=>{Y(_,()=>{ie(),Z&&Z()})};G?G(_,ie,fe):fe()}else r(_,f,p)},Re=(a,f,p,y=!1,g=!1)=>{const{type:_,props:D,ref:P,children:M,dynamicChildren:L,shapeFlag:z,patchFlag:Y,dirs:G}=a;if(P!=null&&Ms(P,null,p,a,!0),z&256){f.ctx.deactivate(a);return}const Z=z&1&&G,ie=!hr(a);let fe;if(ie&&(fe=D&&D.onVnodeBeforeUnmount)&&Rt(fe,f,a),z&6)ce(a.component,p,y);else{if(z&128){a.suspense.unmount(p,y);return}Z&&In(a,null,f,"beforeUnmount"),z&64?a.type.remove(a,f,p,g,J,y):L&&(_!==rt||Y>0&&Y&64)?Fe(L,f,p,!1,!0):(_===rt&&Y&384||!g&&z&16)&&Fe(M,f,p),y&&Ot(a)}(ie&&(fe=D&&D.onVnodeUnmounted)||Z)&&ft(()=>{fe&&Rt(fe,f,a),Z&&In(a,null,f,"unmounted")},p)},Ot=a=>{const{type:f,el:p,anchor:y,transition:g}=a;if(f===rt){ye(p,y);return}if(f===ds){N(a);return}const _=()=>{i(p),g&&!g.persisted&&g.afterLeave&&g.afterLeave()};if(a.shapeFlag&1&&g&&!g.persisted){const{leave:D,delayLeave:P}=g,M=()=>D(p,_);P?P(a.el,_,M):M()}else _()},ye=(a,f)=>{let p;for(;a!==f;)p=x(a),i(a),a=p;i(f)},ce=(a,f,p)=>{const{bum:y,scope:g,update:_,subTree:D,um:P}=a;y&&cr(y),g.stop(),_&&(_.active=!1,Re(D,a,f,p)),P&&ft(P,f),ft(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Fe=(a,f,p,y=!1,g=!1,_=0)=>{for(let D=_;D<a.length;D++)Re(a[D],f,p,y,g)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():x(a.anchor||a.el),W=(a,f,p)=>{a==null?f._vnode&&Re(f._vnode,null,null,!0):C(f._vnode||null,a,f,null,null,null,p),ta(),dl(),f._vnode=a},J={p:C,um:Re,m:Ze,r:Ot,mt:ae,mc:re,pc:oe,pbc:b,n:K,o:e};let X,T;return t&&([X,T]=t(J)),{render:W,hydrate:X,createApp:af(W,X)}}function Fn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Il(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=wn(i[s]),l.el=o.el),n||Il(o,l)),l.type===Zi&&(l.el=o.el)}}function mf(e){const t=e.slice(),n=[0];let r,i,s,o,l;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,e[n[l]]<c?s=l+1:o=l;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const gf=e=>e.__isTeleport,rt=Symbol.for("v-fgt"),Zi=Symbol.for("v-txt"),En=Symbol.for("v-cmt"),ds=Symbol.for("v-stc"),Nr=[];let Jt=null;function he(e=!1){Nr.push(Jt=e?null:[])}function vf(){Nr.pop(),Jt=Nr[Nr.length-1]||null}let Hr=1;function fa(e){Hr+=e}function Fl(e){return e.dynamicChildren=Hr>0?Jt||ar:null,vf(),Hr>0&&Jt&&Jt.push(e),e}function De(e,t,n,r,i,s){return Fl(R(e,t,n,r,i,s,!0))}function Nt(e,t,n,r,i){return Fl(tt(e,t,n,r,i,!0))}function Ao(e){return e?e.__v_isVNode===!0:!1}function nr(e,t){return e.type===t.type&&e.key===t.key}const es="__vInternal",Ml=({key:e})=>e??null,Ci=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?at(e)||gt(e)||Ae(e)?{i:vt,r:e,k:t,f:!!n}:e:null);function R(e,t=null,n=null,r=0,i=null,s=e===rt?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ml(t),ref:t&&Ci(t),scopeId:ml,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vt};return l?(Po(u,n),s&128&&e.normalize(u)):n&&(u.shapeFlag|=at(n)?8:16),Hr>0&&!o&&Jt&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&Jt.push(u),u}const tt=bf;function bf(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Gu)&&(e=En),Ao(e)){const l=Yn(e,t,!0);return n&&Po(l,n),Hr>0&&!s&&Jt&&(l.shapeFlag&6?Jt[Jt.indexOf(e)]=l:Jt.push(l)),l.patchFlag|=-2,l}if(Ef(e)&&(e=e.__vccOpts),t){t=_f(t);let{class:l,style:u}=t;l&&!at(l)&&(t.class=pt(l)),nt(u)&&(ol(u)&&!Te(u)&&(u=ct({},u)),t.style=vo(u))}const o=at(e)?1:gl(e)?128:gf(e)?64:nt(e)?4:Ae(e)?2:0;return R(e,t,n,r,i,o,s,!0)}function _f(e){return e?ol(e)||es in e?ct({},e):e:null}function Yn(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=e,l=t?wf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Ml(l),ref:t&&t.ref?n&&i?Te(i)?i.concat(Ci(t)):[i,Ci(t)]:Ci(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yn(e.ssContent),ssFallback:e.ssFallback&&Yn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function It(e=" ",t=0){return tt(Zi,null,e,t)}function We(e="",t=!1){return t?(he(),Nt(En,null,e)):tt(En,null,e)}function tn(e){return e==null||typeof e=="boolean"?tt(En):Te(e)?tt(rt,null,e.slice()):typeof e=="object"?wn(e):tt(Zi,null,String(e))}function wn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yn(e)}function Po(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Po(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(es in t)?t._ctx=vt:i===3&&vt&&(vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ae(t)?(t={default:t,_ctx:vt},n=32):(t=String(t),r&64?(n=16,t=[It(t)]):n=8);e.children=t,e.shapeFlag|=n}function wf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=pt([t.class,r.class]));else if(i==="style")t.style=vo([t.style,r.style]);else if(Yi(i)){const s=t[i],o=r[i];o&&s!==o&&!(Te(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function Rt(e,t,n,r=null){Gt(e,t,7,[n,r])}const xf=El();let Cf=0;function kf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||xf,s={uid:Cf++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new qc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Al(r,i),emitsOptions:yl(r,i),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:r.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=$u.bind(null,s),e.ce&&e.ce(s),s}let ht=null;const $o=()=>ht||vt;let No,Zn,ha="__VUE_INSTANCE_SETTERS__";(Zn=Ss()[ha])||(Zn=Ss()[ha]=[]),Zn.push(e=>ht=e),No=e=>{Zn.length>1?Zn.forEach(t=>t(e)):Zn[0](e)};const vr=e=>{No(e),e.scope.on()},Vn=()=>{ht&&ht.scope.off(),No(null)};function Ll(e){return e.vnode.shapeFlag&4}let qr=!1;function Df(e,t=!1){qr=t;const{props:n,children:r}=e.vnode,i=Ll(e);cf(e,n,i,t),hf(e,r);const s=i?Sf(e,t):void 0;return qr=!1,s}function Sf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=al(new Proxy(e.ctx,Xu));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?jl(e):null;vr(e),_r();const s=Sn(r,e,0,[e.props,i]);if(wr(),Vn(),Va(s)){if(s.then(Vn,Vn),t)return s.then(o=>{da(e,o,t)}).catch(o=>{Wi(o,e,0)});e.asyncDep=s}else da(e,s,t)}else Bl(e,t)}function da(e,t,n){Ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nt(t)&&(e.setupState=ul(t)),Bl(e,n)}let pa;function Bl(e,t,n){const r=e.type;if(!e.render){if(!t&&pa&&!r.render){const i=r.template||Eo(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:u}=r,c=ct(ct({isCustomElement:s,delimiters:l},o),u);r.render=pa(i,c)}}e.render=r.render||Wt}vr(e),_r(),ef(e),wr(),Vn()}function Tf(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Et(e,"get","$attrs"),t[n]}}))}function jl(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Tf(e)},slots:e.slots,emit:e.emit,expose:t}}function ts(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ul(al(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in $r)return $r[n](e)},has(t,n){return n in t||n in $r}}))}function ya(e,t=!0){return Ae(e)?e.displayName||e.name:e.name||t&&e.__name}function Ef(e){return Ae(e)&&"__vccOpts"in e}const Rl=(e,t)=>Du(e,t,qr),Of=Symbol.for("v-scx"),Af=()=>xi(Of),Pf="3.3.4",$f="http://www.w3.org/2000/svg",Bn=typeof document<"u"?document:null,ma=Bn&&Bn.createElement("template"),Nf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Bn.createElementNS($f,e):Bn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Bn.createTextNode(e),createComment:e=>Bn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ma.innerHTML=r?`<svg>${e}</svg>`:e;const l=ma.content;if(r){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function If(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Ff(e,t,n){const r=e.style,i=at(n);if(n&&!i){if(t&&!at(t))for(const s in t)n[s]==null&&Ls(r,s,"");for(const s in n)Ls(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const ga=/\s*!important$/;function Ls(e,t,n){if(Te(n))n.forEach(r=>Ls(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Mf(e,t);ga.test(n)?e.setProperty(Wn(r),n.replace(ga,""),"important"):e[r]=n}}const va=["Webkit","Moz","ms"],ps={};function Mf(e,t){const n=ps[t];if(n)return n;let r=mr(t);if(r!=="filter"&&r in e)return ps[t]=r;r=Ya(r);for(let i=0;i<va.length;i++){const s=va[i]+r;if(s in e)return ps[t]=s}return t}const ba="http://www.w3.org/1999/xlink";function Lf(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ba,t.slice(6,t.length)):e.setAttributeNS(ba,t,n);else{const s=Hc(t);n==null||s&&!Ja(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function Bf(e,t,n,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const c=l==="OPTION"?e.getAttribute("value"):e.value,d=n??"";c!==d&&(e.value=d),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Ja(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function rr(e,t,n,r){e.addEventListener(t,n,r)}function jf(e,t,n,r){e.removeEventListener(t,n,r)}function Rf(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[l,u]=Kf(t);if(r){const c=s[t]=Hf(r,i);rr(e,l,c,u)}else o&&(jf(e,l,o,u),s[t]=void 0)}}const _a=/(?:Once|Passive|Capture)$/;function Kf(e){let t;if(_a.test(e)){t={};let r;for(;r=e.match(_a);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Wn(e.slice(2)),t]}let ys=0;const Uf=Promise.resolve(),Vf=()=>ys||(Uf.then(()=>ys=0),ys=Date.now());function Hf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Gt(qf(r,n.value),t,5,[r])};return n.value=e,n.attached=Vf(),n}function qf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const wa=/^on[a-z]/,Yf=(e,t,n,r,i=!1,s,o,l,u)=>{t==="class"?If(e,r,i):t==="style"?Ff(e,n,r):Yi(t)?po(t)||Rf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Jf(e,t,r,i))?Bf(e,t,r,s,o,l,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Lf(e,t,r,i))};function Jf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&wa.test(t)&&Ae(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||wa.test(t)&&at(n)?!1:t in e}const xa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>cr(t,n):t};function zf(e){e.target.composing=!0}function Ca(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zt={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=xa(i);const s=r||i.props&&i.props.type==="number";rr(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=Ds(l)),e._assign(l)}),n&&rr(e,"change",()=>{e.value=e.value.trim()}),t||(rr(e,"compositionstart",zf),rr(e,"compositionend",Ca),rr(e,"change",Ca))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=xa(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ds(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Wf=["ctrl","shift","alt","meta"],Gf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Wf.some(n=>e[`${n}Key`]&&!t.includes(n))},Ft=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=Gf[t[i]];if(s&&s(n,t))return}return e(n,...r)},Xf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qf=(e,t)=>n=>{if(!("key"in n))return;const r=Wn(n.key);if(t.some(i=>i===r||Xf[i]===r))return e(n)},Zf=ct({patchProp:Yf},Nf);let ka;function eh(){return ka||(ka=pf(Zf))}const th=(...e)=>{const t=eh().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=nh(r);if(!i)return;const s=t._component;!Ae(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function nh(e){return at(e)?document.querySelector(e):e}const rh={key:0,class:"button-loader"},ih=R("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),sh=[ih],Mt=sn({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=Qu();return(r,i)=>(he(),De("button",{class:pt(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(he(),De("div",rh,sh)):We("",!0),t.icon?(he(),De("i",{key:1,class:pt([{"opacity-0":t.loading,"mr-2":ke(n).default},"font-icon"])},je(t.icon),3)):We("",!0),ke(n).default?(he(),De("span",{key:2,class:pt({"opacity-0":t.loading})},[Dl(r.$slots,"default")],2)):We("",!0)],2))}});const oh=rn(!1);var dt=(e=>(e.FilterSaved="Фильтр сохранен",e.FilterSaveError="Не удалось сохранить фильтр",e.FilterCleared="Фильтр сброшен (удален из памяти)",e.ParsingCanceled="Парсинг отзывов отменен",e.ParsingStarted="Парсинг отзывов запущен",e.TabOpenError="Не удалось открыть ссылку",e.ProfileCreated="Профиль добавлен в базу",e.ProfileCreateError="Не удалось сохранить профиль в базу",e.ProfileEdited="Профиль успешно обновлен",e.ProfileEditeError="Не удалось обновить профиль",e.ProfileDeleted="Профиль успешно удален",e.ProfileDeleteError="Не удалось удалить профиль",e.ProfileLinkCopied="Ссылка скопирована в буффер",e.InfoCopied="Информация скопирована в буффер",e.ProductNameCopied="Название товара скопировано в буффер",e.DBExportError="Не удалось экспортировать базу",e.DBExportSuccess="Экпорт базы успешно завершен",e.DBImportError="Не удалось импортировать базу",e.DBImportSuccess="Импорт базы успешно завершен",e.DBDropSuccess="База данных успешно удалена",e.DBDropError="Не удалось удалить базу данных",e))(dt||{}),Ut=(e=>(e.ReviewsFilter="reviews_filter",e.ParsingResult="parsing_result",e.ProfileSavedList="profile_saved_list",e.Settings="settings",e))(Ut||{});const Cn=rn(Ut.ReviewsFilter),Da=e=>{Cn.value=e},ah={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},lh={class:"centered py-3 flex flex-wrap items-center gap-3"},ch=sn({__name:"Header",setup(e){const t=[{value:Ut.ReviewsFilter,text:"Фильтр отзывов",icon:"tune"},{value:Ut.ParsingResult,text:"Результаты парсинга",icon:"view_list"},{value:Ut.ProfileSavedList,text:"Список профилей",icon:"people"}];return(n,r)=>(he(),De("header",ah,[R("div",lh,[(he(),De(rt,null,Un(t,i=>tt(Mt,{key:i.value,icon:i.icon,class:pt([ke(Cn)===i.value?"ring-2 ring-white":""]),onClick:s=>ke(Da)(i.value)},{default:Tt(()=>[It(je(i.text),1)]),_:2},1032,["icon","class","onClick"])),64)),tt(Mt,{theme:"info",type:"button",icon:"settings",class:pt(["ml-auto",[ke(Cn)===ke(Ut).Settings?"ring-2 ring-white":""]]),onClick:r[0]||(r[0]=i=>ke(Da)(ke(Ut).Settings))},null,8,["class"])]),R("div",{class:pt(["h-1.5 progress-loader transition-all",{"opacity-0":!ke(oh)}])},null,2)]))}});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kl={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(uh,function(){return function(){var n={d:function(T,a){for(var f in a)n.o(a,f)&&!n.o(T,f)&&Object.defineProperty(T,f,{enumerable:!0,get:a[f]})},o:function(T,a){return Object.prototype.hasOwnProperty.call(T,a)}},r={};n.d(r,{default:function(){return J}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(T){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof T=="string"?a.querySelector(T):T}function l(){let{tagName:T="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=document.createElement(T);return a&&g.classList.add(...a.split(" ")),p&&(g.id=p),f&&(g.innerHTML=f),y&&u(g,y),g}function u(T,a){for(let[f,p]of Object.entries(a))p!==void 0&&T.setAttribute(f,p);return T}function c(T){return new Date(T.getFullYear(),T.getMonth()+1,0).getDate()}function d(T){let a=T.getHours(),{hours:f,dayPeriod:p}=w(a);return{year:T.getFullYear(),month:T.getMonth(),fullMonth:T.getMonth()+1<10?"0"+(T.getMonth()+1):T.getMonth()+1,date:T.getDate(),fullDate:T.getDate()<10?"0"+T.getDate():T.getDate(),day:T.getDay(),hours:a,fullHours:x(a),hours12:f,dayPeriod:p,fullHours12:x(f),minutes:T.getMinutes(),fullMinutes:T.getMinutes()<10?"0"+T.getMinutes():T.getMinutes()}}function w(T){return{dayPeriod:T>11?"pm":"am",hours:T%12==0?12:T%12}}function x(T){return T<10?"0"+T:T}function k(T){let a=10*Math.floor(T.getFullYear()/10);return[a,a+9]}function O(){let T=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let g in y)y[g]&&T.push(g);else y&&T.push(y)}),T.join(" ")}function C(T,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!T||!a)return!1;let p=d(T),y=d(a);return{[i.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[i.months]:p.month===y.month&&p.year===y.year,[i.years]:p.year===y.year}[f]}function B(T,a,f){let p=A(T,!1).getTime(),y=A(a,!1).getTime();return f?p>=y:p>y}function F(T,a){return!B(T,a,!0)}function A(T){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(T.getTime());return typeof a!="boolean"||a||$(f),f}function $(T){return T.setHours(0,0,0,0),T}function N(T,a,f){T.length?T.forEach(p=>{p.addEventListener(a,f)}):T.addEventListener(a,f)}function U(T,a){return!(!T||T===document||T instanceof DocumentFragment)&&(T.matches(a)?T:U(T.parentNode,a))}function H(T,a,f){return T>f?f:T<a?a:T}function q(T){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[g,_]of Object.entries(y))if(_!==void 0&&_.toString()==="[object Object]"){let D=T[g]!==void 0?T[g].toString():void 0,P=_.toString(),M=Array.isArray(_)?[]:{};T[g]=T[g]?D!==P?M:T[g]:M,q(T[g],_)}else T[g]=_}),T}function re(T){let a=T;return T instanceof Date||(a=new Date(T)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${T}" to Date object`),a=!1),a}function S(T){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+T+")($|<|"+a+")","g")}function b(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}class V{constructor(){let{type:a,date:f,dp:p,opts:y,body:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),b(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),b(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),b(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),b(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),b(this,"onChangeFocusDate",_=>{if(!_)return void(this.focused&&this.removeFocus());let D=C(_,this.date,this.type);D?this.focus():!D&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),b(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=g,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=d(this.date),g=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...g}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:g}=this.opts,{minDate:_,maxDate:D}=this.dp,{day:P}=d(this.date),M=this._isOutOfMinMaxRange(),L=(a=this.customData)===null||a===void 0?void 0:a.disabled,z=O("air-datepicker-cell",`-${this.singleType}-`,{"-current-":C(p,this.date,this.type),"-min-date-":_&&C(_,this.date,this.type),"-max-date-":D&&C(D,this.date,this.type)}),Y="";switch(this.type){case i.days:Y=O({"-weekend-":this.dp.isWeekend(P),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||M||L});break;case i.months:Y=O({"-disabled-":M||L});break;case i.years:Y=O({"-other-decade-":this.isOtherDecade,"-disabled-":M||this.isOtherDecade&&!g||L})}return O(z,Y,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=d(this.date),{showOtherMonths:g,showOtherYears:_}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case i.days:return!g&&this.isOtherMonth?"":y;case i.months:return this.dp.locale[this.opts.monthsField][p];case i.years:return!_&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:g,year:_,date:D}=d(y),P=p===i.days,M=p===i.years,L=!!a&&new Date(_,M?a.getMonth():g,P?D:a.getDate()),z=!!f&&new Date(_,M?f.getMonth():g,P?D:f.getDate());return a&&f?F(L,a)||B(z,f):a?F(L,a):f?B(z,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=O({"-in-range-":a&&f&&(y=this.date,g=a,_=f,B(y,g)&&F(y,_)),"-range-from-":a&&C(this.date,a,this.type),"-range-to-":f&&C(this.date,f,this.type)});var y,g,_;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){C(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function j(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}let ve={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const ae=".air-datepicker-cell";class Pe{constructor(a){let{dp:f,type:p,opts:y}=a;j(this,"handleClick",g=>{let _=g.target.closest(ae).adpCell;if(_.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let D=this.dp._checkIfDateIsSelected(_.date,_.type);D?this.dp._handleAlreadySelectedDates(D,_.date):this.dp.selectDate(_.date)}),j(this,"handleDayNameClick",g=>{let _=g.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(_),datepicker:this.dp})}),j(this,"onChangeCurrentView",g=>{g!==this.type?this.hide():(this.show(),this.render())}),j(this,"onMouseOverCell",g=>{let _=U(g.target,ae);this.dp.setFocusDate(!!_&&_.adpCell.date)}),j(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),j(this,"onClickBody",g=>{let{onClickDayName:_}=this.opts,D=g.target;D.closest(ae)&&this.handleClick(g),_&&D.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(g)}),j(this,"onMouseDown",g=>{this.pressed=!0;let _=U(g.target,ae),D=_&&_.adpCell;C(D.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),C(D.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),j(this,"onMouseMove",g=>{if(!this.pressed||!this.dp.isMinViewReached)return;g.preventDefault();let _=U(g.target,ae),D=_&&_.adpCell,{selectedDates:P,rangeDateTo:M,rangeDateFrom:L}=this.dp;if(!D||D.isDisabled)return;let{date:z}=D;if(P.length===2){if(this.rangeFromFocused&&!B(z,M)){let{hours:Y,minutes:G}=d(L);z.setHours(Y),z.setMinutes(G),this.dp.rangeDateFrom=z,this.dp.replaceDate(L,z)}if(this.rangeToFocused&&!F(z,L)){let{hours:Y,minutes:G}=d(M);z.setHours(Y),z.setMinutes(G),this.dp.rangeDateTo=z,this.dp.replaceDate(M,z)}}}),j(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),j(this,"onChangeViewDate",(g,_)=>{if(!this.isVisible)return;let D=k(g),P=k(_);switch(this.dp.currentView){case i.days:if(C(g,_,i.months))return;break;case i.months:if(C(g,_,i.years))return;break;case i.years:if(D[0]===P[0]&&D[1]===P[1])return}this.render()}),j(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(g=>{this.$cells.appendChild(g.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;N(this.$el,"mouseover",this.onMouseOverCell),N(this.$el,"mouseout",this.onMouseOutCell),N(this.$el,"click",this.onClickBody),a&&f&&(N(this.$el,"mousedown",this.onMouseDown),N(this.$el,"mousemove",this.onMouseMove),N(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:ve[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,g=a,_=0;for(;_<7;){let D=g%7;f+=`<div class="${O("air-datepicker-body--day-name",{[i.cssClassWeekend]:p(D),"-clickable-":!!y})}" data-day-index='${D}'>${this.dp.locale.daysMin[D]}</div>`,_++,g++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=c(a),{year:y,month:g}=d(a),_=new Date(y,g,1),D=new Date(y,g,p),P=_.getDay()-f,M=6-D.getDay()+f;P=P<0?P+7:P,M=M>6?M-7:M;let L=function(fe,me){let{year:te,month:m,date:h}=d(fe);return new Date(te,m,h-me)}(_,P),z=p+P+M,Y=L.getDate(),{year:G,month:Z}=d(L),ie=0;for(;ie<z;){let fe=new Date(G,Z,Y+ie);this._generateCell(fe),ie++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,g=new V({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(g),g}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=k(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case i.days:this._generateDayCells();break;case i.months:this._generateMonthCells();break;case i.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}}function ge(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}class ue{constructor(a){let{dp:f,opts:p}=a;ge(this,"onClickNav",y=>{let g=U(y.target,".air-datepicker-nav--action");if(!g)return;let _=g.dataset.action;this.dp[_]()}),ge(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),ge(this,"update",()=>{let{prevHtml:y,nextHtml:g}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=g,this._resetNavStatus(),this.render(),this.handleNavStatus()}),ge(this,"renderDelay",()=>{setTimeout(this.render)}),ge(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,g){for(let _ in g)g[_]?y.classList.add(_):y.classList.remove(_)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:g}=this.dp.parsedViewDate,_=!!f&&d(f),D=!!p&&d(p);switch(this.dp.currentView){case i.days:f&&_.month>=g&&_.year>=y&&this._disableNav("prev"),p&&D.month<=g&&D.year<=y&&this._disableNav("next");break;case i.months:f&&_.year>=y&&this._disableNav("prev"),p&&D.year<=y&&this._disableNav("next");break;case i.years:{let P=k(this.dp.viewDate);f&&_.year>=P[0]&&this._disableNav("prev"),p&&D.year<=P[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(g=>{g.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var oe={today:{content:T=>T.locale.today,onClick:T=>T.setViewDate(new Date)},clear:{content:T=>T.locale.clear,onClick:T=>T.clear()}};class Ve{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&oe[f]&&(p=oe[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:g={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:O("air-datepicker-button",p),attrs:g})}render(){this.generateButtons()}}function Ue(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}class Ze{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Ue(this,"onChangeSelectedDate",y=>{let{date:g,updateTime:_=!1}=y;g&&(this.setMinMaxTime(g),this.setCurrentTime(!!_&&g),this.addTimeToDate(g))}),Ue(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Ue(this,"onChangeInputRange",y=>{let g=y.target;this[g.getAttribute("name")]=g.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Ue(this,"onMouseEnterLeave",y=>{let g=y.target.getAttribute("name"),_=this.$minutesText;g==="hours"&&(_=this.$hoursText),_.classList.toggle("-focus-")}),Ue(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Ue(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(S("h"))||p.match(S("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),N(this.$ranges,a,this.onChangeInputRange),N(this.$ranges,"mouseenter",this.onMouseEnterLeave),N(this.$ranges,"mouseleave",this.onMouseEnterLeave),N(this.$ranges,"focus",this.onFocus),N(this.$ranges,"mousedown",this.onFocus),N(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:O("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:g,minMinutes:_,maxHours:D,maxMinutes:P,dayPeriod:M,opts:{hoursStep:L,minutesStep:z}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${x(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${x(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${M}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${g}" max="${D}" step="${L}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${_}" max="${P}" step="${z}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&C(a,f)&&this.setMinTimeFromMinDate(f),p&&C(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?d(a):this;this.hours=H(f,this.minHours,this.maxHours),this.minutes=H(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=H(a,0,23),this.minMinutes=H(f,0,59),this.maxHours=H(p,0,23),this.maxMinutes=H(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){u(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,u(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=x(this.displayHours),this.$minutesText.innerHTML=x(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=w(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function Re(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}class Ot{constructor(a){let{dp:f,opts:p}=a;Re(this,"pressedKeys",new Set),Re(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,g)=>g.up()]])),Re(this,"handleHotKey",y=>{let g=this.hotKeys.get(y),_=d(this.getInitialFocusDate());g(_,this.dp);let{year:D,month:P,date:M}=_,L=c(new Date(D,P));L<M&&(M=L);let z=this.dp.getClampedDate(new Date(D,P,M));this.dp.setFocusDate(z,{viewDateTransition:!0})}),Re(this,"isHotKeyPressed",()=>{let y=!1,g=this.pressedKeys.size,_=D=>this.pressedKeys.has(D);for(let[D]of this.hotKeys){if(y)break;if(Array.isArray(D[0]))D.forEach(P=>{y||g!==P.length||(y=P.every(_)&&D)});else{if(g!==D.length)continue;y=D.every(_)&&D}}return y}),Re(this,"isArrow",y=>y>=37&&y<=40),Re(this,"onKeyDown",y=>{let{key:g,which:_}=y,{dp:D,dp:{focusDate:P},opts:M}=this;this.registerKey(g);let L=this.isHotKeyPressed();if(L)return y.preventDefault(),void this.handleHotKey(L);if(this.isArrow(_))return y.preventDefault(),void this.focusNextCell(g);if(g==="Enter"){if(D.currentView!==M.minView)return void D.down();if(P){let z=D._checkIfDateIsSelected(P);return void(z?D._handleAlreadySelectedDates(z,P):D.selectDate(P))}}g==="Escape"&&this.dp.hide()}),Re(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:g}}=this.dp,_=a||p[p.length-1];if(!_)switch(f){case i.days:_=new Date(y,g,new Date().getDate());break;case i.months:_=new Date(y,g,1);break;case i.years:_=new Date(y,0,1)}return _}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:g,years:_}=i,D=d(f),P=D.year,M=D.month,L=D.date;switch(a){case"ArrowLeft":p===y&&(L-=1),p===g&&(M-=1),p===_&&(P-=1);break;case"ArrowUp":p===y&&(L-=7),p===g&&(M-=3),p===_&&(P-=4);break;case"ArrowRight":p===y&&(L+=1),p===g&&(M+=1),p===_&&(P+=1);break;case"ArrowDown":p===y&&(L+=7),p===g&&(M+=3),p===_&&(P+=4)}let z=this.dp.getClampedDate(new Date(P,M,L));this.dp.setFocusDate(z,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ye={on(T,a){this.__events||(this.__events={}),this.__events[T]?this.__events[T].push(a):this.__events[T]=[a]},off(T,a){this.__events&&this.__events[T]&&(this.__events[T]=this.__events[T].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(T){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[T]&&this.__events[T].forEach(y=>{y(...f)})}};function ce(T,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var P=D.call(g,_);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in T?Object.defineProperty(T,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):T[a]=f,T}let Fe="",K="",W=!1;class J{static buildGlobalContainer(a){W=!0,Fe=l({className:a,id:a}),o("body").appendChild(Fe)}constructor(a,f){var p=this;if(ce(this,"viewIndexes",[i.days,i.months,i.years]),ce(this,"next",()=>{let{year:_,month:D}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,D+1,1));break;case i.months:this.setViewDate(new Date(_+1,D,1));break;case i.years:this.setViewDate(new Date(_+10,0,1))}}),ce(this,"prev",()=>{let{year:_,month:D}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,D-1,1));break;case i.months:this.setViewDate(new Date(_-1,D,1));break;case i.years:this.setViewDate(new Date(_-10,0,1))}}),ce(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),ce(this,"setPosition",function(_){let D=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(_=_||p.opts.position)=="function")return void(p.customHide=_({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:D,done:p._finishHide}));let P,M,{isMobile:L}=p.opts,z=p.$el.getBoundingClientRect(),Y=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,ie=p.$datepicker.getBoundingClientRect(),fe=_.split(" "),me=window.scrollY,te=window.scrollX,m=p.opts.offset,h=fe[0],v=fe[1];if(L)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(Y={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:z.width,height:p.$el.offsetHeight},me=0,te=0),G!==Z&&G!==document.body){let E=G.getBoundingClientRect();Y={top:z.top-E.top,left:z.left-E.left,width:z.width,height:z.height},me=0,te=0}switch(h){case"top":P=Y.top-ie.height-m;break;case"right":M=Y.left+Y.width+m;break;case"bottom":P=Y.top+Y.height+m;break;case"left":M=Y.left-ie.width-m}switch(v){case"top":P=Y.top;break;case"right":M=Y.left+Y.width-ie.width;break;case"bottom":P=Y.top+Y.height-ie.height;break;case"left":M=Y.left;break;case"center":/left|right/.test(h)?P=Y.top+Y.height/2-ie.height/2:M=Y.left+Y.width/2-ie.width/2}p.$datepicker.style.cssText=`left: ${M+te}px; top: ${P+me}px`}}),ce(this,"_setInputValue",()=>{let{opts:_,$altField:D,locale:{dateFormat:P}}=this,{altFieldDateFormat:M,altField:L}=_;L&&D&&(D.value=this._getInputValue(M)),this.$el.value=this._getInputValue(P)}),ce(this,"_getInputValue",_=>{let{selectedDates:D,opts:P}=this,{multipleDates:M,multipleDatesSeparator:L}=P;if(!D.length)return"";let z=typeof _=="function",Y=z?_(M?D:D[0]):D.map(G=>this.formatDate(G,_));return Y=z?Y:Y.join(L),Y}),ce(this,"_checkIfDateIsSelected",function(_){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,P=!1;return p.selectedDates.some(M=>{let L=C(_,M,D);return P=L&&M,L}),P}),ce(this,"_scheduleCallAfterTransition",_=>{this._cancelScheduledCall(),_&&_(!1),this._onTransitionEnd=()=>{_&&_(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),ce(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),ce(this,"setViewDate",_=>{if(!((_=re(_))instanceof Date)||C(_,this.viewDate))return;let D=this.viewDate;this.viewDate=_;let{onChangeViewDate:P}=this.opts;if(P){let{month:M,year:L}=this.parsedViewDate;P({month:M,year:L,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,_,D)}),ce(this,"setFocusDate",function(_){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!_||(_=re(_))instanceof Date)&&(p.focusDate=_,p.opts.range&&_&&p._handleRangeOnFocus(),p.trigger(i.eventChangeFocusDate,_,D))}),ce(this,"setCurrentView",_=>{if(this.viewIndexes.includes(_)){if(this.currentView=_,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(i.eventChangeCurrentView,_),!this.views[_]){let D=this.views[_]=new Pe({dp:this,opts:this.opts,type:_});this.shouldUpdateDOM&&this.$content.appendChild(D.$el)}this.opts.onChangeView&&this.opts.onChangeView(_)}}),ce(this,"_updateLastSelectedDate",_=>{this.lastSelectedDate=_,this.trigger(i.eventChangeLastSelectedDate,_)}),ce(this,"destroy",()=>{let{showEvent:_,isMobile:D}=this.opts,P=this.$datepicker.parentNode;P&&P.removeChild(this.$datepicker),this.$el.removeEventListener(_,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),D&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),ce(this,"update",_=>{let D=q({},this.opts);q(this.opts,_);let{timepicker:P,buttons:M,range:L,selectedDates:z,isMobile:Y}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!D.selectedDates&&z&&this.selectDate(z),_.view&&this.setCurrentView(_.view),this._setInputValue(),D.range&&!L?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!D.range&&L&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),D.timepicker&&!P?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!D.timepicker&&P&&this._addTimepicker(),!D.buttons&&M?this._addButtons():D.buttons&&!M?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&D.buttons&&M&&this.buttons.clearHtml().render(),!D.isMobile&&Y?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):D.isMobile&&!Y&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===i.days&&this.views[this.currentView].renderDayNames())}),ce(this,"isOtherMonth",_=>{let{month:D}=d(_);return D!==this.parsedViewDate.month}),ce(this,"isOtherYear",_=>{let{year:D}=d(_);return D!==this.parsedViewDate.year}),ce(this,"isOtherDecade",_=>{let{year:D}=d(_),[P,M]=k(this.viewDate);return D<P||D>M}),ce(this,"_onChangeSelectedDate",_=>{let{silent:D}=_;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!D&&this._triggerOnSelect()})}),ce(this,"_onChangeFocusedDate",function(_){let{viewDateTransition:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_)return;let P=!1;D&&(P=p.isOtherMonth(_)||p.isOtherYear(_)||p.isOtherDecade(_)),P&&p.setViewDate(_)}),ce(this,"_onChangeTime",_=>{let{hours:D,minutes:P}=_,M=new Date,{lastSelectedDate:L,opts:{onSelect:z}}=this,Y=L;L||(Y=M);let G=this.getCell(Y,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(Y.setHours(D),Y.setMinutes(P),L?(this._setInputValue(),z&&this._triggerOnSelect()):this.selectDate(Y))}),ce(this,"_onFocus",_=>{this.visible||this.show()}),ce(this,"_onBlur",_=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),ce(this,"_onMouseDown",_=>{this.inFocus=!0}),ce(this,"_onMouseUp",_=>{this.inFocus=!1,this.$el.focus()}),ce(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),ce(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),ce(this,"isWeekend",_=>this.opts.weekends.includes(_)),ce(this,"getClampedDate",_=>{let{minDate:D,maxDate:P}=this,M=_;return P&&B(_,P)?M=P:D&&F(_,D)&&(M=D),M}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=q({},s,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:g}=this.opts;g||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=re(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:g,keyboardNav:_,onlyTimepicker:D}}=this,P=o("body");(!W||W&&Fe&&!P.contains(Fe))&&!p&&this.elIsInput&&!this.$customContainer&&J.buildGlobalContainer(J.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),_&&!D&&(this.keyboardNav=new Ot({dp:this,opts:a}))),g&&this.selectDate(g,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Fe.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:g,position:_,classes:D,onlyTimepicker:P,isMobile:M}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(_)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),D&&this.$datepicker.classList.add(...D.split(" ")),P&&this.$datepicker.classList.add("-only-timepicker-"),M&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Pe({dp:this,type:this.currentView,opts:a}),this.nav=new ue({dp:this,opts:a}),g&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&re(a),this.maxDate=!!f&&re(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new Ze({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Ve({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:g,timeFormat:_,dateTimeSeparator:D}=this.opts;var P;this.locale=(P=a,JSON.parse(JSON.stringify(P))),f&&(this.locale.dateFormat=f),_!==void 0&&_!==""&&(this.locale.timeFormat=_);let{timeFormat:M}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let L=M?D:"";this.locale.dateFormat=[this.locale.dateFormat,M||""].join(L)}g&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&B(a,p)&&this.setViewDate(p),f&&F(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=re(a),!(a instanceof Date))return;let p=f,y=this.locale,g=d(a),_=g.dayPeriod,D=k(a),P=J.replacer,M={T:a.getTime(),m:g.minutes,mm:g.fullMinutes,h:g.hours12,hh:g.fullHours12,H:g.hours,HH:g.fullHours,aa:_,AA:_.toUpperCase(),E:y.daysShort[g.day],EEEE:y.days[g.day],d:g.date,dd:g.fullDate,M:g.month+1,MM:g.fullMonth,MMM:y.monthsShort[g.month],MMMM:y.months[g.month],yy:g.year.toString().slice(-2),yyyy:g.year,yyyy1:D[0],yyyy2:D[1]};for(let[L,z]of Object.entries(M))p=P(p,S(L),z);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:g,selectedDates:_}=this,{updateTime:D}=p,{moveToOtherMonthsOnSelect:P,moveToOtherYearsOnSelect:M,multipleDates:L,range:z,autoClose:Y}=this.opts,G=_.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=re(a))instanceof Date){if(y===i.days&&a.getMonth()!==g.month&&P&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===i.years&&a.getFullYear()!==g.year&&M&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),L&&!z){if(G===L)return;this._checkIfDateIsSelected(a)||_.push(a)}else if(z)switch(G){case 1:_.push(a),this.rangeDateTo||(this.rangeDateTo=a),B(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:D}),this._updateLastSelectedDate(a),Y&&!this.timepickerIsActive&&this.visible&&(L||z?z&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=re(a))instanceof Date)return f.some((y,g)=>{if(C(y,a))return f.splice(g,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(g=>C(g,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||C(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:g,multipleDates:_,range:D}}=this,P=_||D,M=typeof y.dateFormat=="function";p.length&&(a=p.map(A),f=M?_?y.dateFormat(a):a.map(L=>y.dateFormat(L)):a.map(L=>this.formatDate(L,y.dateFormat))),g({date:P?a:a[0],formattedDate:P?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=re(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(B(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!((a=re(a))instanceof Date))return;let{year:p,month:y,date:g}=d(a),_=`[data-year="${p}"]`,D=`[data-month="${y}"]`,P={[i.day]:`${_}${D}[data-date="${g}"]`,[i.month]:`${_}${D}`,[i.year]:`${_}`};return this.views[this.currentView].$el.querySelector(P[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return d(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return k(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Fe}static replacer(a,f,p){return a.replace(f,function(y,g,_,D){return g+p+D})}}var X;return ce(J,"defaults",s),ce(J,"version","3.3.5"),ce(J,"defaultGlobalContainerId","air-datepicker-global-container"),X=J.prototype,Object.assign(X,ye),r.default}()})})(Kl);var hh=Kl.exports;const Sa=fh(hh),dh={class:"switch"},ph=["tabindex","checked"],yh=["tabindex","checked"],mh=R("div",{class:"switch__label"},null,-1),gh=sn({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,i)=>(he(),De("div",dh,[r.type==="checkbox"?(he(),De("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,ph)):We("",!0),r.type==="radio"?(he(),De("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,yh)):We("",!0),mh]))}});const ei=()=>{const e=$o();return e==null?void 0:e.appContext.config.globalProperties.$toast};function Ta(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function sr(e){if(e)return new Date(e).toLocaleString("ru-RU")}async function vh(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(i,s){s.status==="complete"&&i===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function bh(){const t=(await chrome.tabs.query({active:!1})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function _h(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Bs(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("Ошибка при копировании в буффер",n)}t.remove()}const Qe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ot=Object.keys,bt=Array.isArray;function Dt(e,t){return typeof t!="object"||ot(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Qe.Promise||(Qe.Promise=Promise);const Yr=Object.getPrototypeOf,wh={}.hasOwnProperty;function Lt(e,t){return wh.call(e,t)}function br(e,t){typeof t=="function"&&(t=t(Yr(e))),(typeof Reflect>"u"?ot:Reflect.ownKeys)(t).forEach(n=>{dn(e,n,t[n])})}const Ul=Object.defineProperty;function dn(e,t,n,r){Ul(e,t,Dt(n&&Lt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function dr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),dn(e.prototype,"constructor",e),{extend:br.bind(null,e.prototype)}}}}const xh=Object.getOwnPropertyDescriptor;function Io(e,t){let n;return xh(e,t)||(n=Yr(e))&&Io(n,t)}const Ch=[].slice;function Li(e,t,n){return Ch.call(e,t,n)}function Vl(e,t){return t(e)}function Or(e){if(!e)throw new Error("Assertion Failed")}function Hl(e){Qe.setImmediate?setImmediate(e):setTimeout(e,0)}function ql(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function pn(e,t){if(Lt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=pn(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:pn(l,t.substr(o+1))}}function Xt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Or(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Xt(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),l=t.substr(s+1);if(l==="")n===void 0?bt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&Lt(e,o)||(u=e[o]={}),Xt(u,l,n)}}else n===void 0?bt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Yl(e){var t={};for(var n in e)Lt(e,n)&&(t[n]=e[n]);return t}const kh=[].concat;function Jl(e){return kh.apply([],e)}const zl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Jl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Qe[e]),Dh=zl.map(e=>Qe[e]);ql(zl,e=>[e,!0]);let xn=null;function ti(e){xn=typeof WeakMap<"u"&&new WeakMap;const t=js(e);return xn=null,t}function js(e){if(!e||typeof e!="object")return e;let t=xn&&xn.get(e);if(t)return t;if(bt(e)){t=[],xn&&xn.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(js(e[n]))}else if(Dh.indexOf(e.constructor)>=0)t=e;else{const s=Yr(e);for(var i in t=s===Object.prototype?{}:Object.create(s),xn&&xn.set(e,t),e)Lt(e,i)&&(t[i]=js(e[i]))}return t}const{toString:Sh}={};function Rs(e){return Sh.call(e).slice(8,-1)}const Ks=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Th=typeof Ks=="symbol"?function(e){var t;return e!=null&&(t=e[Ks])&&t.apply(e)}:function(){return null},ir={};function fn(e){var t,n,r,i;if(arguments.length===1){if(bt(e))return e.slice();if(this===ir&&typeof e=="string")return[e];if(i=Th(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Fo=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var on=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wl(e,t){on=e,Gl=t}var Gl=()=>!0;const Eh=!new Error("").stack;function Xn(){if(Eh)try{throw Xn.arguments,new Error}catch(e){return e}return new Error}function Us(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Gl).map(r=>`
`+r).join("")):""}var Xl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Xl),Oh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pr(e,t){this._e=Xn(),this.name=e,this.message=t}function Ql(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Bi(e,t,n,r){this._e=Xn(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ql(e,t)}function Ir(e,t){this._e=Xn(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Ql(e,t)}dr(pr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Us(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dr(Bi).from(pr),dr(Ir).from(pr);var Lo=Mo.reduce((e,t)=>(e[t]=t+"Error",e),{});const Ah=pr;var Se=Mo.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=Xn(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Oh[t]||n,this.inner=null)}return dr(r).from(Ah),e[t]=r,e},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Ea=Xl.reduce((e,t)=>(e[t+"Error"]=Se[t],e),{}),ki=Mo.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Se[t]),e),{});function Ye(){}function Jr(e){return e}function Ph(e,t){return e==null||e===Jr?t:function(n){return t(e(n))}}function Jn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function $h(e,t){return e===Ye?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Jn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Jn(i,this.onerror):i),s!==void 0?s:n}}function Nh(e,t){return e===Ye?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Jn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Jn(r,this.onerror):r)}}function Ih(e,t){return e===Ye?t:function(n){var r=e.apply(this,arguments);Dt(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Jn(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Jn(s,this.onerror):s),r===void 0?o===void 0?void 0:o:Dt(r,o)}}function Fh(e,t){return e===Ye?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Bo(e,t){return e===Ye?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}ki.ModifyError=Bi,ki.DexieError=pr,ki.BulkError=Ir;var zr={};const Zl=100,[Vs,ji,Hs]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Yr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Yr(t),e]})(),ec=ji&&ji.then,Di=Vs&&Vs.constructor,jo=!!Hs;var qs=!1,Mh=Hs?()=>{Hs.then(hi)}:Qe.setImmediate?setImmediate.bind(null,hi):Qe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{hi(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(hi,0)},Fr=function(e,t){Ar.push([e,t]),Ri&&(Mh(),Ri=!1)},Ys=!0,Ri=!0,Hn=[],Si=[],Js=null,zs=Jr,yr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pa,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Pa(e[0],e[1])}catch{}})}},_e=yr,Ar=[],qn=0,Ti=[];function le(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ye,this._lib=!1;var t=this._PSD=_e;if(on&&(this._stackHolder=Xn(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==zr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Gs(this,this._value))}this._state=null,this._value=null,++t.ref,nc(this,e)}const Ws={get:function(){var e=_e,t=Ki;function n(r,i){var s=!e.global&&(e!==_e||t!==Ki);const o=s&&!mn();var l=new le((u,c)=>{Ro(this,new tc(Ui(r,e,s,o),Ui(i,e,s,o),u,c,e))});return on&&sc(l,this),l}return n.prototype=zr,n},set:function(e){dn(this,"then",e&&e.prototype===zr?Ws:{get:function(){return e},set:Ws.set})}};function tc(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function nc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&ni();n&&typeof n.then=="function"?nc(e,(i,s)=>{n instanceof le?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,rc(e)),r&&ri()}},Gs.bind(null,e))}catch(n){Gs(e,n)}}function Gs(e,t){if(Si.push(t),e._state===null){var n=e._lib&&ni();t=zs(t),e._state=!1,e._value=t,on&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=Io(t,"stack");t._promise=e,dn(t,"stack",{get:()=>qs?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Hn.some(i=>i._value===r._value)||Hn.push(r)}(e),rc(e),n&&ri()}}function rc(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ro(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),qn===0&&(++qn,Fr(()=>{--qn==0&&Ko()},[]))}function Ro(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++qn,Fr(Lh,[n,e,t])}else e._listeners.push(t)}function Lh(e,t,n){try{Js=t;var r,i=t._value;t._state?r=e(i):(Si.length&&(Si=[]),r=e(i),Si.indexOf(i)===-1&&function(s){for(var o=Hn.length;o;)if(Hn[--o]._value===s._value)return void Hn.splice(o,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{Js=null,--qn==0&&Ko(),--n.psd.ref||n.psd.finalize()}}function ic(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Us(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return on&&((r=Us(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&ic(e._prev,t,n)),t}function sc(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function hi(){ni()&&ri()}function ni(){var e=Ys;return Ys=!1,Ri=!1,e}function ri(){var e,t,n;do for(;Ar.length>0;)for(e=Ar,Ar=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ar.length>0);Ys=!0,Ri=!0}function Ko(){var e=Hn;Hn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ti.slice(0),n=t.length;n;)t[--n]()}function di(e){return new le(zr,!1,e)}function et(e,t){var n=_e;return function(){var r=ni(),i=_e;try{return An(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{An(i,!1),r&&ri()}}}br(le.prototype,{then:Ws,_then:function(e,t){Ro(this,new tc(null,null,e,t,_e))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):di(r)):this.then(null,r=>r&&r.name===t?n(r):di(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),di(t)))},stack:{get:function(){if(this._stack)return this._stack;try{qs=!0;var e=ic(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{qs=!1}}},timeout:function(e,t){return e<1/0?new le((n,r)=>{var i=setTimeout(()=>r(new Se.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&dn(le.prototype,Symbol.toStringTag,"Dexie.Promise"),yr.env=oc(),br(le,{all:function(){var e=fn.apply(null,arguments).map(pi);return new le(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>le.resolve(i).then(o=>{e[s]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof le)return e;if(e&&typeof e.then=="function")return new le((n,r)=>{e.then(n,r)});var t=new le(zr,!0,e);return sc(t,Js),t},reject:di,race:function(){var e=fn.apply(null,arguments).map(pi);return new le((t,n)=>{e.map(r=>le.resolve(r).then(t,n))})},PSD:{get:()=>_e,set:e=>_e=e},totalEchoes:{get:()=>Ki},newPSD:On,usePSD:kr,scheduler:{get:()=>Fr,set:e=>{Fr=e}},rejectionMapper:{get:()=>zs,set:e=>{zs=e}},follow:(e,t)=>new le((n,r)=>On((i,s)=>{var o=_e;o.unhandleds=[],o.onunhandled=s,o.finalize=Jn(function(){(function(l){function u(){l(),Ti.splice(Ti.indexOf(u),1)}Ti.push(u),++qn,Fr(()=>{--qn==0&&Ko()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Di&&(Di.allSettled&&dn(le,"allSettled",function(){const e=fn.apply(null,arguments).map(pi);return new le(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>le.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Di.any&&typeof AggregateError<"u"&&dn(le,"any",function(){const e=fn.apply(null,arguments).map(pi);return new le((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,o)=>le.resolve(s).then(l=>t(l),l=>{i[o]=l,--r||n(new AggregateError(i))}))})}));const mt={awaits:0,echoes:0,id:0};var Bh=0,Ei=[],ms=0,Ki=0,jh=0;function On(e,t,n,r){var i=_e,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++jh;var o=yr.env;s.env=jo?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject,nthen:Oa(o.nthen,s),gthen:Oa(o.gthen,s)}:{},t&&Dt(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=kr(s,e,n,r);return s.ref===0&&s.finalize(),l}function Cr(){return mt.id||(mt.id=++Bh),++mt.awaits,mt.echoes+=Zl,mt.id}function mn(){return!!mt.awaits&&(--mt.awaits==0&&(mt.id=0),mt.echoes=mt.awaits*Zl,!0)}function pi(e){return mt.echoes&&e&&e.constructor===Di?(Cr(),e.then(t=>(mn(),t),t=>(mn(),lt(t)))):e}function Rh(e){++Ki,mt.echoes&&--mt.echoes!=0||(mt.echoes=mt.id=0),Ei.push(_e),An(e,!0)}function Kh(){var e=Ei[Ei.length-1];Ei.pop(),An(e,!1)}function An(e,t){var n=_e;if((t?!mt.echoes||ms++&&e===_e:!ms||--ms&&e===_e)||ac(t?Rh.bind(null,e):Kh),e!==_e&&(_e=e,n===yr&&(yr.env=oc()),jo)){var r=yr.env.Promise,i=e.env;ji.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Qe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function oc(){var e=Qe.Promise;return jo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Qe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ji.then,gthen:e.prototype.then}:{}}function kr(e,t,n,r,i){var s=_e;try{return An(e,!0),t(n,r,i)}finally{An(s,!1)}}function ac(e){ec.call(Vs,e)}function Ui(e,t,n,r){return typeof e!="function"?e:function(){var i=_e;n&&Cr(),An(t,!0);try{return e.apply(this,arguments)}finally{An(i,!1),r&&ac(mn)}}}function Oa(e,t){return function(n,r){return e.call(this,Ui(n,t),Ui(r,t))}}(""+ec).indexOf("[native code]")===-1&&(Cr=mn=Ye);const Aa="unhandledrejection";function Pa(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Qe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Aa,!0,!0),Dt(r,i)):Qe.CustomEvent&&Dt(r=new CustomEvent(Aa,{detail:i}),i),r&&Qe.dispatchEvent&&(dispatchEvent(r),!Qe.PromiseRejectionEvent&&Qe.onunhandledrejection))try{Qe.onunhandledrejection(r)}catch{}on&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var lt=le.reject;function Xs(e,t,n,r){if(e.idbdb&&(e._state.openComplete||_e.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Lo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Xs(e,t,n,r))):lt(s)}return i._promise(t,(s,o)=>On(()=>(_e.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return lt(new Se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return lt(new Se.DatabaseClosed);e.open().catch(Ye)}return e._state.dbReadyPromise.then(()=>Xs(e,t,n,r))}const $a="3.2.4",Rn=String.fromCharCode(65535),Qs=-1/0,ln="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lc="String expected.",Mr=[],ns=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Uh=ns,Vh=ns,cc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),rs="__dbnames",gs="readonly",vs="readwrite";function zn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const uc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yi(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=ti(t))[e],t)}class Hh{_trans(t,n,r){const i=this._tx||_e.trans,s=this.name;function o(u,c,d){if(!d.schema[s])throw new Se.NotFound("Table "+s+" not part of transaction");return n(d.idbtrans,d)}const l=ni();try{return i&&i.db===this.db?i===_e.trans?i._promise(t,o,r):On(()=>i._promise(t,o,r),{trans:i,transless:_e.transless||_e}):Xs(this.db,t,[this.name],o)}finally{l&&ri()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(bt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ot(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(d=>c.keyPath.indexOf(d)>=0)&&c.keyPath.every(d=>n.indexOf(d)>=0))[0];if(r&&this.db._maxKey!==Rn)return this.where(r.name).equals(r.keyPath.map(c=>t[c]));!r&&on&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,d){try{return s.cmp(c,d)===0}catch{return!1}}const[l,u]=n.reduce(([c,d],w)=>{const x=i[w],k=t[w];return[c||x,c||!x?zn(d,x&&x.multi?O=>{const C=pn(O,w);return bt(C)&&C.some(B=>o(k,B))}:O=>o(k,pn(O,w))):d]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,bt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(Lt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Dt(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=yi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?le.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Xt(t,i,o)}catch{}return o})}update(t,n){if(typeof t!="object"||bt(t))return this.where(":id").equals(t).modify(n);{const r=pn(t,this.schema.primKey.keyPath);if(r===void 0)return lt(new Se.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ot(n).forEach(i=>{Xt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=yi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?le.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Xt(t,i,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?le.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:uc})).then(t=>t.numFailures?le.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let d=u&&l?t.map(yi(u)):t;return this.core.mutate({trans:o,type:"add",keys:i,values:d,wantResults:s}).then(({numFailures:w,results:x,lastResult:k,failures:O})=>{if(w===0)return s?x:k;throw new Ir(`${this.name}.bulkAdd(): ${w} of ${c} operations failed`,O)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let d=u&&l?t.map(yi(u)):t;return this.core.mutate({trans:o,type:"put",keys:i,values:d,wantResults:s}).then(({numFailures:w,results:x,lastResult:k,failures:O})=>{if(w===0)return s?x:k;throw new Ir(`${this.name}.bulkPut(): ${w} of ${c} operations failed`,O)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Ir(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Lr(e){var t={},n=function(o,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[o].subscribe.apply(null,c),e}if(typeof o=="string")return t[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,l,u){if(typeof o!="object"){var c;l||(l=Fh),u||(u=Ye);var d={subscribers:[],fire:u,subscribe:function(w){d.subscribers.indexOf(w)===-1&&(d.subscribers.push(w),d.fire=l(d.fire,w))},unsubscribe:function(w){d.subscribers=d.subscribers.filter(function(x){return x!==w}),d.fire=d.subscribers.reduce(l,u)}};return t[o]=n[o]=d,d}ot(c=o).forEach(function(w){var x=c[w];if(bt(x))s(w,c[w][0],c[w][1]);else{if(x!=="asap")throw new Se.InvalidArgument("Invalid event config");var k=s(w,Jr,function(){for(var O=arguments.length,C=new Array(O);O--;)C[O]=arguments[O];k.subscribers.forEach(function(B){Hl(function(){B.apply(null,C)})})})}})}}function Dr(e,t){return dr(t).from({prototype:e}),t}function er(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function bs(e,t){e.filter=zn(e.filter,t)}function _s(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>zn(r(),t()):t,e.justLimit=n&&!r}function Oi(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Na(e,t,n){const r=Oi(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function mi(e,t,n,r){const i=e.replayFilter?zn(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(l,u,c)=>{if(!i||i(u,c,x=>u.stop(x),x=>u.fail(x))){var d=u.primaryKey,w=""+d;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(d)),Lt(s,w)||(s[w]=!0,t(l,u,c))}};return Promise.all([e.or._iterate(o,n),Ia(Na(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Ia(Na(e,r,n),zn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ia(e,t,n,r){var i=et(r?(s,o,l)=>n(r(s),o,l):n);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();t&&!t(s,l=>o=l,l=>{s.stop(l),o=Ye},l=>{s.fail(l),o=Ye})||i(s.value,s,l=>o=l),o()})})}function kt(e,t){try{const n=Fa(e),r=Fa(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===l?0:o<l?-1:1}(Ma(e),Ma(t));case"Array":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c){const d=kt(i[c],s[c]);if(d!==0)return d}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Fa(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Rs(e);return n==="ArrayBuffer"?"binary":n}function Ma(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class qh{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,lt.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,lt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=zn(n.algorithm,t)}_iterate(t,n){return mi(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Dt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>mi(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(er(r,!0))return i.count({trans:n,query:{index:Oi(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return mi(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(c,d){return d?o(c[r[d]],d-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function u(c,d){var w=o(c,s),x=o(d,s);return w<x?-l:w>x?l:0}return this.toArray(function(c){return c.sort(u)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&er(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Oi(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return mi(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,er(n)?_s(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):_s(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),_s(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return bs(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return bs(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=zn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&er(n,!0)&&n.limit>0)return this._read(i=>{var s=Oi(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return bs(this._ctx,function(i){var s=i.primaryKey.toString(),o=Lt(r,s);return r[s]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=ot(t),o=s.length;i=function(C){for(var B=!1,F=0;F<o;++F){var A=s[F],$=t[A];pn(C,A)!==$&&(Xt(C,A,$),B=!0)}return B}}const l=n.table.core,{outbound:u,extractKey:c}=l.schema.primaryKey,d=this.db._options.modifyChunkSize||200,w=[];let x=0;const k=[],O=(C,B)=>{const{failures:F,numFailures:A}=B;x+=C-A;for(let $ of ot(F))w.push(F[$])};return this.clone().primaryKeys().then(C=>{const B=F=>{const A=Math.min(d,C.length-F);return l.getMany({trans:r,keys:C.slice(F,F+A),cache:"immutable"}).then($=>{const N=[],U=[],H=u?[]:null,q=[];for(let S=0;S<A;++S){const b=$[S],V={value:ti(b),primKey:C[F+S]};i.call(V,V.value,V)!==!1&&(V.value==null?q.push(C[F+S]):u||kt(c(b),c(V.value))===0?(U.push(V.value),u&&H.push(C[F+S])):(q.push(C[F+S]),N.push(V.value)))}const re=er(n)&&n.limit===1/0&&(typeof t!="function"||t===ws)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&l.mutate({trans:r,type:"add",values:N}).then(S=>{for(let b in S.failures)q.splice(parseInt(b),1);O(N.length,S)})).then(()=>(U.length>0||re&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:H,values:U,criteria:re,changeSpec:typeof t!="function"&&t}).then(S=>O(U.length,S))).then(()=>(q.length>0||re&&t===ws)&&l.mutate({trans:r,type:"delete",keys:q,criteria:re}).then(S=>O(q.length,S))).then(()=>C.length>F+A&&B(F+d))})};return B(0).then(()=>{if(w.length>0)throw new Bi("Error modifying one or more objects",w,x,k);return C.length})})})}delete(){var t=this._ctx,n=t.range;return er(t)&&(t.isPrimKey&&!Vh||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:u,results:c,numFailures:d})=>{if(d)throw new Bi("Could not delete some values",Object.keys(l).map(w=>l[w]),o-d);return o-d}))}):this.modify(ws)}}const ws=(e,t)=>t.value=null;function Yh(e,t){return e<t?-1:e===t?0:1}function Jh(e,t){return e>t?-1:e===t?0:1}function $t(e,t,n){var r=e instanceof hc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function tr(e){return new e.Collection(e,()=>fc("")).limit(0)}function zh(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),l=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;i(e[u],c)<0&&(l=u)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function gi(e,t,n,r){var i,s,o,l,u,c,d,w=n.length;if(!n.every(C=>typeof C=="string"))return $t(e,lc);function x(C){i=function(F){return F==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(C),s=function(F){return F==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(C),o=C==="next"?Yh:Jh;var B=n.map(function(F){return{lower:s(F),upper:i(F)}}).sort(function(F,A){return o(F.lower,A.lower)});l=B.map(function(F){return F.upper}),u=B.map(function(F){return F.lower}),c=C,d=C==="next"?"":r}x("next");var k=new e.Collection(e,()=>_n(l[0],u[w-1]+r));k._ondirectionchange=function(C){x(C)};var O=0;return k._addAlgorithm(function(C,B,F){var A=C.key;if(typeof A!="string")return!1;var $=s(A);if(t($,u,O))return!0;for(var N=null,U=O;U<w;++U){var H=zh(A,$,l[U],u[U],o,c);H===null&&N===null?O=U+1:(N===null||o(N,H)>0)&&(N=H)}return B(N!==null?function(){C.continue(N+d)}:F),!1}),k}function _n(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function fc(e){return{type:1,lower:e,upper:e}}class hc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?tr(this):new this.Collection(this,()=>_n(t,n,!r,!i))}catch{return $t(this,ln)}}equals(t){return t==null?$t(this,ln):new this.Collection(this,()=>fc(t))}above(t){return t==null?$t(this,ln):new this.Collection(this,()=>_n(t,void 0,!0))}aboveOrEqual(t){return t==null?$t(this,ln):new this.Collection(this,()=>_n(t,void 0,!1))}below(t){return t==null?$t(this,ln):new this.Collection(this,()=>_n(void 0,t,!1,!0))}belowOrEqual(t){return t==null?$t(this,ln):new this.Collection(this,()=>_n(void 0,t))}startsWith(t){return typeof t!="string"?$t(this,lc):this.between(t,t+Rn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):gi(this,(n,r)=>n.indexOf(r[0])===0,[t],Rn)}equalsIgnoreCase(t){return gi(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=fn.apply(ir,arguments);return t.length===0?tr(this):gi(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=fn.apply(ir,arguments);return t.length===0?tr(this):gi(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Rn)}anyOf(){const t=fn.apply(ir,arguments);let n=this._cmp;try{t.sort(n)}catch{return $t(this,ln)}if(t.length===0)return tr(this);const r=new this.Collection(this,()=>_n(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,o,l)=>{const u=s.key;for(;n(u,t[i])>0;)if(++i,i===t.length)return o(l),!1;return n(u,t[i])===0||(o(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[Qs,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=fn.apply(ir,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return $t(this,ln)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Qs,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,l=this._max;if(t.length===0)return tr(this);if(!t.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return $t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);const u=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let d,w=i;function x(A,$){return w(A[0],$[0])}try{d=t.reduce(function(A,$){let N=0,U=A.length;for(;N<U;++N){const H=A[N];if(r($[0],H[1])<0&&r($[1],H[0])>0){H[0]=o(H[0],$[0]),H[1]=l(H[1],$[1]);break}}return N===U&&A.push($),A},[]),d.sort(x)}catch{return $t(this,ln)}let k=0;const O=c?A=>i(A,d[k][1])>0:A=>i(A,d[k][1])>=0,C=u?A=>s(A,d[k][0])>0:A=>s(A,d[k][0])>=0;let B=O;const F=new this.Collection(this,()=>_n(d[0][0],d[d.length-1][1],!u,!c));return F._ondirectionchange=A=>{A==="next"?(B=O,w=i):(B=C,w=s),d.sort(x)},F._addAlgorithm((A,$,N)=>{for(var U=A.key;B(U);)if(++k,k===d.length)return $(N),!1;return!!function(H){return!O(H)&&!C(H)}(U)||(this._cmp(U,d[k][1])===0||this._cmp(U,d[k][0])===0||$(()=>{w===i?A.continue(d[k][0]):A.continue(d[k][1])}),!1)}),F}startsWithAnyOf(){const t=fn.apply(ir,arguments);return t.every(n=>typeof n=="string")?t.length===0?tr(this):this.inAnyRange(t.map(n=>[n,n+Rn])):$t(this,"startsWithAnyOf() only works with strings")}}function en(e){return et(function(t){return Wr(t),e(t.target.error),!1})}function Wr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Gr="storagemutated",kn="x-storagemutated-1",Pn=Lr(null,Gr);class Wh{_lock(){return Or(!_e.global),++this._reculock,this._reculock!==1||_e.global||(_e.lockOwnerFor=this),this}_unlock(){if(Or(!_e.global),--this._reculock==0)for(_e.global||(_e.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{kr(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&_e.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Or(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(r);case"MissingAPIError":throw new Se.MissingAPI(r.message,r);default:throw new Se.OpenFailed(r)}if(!this.active)throw new Se.TransactionInactive;return Or(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=et(i=>{Wr(i),this._reject(t.error)}),t.onabort=et(i=>{Wr(i),this.active&&this._reject(new Se.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=et(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Pn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return lt(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new Se.TransactionInactive);if(this._locked())return new le((s,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,o)},_e])});if(r)return On(()=>{var s=new le((o,l)=>{this._lock();const u=n(o,l,this);u&&u.then&&u.then(o,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new le((s,o)=>{var l=n(s,o,this);l&&l.then&&l.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=le.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new le((o,l)=>{r.then(u=>n._waitingQueue.push(et(o.bind(null,u))),u=>n._waitingQueue.push(et(l.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Lt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Se.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Zs(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+dc(t)}}function dc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ql(n,r=>[r.name,r])}}let Xr=e=>{try{return e.only([[]]),Xr=()=>[[]],[[]]}catch{return Xr=()=>Rn,Rn}};function eo(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>pn(r,t)}(e):t=>pn(t,e)}function La(e){return[].slice.call(e)}let Gh=0;function Br(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Xh(e,t,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:d,lowerOpen:w,upperOpen:x}=u;return c===void 0?d===void 0?null:t.upperBound(d,!!x):d===void 0?t.lowerBound(c,!!w):t.bound(c,d,!!w,!!x)}const{schema:i,hasGetAll:s}=function(u,c){const d=La(u.objectStoreNames);return{schema:{name:u.name,tables:d.map(w=>c.objectStore(w)).map(w=>{const{keyPath:x,autoIncrement:k}=w,O=bt(x),C=x==null,B={},F={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C,compound:O,keyPath:x,autoIncrement:k,unique:!0,extractKey:eo(x)},indexes:La(w.indexNames).map(A=>w.index(A)).map(A=>{const{name:$,unique:N,multiEntry:U,keyPath:H}=A,q={name:$,compound:bt(H),keyPath:H,unique:N,multiEntry:U,extractKey:eo(H)};return B[Br(H)]=q,q}),getIndexByKeyPath:A=>B[Br(A)]};return B[":id"]=F.primaryKey,x!=null&&(B[Br(x)]=F.primaryKey),F})},hasGetAll:d.length>0&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map(u=>function(c){const d=c.name;return{name:d,schema:c,mutate:function({trans:w,type:x,keys:k,values:O,range:C}){return new Promise((B,F)=>{B=et(B);const A=w.objectStore(d),$=A.keyPath==null,N=x==="put"||x==="add";if(!N&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);const{length:U}=k||O||{length:1};if(k&&O&&k.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});let H;const q=[],re=[];let S=0;const b=j=>{++S,Wr(j)};if(x==="deleteRange"){if(C.type===4)return B({numFailures:S,failures:re,results:[],lastResult:void 0});C.type===3?q.push(H=A.clear()):q.push(H=A.delete(r(C)))}else{const[j,ve]=N?$?[O,k]:[O,null]:[k,null];if(N)for(let ae=0;ae<U;++ae)q.push(H=ve&&ve[ae]!==void 0?A[x](j[ae],ve[ae]):A[x](j[ae])),H.onerror=b;else for(let ae=0;ae<U;++ae)q.push(H=A[x](j[ae])),H.onerror=b}const V=j=>{const ve=j.target.result;q.forEach((ae,Pe)=>ae.error!=null&&(re[Pe]=ae.error)),B({numFailures:S,failures:re,results:x==="delete"?k:q.map(ae=>ae.result),lastResult:ve})};H.onerror=j=>{b(j),V(j)},H.onsuccess=V})},getMany:({trans:w,keys:x})=>new Promise((k,O)=>{k=et(k);const C=w.objectStore(d),B=x.length,F=new Array(B);let A,$=0,N=0;const U=q=>{const re=q.target;F[re._pos]=re.result,++N===$&&k(F)},H=en(O);for(let q=0;q<B;++q)x[q]!=null&&(A=C.get(x[q]),A._pos=q,A.onsuccess=U,A.onerror=H,++$);$===0&&k(F)}),get:({trans:w,key:x})=>new Promise((k,O)=>{k=et(k);const C=w.objectStore(d).get(x);C.onsuccess=B=>k(B.target.result),C.onerror=en(O)}),query:function(w){return x=>new Promise((k,O)=>{k=et(k);const{trans:C,values:B,limit:F,query:A}=x,$=F===1/0?void 0:F,{index:N,range:U}=A,H=C.objectStore(d),q=N.isPrimaryKey?H:H.index(N.name),re=r(U);if(F===0)return k({result:[]});if(w){const S=B?q.getAll(re,$):q.getAllKeys(re,$);S.onsuccess=b=>k({result:b.target.result}),S.onerror=en(O)}else{let S=0;const b=B||!("openKeyCursor"in q)?q.openCursor(re):q.openKeyCursor(re),V=[];b.onsuccess=j=>{const ve=b.result;return ve?(V.push(B?ve.value:ve.primaryKey),++S===F?k({result:V}):void ve.continue()):k({result:V})},b.onerror=en(O)}})}(s),openCursor:function({trans:w,values:x,query:k,reverse:O,unique:C}){return new Promise((B,F)=>{B=et(B);const{index:A,range:$}=k,N=w.objectStore(d),U=A.isPrimaryKey?N:N.index(A.name),H=O?C?"prevunique":"prev":C?"nextunique":"next",q=x||!("openKeyCursor"in U)?U.openCursor(r($),H):U.openKeyCursor(r($),H);q.onerror=en(F),q.onsuccess=et(re=>{const S=q.result;if(!S)return void B(null);S.___id=++Gh,S.done=!1;const b=S.continue.bind(S);let V=S.continuePrimaryKey;V&&(V=V.bind(S));const j=S.advance.bind(S),ve=()=>{throw new Error("Cursor not stopped")};S.trans=w,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=et(F),S.next=function(){let ae=1;return this.start(()=>ae--?this.continue():this.stop()).then(()=>this)},S.start=ae=>{const Pe=new Promise((ue,oe)=>{ue=et(ue),q.onerror=en(oe),S.fail=oe,S.stop=Ve=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=ve,ue(Ve)}}),ge=()=>{if(q.result)try{ae()}catch(ue){S.fail(ue)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return q.onsuccess=et(ue=>{q.onsuccess=ge,ge()}),S.continue=b,S.continuePrimaryKey=V,S.advance=j,ge(),Pe},B(S)},F)})},count({query:w,trans:x}){const{index:k,range:O}=w;return new Promise((C,B)=>{const F=x.objectStore(d),A=k.isPrimaryKey?F:F.index(k.name),$=r(O),N=$?A.count($):A.count();N.onsuccess=et(U=>C(U.target.result)),N.onerror=en(B)})}}}(u)),l={};return o.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:Xr(t),schema:i}}function to({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:o,indexedDB:l},u){return{dbcore:function(d,w){return w.reduce((x,{create:k})=>({...x,...k(x)}),d)}(Xh(s,o,u),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Vi({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(o=>{const l=Io(o,i);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?dn(o,i,{get(){return this.table(i)},set(u){Ul(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function no({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Qh(e,t){return e._cfg.version-t._cfg.version}function Zh(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),l=_e.transless||_e;On(()=>{_e.trans=s,_e.transless=l,t===0?(ot(i).forEach(u=>{xs(n,u,i[u].primKey,i[u].indexes)}),to(e,n),le.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:u},c,d,w){const x=[],k=u._versions;let O=u._dbSchema=io(u,u.idbdb,w),C=!1;const B=k.filter(A=>A._cfg.version>=c);function F(){return x.length?le.resolve(x.shift()(d.idbtrans)).then(F):le.resolve()}return B.forEach(A=>{x.push(()=>{const $=O,N=A._cfg.dbschema;so(u,$,w),so(u,N,w),O=u._dbSchema=N;const U=yc($,N);U.add.forEach(q=>{xs(w,q[0],q[1].primKey,q[1].indexes)}),U.change.forEach(q=>{if(q.recreate)throw new Se.Upgrade("Not yet support for changing primary key");{const re=w.objectStore(q.name);q.add.forEach(S=>ro(re,S)),q.change.forEach(S=>{re.deleteIndex(S.name),ro(re,S)}),q.del.forEach(S=>re.deleteIndex(S))}});const H=A._cfg.contentUpgrade;if(H&&A._cfg.version>c){to(u,w),d._memoizedTables={},C=!0;let q=Yl(N);U.del.forEach(V=>{q[V]=$[V]}),no(u,[u.Transaction.prototype]),Vi(u,[u.Transaction.prototype],ot(q),q),d.schema=q;const re=Fo(H);let S;re&&Cr();const b=le.follow(()=>{if(S=H(d),S&&re){var V=mn.bind(null,null);S.then(V,V)}});return S&&typeof S.then=="function"?le.resolve(S):b.then(()=>S)}}),x.push($=>{(!C||!Uh)&&function(N,U){[].slice.call(U.db.objectStoreNames).forEach(H=>N[H]==null&&U.db.deleteObjectStore(H))}(A._cfg.dbschema,$),no(u,[u.Transaction.prototype]),Vi(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),d.schema=u._dbSchema})}),F().then(()=>{var A,$;$=w,ot(A=O).forEach(N=>{$.db.objectStoreNames.contains(N)||xs($,N,A[N].primKey,A[N].indexes)})})}(e,t,s,n).catch(o)})}function yc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!ns)o.recreate=!0,n.change.push(o);else{const l=i.idxByName,u=s.idxByName;let c;for(c in l)u[c]||o.del.push(c);for(c in u){const d=l[c],w=u[c];d?d.src!==w.src&&o.change.push(w):o.add.push(w)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function xs(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>ro(i,s)),i}function ro(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function io(e,t,n){const r={};return Li(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const l=Zs(dc(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),u=[];for(let d=0;d<s.indexNames.length;++d){const w=s.index(s.indexNames[d]);o=w.keyPath;var c=Zs(w.name,o,!!w.unique,!!w.multiEntry,!1,o&&typeof o!="string",!1);u.push(c)}r[i]=pc(i,l,u)}),r}function so({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const u=o.indexNames[l],c=o.index(u).keyPath,d=typeof c=="string"?c:"["+Li(c).join("+")+"]";if(t[s]){const w=t[s].idxByName[d];w&&(w.name=u,delete t[s].idxByName[d],t[s].idxByName[u]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Qe.WorkerGlobalScope&&Qe instanceof Qe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class ed{_parseStoresSpec(t,n){ot(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((o,l)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Zs(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),bt(c),l===0)}),s=i.shift();if(s.multi)throw new Se.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),n[r]=pc(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Dt(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(o=>{Dt(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,no(n,[n._allTables,n,n.Transaction.prototype]),Vi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ot(s),s),n._storeNames=ot(s),this}upgrade(t){return this._cfg.contentUpgrade=Bo(this._cfg.contentUpgrade||Ye,t),this}}function Uo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new st(rs,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Vo(e){return e&&typeof e.databases=="function"}function oo(e){return On(function(){return _e.letThrough=!0,e()})}function td(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function nd(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?lt(t.dbOpenError):e);on&&(t.openCanceller._stackHolder=Xn()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Se.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,l=!1;return le.race([r,(typeof navigator>"u"?le.resolve():td()).then(()=>new le((u,c)=>{if(i(),!n)throw new Se.MissingAPI;const d=e.name,w=t.autoSchema?n.open(d):n.open(d,Math.round(10*e.verno));if(!w)throw new Se.MissingAPI;w.onerror=en(c),w.onblocked=et(e._fireOnBlocked),w.onupgradeneeded=et(x=>{if(o=w.transaction,t.autoSchema&&!e._options.allowEmptyDB){w.onerror=Wr,o.abort(),w.result.close();const O=n.deleteDatabase(d);O.onsuccess=O.onerror=et(()=>{c(new Se.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{o.onerror=en(c);var k=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;l=k<1,e._novip.idbdb=w.result,Zh(e,k/10,o,c)}},c),w.onsuccess=et(()=>{o=null;const x=e._novip.idbdb=w.result,k=Li(x.objectStoreNames);if(k.length>0)try{const C=x.transaction((O=k).length===1?O[0]:O,"readonly");t.autoSchema?function({_novip:B},F,A){B.verno=F.version/10;const $=B._dbSchema=io(0,F,A);B._storeNames=Li(F.objectStoreNames,0),Vi(B,[B._allTables],ot($),$)}(e,x,C):(so(e,e._dbSchema,C),function(B,F){const A=yc(io(0,B.idbdb,F),B._dbSchema);return!(A.add.length||A.change.some($=>$.add.length||$.change.length))}(e,C)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),to(e,C)}catch{}var O;Mr.push(e),x.onversionchange=et(C=>{t.vcFired=!0,e.on("versionchange").fire(C)}),x.onclose=et(C=>{e.on("close").fire(C)}),l&&function({indexedDB:C,IDBKeyRange:B},F){!Vo(C)&&F!==rs&&Uo(C,B).put({name:F}).catch(Ye)}(e._deps,d),u()},c)}))]).then(()=>(i(),t.onReadyBeingFired=[],le.resolve(oo(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(Bo,Ye);return t.onReadyBeingFired=[],le.resolve(oo(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),lt(u)}).finally(()=>{t.openComplete=!0,s()})}function ao(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return o=>{var l=s(o),u=l.value;return l.done?u:u&&typeof u.then=="function"?u.then(n,r):bt(u)?Promise.all(u).then(n,r):n(u)}}return i(t)()}function rd(e,t,n){var r=arguments.length;if(r<2)throw new Se.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Jl(i),n]}function mc(e,t,n,r,i){return le.resolve().then(()=>{const s=_e.transless||_e,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(w){return w.name===Lo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>mc(e,t,n,null,i))):lt(w)}const u=Fo(i);let c;u&&Cr();const d=le.follow(()=>{if(c=i.call(o,o),c)if(u){var w=mn.bind(null,null);c.then(w,w)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=ao(c))},l);return(c&&typeof c.then=="function"?le.resolve(c).then(w=>o.active?w:lt(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>c)).then(w=>(r&&o._resolve(),o._completion.then(()=>w))).catch(w=>(o._reject(w),lt(w)))})}function vi(e,t,n){const r=bt(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const id={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function o(d,w,x){const k=Br(d),O=i[k]=i[k]||[],C=d==null?0:typeof d=="string"?1:d.length,B=w>0,F={...x,isVirtual:B,keyTail:w,keyLength:C,extractKey:eo(d),unique:!B&&x.unique};return O.push(F),F.isPrimaryKey||s.push(F),C>1&&o(C===2?d[0]:d.slice(0,C-1),w+1,x),O.sort((A,$)=>A.keyTail-$.keyTail),F}const l=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const d of r.indexes)o(d.keyPath,0,d);function u(d){const w=d.query.index;return w.isVirtual?{...d,query:{index:w,range:(x=d.query.range,k=w.keyTail,{type:x.type===1?2:x.type,lower:vi(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,k),lowerOpen:!0,upper:vi(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,k),upperOpen:!0})}}:d;var x,k}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:function(d){const w=i[Br(d)];return w&&w[0]}},count:d=>n.count(u(d)),query:d=>n.query(u(d)),openCursor(d){const{keyTail:w,isVirtual:x,keyLength:k}=d.query.index;return x?n.openCursor(u(d)).then(O=>O&&function(C){return Object.create(C,{continue:{value:function(F){F!=null?C.continue(vi(F,d.reverse?e.MAX_KEY:e.MIN_KEY,w)):d.unique?C.continue(C.key.slice(0,k).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,w)):C.continue()}},continuePrimaryKey:{value(F,A){C.continuePrimaryKey(vi(F,e.MAX_KEY,w),A)}},primaryKey:{get:()=>C.primaryKey},key:{get(){const F=C.key;return k===1?F[0]:F.slice(0,k)}},value:{get:()=>C.value}})}(O)):n.openCursor(d)}}}}}};function Ho(e,t,n,r){return n=n||{},r=r||"",ot(e).forEach(i=>{if(Lt(t,i)){var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const l=Rs(s);l!==Rs(o)?n[r+i]=t[i]:l==="Object"?Ho(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0}),ot(t).forEach(i=>{Lt(e,i)||(n[r+i]=t[i])}),n}const sd={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=_e.trans,{deleting:l,creating:u,updating:c}=o.table(t).hook;switch(s.type){case"add":if(u.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"put":if(u.fire===Ye&&c.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"delete":if(l.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"deleteRange":if(l.fire===Ye)break;return o._promise("readwrite",()=>function(x){return w(x.trans,x.range,1e4)}(s),!0)}return n.mutate(s);function d(x){const k=_e.trans,O=x.keys||function(C,B){return B.type==="delete"?B.keys:B.keys||B.values.map(C.extractKey)}(r,x);if(!O)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?{...x,keys:O}:{...x}).type!=="delete"&&(x.values=[...x.values]),x.keys&&(x.keys=[...x.keys]),function(C,B,F){return B.type==="add"?Promise.resolve([]):C.getMany({trans:B.trans,keys:F,cache:"immutable"})}(n,x,O).then(C=>{const B=O.map((F,A)=>{const $=C[A],N={onerror:null,onsuccess:null};if(x.type==="delete")l.fire.call(N,F,$,k);else if(x.type==="add"||$===void 0){const U=u.fire.call(N,F,x.values[A],k);F==null&&U!=null&&(F=U,x.keys[A]=F,r.outbound||Xt(x.values[A],r.keyPath,F))}else{const U=Ho($,x.values[A]),H=c.fire.call(N,U,F,$,k);if(H){const q=x.values[A];Object.keys(H).forEach(re=>{Lt(q,re)?q[re]=H[re]:Xt(q,re,H[re])})}}return N});return n.mutate(x).then(({failures:F,results:A,numFailures:$,lastResult:N})=>{for(let U=0;U<O.length;++U){const H=A?A[U]:O[U],q=B[U];H==null?q.onerror&&q.onerror(F[U]):q.onsuccess&&q.onsuccess(x.type==="put"&&C[U]?x.values[U]:H)}return{failures:F,results:A,numFailures:$,lastResult:N}}).catch(F=>(B.forEach(A=>A.onerror&&A.onerror(F)),Promise.reject(F)))})}function w(x,k,O){return n.query({trans:x,values:!1,query:{index:r,range:k},limit:O}).then(({result:C})=>d({type:"delete",keys:C,trans:x}).then(B=>B.numFailures>0?Promise.reject(B.failures[0]):C.length<O?{failures:[],numFailures:0,lastResult:void 0}:w(x,{...k,lower:C[C.length-1],lowerOpen:!0},O)))}}}}})};function gc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)kt(t.keys[i],e[s])===0&&(r.push(n?ti(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const od={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=gc(r.keys,r.trans._cache,r.cache==="clone");return i?le.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?ti(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function qo(e){return!("from"in e)}const un=function(e,t){if(!this){const n=new un;return e&&"d"in e&&Dt(n,e),n}Dt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Qr(e,t,n){const r=kt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(qo(e))return Dt(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(kt(n,e.from)<0)return i?Qr(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ba(e);if(kt(t,e.to)>0)return s?Qr(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ba(e);kt(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),kt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Hi(e,i),s&&o&&Hi(e,s)}function Hi(e,t){qo(t)||function n(r,{from:i,to:s,l:o,r:l}){Qr(r,i,s),o&&n(r,o),l&&n(r,l)}(e,t)}function ad(e,t){const n=lo(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=lo(e);let o=s.next(i.from),l=o.value;for(;!r.done&&!o.done;){if(kt(l.from,i.to)<=0&&kt(l.to,i.from)>=0)return!0;kt(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(o=s.next(i.from)).value}return!1}function lo(e){let t=qo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&kt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||kt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ba(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],o[i]=l[s],e[s]=o,o.d=ja(o)}e.d=ja(e)}function ja({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}br(un.prototype,{add(e){return Hi(this,e),this},addKey(e){return Qr(this,e,e),this},addKeys(e){return e.forEach(t=>Qr(this,t,t)),this},[Ks](){return lo(this)}});const ld={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new un(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:l,outbound:u}=o,c={...i,mutate:x=>{const k=x.trans,O=k.mutatedParts||(k.mutatedParts={}),C=H=>{const q=`idb://${t}/${r}/${H}`;return O[q]||(O[q]=new un)},B=C(""),F=C(":dels"),{type:A}=x;let[$,N]=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[[],x.values]:[];const U=x.trans._cache;return i.mutate(x).then(H=>{if(bt($)){A!=="delete"&&($=H.results),B.addKeys($);const q=gc($,U);q||A==="add"||F.addKeys($),(q||N)&&function(re,S,b,V){function j(ve){const ae=re(ve.name||"");function Pe(ue){return ue!=null?ve.extractKey(ue):null}const ge=ue=>ve.multiEntry&&bt(ue)?ue.forEach(oe=>ae.addKey(oe)):ae.addKey(ue);(b||V).forEach((ue,oe)=>{const Ve=b&&Pe(b[oe]),Ue=V&&Pe(V[oe]);kt(Ve,Ue)!==0&&(Ve!=null&&ge(Ve),Ue!=null&&ge(Ue))})}S.indexes.forEach(j)}(C,s,q,N)}else if($){const q={from:$.lower,to:$.upper};F.add(q),B.add(q)}else B.add(n),F.add(n),s.indexes.forEach(q=>C(q.name).add(n));return H})}},d=({query:{index:x,range:k}})=>{var O,C;return[x,new un((O=k.lower)!==null&&O!==void 0?O:e.MIN_KEY,(C=k.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},w={get:x=>[o,new un(x.key)],getMany:x=>[o,new un().addKeys(x.keys)],count:d,query:d,openCursor:d};return ot(w).forEach(x=>{c[x]=function(k){const{subscr:O}=_e;if(O){const C=N=>{const U=`idb://${t}/${r}/${N}`;return O[U]||(O[U]=new un)},B=C(""),F=C(":dels"),[A,$]=w[x](k);if(C(A.name||"").add($),!A.isPrimaryKey){if(x!=="count"){const N=x==="query"&&u&&k.values&&i.query({...k,values:!1});return i[x].apply(this,arguments).then(U=>{if(x==="query"){if(u&&k.values)return N.then(({result:q})=>(B.addKeys(q),U));const H=k.values?U.result.map(l):U.result;k.values?B.addKeys(H):F.addKeys(H)}else if(x==="openCursor"){const H=U,q=k.values;return H&&Object.create(H,{key:{get:()=>(F.addKey(H.primaryKey),H.key)},primaryKey:{get(){const re=H.primaryKey;return F.addKey(re),re}},value:{get:()=>(q&&B.addKey(H.primaryKey),H.value)}})}return U})}F.add(n)}}return i[x].apply(this,arguments)}}),c}}}};class st{constructor(t,n){this._middlewares={},this.verno=0;const r=st.dependencies;this._options=n={addons:st.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ye,dbReadyPromise:null,cancelOpen:Ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new le(l=>{s.dbReadyResolve=l}),s.openCanceller=new le((l,u)=>{s.cancelOpen=u}),this._state=s,this.name=t,this.on=Lr(this,"populate","blocked","versionchange","close",{ready:[Bo,Ye]}),this.on.ready.subscribe=Vl(this.on.ready.subscribe,l=>(u,c)=>{st.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||le.resolve().then(u),c&&l(u);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(u),c&&l(u);else{l(u);const w=this;c||l(function x(){w.on.ready.unsubscribe(u),w.on.ready.unsubscribe(x)})}})}),this.Collection=(o=this,Dr(qh.prototype,function(l,u){this.db=o;let c=uc,d=null;if(u)try{c=u()}catch(O){d=O}const w=l._ctx,x=w.table,k=x.hook.reading.fire;this._ctx={table:x,index:w.index,isPrimKey:!w.index||x.schema.primKey.keyPath&&w.index===x.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:w.or,valueMapper:k!==Jr?k:null}})),this.Table=function(l){return Dr(Hh.prototype,function(u,c,d){this.db=l,this._tx=d,this.name=u,this.schema=c,this.hook=l._allTables[u]?l._allTables[u].hook:Lr(null,{creating:[$h,Ye],reading:[Ph,Jr],updating:[Ih,Ye],deleting:[Nh,Ye]})})}(this),this.Transaction=function(l){return Dr(Wh.prototype,function(u,c,d,w,x){this.db=l,this.mode=u,this.storeNames=c,this.schema=d,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=Lr(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le((k,O)=>{this._resolve=k,this._reject=O}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},k=>{var O=this.active;return this.active=!1,this.on.error.fire(k),this.parent?this.parent._reject(k):O&&this.idbtrans&&this.idbtrans.abort(),lt(k)})})}(this),this.Version=function(l){return Dr(ed.prototype,function(u){this.db=l,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Dr(hc.prototype,function(u,c,d){this.db=l,this._ctx={table:u,index:c===":id"?null:c,or:d};const w=l._deps.indexedDB;if(!w)throw new Se.MissingAPI;this._cmp=this._ascending=w.cmp.bind(w),this._descending=(x,k)=>w.cmp(k,x),this._max=(x,k)=>w.cmp(x,k)>0?x:k,this._min=(x,k)=>w.cmp(x,k)<0?x:k,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Xr(n.IDBKeyRange),this._createTransaction=(l,u,c,d)=>new this.Transaction(l,u,c,this._options.chromeTransactionDurability,d),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Mr.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(l))},this.use(id),this.use(sd),this.use(ld),this.use(od),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new Se.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Qh),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||_e.letThrough||this._vip)?t():new le((n,r)=>{if(this._state.openComplete)return r(new Se.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Se.DatabaseClosed);this.open().catch(Ye)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return nd(this)}_close(){const t=this._state,n=Mr.indexOf(this);if(n>=0&&Mr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new le(r=>{t.dbReadyResolve=r}),t.openCanceller=new le((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Se.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new le((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=et(()=>{(function({indexedDB:l,IDBKeyRange:u},c){!Vo(l)&&c!==rs&&Uo(l,u).delete(c).catch(Ye)})(this._deps,this.name),r()}),o.onerror=en(i),o.onblocked=this._fireOnBlocked};if(t)throw new Se.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ot(this._allTables).map(t=>this._allTables[t])}transaction(){const t=rd.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=_e.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(c=>{var d=c instanceof this.Table?c.name:c;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===gs)o=gs;else{if(t!="rw"&&t!=vs)throw new Se.InvalidArgument("Invalid transaction mode: "+t);o=vs}if(i){if(i.mode===gs&&o===vs){if(!s)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new Se.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(d,w)=>{w(c)}):lt(c)}const u=mc.bind(null,this,o,l,i,r);return i?i._promise(o,u,"lock"):_e.trans?kr(_e.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!Lt(this._allTables,t))throw new Se.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const cd=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ud{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[cd](){return this}}function vc(e,t){return ot(t).forEach(n=>{Hi(e[n]||(e[n]=new un),t[n])}),e}function fd(e){let t,n=!1;const r=new ud(i=>{const s=Fo(e);let o=!1,l={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Pn.storagemutated.unsubscribe(k)}};i.start&&i.start(c);let d=!1,w=!1;function x(){return ot(u).some(C=>l[C]&&ad(l[C],u[C]))}const k=C=>{vc(l,C),x()&&O()},O=()=>{if(d||o)return;l={};const C={},B=function(F){s&&Cr();const A=()=>On(e,{subscr:F,trans:null}),$=_e.trans?kr(_e.transless,A):A();return s&&$.then(mn,mn),$}(C);w||(Pn(Gr,k),w=!0),d=!0,Promise.resolve(B).then(F=>{n=!0,t=F,d=!1,o||(x()?O():(l={},u=C,i.next&&i.next(F)))},F=>{d=!1,n=!1,i.error&&i.error(F),c.unsubscribe()})};return O(),c});return r.hasValue=()=>n,r.getValue=()=>t,r}let co;try{co={indexedDB:Qe.indexedDB||Qe.mozIndexedDB||Qe.webkitIndexedDB||Qe.msIndexedDB,IDBKeyRange:Qe.IDBKeyRange||Qe.webkitIDBKeyRange}}catch{co={indexedDB:null,IDBKeyRange:null}}const Mn=st;function Ai(e){let t=hn;try{hn=!0,Pn.storagemutated.fire(e)}finally{hn=t}}br(Mn,{...ki,delete:e=>new Mn(e,{addons:[]}).delete(),exists:e=>new Mn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Vo(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==rs)):Uo(t,n).toCollection().primaryKeys()}(Mn.dependencies).then(e)}catch{return lt(new Se.MissingAPI)}},defineClass:()=>function(e){Dt(this,e)},ignoreTransaction:e=>_e.trans?kr(_e.transless,e):e(),vip:oo,async:function(e){return function(){try{var t=ao(e.apply(this,arguments));return t&&typeof t.then=="function"?t:le.resolve(t)}catch(n){return lt(n)}}},spawn:function(e,t,n){try{var r=ao(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:le.resolve(r)}catch(i){return lt(i)}},currentTransaction:{get:()=>_e.trans||null},waitFor:function(e,t){const n=le.resolve(typeof e=="function"?Mn.ignoreTransaction(e):e).timeout(t||6e4);return _e.trans?_e.trans.waitFor(n):n},Promise:le,debug:{get:()=>on,set:e=>{Wl(e,e==="dexie"?()=>!0:cc)}},derive:dr,extend:Dt,props:br,override:Vl,Events:Lr,on:Pn,liveQuery:fd,extendObservabilitySet:vc,getByKeyPath:pn,setByKeyPath:Xt,delByKeyPath:function(e,t){typeof t=="string"?Xt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Xt(e,n,void 0)})},shallowClone:Yl,deepClone:ti,getObjectDiff:Ho,cmp:kt,asap:Hl,minKey:Qs,addons:[],connections:Mr,errnames:Lo,dependencies:co,semVer:$a,version:$a.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Mn.maxKey=Xr(Mn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pn(Gr,e=>{if(!hn){let t;ns?(t=document.createEvent("CustomEvent"),t.initCustomEvent(kn,!0,!0,e)):t=new CustomEvent(kn,{detail:e}),hn=!0,dispatchEvent(t),hn=!1}}),addEventListener(kn,({detail:e})=>{hn||Ai(e)}));let hn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(kn);typeof e.unref=="function"&&e.unref(),Pn(Gr,t=>{hn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ai(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Pn(Gr,t=>{try{hn||(typeof localStorage<"u"&&localStorage.setItem(kn,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:kn,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===kn){const n=JSON.parse(t.newValue);n&&Ai(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===kn&&Ai(t.changedParts)})}le.rejectionMapper=function(e,t){if(!e||e instanceof pr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ea[e.name])return e;var n=new Ea[e.name](t||e.message,e);return"stack"in e&&dn(n,"stack",{get:function(){return this.inner.stack}}),n},Wl(on,cc);const _t=new st("avito_scraper");function hd(e=1){_t.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}async function dd(e){const t=JSON.parse(JSON.stringify(e));t.profilesLinks.forEach(r=>r.status="new"),(await _t.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?_t.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):_t.reviewsFilter.add({...t,key:"reviewsFilter"})}async function pd(){const e=await _t.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(e.length&&e[0]){const t={...e[0]};return delete t.key,t}return null}async function yd(){await _t.reviewsFilter.where("key").equals("reviewsFilter").delete()}const Oe=xr({profilesLinks:[{url:"",status:"new"}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,scrollInterval:2,openTabInterval:2,deliveryOnly:!1});function bc(){return Oe.profilesLinks.find(t=>t.status==="new")||null}function Pi(e){return e&&Oe.profilesLinks.find(n=>n.url===e)||null}function Ra(){Oe.profilesLinks.push({status:"new",url:""})}function md(e){Oe.profilesLinks.splice(e,1)}function gd(e,t){const n=Pi(e);n&&(n.info=`
            ${t.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
            ${t.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
            ${t.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
            ${t.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
            ${t.deliveryInfo}
        `)}const vd=["onSubmit"],bd={class:"grid grid-cols-4 gap-5"},_d={class:"col-span-4"},wd=R("div",{class:"text-sm font-medium mb-2"},"Ссылки на профили",-1),xd={class:"flex items-center gap-4"},Cd={class:"flex-none select-none"},kd={key:0,class:"font-icon text-3xl block text-green-400"},Dd={key:1,class:"font-icon text-3xl block text-red-400"},Sd={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Td={key:3,class:"font-icon text-3xl block text-gray-400"},Ed=["onUpdate:modelValue","onInput"],Od={key:0,class:"flex-none cursor-pointer select-none"},Ad=["onClick"],Pd={class:"flex-none cursor-pointer select-none ml-auto"},$d=["innerHTML"],Nd=R("div",{class:"mb-2 text-sm font-medium"},"Дата от",-1),Id=R("div",{class:"mb-2 text-sm font-medium"},"Дата до",-1),Fd={class:"col-span-2"},Md=R("div",{class:"mb-2 text-sm font-medium"},"Название товара",-1),Ld=R("div",{class:"mb-2 text-sm font-medium"},"Рейтинг от",-1),Bd=R("div",{class:"mb-2 text-sm font-medium"},"Рейтинг до",-1),jd=R("div",{class:"mb-2 text-sm font-medium"},"Интервал прокрутки отзывов (сек.)",-1),Rd=R("div",{class:"mb-2 text-sm font-medium"},"Интервал открытия страниц (сек.)",-1),Kd={class:"col-span-4 select-none"},Ud={class:"inline-block"},Vd=R("div",{class:"mb-3 text-sm font-medium"},"Только с доставкой",-1),Hd={class:"flex items-center gap-4 mt-10"},qd=sn({__name:"ReviewsFilter",setup(e,{expose:t}){const n=ei(),r=rn({}),i={dateFrom:null,dateTo:null},s={autoClose:!0,onSelect:({formattedDate:k,datepicker:O})=>{O.$el.id==="dateFrom"&&(Oe.dateFrom=k),O.$el.id==="dateTo"&&(Oe.dateTo=k)}};function o(k){k.info=""}async function l(){const k=await pd();k&&(Oe.profilesLinks=k.profilesLinks,Oe.ratingFrom=k.ratingFrom,Oe.ratingTo=k.ratingTo,Oe.deliveryOnly=k.deliveryOnly,Oe.productName=k.productName,Oe.scrollInterval=k.scrollInterval,Oe.openTabInterval=k.openTabInterval,i.dateFrom.selectDate(k.dateFrom),i.dateTo.selectDate(k.dateTo))}async function u(){window.confirm("Сбросить фильтр ?")&&(Oe.profilesLinks=[{url:"",status:"new"}],Oe.productName="",Oe.ratingFrom=4,Oe.ratingTo=5,Oe.scrollInterval=2,Oe.openTabInterval=2,Oe.deliveryOnly=!1,i.dateFrom.selectDate(Ta()),i.dateTo.selectDate(new Date),await yd(),n==null||n.show("warning",dt.FilterCleared))}async function c(){try{const k={...Oe};k.dateFrom=i.dateFrom.selectedDates[0].toString(),k.dateTo=i.dateTo.selectedDates[0].toString(),await dd(k),n==null||n.show("success",dt.FilterSaved)}catch{}}async function d(){await c()}async function w(){await c(),await x()}async function x(){try{const k=bc();if(k){const O=await vh(k==null?void 0:k.url);r.value=O,O.id&&chrome.tabs.sendMessage(O.id,{action:"reviews-parsing-start",reviewsFilterFields:Oe,currentUrl:k.url})}}catch{n==null||n.show("error",dt.TabOpenError)}}return t({onSubmit:x}),Gn(()=>{i.dateFrom=new Sa("#dateFrom",s),i.dateTo=new Sa("#dateTo",s),i.dateFrom.selectDate(Ta()),i.dateTo.selectDate(new Date),setTimeout(()=>{l()},0)}),Qi(()=>{i.dateFrom.destroy(),i.dateTo.destroy()}),(k,O)=>(he(),De("form",{class:"pb-20",onSubmit:Ft(w,["prevent"])},[R("div",bd,[R("div",_d,[wd,(he(!0),De(rt,null,Un(ke(Oe).profilesLinks,(C,B)=>(he(),De("div",{key:B,class:pt(B>0?"mt-5":"")},[R("div",xd,[R("div",Cd,[C.status==="success"?(he(),De("i",kd,"check_circle")):We("",!0),C.status==="error"?(he(),De("i",Dd,"cancel")):We("",!0),C.status==="wait"?(he(),De("i",Sd,"rotate_right")):We("",!0),C.status==="new"?(he(),De("i",Td,"watch_later")):We("",!0)]),Qt(R("input",{"onUpdate:modelValue":F=>C.url=F,tabindex:"1",type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",onInput:F=>o(C)},null,40,Ed),[[Zt,C.url]]),ke(Oe).profilesLinks.length>1?(he(),De("div",Od,[R("i",{class:"font-icon text-3xl block text-red-400",onClick:F=>ke(md)(B)},"remove_circle_outline",8,Ad)])):We("",!0),R("div",Pd,[R("i",{class:"font-icon text-3xl block text-green-400",onClick:O[0]||(O[0]=(...F)=>ke(Ra)&&ke(Ra)(...F))},"add_circle_outline")])]),C.info?(he(),De("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:C.info},null,8,$d)):We("",!0)],2))),128))]),R("div",null,[Nd,Qt(R("input",{"onUpdate:modelValue":O[1]||(O[1]=C=>ke(Oe).dateFrom=C),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).dateFrom]])]),R("div",null,[Id,Qt(R("input",{"onUpdate:modelValue":O[2]||(O[2]=C=>ke(Oe).dateTo=C),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).dateTo]])]),R("div",Fd,[Md,Qt(R("input",{"onUpdate:modelValue":O[3]||(O[3]=C=>ke(Oe).productName=C),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).productName]])]),R("div",null,[Ld,Qt(R("input",{"onUpdate:modelValue":O[4]||(O[4]=C=>ke(Oe).ratingFrom=C),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).ratingFrom]])]),R("div",null,[Bd,Qt(R("input",{"onUpdate:modelValue":O[5]||(O[5]=C=>ke(Oe).ratingTo=C),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).ratingTo]])]),R("div",null,[jd,Qt(R("input",{"onUpdate:modelValue":O[6]||(O[6]=C=>ke(Oe).scrollInterval=C),tabindex:"10",type:"number",min:"0",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).scrollInterval]])]),R("div",null,[Rd,Qt(R("input",{"onUpdate:modelValue":O[7]||(O[7]=C=>ke(Oe).openTabInterval=C),tabindex:"11",type:"number",min:"0",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,ke(Oe).openTabInterval]])]),R("div",Kd,[R("label",Ud,[Vd,tt(gh,{tabindex:6,modelValue:ke(Oe).deliveryOnly,"onUpdate:modelValue":O[8]||(O[8]=C=>ke(Oe).deliveryOnly=C)},null,8,["modelValue"])])])]),R("div",Hd,[tt(Mt,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:Tt(()=>[It("Начать парсинг")]),_:1}),tt(Mt,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:Ft(d,["stop","prevent"])},{default:Tt(()=>[It("Сохранить фильтр")]),_:1},8,["onClick"]),tt(Mt,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:Ft(u,["stop","prevent"])},{default:Tt(()=>[It("Сбросить фильтр")]),_:1},8,["onClick"])])],40,vd))}}),jr=rn([]),Cs=rn([]),_c=xr([]);function Ka(e,t="productName"){const n=_c.filter(r=>r.profileUrl===e);return t==="productName"&&n.sort((r,i)=>r.productName.localeCompare(i.productName)),t==="rating"&&n.sort((r,i)=>i.rating-r.rating),n.length?n:[]}async function Yd(e,t){let n=[];if(e===0&&t===0){const r=await _t.savedProfiles.toArray();r.length&&(n=r)}return n}async function Jd(e){let t=JSON.parse(JSON.stringify(e)),n=null,r={url:t.url,name:t.name,comment:t.comment,savedDate:Date.now(),parsingResults:[{parsingDate:t.parsingDate,rating:t.rating,reviewsCount:t.reviewsCount,deliveryInfo:t.deliveryInfo,subscribers:t.subscribers}]},i=await _t.savedProfiles.add(r);if(i){let s=await _t.savedProfiles.where(":id").equals(i).toArray();s.length&&s[0]&&(n=s[0])}return n||null}async function zd(e){let t=await _t.savedProfiles.where("url").equals(e).toArray();return t.length&&t[0]?t[0]:null}async function Wd(e){let t=JSON.parse(JSON.stringify(e)),n=await _t.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];if(r.parsingResults.unshift({parsingDate:t.parsingDate,rating:t.rating,reviewsCount:t.reviewsCount,deliveryInfo:t.deliveryInfo,subscribers:t.subscribers}),await _t.savedProfiles.put(r))return!0}return!1}async function Gd(e,t){let n=JSON.parse(JSON.stringify(t));return delete n.opened,delete n.loading,!!await _t.savedProfiles.put(n)}async function Xd(e){await _t.savedProfiles.delete(e)}const Qd={class:"space-y-2"},Zd={class:"flex items-center"},ep={class:"font-bold"},tp={class:"flex items-center"},np=["href"],rp={class:"flex items-center"},ip={class:"font-bold"},sp={class:"flex items-center"},op={class:"font-bold"},ap={class:"flex items-center"},lp={class:"font-bold"},cp={class:"flex items-center"},up={class:"font-bold"},fp={class:"flex items-center"},hp=R("div",{class:"mr-3 opacity-80"},"Дата парсинга:",-1),dp={class:"font-bold"},pp={key:0,class:"flex items-center"},yp=R("div",{class:"mr-3 opacity-80"},"Дата сохранения:",-1),mp={class:"font-bold"},gp={class:"flex items-center"},vp=R("div",{class:"mr-3 opacity-80"},"Найден в базе:",-1),bp={class:"font-bold"},_p={key:1,class:"flex items-center"},wp=R("div",{class:"mr-3 opacity-80"},"ID:",-1),xp={class:"font-bold"},Cp={key:2,class:"flex items-center"},kp=R("div",{class:"mr-3 opacity-80"},"Комментарий:",-1),Dp={class:"font-bold"},Sp={key:3},Tp=R("div",{class:"mb-3 opacity-80"},"Комментарий:",-1),Ep=["onUpdate:modelValue"],Op={class:"flex items-center gap-4 mt-8 empty:hidden"},Ap={key:0,class:"mt-10"},Pp={class:"mb-8 font-bold text-xl"},$p={class:"w-full relative"},Np={class:"text-[16px] sticky top-[70px] bg-gray-600"},Ip={class:"text-left px-4 py-2 border border-white border-opacity-50"},Fp=["onClick"],Mp=R("div",null,"Дата",-1),Lp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Bp=["onClick"],jp=R("div",null,"Оценка",-1),Rp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Kp=["onClick"],Up=R("div",null,"Название товара",-1),Vp=R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"}," Доставка ",-1),Hp={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},qp={class:"px-4 py-2 border border-white border-opacity-50"},Yp={class:"flex-none flex items-center"},Jp={class:"text-base font-medium mr-1"},zp={class:"text-[18px] font-icon text-yellow-400"},Wp={class:"px-4 py-2 border border-white border-opacity-50"},Gp={class:"flex items-center gap-4"},Xp=["onClick"],Qp={class:"px-4 py-2 border border-white border-opacity-50"},Zp={key:1,class:"text-center text-xl font-bold mt-10"},ey={key:1,class:"text-center text-xl font-bold"},ty=sn({__name:"ProfileInfoList",setup(e){const t=ei();function n(l){Bs(l),t==null||t.show("success",dt.ProductNameCopied)}function r(l,u){l.reviewsSortedBy=u,l.reviewsList=Ka(l.url,u)}function i(l){l.opened===void 0&&(l.opened=!0),l.opened=!l.opened}async function s(l){try{l.loading=!0;const u=await Jd(l);if(u)l.id=u.id,l.savedDate=u.savedDate,l.existsInDataBase=!0;else throw new Error;t==null||t.show("success",dt.ProfileCreated)}catch(u){console.log(u),t==null||t.show("error",dt.ProfileCreateError)}finally{l.loading=!1}}async function o(l){var c;let u="";u+=`${l.name}
`,u+=`${l.url}
`,u+=`${l.rating}
`,u+=`${l.reviewsCount}
`,u+=`${l.subscribers}
`,u+=`${l.deliveryInfo}



`,u+=`${sr(l.parsingDate)}
`,(c=l.reviewsList)==null||c.forEach(d=>{let w=new Date(d.date),x=new Intl.DateTimeFormat("ru",{month:"2-digit"}).format(w),k=new Intl.DateTimeFormat("ru",{year:"numeric"}).format(w);u+=`${d.productName}~${x}.${k}${d.delivery?"~Delivery":""}
`}),u&&(Bs(u),t==null||t.show("success",dt.InfoCopied))}return Gn(()=>{jr.value.forEach(async l=>{l.reviewsList=Ka(l.url);const u=await zd(l.url);u&&(l.existsInDataBase=!0,l.id=u.id,l.savedDate=u.savedDate,l.comment=u.comment)})}),(l,u)=>ke(jr).length?(he(!0),De(rt,{key:0},Un(ke(jr),c=>{var d,w,x;return he(),De("div",{key:c.url,class:"rounded-xl shadow-xl bg-gray-600 p-5 mb-5 text-[16px]"},[R("div",null,[R("div",Qd,[R("div",Zd,[R("div",ep,je(c.name),1)]),R("div",tp,[R("a",{href:c.url,target:"_blank"},je(c.url),9,np)]),R("div",rp,[R("div",ip,je(c.rating),1)]),R("div",sp,[R("div",op,je(c.reviewsCount),1)]),R("div",ap,[R("div",lp,je(c.subscribers),1)]),R("div",cp,[R("div",up,je(c.deliveryInfo),1)]),R("div",fp,[hp,R("div",dp,je(ke(sr)(c.parsingDate)),1)]),c.savedDate?(he(),De("div",pp,[yp,R("div",mp,je(ke(sr)(c.savedDate)),1)])):We("",!0),R("div",gp,[vp,R("div",bp,[R("strong",{class:pt([c.existsInDataBase?"text-green-400":"text-red-400"])},je(c.existsInDataBase?"Да":"Нет"),3)])]),c.id?(he(),De("div",_p,[wp,R("div",xp,je(c.id),1)])):We("",!0),c.existsInDataBase?(he(),De("div",Cp,[kp,R("em",Dp,je(c.comment),1)])):(he(),De("div",Sp,[Tp,Qt(R("input",{"onUpdate:modelValue":k=>c.comment=k,type:"search",required:"",class:"text-base w-[640px] max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,Ep),[[Zt,c.comment]])]))]),R("div",null,[R("div",Op,[(d=c.reviewsList)!=null&&d.length?(he(),Nt(Mt,{key:0,type:"button",theme:"success",icon:"content_copy",onClick:Ft(k=>o(c),["prevent"])},{default:Tt(()=>[It("Копировать результаты")]),_:2},1032,["onClick"])):We("",!0),c.existsInDataBase?We("",!0):(he(),Nt(Mt,{key:1,type:"button",icon:"cloud_upload",onClick:Ft(k=>s(c),["prevent"])},{default:Tt(()=>[It("Сохранить в базу")]),_:2},1032,["onClick"])),(w=c.reviewsList)!=null&&w.length?(he(),Nt(Mt,{key:2,theme:"warning",type:"button",icon:c.opened?"keyboard_arrow_up":"keyboard_arrow_down",onClick:Ft(k=>i(c),["prevent"])},{default:Tt(()=>[It(je(c.opened?"Скрыть результаты":"Раскрыть результаты")+" ",1),R("strong",null," ("+je(c.reviewsList.length)+")",1)]),_:2},1032,["icon","onClick"])):We("",!0)])])]),c.opened?(he(),De(rt,{key:0},[(x=c.reviewsList)!=null&&x.length?(he(),De("div",Ap,[R("div",Pp,[R("div",null,[It("Найдено отзывов - "),R("strong",null,je(c.reviewsList.length),1)])]),R("table",$p,[R("tr",Np,[R("th",Ip,[R("div",{class:"flex items-center cursor-pointer",onClick:k=>r(c,"date")},[R("div",{class:pt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="date"}])},"sort",2),Mp],8,Fp)]),R("th",Lp,[R("div",{class:"flex items-center cursor-pointer",onClick:k=>r(c,"rating")},[R("div",{class:pt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="rating"}])},"sort",2),jp],8,Bp)]),R("th",Rp,[R("div",{class:"flex items-center cursor-pointer",onClick:k=>r(c,"productName")},[R("div",{class:pt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="productName"}])},"sort",2),Up],8,Kp)]),Vp]),(he(!0),De(rt,null,Un(c.reviewsList,(k,O)=>{var C;return he(),De("tr",{key:O,class:"text-[14px] hover:bg-gray-600"},[R("td",Hp,je((C=ke(sr)(k.date))==null?void 0:C.slice(0,10)),1),R("td",qp,[R("div",Yp,[R("div",Jp,"("+je(k.rating)+") - ",1),(he(!0),De(rt,null,Un(k.rating,B=>(he(),De("div",zp,"star"))),256))])]),R("td",Wp,[R("div",Gp,[R("div",{class:"font-icon text-green-400 cursor-pointer",onClick:Ft(B=>n(k.productName),["stop"])},"content_copy",8,Xp),R("div",null,je(k.productName),1)])]),R("td",Qp,[R("strong",{class:pt(k.delivery?"text-green-400":"text-red-400")},je(k.delivery?"Да":"Нет"),3)])])}),128))])])):(he(),De("div",Zp,"Отзывов не найдено"))],64)):We("",!0)])}),128)):(he(),De("div",ey,"Ничего не найдено"))}}),ny=sn({__name:"ParsingResult",setup(e){return(t,n)=>(he(),Nt(ty))}});const ry=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},iy={},sy=R("svg",{class:"spinner",viewBox:"0 0 50 50"},[R("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),oy=[sy];function ay(e,t){return he(),De("div",null,oy)}const wc=ry(iy,[["render",ay]]),ly=["onKeydown"],cy={class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-5 m-auto w-[580px] max-w-full break-all"},uy=sn({__name:"Modal",emits:["close"],setup(e,{emit:t}){const n=rn();function r(s){const o=s.target;!o.classList.contains("app-modal__body")&&!o.closest(".app-modal__body")&&i()}function i(){t("close")}return Qi(()=>{document.body.classList.remove("overflow-hidden")}),Gn(()=>{var s;(s=n==null?void 0:n.value)==null||s.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(s,o)=>(he(),De("div",{ref_key:"modalRef",ref:n,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-40 z-100 overflow-y-auto p-10 flex",onClick:r,onKeydown:Qf(i,["esc"])},[R("div",cy,[R("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:i},"close"),Dl(s.$slots,"default")])],40,ly))}}),fy={key:0,class:"flex justify-center"},hy=["onClick"],dy={class:"min-w-0 flex-1"},py={class:"flex items-center gap-4 mb-4"},yy={class:"text-xl font-medium"},my={key:0,class:"text-[16px] text-sky-300 font-medium"},gy={class:"flex items-center gap-4"},vy={class:"text-[16px] text-orange-300 font-medium"},by={class:"text-[16px] text-yellow-300 font-medium"},_y={class:"text-[16px] text-teal-300 font-medium"},wy={class:"text-[16px] text-gray-300 font-medium"},xy={class:"flex-none flex items-center gap-4"},Cy=["onClick"],ky=R("i",{class:"font-icon text-3xl text-green-500"},"edit",-1),Dy=[ky],Sy=["onClick"],Ty=R("i",{class:"font-icon text-3xl text-sky-500"},"content_copy",-1),Ey=[Ty],Oy=["onClick"],Ay=R("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),Py=[Ay],$y={key:0,class:"text-[14px] px-4 p-5"},Ny={key:0,class:"w-full"},Iy=R("tr",null,[R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Дата парсинга"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Рейтинг"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Отзывы"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Подписки"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Продаж с доставкой")],-1),Fy={class:"text-left px-4 py-2 border border-white border-opacity-50"},My={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ly={class:"text-left px-4 py-2 border border-white border-opacity-50"},By={class:"text-left px-4 py-2 border border-white border-opacity-50"},jy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ry={key:1,class:"text-center text-xl font-medium"},Ky={key:2,class:"text-center text-xl font-bold"},Uy={key:0},Vy={class:"text-2xl font-bold mb-5"},Hy={class:"mb-6"},qy=R("div",{class:"mb-2 text-sm font-medium"},"Комментарий",-1),Yy=sn({__name:"ProfileSavedList",setup(e){const t=ei(),n=rn(!1),r=rn(null),i=rn(!1);function s(k){return k.parsingResults[0]||null}function o(k){k.url&&(Bs(k.url),t==null||t.show("success",dt.ProfileLinkCopied))}function l(k){k.opened=!k.opened}function u(){n.value=!1,r.value=null}function c(k){n.value=!0,r.value=k}async function d(k,O){if(k)try{if(await Gd(k,O))t==null||t.show("success",dt.ProfileEdited),r.value=null,n.value=!1;else throw new Error}catch{t==null||t.show("error",dt.ProfileEditeError)}finally{}}async function w(k){if(window.confirm(`Удаляем "${k.name}" ?`)&&k.id)try{await Xd(k.id),t==null||t.show("success",dt.ProfileDeleted),x()}catch(O){console.log(O),t==null||t.show("error",dt.ProfileDeleteError)}finally{}}async function x(){try{i.value=!0;const k=await Yd(0,0);Cs.value=k.map(O=>({...O,opened:!1,loading:!1}))}catch{}finally{i.value=!1}}return Gn(async()=>{setTimeout(()=>{x()},0)}),(k,O)=>(he(),De(rt,null,[i.value?(he(),De("div",fy,[tt(wc,{class:"w-10 h-10 flex-none"})])):ke(Cs).length?(he(!0),De(rt,{key:1},Un(ke(Cs),C=>{var B,F,A,$,N,U;return he(),De("div",{key:C.id,class:pt([C.opened?"ring ring-blue-400":"","rounded-lg bg-gray-600 shadow-xl mb-3"])},[R("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:H=>l(C)},[R("div",dy,[R("div",py,[R("div",yy,je(C.name),1),C.comment?(he(),De("div",my,je(C.comment),1)):We("",!0)]),R("div",gy,[R("div",vy,je((B=s(C))==null?void 0:B.rating),1),R("div",by,je((F=s(C))==null?void 0:F.reviewsCount),1),R("div",_y,je((A=s(C))==null?void 0:A.subscribers),1),R("div",wy,je(($=s(C))!=null&&$.parsingDate?ke(sr)((N=s(C))==null?void 0:N.parsingDate):""),1)])]),R("div",xy,[R("div",{class:"flex-none ml-auto",onClick:Ft(H=>c(C),["stop"])},Dy,8,Cy),R("div",{class:"flex-none",onClick:Ft(H=>o(C),["stop"])},Ey,8,Sy),R("div",{class:"flex-none",onClick:Ft(H=>w(C),["stop"])},Py,8,Oy)])],8,hy),C.opened?(he(),De("div",$y,[(U=C.parsingResults)!=null&&U.length?(he(),De("table",Ny,[Iy,(he(!0),De(rt,null,Un(C.parsingResults,H=>(he(),De("tr",null,[R("td",Fy,je(ke(sr)(H.parsingDate)),1),R("td",My,je(H.rating),1),R("td",Ly,je(H.reviewsCount),1),R("td",By,je(H.subscribers),1),R("td",jy,je(H.deliveryInfo),1)]))),256))])):(he(),De("div",Ry,"Парсинги не найдены"))])):We("",!0)],2)}),128)):(he(),De("div",Ky,"Ничего не найдено")),n.value?(he(),Nt(uy,{key:3,onClose:u},{default:Tt(()=>[r.value?(he(),De("div",Uy,[R("div",Vy,je(r.value.name),1),R("div",Hy,[qy,Qt(R("input",{"onUpdate:modelValue":O[0]||(O[0]=C=>r.value.comment=C),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Zt,r.value.comment]])]),R("div",null,[tt(Mt,{type:"submit",theme:"success",onClick:O[1]||(O[1]=Ft(C=>d(r.value.id,r.value),["stop","prevent"]))},{default:Tt(()=>[It("Сохранить")]),_:1})])])):We("",!0)]),_:1})):We("",!0)],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $n(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{c(r.next(d))}catch(w){o(w)}}function u(d){try{c(r.throw(d))}catch(w){o(w)}}function c(d){d.done?s(d.value):i(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})}function zt(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Jy(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function zy(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function xc(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function Cc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var is=Yo(function(e,t){(function(n,r){e.exports=r()})(uo,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(W){return typeof W}:n=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(K)}function r(K,W,J,X,T,a,f){try{var p=K[a](f),y=p.value}catch(g){J(g);return}p.done?W(y):Promise.resolve(y).then(X,T)}function i(K){return function(){var W=this,J=arguments;return new Promise(function(X,T){var a=K.apply(W,J);function f(y){r(a,X,T,f,p,"next",y)}function p(y){r(a,X,T,f,p,"throw",y)}f(void 0)})}}function s(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}function o(K,W){for(var J=0;J<W.length;J++){var X=W[J];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,W,J){return W&&o(K.prototype,W),J&&o(K,J),K}function u(K,W,J){return W in K?Object.defineProperty(K,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):K[W]=J,K}function c(K,W){var J=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);W&&(X=X.filter(function(T){return Object.getOwnPropertyDescriptor(K,T).enumerable})),J.push.apply(J,X)}return J}function d(K){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?c(Object(J),!0).forEach(function(X){u(K,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(J)):c(Object(J)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(J,X))})}return K}function w(K,W){return O(K)||B(K,W)||A()}function x(K){return k(K)||C(K)||F()}function k(K){if(Array.isArray(K)){for(var W=0,J=new Array(K.length);W<K.length;W++)J[W]=K[W];return J}}function O(K){if(Array.isArray(K))return K}function C(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function B(K,W){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var J=[],X=!0,T=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(J.push(p.value),!(W&&J.length===W));X=!0);}catch(y){T=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(T)throw a}}return J}}function F(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var $=function K(W){s(this,K),this.p=new Promise(W)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(K,W){var J=this;return new $(function(X,T){J.p.then(function(a){X(K?K(a):a)}).catch(function(a){return W?W(a):Promise.reject(a)}).then(X,T)})},$.prototype.catch=function(K){return this.then(null,K)},$.resolve=function(K){return new $(function(W){W(K)})},$.reject=function(K){return new $(function(W,J){J(K)})},["all","race"].forEach(function(K){$[K]=function(W){return new $(function(J,X){Promise[K](W.map(function(T){return T&&T.constructor&&T.constructor.__typeson__type__==="TypesonPromise"?T.p:T})).then(J,X)})}});var N={},U=N.toString,H={}.hasOwnProperty,q=Object.getPrototypeOf,re=H.toString;function S(K,W){return ae(K)&&typeof K.then=="function"&&(!W||typeof K.catch=="function")}function b(K){return U.call(K).slice(8,-1)}function V(K,W){if(!K||n(K)!=="object")return!1;var J=q(K);if(!J)return W===null;var X=H.call(J,"constructor")&&J.constructor;return typeof X!="function"?W===null:W===X||W!==null&&re.call(X)===re.call(W)||typeof W=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===W.__typeson__type__}function j(K){if(!K||b(K)!=="Object")return!1;var W=q(K);return W?V(K,Object):!0}function ve(K){if(!K||b(K)!=="Object")return!1;var W=q(K);return W?V(K,Object)||ve(W):!0}function ae(K){return K&&n(K)==="object"}function Pe(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function ge(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function ue(K,W){if(W==="")return K;var J=W.indexOf(".");if(J>-1){var X=K[ge(W.slice(0,J))];return X===void 0?void 0:ue(X,W.slice(J+1))}return K[ge(W)]}function oe(K,W,J){if(W==="")return J;var X=W.indexOf(".");if(X>-1){var T=K[ge(W.slice(0,X))];return oe(T,W.slice(X+1),J)}return K[ge(W)]=J,K}function Ve(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Ue=Object.keys,Ze=Array.isArray,Re={}.hasOwnProperty,Ot=["type","replaced","iterateIn","iterateUnsetNumeric"];function ye(K,W){if(K.keypath==="")return-1;var J=K.keypath.match(/\./g)||0,X=W.keypath.match(/\./g)||0;return J&&(J=J.length),X&&(X=X.length),J>X?-1:J<X?1:K.keypath<W.keypath?-1:K.keypath>W.keypath}var ce=function(){function K(W){s(this,K),this.options=W,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(J,X,T,a){a=d({},this.options,{},a,{stringification:!0});var f=this.encapsulate(J,null,a);return Ze(f)?JSON.stringify(f[0],X,T):f.then(function(p){return JSON.stringify(p,X,T)})}},{key:"stringifySync",value:function(J,X,T,a){return this.stringify(J,X,T,d({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(J,X,T,a){return this.stringify(J,X,T,d({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(J,X,T){return T=d({},this.options,{},T,{parse:!0}),this.revive(JSON.parse(J,X),T)}},{key:"parseSync",value:function(J,X,T){return this.parse(J,X,d({throwOnBadSyncType:!0},T,{sync:!0}))}},{key:"parseAsync",value:function(J,X,T){return this.parse(J,X,d({throwOnBadSyncType:!0},T,{sync:!1}))}},{key:"specialTypeNames",value:function(J,X){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T.returnTypeNames=!0,this.encapsulate(J,X,T)}},{key:"rootTypeName",value:function(J,X){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T.iterateNone=!0,this.encapsulate(J,X,T)}},{key:"encapsulate",value:function(J,X,T){T=d({sync:!0},this.options,{},T);var a=T,f=a.sync,p=this,y={},g=[],_=[],D=[],P="cyclic"in T?T.cyclic:!0,M=T,L=M.encapsulateObserver,z=fe("",J,P,X||{},D);function Y(te){var m=Object.values(y);if(T.iterateNone)return m.length?m[0]:K.getJSONType(te);if(m.length){if(T.returnTypeNames)return x(new Set(m));!te||!j(te)||Re.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else ae(te)&&Re.call(te,"$types")&&(te={$:te,$types:!0});return T.returnTypeNames?!1:te}function G(te,m){return Z.apply(this,arguments)}function Z(){return Z=i(regeneratorRuntime.mark(function te(m,h){var v;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(h.map(function(Q){return Q[1].p}));case 2:return v=I.sent,I.next=5,Promise.all(v.map(function(){var Q=i(regeneratorRuntime.mark(function ee(pe){var se,xe,$e,Ne,He,Be,Me,Je,ze,Ee,ut,de,ne,we;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(se=[],xe=h.splice(0,1),$e=w(xe,1),Ne=$e[0],He=w(Ne,7),Be=He[0],Me=He[2],Je=He[3],ze=He[4],Ee=He[5],ut=He[6],de=fe(Be,pe,Me,Je,se,!0,ut),ne=V(de,$),!(Be&&ne)){Ce.next=11;break}return Ce.next=8,de.p;case 8:return we=Ce.sent,ze[Ee]=we,Ce.abrupt("return",G(m,se));case 11:return Be?ze[Ee]=de:ne?m=de.p:m=de,Ce.abrupt("return",G(m,se));case 13:case"end":return Ce.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return I.abrupt("return",m);case 6:case"end":return I.stop()}},te)})),Z.apply(this,arguments)}function ie(te,m,h){Object.assign(te,m);var v=Ot.map(function(E){var I=te[E];return delete te[E],I});h(),Ot.forEach(function(E,I){te[E]=v[I]})}function fe(te,m,h,v,E,I,Q){var ee,pe={},se=n(m),xe=L?function(ne){var we=Q||v.type||K.getJSONType(m);L(Object.assign(ne||pe,{keypath:te,value:m,cyclic:h,stateObj:v,promisesData:E,resolvingTypesonPromise:I,awaitingTypesonPromise:V(m,$)},{type:we}))}:null;if(["string","boolean","number","undefined"].includes(se))return m===void 0||se==="number"&&(isNaN(m)||m===-1/0||m===1/0)?(v.replaced?ee=m:ee=me(te,m,v,E,!1,I,xe),ee!==m&&(pe={replaced:ee})):ee=m,xe&&xe(),ee;if(m===null)return xe&&xe(),m;if(h&&!v.iterateIn&&!v.iterateUnsetNumeric&&m&&n(m)==="object"){var $e=g.indexOf(m);if($e<0)h===!0&&(g.push(m),_.push(te));else return y[te]="#",xe&&xe({cyclicKeypath:_[$e]}),"#"+_[$e]}var Ne=j(m),He=Ze(m),Be=(Ne||He)&&(!p.plainObjectReplacers.length||v.replaced)||v.iterateIn?m:me(te,m,v,E,Ne||He,null,xe),Me;if(Be!==m?(ee=Be,pe={replaced:Be}):te===""&&V(m,$)?(E.push([te,m,h,v,void 0,void 0,v.type]),ee=m):He&&v.iterateIn!=="object"||v.iterateIn==="array"?(Me=new Array(m.length),pe={clone:Me}):!["function","symbol"].includes(n(m))&&!("toJSON"in m)&&!V(m,$)&&!V(m,Promise)&&!V(m,ArrayBuffer)||Ne||v.iterateIn==="object"?(Me={},v.addLength&&(Me.length=m.length),pe={clone:Me}):ee=m,xe&&xe(),T.iterateNone)return Me||ee;if(!Me)return ee;if(v.iterateIn){var Je=function(we){var be={ownKeys:Re.call(m,we)};ie(v,be,function(){var Ce=te+(te?".":"")+Pe(we),Ie=fe(Ce,m[we],!!h,v,E,I);V(Ie,$)?E.push([Ce,Ie,!!h,v,Me,we,v.type]):Ie!==void 0&&(Me[we]=Ie)})};for(var ze in m)Je(ze);xe&&xe({endIterateIn:!0,end:!0})}else Ue(m).forEach(function(ne){var we=te+(te?".":"")+Pe(ne),be={ownKeys:!0};ie(v,be,function(){var Ce=fe(we,m[ne],!!h,v,E,I);V(Ce,$)?E.push([we,Ce,!!h,v,Me,ne,v.type]):Ce!==void 0&&(Me[ne]=Ce)})}),xe&&xe({endIterateOwn:!0,end:!0});if(v.iterateUnsetNumeric){for(var Ee=m.length,ut=function(we){if(!(we in m)){var be=te+(te?".":"")+we,Ce={ownKeys:!1};ie(v,Ce,function(){var Ie=fe(be,void 0,!!h,v,E,I);V(Ie,$)?E.push([be,Ie,!!h,v,Me,we,v.type]):Ie!==void 0&&(Me[we]=Ie)})}},de=0;de<Ee;de++)ut(de);xe&&xe({endIterateUnsetNumeric:!0,end:!0})}return Me}function me(te,m,h,v,E,I,Q){for(var ee=E?p.plainObjectReplacers:p.nonplainObjectReplacers,pe=ee.length;pe--;){var se=ee[pe];if(se.test(m,h)){var xe=se.type;if(p.revivers[xe]){var $e=y[te];y[te]=$e?[xe].concat($e):xe}if(Object.assign(h,{type:xe,replaced:!0}),(f||!se.replaceAsync)&&!se.replace)return Q&&Q({typeDetected:!0}),fe(te,m,P&&"readonly",h,v,I,xe);Q&&Q({replacing:!0});var Ne=f||!se.replaceAsync?"replace":"replaceAsync";return fe(te,se[Ne](m,h),P&&"readonly",h,v,I,xe)}}return m}return D.length?f&&T.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(z,D)).then(Y):!f&&T.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():T.stringification&&f?[Y(z)]:f?Y(z):Promise.resolve(Y(z))}},{key:"encapsulateSync",value:function(J,X,T){return this.encapsulate(J,X,d({throwOnBadSyncType:!0},T,{sync:!0}))}},{key:"encapsulateAsync",value:function(J,X,T){return this.encapsulate(J,X,d({throwOnBadSyncType:!0},T,{sync:!1}))}},{key:"revive",value:function(J,X){var T=J&&J.$types;if(!T)return J;if(T===!0)return J.$;X=d({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},g=!0;T.$&&j(T.$)&&(J=J.$,T=T.$,g=!1);var _=this;function D(Z,ie){var fe=_.revivers[Z]||[],me=w(fe,1),te=me[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?ie:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](ie,y)}function P(){var Z=[];if(Object.entries(T).forEach(function(ie){var fe=w(ie,2),me=fe[0],te=fe[1];te!=="#"&&[].concat(te).forEach(function(m){var h=_.revivers[m]||[null,{}],v=w(h,2),E=v[1].plain;E&&(Z.push({keypath:me,type:m}),delete T[me])})}),!!Z.length)return Z.sort(ye).reduce(function ie(fe,me){var te=me.keypath,m=me.type;if(S(fe))return fe.then(function(E){return ie(E,{keypath:te,type:m})});var h=ue(J,te);if(h=D(m,h),V(h,$))return h.then(function(E){var I=oe(J,te,E);I===E&&(J=I)});var v=oe(J,te,h);v===h&&(J=v)},void 0)}var M=[];function L(Z,ie,fe,me,te){if(!(g&&Z==="$types")){var m=T[Z],h=Ze(ie);if(h||j(ie)){var v=h?new Array(ie.length):{};for(Ue(ie).forEach(function($e){var Ne=L(Z+(Z?".":"")+Pe($e),ie[$e],fe||v,v,$e),He=function(Me){return V(Me,Fe)?v[$e]=void 0:Me!==void 0&&(v[$e]=Me),Me};V(Ne,$)?M.push(Ne.then(function(Be){return He(Be)})):He(Ne)}),ie=v;p.length;){var E=w(p[0],4),I=E[0],Q=E[1],ee=E[2],pe=E[3],se=ue(I,Q);if(se!==void 0)ee[pe]=se;else break;p.splice(0,1)}}if(!m)return ie;if(m==="#"){var xe=ue(fe,ie.slice(1));return xe===void 0&&p.push([fe,ie.slice(1),me,te]),xe}return[].concat(m).reduce(function $e(Ne,He){return V(Ne,$)?Ne.then(function(Be){return $e(Be,He)}):D(He,Ne)},ie)}}function z(Z){return V(Z,Fe)?void 0:Z}var Y=P(),G;return V(Y,$)?G=Y.then(function(){return J}):(G=L("",J,null),M.length&&(G=$.resolve(G).then(function(Z){return $.all([Z].concat(M))}).then(function(Z){var ie=w(Z,1),fe=ie[0];return fe}))),S(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(G,$)?G.p.then(z):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?z(G):Promise.resolve(z(G))}},{key:"reviveSync",value:function(J,X){return this.revive(J,d({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(J,X){return this.revive(J,d({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(J,X){return X=X||{},[].concat(J).forEach(function T(a){var f=this;if(Ze(a))return a.map(function(p){return T.call(f,p)});a&&Ue(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],g=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,_=g.filter(function(fe){return fe.type===p});if(_.length&&(g.splice(g.indexOf(_[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var D=y;y={test:function(me){return me&&me.constructor===D},replace:function(me){return d({},me)},revive:function(me){return Object.assign(Object.create(D.prototype),me)}}}else if(Ze(y)){var P=y,M=w(P,3),L=M[0],z=M[1],Y=M[2];y={test:L,replace:z,revive:Y}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var ie={};y.revive&&(ie.revive=y.revive.bind(y)),y.reviveAsync&&(ie.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[ie,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Fe=function K(){s(this,K)};return Fe.__typeson__type__="TypesonUndefined",ce.Undefined=Fe,ce.Promise=$,ce.isThenable=S,ce.toStringTag=b,ce.hasConstructorOf=V,ce.isObject=ae,ce.isPlainObject=j,ce.isUserObject=ve,ce.escapeKeyPathComponent=Pe,ce.unescapeKeyPathComponent=ge,ce.getByKeyPath=ue,ce.getJSONType=Ve,ce.JSON_TYPES=["null","boolean","number","string","array","object"],ce})}),Wy=Yo(function(e,t){(function(n,r){e.exports=r()})(uo,function(){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function r(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function i(m,h){for(var v=0;v<h.length;v++){var E=h[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function s(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function o(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(m);h&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,E)}return v}function l(m){return function(v){if(Array.isArray(v))return u(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||function(v,E){if(v){if(typeof v=="string")return u(v,E);var I=Object.prototype.toString.call(v).slice(8,-1);if(I==="Object"&&v.constructor&&(I=v.constructor.name),I==="Map"||I==="Set")return Array.from(v);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return u(v,E)}}(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,E=new Array(h);v<h;v++)E[v]=m[v];return E}function c(m){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}function d(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function w(m,h){for(var v=0;v<h.length;v++){var E=h[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function x(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function k(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(m);h&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,E)}return v}function O(m){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?k(Object(v),!0).forEach(function(E){x(m,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(v)):k(Object(v)).forEach(function(E){Object.defineProperty(m,E,Object.getOwnPropertyDescriptor(v,E))})}return m}function C(m,h){return function(E){if(Array.isArray(E))return E}(m)||function(E,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(E)))){var Q=[],ee=!0,pe=!1,se=void 0;try{for(var xe,$e=E[Symbol.iterator]();!(ee=(xe=$e.next()).done)&&(Q.push(xe.value),!I||Q.length!==I);ee=!0);}catch(Ne){pe=!0,se=Ne}finally{try{ee||$e.return==null||$e.return()}finally{if(pe)throw se}}return Q}}(m,h)||F(m,h)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(m){return function(v){if(Array.isArray(v))return A(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||F(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function F(m,h){if(m){if(typeof m=="string")return A(m,h);var v=Object.prototype.toString.call(m).slice(8,-1);return v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set"?Array.from(m):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?A(m,h):void 0}}function A(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,E=new Array(h);v<h;v++)E[v]=m[v];return E}var $=function m(h){d(this,m),this.p=new Promise(h)};$.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&($.prototype[Symbol.toStringTag]="TypesonPromise"),$.prototype.then=function(m,h){var v=this;return new $(function(E,I){v.p.then(function(Q){E(m?m(Q):Q)}).catch(function(Q){return h?h(Q):Promise.reject(Q)}).then(E,I)})},$.prototype.catch=function(m){return this.then(null,m)},$.resolve=function(m){return new $(function(h){h(m)})},$.reject=function(m){return new $(function(h,v){v(m)})},["all","race"].forEach(function(m){$[m]=function(h){return new $(function(v,E){Promise[m](h.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(v,E)})}});var N={}.toString,U={}.hasOwnProperty,H=Object.getPrototypeOf,q=U.toString;function re(m,h){return j(m)&&typeof m.then=="function"&&(!h||typeof m.catch=="function")}function S(m){return N.call(m).slice(8,-1)}function b(m,h){if(!m||c(m)!=="object")return!1;var v=H(m);if(!v)return h===null;var E=U.call(v,"constructor")&&v.constructor;return typeof E!="function"?h===null:h===E||h!==null&&q.call(E)===q.call(h)||typeof h=="function"&&typeof E.__typeson__type__=="string"&&E.__typeson__type__===h.__typeson__type__}function V(m){return!(!m||S(m)!=="Object")&&(!H(m)||b(m,Object))}function j(m){return m&&c(m)==="object"}function ve(m){return m.replace(/~/g,"~0").replace(/\./g,"~1")}function ae(m){return m.replace(/~1/g,".").replace(/~0/g,"~")}function Pe(m,h){if(h==="")return m;var v=h.indexOf(".");if(v>-1){var E=m[ae(h.slice(0,v))];return E===void 0?void 0:Pe(E,h.slice(v+1))}return m[ae(h)]}function ge(m,h,v){if(h==="")return v;var E=h.indexOf(".");return E>-1?ge(m[ae(h.slice(0,E))],h.slice(E+1),v):(m[ae(h)]=v,m)}function ue(m,h,v){return v?h?h(m):m:(m&&m.then||(m=Promise.resolve(m)),h?m.then(h):m)}var oe=Object.keys,Ve=Array.isArray,Ue={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function Re(m){return function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];try{return Promise.resolve(m.apply(this,h))}catch(E){return Promise.reject(E)}}}function Ot(m,h){if(m.keypath==="")return-1;var v=m.keypath.match(/\./g)||0,E=h.keypath.match(/\./g)||0;return v&&(v=v.length),E&&(E=E.length),v>E?-1:v<E?1:m.keypath<h.keypath?-1:m.keypath>h.keypath}var ye=function(){function m(h){d(this,m),this.options=h,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(v,E,I){return E&&w(v.prototype,E),I&&w(v,I),v}(m,[{key:"stringify",value:function(v,E,I,Q){Q=O(O(O({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(v,null,Q);return Ve(ee)?JSON.stringify(ee[0],E,I):ee.then(function(pe){return JSON.stringify(pe,E,I)})}},{key:"stringifySync",value:function(v,E,I,Q){return this.stringify(v,E,I,O(O({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(v,E,I,Q){return this.stringify(v,E,I,O(O({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(v,E,I){return I=O(O(O({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(v,E),I)}},{key:"parseSync",value:function(v,E,I){return this.parse(v,E,O(O({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(v,E,I){return this.parse(v,E,O(O({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(v,E){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(v,E,I)}},{key:"rootTypeName",value:function(v,E){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(v,E,I)}},{key:"encapsulate",value:function(v,E,I){var Q=Re(function(de,ne){return ue(Promise.all(ne.map(function(we){return we[1].p})),function(we){return ue(Promise.all(we.map(Re(function(be){var Ce=!1,Ie=[],At=C(ne.splice(0,1),1),it=C(At[0],7),St=it[0],Bt=it[2],qe=it[3],jt=it[4],Ge=it[5],Pt=it[6],wt=Ee(St,be,Bt,qe,Ie,!0,Pt),Vt=b(wt,$);return function(ss,ii){var Qn=ss();return Qn&&Qn.then?Qn.then(ii):ii(Qn)}(function(){if(St&&Vt)return ue(wt.p,function(Ht){return jt[Ge]=Ht,Ce=!0,Q(de,Ie)})},function(Ht){return Ce?Ht:(St?jt[Ge]=wt:de=Vt?wt.p:wt,Q(de,Ie))})}))),function(){return de})})}),ee=(I=O(O({sync:!0},this.options),I)).sync,pe=this,se={},xe=[],$e=[],Ne=[],He=!("cyclic"in I)||I.cyclic,Be=I.encapsulateObserver,Me=Ee("",v,He,E||{},Ne);function Je(de){var ne=Object.values(se);if(I.iterateNone)return ne.length?ne[0]:m.getJSONType(de);if(ne.length){if(I.returnTypeNames)return B(new Set(ne));de&&V(de)&&!Ue.call(de,"$types")?de.$types=se:de={$:de,$types:{$:se}}}else j(de)&&Ue.call(de,"$types")&&(de={$:de,$types:!0});return!I.returnTypeNames&&de}function ze(de,ne,we){Object.assign(de,ne);var be=Ze.map(function(Ce){var Ie=de[Ce];return delete de[Ce],Ie});we(),Ze.forEach(function(Ce,Ie){de[Ce]=be[Ie]})}function Ee(de,ne,we,be,Ce,Ie,At){var it,St={},Bt=c(ne),qe=Be?function(vn){var xt=At||be.type||m.getJSONType(ne);Be(Object.assign(vn||St,{keypath:de,value:ne,cyclic:we,stateObj:be,promisesData:Ce,resolvingTypesonPromise:Ie,awaitingTypesonPromise:b(ne,$)},{type:xt}))}:null;if(["string","boolean","number","undefined"].includes(Bt))return ne===void 0||Number.isNaN(ne)||ne===Number.NEGATIVE_INFINITY||ne===Number.POSITIVE_INFINITY?(it=be.replaced?ne:ut(de,ne,be,Ce,!1,Ie,qe))!==ne&&(St={replaced:it}):it=ne,qe&&qe(),it;if(ne===null)return qe&&qe(),ne;if(we&&!be.iterateIn&&!be.iterateUnsetNumeric&&ne&&c(ne)==="object"){var jt=xe.indexOf(ne);if(!(jt<0))return se[de]="#",qe&&qe({cyclicKeypath:$e[jt]}),"#"+$e[jt];we===!0&&(xe.push(ne),$e.push(de))}var Ge,Pt=V(ne),wt=Ve(ne),Vt=(Pt||wt)&&(!pe.plainObjectReplacers.length||be.replaced)||be.iterateIn?ne:ut(de,ne,be,Ce,Pt||wt,null,qe);if(Vt!==ne?(it=Vt,St={replaced:Vt}):de===""&&b(ne,$)?(Ce.push([de,ne,we,be,void 0,void 0,be.type]),it=ne):wt&&be.iterateIn!=="object"||be.iterateIn==="array"?(Ge=new Array(ne.length),St={clone:Ge}):(["function","symbol"].includes(c(ne))||"toJSON"in ne||b(ne,$)||b(ne,Promise)||b(ne,ArrayBuffer))&&!Pt&&be.iterateIn!=="object"?it=ne:(Ge={},be.addLength&&(Ge.length=ne.length),St={clone:Ge}),qe&&qe(),I.iterateNone)return Ge||it;if(!Ge)return it;if(be.iterateIn){var Ht=function(xt){var an={ownKeys:Ue.call(ne,xt)};ze(be,an,function(){var Nn=de+(de?".":"")+ve(xt),si=Ee(Nn,ne[xt],!!we,be,Ce,Ie);b(si,$)?Ce.push([Nn,si,!!we,be,Ge,xt,be.type]):si!==void 0&&(Ge[xt]=si)})};for(var ss in ne)Ht(ss);qe&&qe({endIterateIn:!0,end:!0})}else oe(ne).forEach(function(vn){var xt=de+(de?".":"")+ve(vn);ze(be,{ownKeys:!0},function(){var an=Ee(xt,ne[vn],!!we,be,Ce,Ie);b(an,$)?Ce.push([xt,an,!!we,be,Ge,vn,be.type]):an!==void 0&&(Ge[vn]=an)})}),qe&&qe({endIterateOwn:!0,end:!0});if(be.iterateUnsetNumeric){for(var ii=ne.length,Qn=function(xt){if(!(xt in ne)){var an=de+(de?".":"")+xt;ze(be,{ownKeys:!1},function(){var Nn=Ee(an,void 0,!!we,be,Ce,Ie);b(Nn,$)?Ce.push([an,Nn,!!we,be,Ge,xt,be.type]):Nn!==void 0&&(Ge[xt]=Nn)})}},os=0;os<ii;os++)Qn(os);qe&&qe({endIterateUnsetNumeric:!0,end:!0})}return Ge}function ut(de,ne,we,be,Ce,Ie,At){for(var it=Ce?pe.plainObjectReplacers:pe.nonplainObjectReplacers,St=it.length;St--;){var Bt=it[St];if(Bt.test(ne,we)){var qe=Bt.type;if(pe.revivers[qe]){var jt=se[de];se[de]=jt?[qe].concat(jt):qe}return Object.assign(we,{type:qe,replaced:!0}),!ee&&Bt.replaceAsync||Bt.replace?(At&&At({replacing:!0}),Ee(de,Bt[ee||!Bt.replaceAsync?"replace":"replaceAsync"](ne,we),He&&"readonly",we,be,Ie,qe)):(At&&At({typeDetected:!0}),Ee(de,ne,He&&"readonly",we,be,Ie,qe))}}return ne}return Ne.length?ee&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(Me,Ne)).then(Je):!ee&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&ee?[Je(Me)]:ee?Je(Me):Promise.resolve(Je(Me))}},{key:"encapsulateSync",value:function(v,E,I){return this.encapsulate(v,E,O(O({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(v,E,I){return this.encapsulate(v,E,O(O({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(v,E){var I=v&&v.$types;if(!I)return v;if(I===!0)return v.$;var Q=(E=O(O({sync:!0},this.options),E)).sync,ee=[],pe={},se=!0;I.$&&V(I.$)&&(v=v.$,I=I.$,se=!1);var xe=this;function $e(Je,ze){var Ee=C(xe.revivers[Je]||[],1)[0];if(!Ee)throw new Error("Unregistered type: "+Je);return Q&&!("revive"in Ee)?ze:Ee[Q&&Ee.revive?"revive":!Q&&Ee.reviveAsync?"reviveAsync":"revive"](ze,pe)}var Ne=[];function He(Je){return b(Je,ce)?void 0:Je}var Be,Me=function(){var ze=[];if(Object.entries(I).forEach(function(Ee){var ut=C(Ee,2),de=ut[0],ne=ut[1];ne!=="#"&&[].concat(ne).forEach(function(we){C(xe.revivers[we]||[null,{}],2)[1].plain&&(ze.push({keypath:de,type:we}),delete I[de])})}),ze.length)return ze.sort(Ot).reduce(function Ee(ut,de){var ne=de.keypath,we=de.type;if(re(ut))return ut.then(function(Ie){return Ee(Ie,{keypath:ne,type:we})});var be=Pe(v,ne);if(b(be=$e(we,be),$))return be.then(function(Ie){var At=ge(v,ne,Ie);At===Ie&&(v=At)});var Ce=ge(v,ne,be);Ce===be&&(v=Ce)},void 0)}();return b(Me,$)?Be=Me.then(function(){return v}):(Be=function Je(ze,Ee,ut,de,ne){if(!se||ze!=="$types"){var we=I[ze],be=Ve(Ee);if(be||V(Ee)){var Ce=be?new Array(Ee.length):{};for(oe(Ee).forEach(function(Ge){var Pt=Je(ze+(ze?".":"")+ve(Ge),Ee[Ge],ut||Ce,Ce,Ge),wt=function(Ht){return b(Ht,ce)?Ce[Ge]=void 0:Ht!==void 0&&(Ce[Ge]=Ht),Ht};b(Pt,$)?Ne.push(Pt.then(function(Vt){return wt(Vt)})):wt(Pt)}),Ee=Ce;ee.length;){var Ie=C(ee[0],4),At=Ie[0],it=Ie[1],St=Ie[2],Bt=Ie[3],qe=Pe(At,it);if(qe===void 0)break;St[Bt]=qe,ee.splice(0,1)}}if(!we)return Ee;if(we==="#"){var jt=Pe(ut,Ee.slice(1));return jt===void 0&&ee.push([ut,Ee.slice(1),de,ne]),jt}return[].concat(we).reduce(function Ge(Pt,wt){return b(Pt,$)?Pt.then(function(Vt){return Ge(Vt,wt)}):$e(wt,Pt)},Ee)}}("",v,null),Ne.length&&(Be=$.resolve(Be).then(function(Je){return $.all([Je].concat(Ne))}).then(function(Je){return C(Je,1)[0]}))),re(Be)?Q&&E.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():b(Be,$)?Be.p.then(He):Be:!Q&&E.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?He(Be):Promise.resolve(He(Be))}},{key:"reviveSync",value:function(v,E){return this.revive(v,O(O({throwOnBadSyncType:!0},E),{},{sync:!0}))}},{key:"reviveAsync",value:function(v,E){return this.revive(v,O(O({throwOnBadSyncType:!0},E),{},{sync:!1}))}},{key:"register",value:function(v,E){return E=E||{},[].concat(v).forEach(function I(Q){var ee=this;if(Ve(Q))return Q.map(function(pe){return I.call(ee,pe)});Q&&oe(Q).forEach(function(pe){if(pe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(m.JSON_TYPES.includes(pe))throw new TypeError("Plain JSON object types are reserved as type names");var se=Q[pe],xe=se&&se.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,$e=xe.filter(function(ze){return ze.type===pe});if($e.length&&(xe.splice(xe.indexOf($e[0]),1),delete this.revivers[pe],delete this.types[pe]),typeof se=="function"){var Ne=se;se={test:function(Ee){return Ee&&Ee.constructor===Ne},replace:function(Ee){return O({},Ee)},revive:function(Ee){return Object.assign(Object.create(Ne.prototype),Ee)}}}else if(Ve(se)){var He=C(se,3);se={test:He[0],replace:He[1],revive:He[2]}}if(se&&se.test){var Be={type:pe,test:se.test.bind(se)};se.replace&&(Be.replace=se.replace.bind(se)),se.replaceAsync&&(Be.replaceAsync=se.replaceAsync.bind(se));var Me=typeof E.fallback=="number"?E.fallback:E.fallback?0:Number.POSITIVE_INFINITY;if(se.testPlainObjects?this.plainObjectReplacers.splice(Me,0,Be):this.nonplainObjectReplacers.splice(Me,0,Be),se.revive||se.reviveAsync){var Je={};se.revive&&(Je.revive=se.revive.bind(se)),se.reviveAsync&&(Je.reviveAsync=se.reviveAsync.bind(se)),this.revivers[pe]=[Je,{plain:se.testPlainObjects}]}this.types[pe]=se}},this)},this),this}}]),m}(),ce=function m(){d(this,m)};ce.__typeson__type__="TypesonUndefined",ye.Undefined=ce,ye.Promise=$,ye.isThenable=re,ye.toStringTag=S,ye.hasConstructorOf=b,ye.isObject=j,ye.isPlainObject=V,ye.isUserObject=function m(h){if(!h||S(h)!=="Object")return!1;var v=H(h);return!v||b(h,Object)||m(v)},ye.escapeKeyPathComponent=ve,ye.unescapeKeyPathComponent=ae,ye.getByKeyPath=Pe,ye.getJSONType=function(h){return h===null?"null":Array.isArray(h)?"array":c(h)},ye.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Fe={userObject:{test:function(h,v){return ye.isUserObject(h)},replace:function(h){return function(E){for(var I=1;I<arguments.length;I++){var Q=arguments[I]!=null?arguments[I]:{};I%2?o(Object(Q),!0).forEach(function(ee){s(E,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(E,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return E}({},h)},revive:function(h){return h}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(h,v){return!!Array.isArray(h)&&(Object.keys(h).some(function(E){return String(Number.parseInt(E))!==E})&&(v.iterateIn="object",v.addLength=!0),!0)},replace:function(h,v){return v.iterateUnsetNumeric=!0,h},revive:function(h){if(Array.isArray(h))return h;var v=[];return Object.keys(h).forEach(function(E){var I=h[E];v[E]=I}),v}}},{sparseUndefined:{test:function(h,v){return h===void 0&&v.ownKeys===!1},replace:function(h){return 0},revive:function(h){}}}],W={undef:{test:function(h,v){return h===void 0&&(v.ownKeys||!("ownKeys"in v))},replace:function(h){return 0},revive:function(h){return new ye.Undefined}}},J={StringObject:{test:function(h){return ye.toStringTag(h)==="String"&&n(h)==="object"},replace:function(h){return String(h)},revive:function(h){return new String(h)}},BooleanObject:{test:function(h){return ye.toStringTag(h)==="Boolean"&&n(h)==="object"},replace:function(h){return!!h},revive:function(h){return new Boolean(h)}},NumberObject:{test:function(h){return ye.toStringTag(h)==="Number"&&n(h)==="object"},replace:function(h){return Number(h)},revive:function(h){return new Number(h)}}},X=[{nan:{test:function(h){return Number.isNaN(h)},replace:function(h){return"NaN"},revive:function(h){return Number.NaN}}},{infinity:{test:function(h){return h===Number.POSITIVE_INFINITY},replace:function(h){return"Infinity"},revive:function(h){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(h){return h===Number.NEGATIVE_INFINITY},replace:function(h){return"-Infinity"},revive:function(h){return Number.NEGATIVE_INFINITY}}}],T={date:{test:function(h){return ye.toStringTag(h)==="Date"},replace:function(h){var v=h.getTime();return Number.isNaN(v)?"NaN":v},revive:function(h){return h==="NaN"?new Date(Number.NaN):new Date(h)}}},a={regexp:{test:function(h){return ye.toStringTag(h)==="RegExp"},replace:function(h){return{source:h.source,flags:(h.global?"g":"")+(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.sticky?"y":"")+(h.unicode?"u":"")}},revive:function(h){var v=h.source,E=h.flags;return new RegExp(v,E)}}},f={map:{test:function(h){return ye.toStringTag(h)==="Map"},replace:function(h){return l(h.entries())},revive:function(h){return new Map(h)}}},p={set:{test:function(h){return ye.toStringTag(h)==="Set"},replace:function(h){return l(h.values())},revive:function(h){return new Set(h)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),_=0;_<y.length;_++)g[y.charCodeAt(_)]=_;var D=function(h,v,E){E==null&&(E=h.byteLength);for(var I=new Uint8Array(h,v||0,E),Q=I.length,ee="",pe=0;pe<Q;pe+=3)ee+=y[I[pe]>>2],ee+=y[(3&I[pe])<<4|I[pe+1]>>4],ee+=y[(15&I[pe+1])<<2|I[pe+2]>>6],ee+=y[63&I[pe+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},P=function(h){var v,E,I,Q,ee=h.length,pe=.75*h.length,se=0;h[h.length-1]==="="&&(pe--,h[h.length-2]==="="&&pe--);for(var xe=new ArrayBuffer(pe),$e=new Uint8Array(xe),Ne=0;Ne<ee;Ne+=4)v=g[h.charCodeAt(Ne)],E=g[h.charCodeAt(Ne+1)],I=g[h.charCodeAt(Ne+2)],Q=g[h.charCodeAt(Ne+3)],$e[se++]=v<<2|E>>4,$e[se++]=(15&E)<<4|I>>2,$e[se++]=(3&I)<<6|63&Q;return xe},M={arraybuffer:{test:function(h){return ye.toStringTag(h)==="ArrayBuffer"},replace:function(h,v){v.buffers||(v.buffers=[]);var E=v.buffers.indexOf(h);return E>-1?{index:E}:(v.buffers.push(h),D(h))},revive:function(h,v){if(v.buffers||(v.buffers=[]),n(h)==="object")return v.buffers[h.index];var E=P(h);return v.buffers.push(E),E}}},L=typeof self>"u"?uo:self,z={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(m){var h=m,v=L[h];v&&(z[m.toLowerCase()]={test:function(I){return ye.toStringTag(I)===h},replace:function(I,Q){var ee=I.buffer,pe=I.byteOffset,se=I.length;Q.buffers||(Q.buffers=[]);var xe=Q.buffers.indexOf(ee);return xe>-1?{index:xe,byteOffset:pe,length:se}:(Q.buffers.push(ee),{encoded:D(ee),byteOffset:pe,length:se})},revive:function(I,Q){Q.buffers||(Q.buffers=[]);var ee,pe=I.byteOffset,se=I.length,xe=I.encoded,$e=I.index;return"index"in I?ee=Q.buffers[$e]:(ee=P(xe),Q.buffers.push(ee)),new v(ee,pe,se)}})});var Y={dataview:{test:function(h){return ye.toStringTag(h)==="DataView"},replace:function(h,v){var E=h.buffer,I=h.byteOffset,Q=h.byteLength;v.buffers||(v.buffers=[]);var ee=v.buffers.indexOf(E);return ee>-1?{index:ee,byteOffset:I,byteLength:Q}:(v.buffers.push(E),{encoded:D(E),byteOffset:I,byteLength:Q})},revive:function(h,v){v.buffers||(v.buffers=[]);var E,I=h.byteOffset,Q=h.byteLength,ee=h.encoded,pe=h.index;return"index"in h?E=v.buffers[pe]:(E=P(ee),v.buffers.push(E)),new DataView(E,I,Q)}}},G={IntlCollator:{test:function(h){return ye.hasConstructorOf(h,Intl.Collator)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.Collator(h.locale,h)}},IntlDateTimeFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.DateTimeFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.DateTimeFormat(h.locale,h)}},IntlNumberFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.NumberFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.NumberFormat(h.locale,h)}}};function Z(m){for(var h=new Uint8Array(m.length),v=0;v<m.length;v++)h[v]=m.charCodeAt(v);return h.buffer}var ie={file:{test:function(h){return ye.toStringTag(h)==="File"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad File access: "+v.status);return{type:h.type,stringContents:v.responseText,name:h.name,lastModified:h.lastModified}},revive:function(h){var v=h.name,E=h.type,I=h.stringContents,Q=h.lastModified;return new File([Z(I)],v,{type:E,lastModified:Q})},replaceAsync:function(h){return new ye.Promise(function(v,E){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result,name:h.name,lastModified:h.lastModified})}),I.addEventListener("error",function(){E(I.error)}),I.readAsBinaryString(h)})}}},fe={bigint:{test:function(h){return typeof h=="bigint"},replace:function(h){return String(h)},revive:function(h){return BigInt(h)}}},me={bigintObject:{test:function(h){return n(h)==="object"&&ye.hasConstructorOf(h,BigInt)},replace:function(h){return String(h)},revive:function(h){return new Object(BigInt(h))}}},te={cryptokey:{test:function(h){return ye.toStringTag(h)==="CryptoKey"&&h.extractable},replaceAsync:function(h){return new ye.Promise(function(v,E){crypto.subtle.exportKey("jwk",h).catch(function(I){E(I)}).then(function(I){v({jwk:I,algorithm:h.algorithm,usages:h.usages})})})},revive:function(h){var v=h.jwk,E=h.algorithm,I=h.usages;return crypto.subtle.importKey("jwk",v,E,!0,I)}}};return[Fe,W,K,J,X,T,a,{imagedata:{test:function(h){return ye.toStringTag(h)==="ImageData"},replace:function(h){return{array:l(h.data),width:h.width,height:h.height}},revive:function(h){return new ImageData(new Uint8ClampedArray(h.array),h.width,h.height)}}},{imagebitmap:{test:function(h){return ye.toStringTag(h)==="ImageBitmap"||h&&h.dataset&&h.dataset.toStringTag==="ImageBitmap"},replace:function(h){var v=document.createElement("canvas");return v.getContext("2d").drawImage(h,0,0),v.toDataURL()},revive:function(h){var v=document.createElement("canvas"),E=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){E.drawImage(I,0,0)}),I.src=h,v},reviveAsync:function(h){var v=document.createElement("canvas"),E=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){E.drawImage(I,0,0)}),I.src=h,createImageBitmap(v)}}},ie,{file:ie.file,filelist:{test:function(h){return ye.toStringTag(h)==="FileList"},replace:function(h){for(var v=[],E=0;E<h.length;E++)v[E]=h.item(E);return v},revive:function(h){return new(function(){function v(){r(this,v),this._files=arguments[0],this.length=this._files.length}return function(I,Q,ee){return Q&&i(I.prototype,Q),ee&&i(I,ee),I}(v,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),v}())(h)}}},{blob:{test:function(h){return ye.toStringTag(h)==="Blob"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad Blob access: "+v.status);return{type:h.type,stringContents:v.responseText}},revive:function(h){var v=h.type,E=h.stringContents;return new Blob([Z(E)],{type:v})},replaceAsync:function(h){return new ye.Promise(function(v,E){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result})}),I.addEventListener("error",function(){E(I.error)}),I.readAsBinaryString(h)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?M:[],typeof Uint8Array=="function"?z:[],typeof DataView=="function"?Y:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[fe,me]:[])})}),or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pr=new Uint8Array(256);for(var bi=0;bi<or.length;bi++)Pr[or.codePointAt(bi)]=bi;var fo=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),s=i.length,o="",l=0;l<s;l+=3)o+=or[i[l]>>2],o+=or[(i[l]&3)<<4|i[l+1]>>4],o+=or[(i[l+1]&15)<<2|i[l+2]>>6],o+=or[i[l+2]&63];return s%3===2?o=o.slice(0,-1)+"=":s%3===1&&(o=o.slice(0,-2)+"=="),o},kc=function(t){var n=t.length,r=t.length*.75,i=0,s,o,l,u;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),d=new Uint8Array(c),w=0;w<n;w+=4)s=Pr[t.codePointAt(w)],o=Pr[t.codePointAt(w+1)],l=Pr[t.codePointAt(w+2)],u=Pr[t.codePointAt(w+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|l>>2,d[i++]=(l&3)<<6|u&63;return c},Gy=typeof self>"u"?global:self,Dc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=Gy[t];n&&(Dc[e.toLowerCase()+"2"]={test:function(r){return is.toStringTag(r)===t},replace:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return{buffer:i,byteOffset:s,length:o}},revive:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return new n(i,s,o)}})});var Xy={arraybuffer:{test:function(e){return is.toStringTag(e)==="ArrayBuffer"},replace:function(e){return fo(e,0,e.byteLength)},revive:function(e){var t=kc(e);return t}}},Kt=new is().register(Wy),Qy="FileReaderSync"in self,qi=[],ks=0;Kt.register([Xy,Dc,{blob2:{test:function(e){return is.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Qy){var t=Cc(e,"binary"),n=fo(t,0,t.byteLength);return{type:e.type,data:n}}else{qi.push(e);var r={type:e.type,data:{start:ks,end:ks+e.size}};return ks+=e.size,r}},finalize:function(e,t){e.data=fo(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([kc(n)],{type:t})}}}]);Kt.mustFinalize=function(){return qi.length>0};Kt.finalize=function(e){return $n(void 0,void 0,void 0,function(){var t,n,r,i,s,o,l,u,c,d;return zt(this,function(w){switch(w.label){case 0:return[4,xc(new Blob(qi),"binary")];case 1:if(t=w.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,o=s.$,o&&(s=s.$);for(l in s)u=s[l],c=Kt.types[u],c&&c.finalize&&(d=st.getByKeyPath(i,o?"$."+l:l),c.finalize(d,t.slice(d.start,d.end)))}}return qi=[],[2]}})})};var Zy=2e3;function Sc(e,t){return $n(this,void 0,void 0,function(){function n(){return $n(this,void 0,void 0,function(){var c,d,w,x,k,O,C,B,F;return zt(this,function(A){switch(A.label){case 0:return[4,Promise.all(e.tables.map(function($){return $.count()}))];case 1:c=A.sent(),c.forEach(function($,N){return i[N].rowCount=$}),u.totalRows=c.reduce(function($,N){return $+N}),d=JSON.stringify(o,void 0,s?2:void 0),w=d.lastIndexOf("]"),x=d.substring(0,w),r.push(x),k=t.filter,O=function($){var N,U,H,q,re,S,b,V,j,ve,ae,Pe;return zt(this,function(ge){switch(ge.label){case 0:N=e.table($),U=N.schema.primKey,H=!!U.keyPath,q=t.numRowsPerChunk||Zy,re=H?{tableName:N.name,inbound:!0,rows:[]}:{tableName:N.name,inbound:!1,rows:[]},S=JSON.stringify(re,void 0,s?2:void 0),s&&(S=S.split(`
`).join(`
    `)),b=S.lastIndexOf("]"),r.push(S.substring(0,b)),V=null,j=0,ve=!0,ae=function(){var ue,oe,Ve,Ue,ye,Ze,Re,Ot,ye;return zt(this,function(ce){switch(ce.label){case 0:return l&&st.ignoreTransaction(function(){return l(u)}),ue=V==null?N.limit(q):N.where(":id").above(V).limit(q),[4,ue.toArray()];case 1:return oe=ce.sent(),oe.length===0?[2,"break"]:(V!=null&&j>0&&(r.push(","),s&&r.push(`
      `)),ve=oe.length===q,H?(Ve=k?oe.filter(function(Fe){return k($,Fe)}):oe,Ue=Ve.map(function(Fe){return Kt.encapsulate(Fe)}),Kt.mustFinalize()?[4,st.waitFor(Kt.finalize(Ue))]:[3,3]):[3,4]);case 2:ce.sent(),ce.label=3;case 3:return ye=JSON.stringify(Ue,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),j=Ve.length,V=oe.length>0?st.getByKeyPath(oe[oe.length-1],U.keyPath):null,[3,8];case 4:return[4,ue.primaryKeys()];case 5:return Ze=ce.sent(),Re=Ze.map(function(Fe,K){return[Fe,oe[K]]}),k&&(Re=Re.filter(function(Fe){var K=Fe[0],W=Fe[1];return k($,W,K)})),Ot=Re.map(function(Fe){return Kt.encapsulate(Fe)}),Kt.mustFinalize()?[4,st.waitFor(Kt.finalize(Ot))]:[3,7];case 6:ce.sent(),ce.label=7;case 7:ye=JSON.stringify(Ot,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),j=Re.length,V=Ze.length>0?Ze[Ze.length-1]:null,ce.label=8;case 8:return u.completedRows+=oe.length,[2]}})},ge.label=1;case 1:return ve?[5,ae()]:[3,3];case 2:return Pe=ge.sent(),Pe==="break"?[3,3]:[3,1];case 3:return r.push(S.substr(b)),u.completedTables+=1,u.completedTables<u.totalTables&&r.push(","),[2]}})},C=0,B=i,A.label=2;case 2:return C<B.length?(F=B[C].name,[5,O(F)]):[3,5];case 3:A.sent(),A.label=4;case 4:return C++,[3,2];case 5:return r.push(d.substr(w)),u.done=!0,l&&st.ignoreTransaction(function(){return l(u)}),[2]}})})}var r,i,s,o,l,u;return zt(this,function(c){switch(c.label){case 0:t=t||{},r=[],i=e.tables.map(function(d){return{name:d.name,schema:Jy(d),rowCount:0}}),s=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},l=t.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return Kt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var em=1,tm={Stream:function(){}},nm=Yo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(S){return new k(S)},n.CParser=k,n.CStream=C,n.createStream=O,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(S){return S!=="error"&&S!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var u in n.STATE)n.STATE[n.STATE[u]]=u;o=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(S){function b(){this.__proto__=S}return b.prototype=S,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(S){return S.__proto__}),Object.keys||(Object.keys=function(S){var b=[];for(var V in S)S.hasOwnProperty(V)&&b.push(V);return b});function d(S){var b=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var j in i){var ve=S[j]===void 0?0:S[j].length;if(ve>b)switch(j){case"text":closeText(S);break;default:U(S,"Max buffer length exceeded: "+j)}V=Math.max(V,ve)}S.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+S.position}function w(S){for(var b in i)S[b]=i[b]}var x=/[\\"\n]/g;function k(S){if(!(this instanceof k))return new k(S);var b=this;w(b),b.bufferCheckPosition=n.MAX_BUFFER_LENGTH,b.q=b.c=b.p="",b.opt=S||{},b.closed=b.closedRoot=b.sawRoot=!1,b.tag=b.error=null,b.state=o.BEGIN,b.stack=new Array,b.position=b.column=0,b.line=1,b.slashed=!1,b.unicodeI=0,b.unicodeS=null,b.depth=0,B(b,"onready")}k.prototype={end:function(){H(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=tm.Stream}catch{l=function(){}}function O(S){return new C(S)}function C(S){if(!(this instanceof C))return new C(S);this._parser=new k(S),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var b=this;l.apply(b),this._parser.onend=function(){b.emit("end")},this._parser.onerror=function(V){b.emit("error",V),b._parser.error=null},s.forEach(function(V){Object.defineProperty(b,"on"+V,{get:function(){return b._parser["on"+V]},set:function(j){if(!j)return b.removeAllListeners(V),b._parser["on"+V]=j,j;b.on(V,j)},enumerable:!0,configurable:!1})})}C.prototype=Object.create(l.prototype,{constructor:{value:C}}),C.prototype.write=function(S){S=new Buffer(S);for(var b=0;b<S.length;b++){var V=S[b];if(this.bytes_remaining>0){for(var j=0;j<this.bytes_remaining;j++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+j]=S[j];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,b=b+j-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+b>S.length){for(var ve=0;ve<=S.length-1-b;ve++)this.temp_buffs[this.bytes_in_sequence][ve]=S[b+ve];return this.bytes_remaining=b+this.bytes_in_sequence-S.length,!0}else{this.string=S.slice(b,b+this.bytes_in_sequence).toString(),b=b+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ae=b;ae<S.length&&!(S[ae]>=128);ae++);this.string=S.slice(b,ae).toString(),this._parser.write(this.string),this.emit("data",this.string),b=ae-1}},C.prototype.end=function(S){return S&&S.length&&this._parser.write(S.toString()),this._parser.end(),!0},C.prototype.on=function(S,b){var V=this;return!V._parser["on"+S]&&s.indexOf(S)!==-1&&(V._parser["on"+S]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,S),V.emit.apply(V,j)}),l.prototype.on.call(V,S,b)},C.prototype.destroy=function(){w(this._parser),this.emit("close")};function B(S,b,V){n.INFO&&console.log("-- emit",b,V),S[b]&&S[b](V)}function F(S,b,V){A(S),B(S,b,V)}function A(S,b){S.textNode=N(S.opt,S.textNode),S.textNode!==void 0&&B(S,b||"onvalue",S.textNode),S.textNode=void 0}function $(S){S.numberNode&&B(S,"onvalue",parseFloat(S.numberNode)),S.numberNode=""}function N(S,b){return b===void 0||(S.trim&&(b=b.trim()),S.normalize&&(b=b.replace(/\s+/g," "))),b}function U(S,b){return A(S),b+=`
Line: `+S.line+`
Column: `+S.column+`
Char: `+S.c,b=new Error(b),S.error=b,B(S,"onerror",b),S}function H(S){return(S.state!==o.VALUE||S.depth!==0)&&U(S,"Unexpected end"),A(S),S.c="",S.closed=!0,B(S,"onend"),k.call(S,S.opt),S}function q(S){return S===c.carriageReturn||S===c.lineFeed||S===c.space||S===c.tab}function re(S){var b=this;if(this.error)throw this.error;if(b.closed)return U(b,"Cannot write after close. Assign an onready handler.");if(S===null)return H(b);var V=0,j=S.charCodeAt(0),ve=b.p;for(n.DEBUG&&console.log("write -> ["+S+"]");j&&(ve=j,b.c=j=S.charCodeAt(V++),ve!==j?b.p=ve:ve=b.p,!!j);)switch(n.DEBUG&&console.log(V,j,n.STATE[b.state]),b.position++,j===c.lineFeed?(b.line++,b.column=0):b.column++,b.state){case o.BEGIN:j===c.openBrace?b.state=o.OPEN_OBJECT:j===c.openBracket?b.state=o.OPEN_ARRAY:q(j)||U(b,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(q(j))continue;if(b.state===o.OPEN_KEY)b.stack.push(o.CLOSE_KEY);else if(j===c.closeBrace){B(b,"onopenobject"),this.depth++,B(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_OBJECT);j===c.doubleQuote?b.state=o.STRING:U(b,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(q(j))continue;b.state,o.CLOSE_KEY,j===c.colon?(b.state===o.CLOSE_OBJECT?(b.stack.push(o.CLOSE_OBJECT),A(b,"onopenobject"),this.depth++):A(b,"onkey"),b.state=o.VALUE):j===c.closeBrace?(F(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE):j===c.comma?(b.state===o.CLOSE_OBJECT&&b.stack.push(o.CLOSE_OBJECT),A(b),b.state=o.OPEN_KEY):U(b,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(q(j))continue;if(b.state===o.OPEN_ARRAY)if(B(b,"onopenarray"),this.depth++,b.state=o.VALUE,j===c.closeBracket){B(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_ARRAY);j===c.doubleQuote?b.state=o.STRING:j===c.openBrace?b.state=o.OPEN_OBJECT:j===c.openBracket?b.state=o.OPEN_ARRAY:j===c.t?b.state=o.TRUE:j===c.f?b.state=o.FALSE:j===c.n?b.state=o.NULL:j===c.minus?b.numberNode+="-":c._0<=j&&j<=c._9?(b.numberNode+=String.fromCharCode(j),b.state=o.NUMBER_DIGIT):U(b,"Bad value");continue;case o.CLOSE_ARRAY:if(j===c.comma)b.stack.push(o.CLOSE_ARRAY),A(b,"onvalue"),b.state=o.VALUE;else if(j===c.closeBracket)F(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;else{if(q(j))continue;U(b,"Bad array")}continue;case o.STRING:b.textNode===void 0&&(b.textNode="");var ae=V-1,Pe=b.slashed,ge=b.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,j,n.STATE[b.state],Pe);ge>0;)if(b.unicodeS+=String.fromCharCode(j),j=S.charCodeAt(V++),b.position++,ge===4?(b.textNode+=String.fromCharCode(parseInt(b.unicodeS,16)),ge=0,ae=V-1):ge++,!j)break e;if(j===c.doubleQuote&&!Pe){b.state=b.stack.pop()||o.VALUE,b.textNode+=S.substring(ae,V-1),b.position+=V-1-ae;break}if(j===c.backslash&&!Pe&&(Pe=!0,b.textNode+=S.substring(ae,V-1),b.position+=V-1-ae,j=S.charCodeAt(V++),b.position++,!j))break;if(Pe){if(Pe=!1,j===c.n?b.textNode+=`
`:j===c.r?b.textNode+="\r":j===c.t?b.textNode+="	":j===c.f?b.textNode+="\f":j===c.b?b.textNode+="\b":j===c.u?(ge=1,b.unicodeS=""):b.textNode+=String.fromCharCode(j),j=S.charCodeAt(V++),b.position++,ae=V-1,j)continue;break}x.lastIndex=V;var ue=x.exec(S);if(ue===null){V=S.length+1,b.textNode+=S.substring(ae,V-1),b.position+=V-1-ae;break}if(V=ue.index+1,j=S.charCodeAt(ue.index),!j){b.textNode+=S.substring(ae,V-1),b.position+=V-1-ae;break}}b.slashed=Pe,b.unicodeI=ge;continue;case o.TRUE:j===c.r?b.state=o.TRUE2:U(b,"Invalid true started with t"+j);continue;case o.TRUE2:j===c.u?b.state=o.TRUE3:U(b,"Invalid true started with tr"+j);continue;case o.TRUE3:j===c.e?(B(b,"onvalue",!0),b.state=b.stack.pop()||o.VALUE):U(b,"Invalid true started with tru"+j);continue;case o.FALSE:j===c.a?b.state=o.FALSE2:U(b,"Invalid false started with f"+j);continue;case o.FALSE2:j===c.l?b.state=o.FALSE3:U(b,"Invalid false started with fa"+j);continue;case o.FALSE3:j===c.s?b.state=o.FALSE4:U(b,"Invalid false started with fal"+j);continue;case o.FALSE4:j===c.e?(B(b,"onvalue",!1),b.state=b.stack.pop()||o.VALUE):U(b,"Invalid false started with fals"+j);continue;case o.NULL:j===c.u?b.state=o.NULL2:U(b,"Invalid null started with n"+j);continue;case o.NULL2:j===c.l?b.state=o.NULL3:U(b,"Invalid null started with nu"+j);continue;case o.NULL3:j===c.l?(B(b,"onvalue",null),b.state=b.stack.pop()||o.VALUE):U(b,"Invalid null started with nul"+j);continue;case o.NUMBER_DECIMAL_POINT:j===c.period?(b.numberNode+=".",b.state=o.NUMBER_DIGIT):U(b,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:c._0<=j&&j<=c._9?b.numberNode+=String.fromCharCode(j):j===c.period?(b.numberNode.indexOf(".")!==-1&&U(b,"Invalid number has two dots"),b.numberNode+="."):j===c.e||j===c.E?((b.numberNode.indexOf("e")!==-1||b.numberNode.indexOf("E")!==-1)&&U(b,"Invalid number has two exponential"),b.numberNode+="e"):j===c.plus||j===c.minus?(ve===c.e||ve===c.E||U(b,"Invalid symbol in number"),b.numberNode+=String.fromCharCode(j)):($(b),V--,b.state=b.stack.pop()||o.VALUE);continue;default:U(b,"Unknown state: "+b.state)}return b.position>=b.bufferCheckPosition&&d(b),b}})(t)});function rm(e){var t=0,n=im(!0),r={pullAsync:function(i){return $n(this,void 0,void 0,function(){var s,o,l;return zt(this,function(u){switch(u.label){case 0:return s=e.slice(t,t+i),t+=i,[4,xc(s,"text")];case 1:return o=u.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=Cc(s,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function im(e){var t=nm.parser(),n=0,r,i=[],s,o,l=!1,u=!1;return t.onopenobject=function(c){var d={};d.incomplete=!0,r||(r=d),s&&(i.push([o,s,u]),e&&(u?s.push(d):s[o]=d)),s=d,o=c,u=!1,++n},t.onkey=function(c){return o=c},t.onvalue=function(c){return u?s.push(c):s[o]=c},t.oncloseobject=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var d=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(d):s[o]=d)}},t.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),s&&(i.push([o,s,u]),e&&(u?s.push(c):s[o]=c)),s=c,u=!0,o=null,++n},t.onclosearray=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var d=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(d):s[o]=d)}},{write:function(c){return t.write(c),r},done:function(){return l}}}var Tc=1024;function sm(e,t){return $n(this,void 0,void 0,function(){var n,r,i,s;return zt(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Tc*1024,[4,Oc(e,n)];case 1:return r=o.sent(),i=r.result.data,s=new st(i.databaseName),s.version(i.databaseVersion).stores(zy(i)),[4,Ec(s,r,t)];case 2:return o.sent(),[2,s]}})})}function Ec(e,t,n){return $n(this,void 0,void 0,function(){function r(){return $n(this,void 0,void 0,function(){var O,C,B,F,A;return zt(this,function($){switch($.label){case 0:O=function(N){var U,H,q,re,S,b,V,j,ve,ae,Pe,ge;return zt(this,function(ue){switch(ue.label){case 0:if(!N.rows)return[2,"break"];if(!N.rows.incomplete&&N.rows.length===0)return[2,"continue"];if(c&&st.ignoreTransaction(function(){return c(d)}),U=N.tableName,H=e.table(U),q=u.tables.filter(function(oe){return oe.name===U})[0].schema,!H){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(N.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&q.split(",")[0]!=H.schema.primKey.src)throw new Error("Primary key differs for table ".concat(N.tableName,". "));for(re=N.rows,S=[],b=0;b<re.length&&(V=re[b],!V.incomplete);b++)S.push(Kt.revive(V));return j=n.filter,ve=j?N.inbound?S.filter(function(oe){return j(U,oe)}):S.filter(function(oe){var Ve=oe[0],Ue=oe[1];return j(U,Ue,Ve)}):S,ae=N.inbound?[void 0,ve]:[ve.map(function(oe){return oe[0]}),S.map(function(oe){return oe[1]})],Pe=ae[0],ge=ae[1],n.overwriteValues?[4,H.bulkPut(ge,Pe)]:[3,2];case 1:return ue.sent(),[3,4];case 2:return[4,H.bulkAdd(ge,Pe)];case 3:ue.sent(),ue.label=4;case 4:return d.completedRows+=S.length,S.incomplete||(d.completedTables+=1),re.splice(0,S.length),[2]}})},C=0,B=u.data,$.label=1;case 1:return C<B.length?(F=B[C],[5,O(F)]):[3,4];case 2:if(A=$.sent(),A==="break")return[3,4];$.label=3;case 3:return C++,[3,1];case 4:for(;u.data.length>0&&u.data[0].rows&&!u.data[0].rows.incomplete;)u.data.splice(0,1);return!s.done()&&!s.eof()?l?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,st.waitFor(s.pullAsync(i))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,l,u,c,d,w,x,k;return zt(this,function(O){switch(O.label){case 0:return n=n||{},i=n.chunkSizeBytes||Tc*1024,[4,Oc(t,i)];case 1:if(s=O.sent(),o=s.result,l="FileReaderSync"in self,u=o.data,!n.acceptNameDiff&&e.name!==u.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(u.databaseName));if(!n.acceptVersionDiff&&e.verno!==u.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(u.databaseVersion));if(c=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:u.tables.reduce(function(C,B){return C+B.rowCount},0),totalTables:u.tables.length},c&&st.ignoreTransaction(function(){return c(d)}),!n.clearTablesBeforeImport)return[3,5];w=0,x=e.tables,O.label=2;case 2:return w<x.length?(k=x[w],[4,k.clear()]):[3,5];case 3:O.sent(),O.label=4;case 4:return w++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return O.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:O.sent(),O.label=9;case 9:return d.done=!0,c&&st.ignoreTransaction(function(){return c(d)}),[2]}})})}function Oc(e,t){return $n(this,void 0,void 0,function(){var n,r;return zt(this,function(i){switch(i.label){case 0:n="slice"in e?rm(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>em)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}st.prototype.export=function(e){return Sc(this,e)};st.prototype.import=function(e,t){return Ec(this,e,t)};st.import=function(e,t){return sm(e,t)};const om={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},am=R("div",{class:"text-2xl font-bold mb-6"},"База данных",-1),lm={class:"flex flex-wrap items-center gap-5"},cm=R("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),um=R("span",{class:"pointer-events-none"},"Импорт",-1),fm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},hm=R("div",{class:"text-2xl font-bold mb-6 text-red-400"},"Осторожно!",-1),dm={class:"flex flex-wrap items-center gap-5"},pm=sn({__name:"Settings",setup(e){const t=ei(),n=xr({dbLoading:!1});Rl(()=>!!new URLSearchParams(window.location.search).has("danger"));async function r(){if(window.confirm("Удаляем базу данных ?"))try{await _t.close(),window.indexedDB.deleteDatabase("avito_scraper"),t==null||t.show("error",dt.DBDropSuccess),window.location.reload()}catch{t==null||t.show("error",dt.DBDropError)}}async function i(){window.confirm("Чистим хранилище ?")&&(await chrome.storage.local.remove(["profileList","parsingResults","filterFields","reviewsFilter"]),window.location.reload())}async function s(){n.dbLoading=!0;try{const u=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,c=await Sc(_t),d=new Blob([c],{type:"text/json"}),w=document.createElement("a");w.href=URL.createObjectURL(d),w.download=u,w.click(),w.remove(),t==null||t.show("success",dt.DBExportSuccess)}catch{t==null||t.show("error",dt.DBExportError)}finally{n.dbLoading=!1}}return(o,l)=>(he(),De(rt,null,[R("div",om,[n.dbLoading?(he(),Nt(wc,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):We("",!0),am,R("div",lm,[tt(Mt,{theme:"success",icon:"cloud_upload"},{default:Tt(()=>[cm,um]),_:1}),tt(Mt,{theme:"info",icon:"cloud_download",onClick:s},{default:Tt(()=>[It("Экспорт")]),_:1})])]),R("div",fm,[hm,R("div",dm,[tt(Mt,{theme:"danger",icon:"delete_sweep",onClick:Ft(i,["stop"])},{default:Tt(()=>[It("Очистить localStorage")]),_:1},8,["onClick"]),tt(Mt,{theme:"danger",icon:"delete_forever",onClick:Ft(r,["stop"])},{default:Tt(()=>[It("Очистить IndexedDB")]),_:1},8,["onClick"])])])],64))}}),ym={class:"centered"},mm=sn({__name:"App",setup(e){const t=ei(),n=rn();async function r(i){const s=jr.value.find(o=>o.url===i);if(s)try{await Wd(s)}catch(o){console.log(o)}finally{}}return Gn(async()=>{hd(),chrome.runtime.onMessage.addListener(async({message:i,action:s,status:o,currentUrl:l,data:u})=>{var c;if(o&&i&&(t==null||t.show(o,i)),s==="reviews-parsing-started"){const d=Pi(l);d&&(d.status="wait")}if(s==="reviews-parsing-ended"){if(o==="success"){_c.push(...u),r(l);const w=Pi(l);w&&(w.status="success")}if(o==="error"){const w=Pi(l);w&&(w.status="error")}bc()?(await _h(Oe.openTabInterval*1e3),(c=n.value)==null||c.onSubmit()):(Cn.value=Ut.ParsingResult,bh())}s==="profile-info"&&(jr.value.push(u),gd(l,u))})}),(i,s)=>(he(),De(rt,null,[tt(ch),R("main",ym,[(he(),Nt(Ru,null,[ke(Cn)===ke(Ut).ReviewsFilter?(he(),Nt(qd,{key:0,ref_key:"filterRef",ref:n},null,512)):We("",!0)],1024)),ke(Cn)===ke(Ut).ParsingResult?(he(),Nt(ny,{key:0})):We("",!0),ke(Cn)===ke(Ut).ProfileSavedList?(he(),Nt(Yy,{key:1})):We("",!0),ke(Cn)===ke(Ut).Settings?(he(),Nt(pm,{key:2})):We("",!0)])],64))}});class gm{constructor(t){as(this,"canvas",null);as(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var u,c;const i={...this.settings,...r,type:t},s=(u=this.canvas)==null?void 0:u.querySelector(`.${this.settings.groupContainerClass}.position-${i.position}`),o=this.createToast(n,i);if(s)return s.append(o),o;const l=this.createContainer(i);return l.append(o),(c=this.canvas)==null||c.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),i=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...i),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const s=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(s),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const vm={install(e){e.config.globalProperties.$toast=new gm({hideOnClick:!0,position:"bottom-right"})}};th(mm).use(vm).mount("#options");

var Ec=Object.defineProperty;var Oc=(e,t,n)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var un=(e,t,n)=>(Oc(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fo(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Xe={},ur=[],Xt=()=>{},Ac=()=>!1,Pc=/^on[^a-z]/,Ji=e=>Pc.test(e),ho=e=>e.startsWith("onUpdate:"),ft=Object.assign,po=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},$c=Object.prototype.hasOwnProperty,Le=(e,t)=>$c.call(e,t),Te=Array.isArray,fr=e=>ti(e)==="[object Map]",Ra=e=>ti(e)==="[object Set]",Ic=e=>ti(e)==="[object RegExp]",Oe=e=>typeof e=="function",ct=e=>typeof e=="string",yo=e=>typeof e=="symbol",tt=e=>e!==null&&typeof e=="object",Ka=e=>tt(e)&&Oe(e.then)&&Oe(e.catch),Ua=Object.prototype.toString,ti=e=>Ua.call(e),Nc=e=>ti(e).slice(8,-1),Va=e=>ti(e)==="[object Object]",mo=e=>ct(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xi=fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Fc=/-(\w)/g,_r=zi(e=>e.replace(Fc,(t,n)=>n?n.toUpperCase():"")),Mc=/\B([A-Z])/g,Zn=zi(e=>e.replace(Mc,"-$1").toLowerCase()),Ha=zi(e=>e.charAt(0).toUpperCase()+e.slice(1)),cs=zi(e=>e?`on${Ha(e)}`:""),Ur=(e,t)=>!Object.is(e,t),hr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ii=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Yo;const Ss=()=>Yo||(Yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wi(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ct(r)?Rc(r):Wi(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(ct(e))return e;if(tt(e))return e}}const Lc=/;(?![^(]*\))/g,Bc=/:([^]+)/,jc=/\/\*[^]*?\*\//g;function Rc(e){const t={};return e.replace(jc,"").split(Lc).forEach(n=>{if(n){const r=n.split(Bc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ct(e){let t="";if(ct(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=Ct(e[n]);r&&(t+=r+" ")}else if(tt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Kc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Uc=fo(Kc);function qa(e){return!!e||e===""}const je=e=>ct(e)?e:e==null?"":Te(e)||tt(e)&&(e.toString===Ua||!Oe(e.toString))?JSON.stringify(e,Ya,2):String(e),Ya=(e,t)=>t&&t.__v_isRef?Ya(e,t.value):fr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Ra(t)?{[`Set(${t.size})`]:[...t.values()]}:tt(t)&&!Te(t)&&!Va(t)?String(t):t;let Jt;class Ja{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Jt;try{return Jt=this,t()}finally{Jt=n}}}on(){Jt=this}off(){Jt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Vc(e){return new Ja(e)}function Hc(e,t=Jt){t&&t.active&&t.effects.push(e)}function qc(){return Jt}const go=e=>{const t=new Set(e);return t.w=0,t.n=0,t},za=e=>(e.w&Pn)>0,Wa=e=>(e.n&Pn)>0,Yc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Pn},Jc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];za(i)&&!Wa(i)?i.delete(e):t[n++]=i,i.w&=~Pn,i.n&=~Pn}t.length=n}},Ts=new WeakMap;let Or=0,Pn=1;const Es=30;let zt;const qn=Symbol(""),Os=Symbol("");class vo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Hc(this,r)}run(){if(!this.active)return this.fn();let t=zt,n=On;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=zt,zt=this,On=!0,Pn=1<<++Or,Or<=Es?Yc(this):Jo(this),this.fn()}finally{Or<=Es&&Jc(this),Pn=1<<--Or,zt=this.parent,On=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zt===this?this.deferStop=!0:this.active&&(Jo(this),this.onStop&&this.onStop(),this.active=!1)}}function Jo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let On=!0;const Ga=[];function kr(){Ga.push(On),On=!1}function Dr(){const e=Ga.pop();On=e===void 0?!0:e}function Pt(e,t,n){if(On&&zt){let r=Ts.get(e);r||Ts.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=go()),Xa(i)}}function Xa(e,t){let n=!1;Or<=Es?Wa(e)||(e.n|=Pn,n=!za(e)):n=!e.has(zt),n&&(e.add(zt),zt.deps.push(e))}function bn(e,t,n,r,i,s){const o=Ts.get(e);if(!o)return;let c=[];if(t==="clear")c=[...o.values()];else if(n==="length"&&Te(e)){const l=Number(r);o.forEach((u,d)=>{(d==="length"||d>=l)&&c.push(u)})}else switch(n!==void 0&&c.push(o.get(n)),t){case"add":Te(e)?mo(n)&&c.push(o.get("length")):(c.push(o.get(qn)),fr(e)&&c.push(o.get(Os)));break;case"delete":Te(e)||(c.push(o.get(qn)),fr(e)&&c.push(o.get(Os)));break;case"set":fr(e)&&c.push(o.get(qn));break}if(c.length===1)c[0]&&As(c[0]);else{const l=[];for(const u of c)u&&l.push(...u);As(go(l))}}function As(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&zo(r);for(const r of n)r.computed||zo(r)}function zo(e,t){(e!==zt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const zc=fo("__proto__,__v_isRef,__isVue"),Qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yo)),Wc=bo(),Gc=bo(!1,!0),Xc=bo(!0),Wo=Qc();function Qc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ke(this);for(let s=0,o=this.length;s<o;s++)Pt(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ke)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){kr();const r=Ke(this)[t].apply(this,n);return Dr(),r}}),e}function Zc(e){const t=Ke(this);return Pt(t,"has",e),t.hasOwnProperty(e)}function bo(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?yu:rl:t?nl:tl).get(r))return r;const o=Te(r);if(!e){if(o&&Le(Wo,i))return Reflect.get(Wo,i,s);if(i==="hasOwnProperty")return Zc}const c=Reflect.get(r,i,s);return(yo(i)?Qa.has(i):zc(i))||(e||Pt(r,"get",i),t)?c:gt(c)?o&&mo(i)?c:c.value:tt(c)?e?il(c):ni(c):c}}const eu=Za(),tu=Za(!0);function Za(e=!1){return function(n,r,i,s){let o=n[r];if(wr(o)&&gt(o)&&!gt(i))return!1;if(!e&&(!Ni(i)&&!wr(i)&&(o=Ke(o),i=Ke(i)),!Te(n)&&gt(o)&&!gt(i)))return o.value=i,!0;const c=Te(n)&&mo(r)?Number(r)<n.length:Le(n,r),l=Reflect.set(n,r,i,s);return n===Ke(s)&&(c?Ur(i,o)&&bn(n,"set",r,i):bn(n,"add",r,i)),l}}function nu(e,t){const n=Le(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&bn(e,"delete",t,void 0),r}function ru(e,t){const n=Reflect.has(e,t);return(!yo(t)||!Qa.has(t))&&Pt(e,"has",t),n}function iu(e){return Pt(e,"iterate",Te(e)?"length":qn),Reflect.ownKeys(e)}const el={get:Wc,set:eu,deleteProperty:nu,has:ru,ownKeys:iu},su={get:Xc,set(e,t){return!0},deleteProperty(e,t){return!0}},ou=ft({},el,{get:Gc,set:tu}),_o=e=>e,Gi=e=>Reflect.getPrototypeOf(e);function li(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ke(e),s=Ke(t);n||(t!==s&&Pt(i,"get",t),Pt(i,"get",s));const{has:o}=Gi(i),c=r?_o:n?ko:Vr;if(o.call(i,t))return c(e.get(t));if(o.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function ci(e,t=!1){const n=this.__v_raw,r=Ke(n),i=Ke(e);return t||(e!==i&&Pt(r,"has",e),Pt(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function ui(e,t=!1){return e=e.__v_raw,!t&&Pt(Ke(e),"iterate",qn),Reflect.get(e,"size",e)}function Go(e){e=Ke(e);const t=Ke(this);return Gi(t).has.call(t,e)||(t.add(e),bn(t,"add",e,e)),this}function Xo(e,t){t=Ke(t);const n=Ke(this),{has:r,get:i}=Gi(n);let s=r.call(n,e);s||(e=Ke(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?Ur(t,o)&&bn(n,"set",e,t):bn(n,"add",e,t),this}function Qo(e){const t=Ke(this),{has:n,get:r}=Gi(t);let i=n.call(t,e);i||(e=Ke(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&bn(t,"delete",e,void 0),s}function Zo(){const e=Ke(this),t=e.size!==0,n=e.clear();return t&&bn(e,"clear",void 0,void 0),n}function fi(e,t){return function(r,i){const s=this,o=s.__v_raw,c=Ke(o),l=t?_o:e?ko:Vr;return!e&&Pt(c,"iterate",qn),o.forEach((u,d)=>r.call(i,l(u),l(d),s))}}function hi(e,t,n){return function(...r){const i=this.__v_raw,s=Ke(i),o=fr(s),c=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...r),d=n?_o:t?ko:Vr;return!t&&Pt(s,"iterate",l?Os:qn),{next(){const{value:x,done:w}=u.next();return w?{value:x,done:w}:{value:c?[d(x[0]),d(x[1])]:d(x),done:w}},[Symbol.iterator](){return this}}}}function Cn(e){return function(...t){return e==="delete"?!1:this}}function au(){const e={get(s){return li(this,s)},get size(){return ui(this)},has:ci,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:fi(!1,!1)},t={get(s){return li(this,s,!1,!0)},get size(){return ui(this)},has:ci,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:fi(!1,!0)},n={get(s){return li(this,s,!0)},get size(){return ui(this,!0)},has(s){return ci.call(this,s,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:fi(!0,!1)},r={get(s){return li(this,s,!0,!0)},get size(){return ui(this,!0)},has(s){return ci.call(this,s,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:fi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=hi(s,!1,!1),n[s]=hi(s,!0,!1),t[s]=hi(s,!1,!0),r[s]=hi(s,!0,!0)}),[e,n,t,r]}const[lu,cu,uu,fu]=au();function wo(e,t){const n=t?e?fu:uu:e?cu:lu;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,s)}const hu={get:wo(!1,!1)},du={get:wo(!1,!0)},pu={get:wo(!0,!1)},tl=new WeakMap,nl=new WeakMap,rl=new WeakMap,yu=new WeakMap;function mu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gu(e){return e.__v_skip||!Object.isExtensible(e)?0:mu(Nc(e))}function ni(e){return wr(e)?e:xo(e,!1,el,hu,tl)}function vu(e){return xo(e,!1,ou,du,nl)}function il(e){return xo(e,!0,su,pu,rl)}function xo(e,t,n,r,i){if(!tt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=gu(e);if(o===0)return e;const c=new Proxy(e,o===2?r:n);return i.set(e,c),c}function dr(e){return wr(e)?dr(e.__v_raw):!!(e&&e.__v_isReactive)}function wr(e){return!!(e&&e.__v_isReadonly)}function Ni(e){return!!(e&&e.__v_isShallow)}function sl(e){return dr(e)||wr(e)}function Ke(e){const t=e&&e.__v_raw;return t?Ke(t):e}function Co(e){return Ii(e,"__v_skip",!0),e}const Vr=e=>tt(e)?ni(e):e,ko=e=>tt(e)?il(e):e;function ol(e){On&&zt&&(e=Ke(e),Xa(e.dep||(e.dep=go())))}function al(e,t){e=Ke(e);const n=e.dep;n&&As(n)}function gt(e){return!!(e&&e.__v_isRef===!0)}function mn(e){return bu(e,!1)}function bu(e,t){return gt(e)?e:new _u(e,t)}class _u{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ke(t),this._value=n?t:Vr(t)}get value(){return ol(this),this._value}set value(t){const n=this.__v_isShallow||Ni(t)||wr(t);t=n?t:Ke(t),Ur(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Vr(t),al(this))}}function we(e){return gt(e)?e.value:e}const wu={get:(e,t,n)=>we(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return gt(i)&&!gt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ll(e){return dr(e)?e:new Proxy(e,wu)}class xu{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new vo(t,()=>{this._dirty||(this._dirty=!0,al(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ke(this);return ol(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Cu(e,t,n=!1){let r,i;const s=Oe(e);return s?(r=e,i=Xt):(r=e.get,i=e.set),new xu(r,i,s||!i,n)}function An(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Xi(s,t,n)}return i}function Qt(e,t,n,r){if(Oe(e)){const s=An(e,t,n,r);return s&&Ka(s)&&s.catch(o=>{Xi(o,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Qt(e[s],t,n,r));return i}function Xi(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,c=n;for(;s;){const u=s.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,o,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){An(l,null,10,[e,o,c]);return}}ku(e,n,i,r)}function ku(e,t,n,r=!0){console.error(e)}let Hr=!1,Ps=!1;const yt=[];let sn=0;const pr=[];let hn=null,Kn=0;const cl=Promise.resolve();let Do=null;function Du(e){const t=Do||cl;return e?t.then(this?e.bind(this):e):t}function Su(e){let t=sn+1,n=yt.length;for(;t<n;){const r=t+n>>>1;qr(yt[r])<e?t=r+1:n=r}return t}function So(e){(!yt.length||!yt.includes(e,Hr&&e.allowRecurse?sn+1:sn))&&(e.id==null?yt.push(e):yt.splice(Su(e.id),0,e),ul())}function ul(){!Hr&&!Ps&&(Ps=!0,Do=cl.then(hl))}function Tu(e){const t=yt.indexOf(e);t>sn&&yt.splice(t,1)}function Eu(e){Te(e)?pr.push(...e):(!hn||!hn.includes(e,e.allowRecurse?Kn+1:Kn))&&pr.push(e),ul()}function ea(e,t=Hr?sn+1:0){for(;t<yt.length;t++){const n=yt[t];n&&n.pre&&(yt.splice(t,1),t--,n())}}function fl(e){if(pr.length){const t=[...new Set(pr)];if(pr.length=0,hn){hn.push(...t);return}for(hn=t,hn.sort((n,r)=>qr(n)-qr(r)),Kn=0;Kn<hn.length;Kn++)hn[Kn]();hn=null,Kn=0}}const qr=e=>e.id==null?1/0:e.id,Ou=(e,t)=>{const n=qr(e)-qr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function hl(e){Ps=!1,Hr=!0,yt.sort(Ou);const t=Xt;try{for(sn=0;sn<yt.length;sn++){const n=yt[sn];n&&n.active!==!1&&An(n,null,14)}}finally{sn=0,yt.length=0,fl(),Hr=!1,Do=null,(yt.length||pr.length)&&hl()}}function Au(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xe;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:x,trim:w}=r[d]||Xe;w&&(i=n.map(P=>ct(P)?P.trim():P)),x&&(i=n.map(Ds))}let c,l=r[c=cs(t)]||r[c=cs(_r(t))];!l&&s&&(l=r[c=cs(Zn(t))]),l&&Qt(l,e,6,i);const u=r[c+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Qt(u,e,6,i)}}function dl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},c=!1;if(!Oe(e)){const l=u=>{const d=dl(u,t,!0);d&&(c=!0,ft(o,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(tt(e)&&r.set(e,null),null):(Te(s)?s.forEach(l=>o[l]=null):ft(o,s),tt(e)&&r.set(e,o),o)}function Qi(e,t){return!e||!Ji(t)?!1:(t=t.slice(2).replace(/Once$/,""),Le(e,t[0].toLowerCase()+t.slice(1))||Le(e,Zn(t))||Le(e,t))}let vt=null,pl=null;function Fi(e){const t=vt;return vt=e,pl=e&&e.type.__scopeId||null,t}function At(e,t=vt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ua(-1);const s=Fi(t);let o;try{o=e(...i)}finally{Fi(s),r._d&&ua(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function us(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:c,attrs:l,emit:u,render:d,renderCache:x,data:w,setupState:P,ctx:$,inheritAttrs:T}=e;let B,L;const O=Fi(e);try{if(n.shapeFlag&4){const N=i||r;B=rn(d.call(N,N,x,s,P,w,$)),L=l}else{const N=t;B=rn(N.length>1?N(s,{attrs:l,slots:c,emit:u}):N(s,null)),L=t.props?l:Pu(l)}}catch(N){Mr.length=0,Xi(N,e,1),B=rt($n)}let E=B;if(L&&T!==!1){const N=Object.keys(L),{shapeFlag:V}=E;N.length&&V&7&&(o&&N.some(ho)&&(L=$u(L,o)),E=Gn(E,L))}return n.dirs&&(E=Gn(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),B=E,Fi(O),B}const Pu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ji(n))&&((t||(t={}))[n]=e[n]);return t},$u=(e,t)=>{const n={};for(const r in e)(!ho(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Iu(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:c,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ta(r,o,u):!!o;if(l&8){const d=t.dynamicProps;for(let x=0;x<d.length;x++){const w=d[x];if(o[w]!==r[w]&&!Qi(u,w))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?ta(r,o,u):!0:!!o;return!1}function ta(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Qi(n,s))return!0}return!1}function Nu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const yl=e=>e.__isSuspense;function Fu(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Eu(e)}const di={};function Ci(e,t,n){return ml(e,t,n)}function ml(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Xe){var c;const l=qc()===((c=pt)==null?void 0:c.scope)?pt:null;let u,d=!1,x=!1;if(gt(e)?(u=()=>e.value,d=Ni(e)):dr(e)?(u=()=>e,r=!0):Te(e)?(x=!0,d=e.some(N=>dr(N)||Ni(N)),u=()=>e.map(N=>{if(gt(N))return N.value;if(dr(N))return Vn(N);if(Oe(N))return An(N,l,2)})):Oe(e)?t?u=()=>An(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return w&&w(),Qt(e,l,3,[P])}:u=Xt,t&&r){const N=u;u=()=>Vn(N())}let w,P=N=>{w=O.onStop=()=>{An(N,l,4)}},$;if(Jr)if(P=Xt,t?n&&Qt(t,l,3,[u(),x?[]:void 0,P]):u(),i==="sync"){const N=Tf();$=N.__watcherHandles||(N.__watcherHandles=[])}else return Xt;let T=x?new Array(e.length).fill(di):di;const B=()=>{if(O.active)if(t){const N=O.run();(r||d||(x?N.some((V,z)=>Ur(V,T[z])):Ur(N,T)))&&(w&&w(),Qt(t,l,3,[N,T===di?void 0:x&&T[0]===di?[]:T,P]),T=N)}else O.run()};B.allowRecurse=!!t;let L;i==="sync"?L=B:i==="post"?L=()=>dt(B,l&&l.suspense):(B.pre=!0,l&&(B.id=l.uid),L=()=>So(B));const O=new vo(u,L);t?n?B():T=O.run():i==="post"?dt(O.run.bind(O),l&&l.suspense):O.run();const E=()=>{O.stop(),l&&l.scope&&po(l.scope.effects,O)};return $&&$.push(E),E}function Mu(e,t,n){const r=this.proxy,i=ct(e)?e.includes(".")?gl(r,e):()=>r[e]:e.bind(r,r);let s;Oe(t)?s=t:(s=t.handler,n=t);const o=pt;xr(this);const c=ml(i,s.bind(r),n);return o?xr(o):Jn(),c}function gl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Vn(e,t){if(!tt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),gt(e))Vn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Vn(e[n],t);else if(Ra(e)||fr(e))e.forEach(n=>{Vn(n,t)});else if(Va(e))for(const n in e)Vn(e[n],t);return e}function en(e,t){const n=vt;if(n===null)return e;const r=rs(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,c,l,u=Xe]=t[s];o&&(Oe(o)&&(o={mounted:o,updated:o}),o.deep&&Vn(c),i.push({dir:o,instance:r,value:c,oldValue:void 0,arg:l,modifiers:u}))}return e}function Bn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const c=i[o];s&&(c.oldValue=s[o].value);let l=c.dir[r];l&&(kr(),Qt(l,n,8,[e.el,c,e,t]),Dr())}}function vl(e,t){e.shapeFlag&6&&e.component?vl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function an(e,t){return Oe(e)?(()=>ft({name:e.name},t,{setup:e}))():e}const yr=e=>!!e.type.__asyncLoader,bl=e=>e.type.__isKeepAlive,Lu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ml(),r=n.ctx;if(!r.renderer)return()=>{const O=t.default&&t.default();return O&&O.length===1?O[0]:O};const i=new Map,s=new Set;let o=null;const c=n.suspense,{renderer:{p:l,m:u,um:d,o:{createElement:x}}}=r,w=x("div");r.activate=(O,E,N,V,z)=>{const H=O.component;u(O,E,N,0,c),l(H.vnode,O,E,N,H,c,V,O.slotScopeIds,z),dt(()=>{H.isDeactivated=!1,H.a&&hr(H.a);const re=O.props&&O.props.onVnodeMounted;re&&Vt(re,H.parent,O)},c)},r.deactivate=O=>{const E=O.component;u(O,w,null,1,c),dt(()=>{E.da&&hr(E.da);const N=O.props&&O.props.onVnodeUnmounted;N&&Vt(N,E.parent,O),E.isDeactivated=!0},c)};function P(O){fs(O),d(O,n,c,!0)}function $(O){i.forEach((E,N)=>{const V=pa(E.type);V&&(!O||!O(V))&&T(N)})}function T(O){const E=i.get(O);!o||!or(E,o)?P(E):o&&fs(o),i.delete(O),s.delete(O)}Ci(()=>[e.include,e.exclude],([O,E])=>{O&&$(N=>Ar(O,N)),E&&$(N=>!Ar(E,N))},{flush:"post",deep:!0});let B=null;const L=()=>{B!=null&&i.set(B,hs(n.subTree))};return er(L),xl(L),es(()=>{i.forEach(O=>{const{subTree:E,suspense:N}=n,V=hs(E);if(O.type===V.type&&O.key===V.key){fs(V);const z=V.component.da;z&&dt(z,N);return}P(O)})}),()=>{if(B=null,!t.default)return null;const O=t.default(),E=O[0];if(O.length>1)return o=null,O;if(!Oo(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let N=hs(E);const V=N.type,z=pa(yr(N)?N.type.__asyncResolved||{}:V),{include:H,exclude:re,max:k}=e;if(H&&(!z||!Ar(H,z))||re&&z&&Ar(re,z))return o=N,E;const b=N.key==null?V:N.key,U=i.get(b);return N.el&&(N=Gn(N),E.shapeFlag&128&&(E.ssContent=N)),B=b,U?(N.el=U.el,N.component=U.component,N.transition&&vl(N,N.transition),N.shapeFlag|=512,s.delete(b),s.add(b)):(s.add(b),k&&s.size>parseInt(k,10)&&T(s.values().next().value)),N.shapeFlag|=256,o=N,yl(E.type)?E:N}}},Bu=Lu;function Ar(e,t){return Te(e)?e.some(n=>Ar(n,t)):ct(e)?e.split(",").includes(t):Ic(e)?e.test(t):!1}function ju(e,t){_l(e,"a",t)}function Ru(e,t){_l(e,"da",t)}function _l(e,t,n=pt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Zi(t,r,n),n){let i=n.parent;for(;i&&i.parent;)bl(i.parent.vnode)&&Ku(r,t,n,i),i=i.parent}}function Ku(e,t,n,r){const i=Zi(t,e,r,!0);Cl(()=>{po(r[t],i)},n)}function fs(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function hs(e){return e.shapeFlag&128?e.ssContent:e}function Zi(e,t,n=pt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;kr(),xr(n);const c=Qt(t,n,e,o);return Jn(),Dr(),c});return r?i.unshift(s):i.push(s),s}}const wn=e=>(t,n=pt)=>(!Jr||e==="sp")&&Zi(e,(...r)=>t(...r),n),wl=wn("bm"),er=wn("m"),Uu=wn("bu"),xl=wn("u"),es=wn("bum"),Cl=wn("um"),Vu=wn("sp"),Hu=wn("rtg"),qu=wn("rtc");function Yu(e,t=pt){Zi("ec",e,t)}const Ju=Symbol.for("v-ndc");function Yn(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||ct(e)){i=new Array(e.length);for(let o=0,c=e.length;o<c;o++)i[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(tt(e))if(e[Symbol.iterator])i=Array.from(e,(o,c)=>t(o,c,void 0,s&&s[c]));else{const o=Object.keys(e);i=new Array(o.length);for(let c=0,l=o.length;c<l;c++){const u=o[c];i[c]=t(e[u],u,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}function kl(e,t,n={},r,i){if(vt.isCE||vt.parent&&yr(vt.parent)&&vt.parent.isCE)return t!=="default"&&(n.name=t),rt("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),he();const o=s&&Dl(s(n)),c=Ot(nt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),s&&s._c&&(s._d=!0),c}function Dl(e){return e.some(t=>Oo(t)?!(t.type===$n||t.type===nt&&!Dl(t.children)):!0)?e:null}const $s=e=>e?Ll(e)?rs(e)||e.proxy:$s(e.parent):null,Fr=ft(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$s(e.parent),$root:e=>$s(e.root),$emit:e=>e.emit,$options:e=>To(e),$forceUpdate:e=>e.f||(e.f=()=>So(e.update)),$nextTick:e=>e.n||(e.n=Du.bind(e.proxy)),$watch:e=>Mu.bind(e)}),ds=(e,t)=>e!==Xe&&!e.__isScriptSetup&&Le(e,t),zu={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:c,appContext:l}=e;let u;if(t[0]!=="$"){const P=o[t];if(P!==void 0)switch(P){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(ds(r,t))return o[t]=1,r[t];if(i!==Xe&&Le(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&Le(u,t))return o[t]=3,s[t];if(n!==Xe&&Le(n,t))return o[t]=4,n[t];Is&&(o[t]=0)}}const d=Fr[t];let x,w;if(d)return t==="$attrs"&&Pt(e,"get",t),d(e);if((x=c.__cssModules)&&(x=x[t]))return x;if(n!==Xe&&Le(n,t))return o[t]=4,n[t];if(w=l.config.globalProperties,Le(w,t))return w[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return ds(i,t)?(i[t]=n,!0):r!==Xe&&Le(r,t)?(r[t]=n,!0):Le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let c;return!!n[o]||e!==Xe&&Le(e,o)||ds(t,o)||(c=s[0])&&Le(c,o)||Le(r,o)||Le(Fr,o)||Le(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Le(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wu(){return Gu().slots}function Gu(){const e=Ml();return e.setupContext||(e.setupContext=jl(e))}function na(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Is=!0;function Xu(e){const t=To(e),n=e.proxy,r=e.ctx;Is=!1,t.beforeCreate&&ra(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:c,provide:l,inject:u,created:d,beforeMount:x,mounted:w,beforeUpdate:P,updated:$,activated:T,deactivated:B,beforeDestroy:L,beforeUnmount:O,destroyed:E,unmounted:N,render:V,renderTracked:z,renderTriggered:H,errorCaptured:re,serverPrefetch:k,expose:b,inheritAttrs:U,components:j,directives:ve,filters:ae}=t;if(u&&Qu(u,r,null),o)for(const ue in o){const oe=o[ue];Oe(oe)&&(r[ue]=oe.bind(n))}if(i){const ue=i.call(n,n);tt(ue)&&(e.data=ni(ue))}if(Is=!0,s)for(const ue in s){const oe=s[ue],Ve=Oe(oe)?oe.bind(n,n):Oe(oe.get)?oe.get.bind(n,n):Xt,Ue=!Oe(oe)&&Oe(oe.set)?oe.set.bind(n):Xt,Ze=Rl({get:Ve,set:Ue});Object.defineProperty(r,ue,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:Re=>Ze.value=Re})}if(c)for(const ue in c)Sl(c[ue],r,n,ue);if(l){const ue=Oe(l)?l.call(n):l;Reflect.ownKeys(ue).forEach(oe=>{sf(oe,ue[oe])})}d&&ra(d,e,"c");function ge(ue,oe){Te(oe)?oe.forEach(Ve=>ue(Ve.bind(n))):oe&&ue(oe.bind(n))}if(ge(wl,x),ge(er,w),ge(Uu,P),ge(xl,$),ge(ju,T),ge(Ru,B),ge(Yu,re),ge(qu,z),ge(Hu,H),ge(es,O),ge(Cl,N),ge(Vu,k),Te(b))if(b.length){const ue=e.exposed||(e.exposed={});b.forEach(oe=>{Object.defineProperty(ue,oe,{get:()=>n[oe],set:Ve=>n[oe]=Ve})})}else e.exposed||(e.exposed={});V&&e.render===Xt&&(e.render=V),U!=null&&(e.inheritAttrs=U),j&&(e.components=j),ve&&(e.directives=ve)}function Qu(e,t,n=Xt){Te(e)&&(e=Ns(e));for(const r in e){const i=e[r];let s;tt(i)?"default"in i?s=ki(i.from||r,i.default,!0):s=ki(i.from||r):s=ki(i),gt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ra(e,t,n){Qt(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Sl(e,t,n,r){const i=r.includes(".")?gl(n,r):()=>n[r];if(ct(e)){const s=t[e];Oe(s)&&Ci(i,s)}else if(Oe(e))Ci(i,e.bind(n));else if(tt(e))if(Te(e))e.forEach(s=>Sl(s,t,n,r));else{const s=Oe(e.handler)?e.handler.bind(n):t[e.handler];Oe(s)&&Ci(i,s,e)}}function To(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>Mi(l,u,o,!0)),Mi(l,t,o)),tt(t)&&s.set(t,l),l}function Mi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Mi(e,s,n,!0),i&&i.forEach(o=>Mi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const c=Zu[o]||n&&n[o];e[o]=c?c(e[o],t[o]):t[o]}return e}const Zu={data:ia,props:sa,emits:sa,methods:Pr,computed:Pr,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Pr,directives:Pr,watch:tf,provide:ia,inject:ef};function ia(e,t){return t?e?function(){return ft(Oe(e)?e.call(this,this):e,Oe(t)?t.call(this,this):t)}:t:e}function ef(e,t){return Pr(Ns(e),Ns(t))}function Ns(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xt(e,t){return e?[...new Set([].concat(e,t))]:t}function Pr(e,t){return e?ft(Object.create(null),e,t):t}function sa(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:ft(Object.create(null),na(e),na(t??{})):t}function tf(e,t){if(!e)return t;if(!t)return e;const n=ft(Object.create(null),e);for(const r in t)n[r]=xt(e[r],t[r]);return n}function Tl(){return{app:null,config:{isNativeTag:Ac,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nf=0;function rf(e,t){return function(r,i=null){Oe(r)||(r=ft({},r)),i!=null&&!tt(i)&&(i=null);const s=Tl(),o=new Set;let c=!1;const l=s.app={_uid:nf++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Ef,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Oe(u.install)?(o.add(u),u.install(l,...d)):Oe(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,x){if(!c){const w=rt(r,i);return w.appContext=s,d&&t?t(w,u):e(w,u,x),c=!0,l._container=u,u.__vue_app__=l,rs(w.component)||w.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){Li=l;try{return u()}finally{Li=null}}};return l}}let Li=null;function sf(e,t){if(pt){let n=pt.provides;const r=pt.parent&&pt.parent.provides;r===n&&(n=pt.provides=Object.create(r)),n[e]=t}}function ki(e,t,n=!1){const r=pt||vt;if(r||Li){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Li._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Oe(t)?t.call(r&&r.proxy):t}}function of(e,t,n,r=!1){const i={},s={};Ii(s,ns,1),e.propsDefaults=Object.create(null),El(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:vu(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function af(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,c=Ke(i),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let x=0;x<d.length;x++){let w=d[x];if(Qi(e.emitsOptions,w))continue;const P=t[w];if(l)if(Le(s,w))P!==s[w]&&(s[w]=P,u=!0);else{const $=_r(w);i[$]=Fs(l,c,$,P,e,!1)}else P!==s[w]&&(s[w]=P,u=!0)}}}else{El(e,t,i,s)&&(u=!0);let d;for(const x in c)(!t||!Le(t,x)&&((d=Zn(x))===x||!Le(t,d)))&&(l?n&&(n[x]!==void 0||n[d]!==void 0)&&(i[x]=Fs(l,c,x,void 0,e,!0)):delete i[x]);if(s!==c)for(const x in s)(!t||!Le(t,x))&&(delete s[x],u=!0)}u&&bn(e,"set","$attrs")}function El(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,c;if(t)for(let l in t){if(xi(l))continue;const u=t[l];let d;i&&Le(i,d=_r(l))?!s||!s.includes(d)?n[d]=u:(c||(c={}))[d]=u:Qi(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=Ke(n),u=c||Xe;for(let d=0;d<s.length;d++){const x=s[d];n[x]=Fs(i,l,x,u[x],e,!Le(u,x))}}return o}function Fs(e,t,n,r,i,s){const o=e[n];if(o!=null){const c=Le(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(xr(i),r=u[n]=l.call(null,t),Jn())}else r=l}o[0]&&(s&&!c?r=!1:o[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}function Ol(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},c=[];let l=!1;if(!Oe(e)){const d=x=>{l=!0;const[w,P]=Ol(x,t,!0);ft(o,w),P&&c.push(...P)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return tt(e)&&r.set(e,ur),ur;if(Te(s))for(let d=0;d<s.length;d++){const x=_r(s[d]);oa(x)&&(o[x]=Xe)}else if(s)for(const d in s){const x=_r(d);if(oa(x)){const w=s[d],P=o[x]=Te(w)||Oe(w)?{type:w}:ft({},w);if(P){const $=ca(Boolean,P.type),T=ca(String,P.type);P[0]=$>-1,P[1]=T<0||$<T,($>-1||Le(P,"default"))&&c.push(x)}}}const u=[o,c];return tt(e)&&r.set(e,u),u}function oa(e){return e[0]!=="$"}function aa(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function la(e,t){return aa(e)===aa(t)}function ca(e,t){return Te(t)?t.findIndex(n=>la(n,e)):Oe(t)&&la(t,e)?0:-1}const Al=e=>e[0]==="_"||e==="$stable",Eo=e=>Te(e)?e.map(rn):[rn(e)],lf=(e,t,n)=>{if(t._n)return t;const r=At((...i)=>Eo(t(...i)),n);return r._c=!1,r},Pl=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Al(i))continue;const s=e[i];if(Oe(s))t[i]=lf(i,s,r);else if(s!=null){const o=Eo(s);t[i]=()=>o}}},$l=(e,t)=>{const n=Eo(t);e.slots.default=()=>n},cf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ke(t),Ii(t,"_",n)):Pl(t,e.slots={})}else e.slots={},t&&$l(e,t);Ii(e.slots,ns,1)},uf=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=Xe;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(ft(i,t),!n&&c===1&&delete i._):(s=!t.$stable,Pl(t,i)),o=t}else t&&($l(e,t),o={default:1});if(s)for(const c in i)!Al(c)&&!(c in o)&&delete i[c]};function Ms(e,t,n,r,i=!1){if(Te(e)){e.forEach((w,P)=>Ms(w,t&&(Te(t)?t[P]:t),n,r,i));return}if(yr(r)&&!i)return;const s=r.shapeFlag&4?rs(r.component)||r.component.proxy:r.el,o=i?null:s,{i:c,r:l}=e,u=t&&t.r,d=c.refs===Xe?c.refs={}:c.refs,x=c.setupState;if(u!=null&&u!==l&&(ct(u)?(d[u]=null,Le(x,u)&&(x[u]=null)):gt(u)&&(u.value=null)),Oe(l))An(l,c,12,[o,d]);else{const w=ct(l),P=gt(l);if(w||P){const $=()=>{if(e.f){const T=w?Le(x,l)?x[l]:d[l]:l.value;i?Te(T)&&po(T,s):Te(T)?T.includes(s)||T.push(s):w?(d[l]=[s],Le(x,l)&&(x[l]=d[l])):(l.value=[s],e.k&&(d[e.k]=l.value))}else w?(d[l]=o,Le(x,l)&&(x[l]=o)):P&&(l.value=o,e.k&&(d[e.k]=o))};o?($.id=-1,dt($,n)):$()}}}const dt=Fu;function ff(e){return hf(e)}function hf(e,t){const n=Ss();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:c,createComment:l,setText:u,setElementText:d,parentNode:x,nextSibling:w,setScopeId:P=Xt,insertStaticContent:$}=e,T=(a,f,p,y=null,g=null,_=null,C=!1,A=null,F=!!f.dynamicChildren)=>{if(a===f)return;a&&!or(a,f)&&(y=K(a),Re(a,g,_,!0),a=null),f.patchFlag===-2&&(F=!1,f.dynamicChildren=null);const{type:M,ref:J,shapeFlag:q}=f;switch(M){case ts:B(a,f,p,y);break;case $n:L(a,f,p,y);break;case ps:a==null&&O(f,p,y,C);break;case nt:j(a,f,p,y,g,_,C,A,F);break;default:q&1?V(a,f,p,y,g,_,C,A,F):q&6?ve(a,f,p,y,g,_,C,A,F):(q&64||q&128)&&M.process(a,f,p,y,g,_,C,A,F,Y)}J!=null&&g&&Ms(J,a&&a.ref,_,f||a,!f)},B=(a,f,p,y)=>{if(a==null)r(f.el=c(f.children),p,y);else{const g=f.el=a.el;f.children!==a.children&&u(g,f.children)}},L=(a,f,p,y)=>{a==null?r(f.el=l(f.children||""),p,y):f.el=a.el},O=(a,f,p,y)=>{[a.el,a.anchor]=$(a.children,f,p,y,a.el,a.anchor)},E=({el:a,anchor:f},p,y)=>{let g;for(;a&&a!==f;)g=w(a),r(a,p,y),a=g;r(f,p,y)},N=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=w(a),i(a),a=p;i(f)},V=(a,f,p,y,g,_,C,A,F)=>{C=C||f.type==="svg",a==null?z(f,p,y,g,_,C,A,F):k(a,f,g,_,C,A,F)},z=(a,f,p,y,g,_,C,A)=>{let F,M;const{type:J,props:q,shapeFlag:G,transition:Z,dirs:ie}=a;if(F=a.el=o(a.type,_,q&&q.is,q),G&8?d(F,a.children):G&16&&re(a.children,F,null,y,g,_&&J!=="foreignObject",C,A),ie&&Bn(a,null,y,"created"),H(F,a,a.scopeId,C,y),q){for(const me in q)me!=="value"&&!xi(me)&&s(F,me,null,q[me],_,a.children,y,g,Ne);"value"in q&&s(F,"value",null,q.value),(M=q.onVnodeBeforeMount)&&Vt(M,y,a)}ie&&Bn(a,null,y,"beforeMount");const fe=(!g||g&&!g.pendingBranch)&&Z&&!Z.persisted;fe&&Z.beforeEnter(F),r(F,f,p),((M=q&&q.onVnodeMounted)||fe||ie)&&dt(()=>{M&&Vt(M,y,a),fe&&Z.enter(F),ie&&Bn(a,null,y,"mounted")},g)},H=(a,f,p,y,g)=>{if(p&&P(a,p),y)for(let _=0;_<y.length;_++)P(a,y[_]);if(g){let _=g.subTree;if(f===_){const C=g.vnode;H(a,C,C.scopeId,C.slotScopeIds,g.parent)}}},re=(a,f,p,y,g,_,C,A,F=0)=>{for(let M=F;M<a.length;M++){const J=a[M]=A?Dn(a[M]):rn(a[M]);T(null,J,f,p,y,g,_,C,A)}},k=(a,f,p,y,g,_,C)=>{const A=f.el=a.el;let{patchFlag:F,dynamicChildren:M,dirs:J}=f;F|=a.patchFlag&16;const q=a.props||Xe,G=f.props||Xe;let Z;p&&jn(p,!1),(Z=G.onVnodeBeforeUpdate)&&Vt(Z,p,f,a),J&&Bn(f,a,p,"beforeUpdate"),p&&jn(p,!0);const ie=g&&f.type!=="foreignObject";if(M?b(a.dynamicChildren,M,A,p,y,ie,_):C||oe(a,f,A,null,p,y,ie,_,!1),F>0){if(F&16)U(A,f,q,G,p,y,g);else if(F&2&&q.class!==G.class&&s(A,"class",null,G.class,g),F&4&&s(A,"style",q.style,G.style,g),F&8){const fe=f.dynamicProps;for(let me=0;me<fe.length;me++){const te=fe[me],m=q[te],h=G[te];(h!==m||te==="value")&&s(A,te,m,h,g,a.children,p,y,Ne)}}F&1&&a.children!==f.children&&d(A,f.children)}else!C&&M==null&&U(A,f,q,G,p,y,g);((Z=G.onVnodeUpdated)||J)&&dt(()=>{Z&&Vt(Z,p,f,a),J&&Bn(f,a,p,"updated")},y)},b=(a,f,p,y,g,_,C)=>{for(let A=0;A<f.length;A++){const F=a[A],M=f[A],J=F.el&&(F.type===nt||!or(F,M)||F.shapeFlag&70)?x(F.el):p;T(F,M,J,null,y,g,_,C,!0)}},U=(a,f,p,y,g,_,C)=>{if(p!==y){if(p!==Xe)for(const A in p)!xi(A)&&!(A in y)&&s(a,A,p[A],null,C,f.children,g,_,Ne);for(const A in y){if(xi(A))continue;const F=y[A],M=p[A];F!==M&&A!=="value"&&s(a,A,M,F,C,f.children,g,_,Ne)}"value"in y&&s(a,"value",p.value,y.value)}},j=(a,f,p,y,g,_,C,A,F)=>{const M=f.el=a?a.el:c(""),J=f.anchor=a?a.anchor:c("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(A=A?A.concat(Z):Z),a==null?(r(M,p,y),r(J,p,y),re(f.children,p,J,g,_,C,A,F)):q>0&&q&64&&G&&a.dynamicChildren?(b(a.dynamicChildren,G,p,g,_,C,A),(f.key!=null||g&&f===g.subTree)&&Il(a,f,!0)):oe(a,f,p,J,g,_,C,A,F)},ve=(a,f,p,y,g,_,C,A,F)=>{f.slotScopeIds=A,a==null?f.shapeFlag&512?g.ctx.activate(f,p,y,C,F):ae(f,p,y,g,_,C,F):Ae(a,f,F)},ae=(a,f,p,y,g,_,C)=>{const A=a.component=wf(a,y,g);if(bl(a)&&(A.ctx.renderer=Y),xf(A),A.asyncDep){if(g&&g.registerDep(A,ge),!a.el){const F=A.subTree=rt($n);L(null,F,f,p)}return}ge(A,a,f,p,g,_,C)},Ae=(a,f,p)=>{const y=f.component=a.component;if(Iu(a,f,p))if(y.asyncDep&&!y.asyncResolved){ue(y,f,p);return}else y.next=f,Tu(y.update),y.update();else f.el=a.el,y.vnode=f},ge=(a,f,p,y,g,_,C)=>{const A=()=>{if(a.isMounted){let{next:J,bu:q,u:G,parent:Z,vnode:ie}=a,fe=J,me;jn(a,!1),J?(J.el=ie.el,ue(a,J,C)):J=ie,q&&hr(q),(me=J.props&&J.props.onVnodeBeforeUpdate)&&Vt(me,Z,J,ie),jn(a,!0);const te=us(a),m=a.subTree;a.subTree=te,T(m,te,x(m.el),K(m),a,g,_),J.el=te.el,fe===null&&Nu(a,te.el),G&&dt(G,g),(me=J.props&&J.props.onVnodeUpdated)&&dt(()=>Vt(me,Z,J,ie),g)}else{let J;const{el:q,props:G}=f,{bm:Z,m:ie,parent:fe}=a,me=yr(f);if(jn(a,!1),Z&&hr(Z),!me&&(J=G&&G.onVnodeBeforeMount)&&Vt(J,fe,f),jn(a,!0),q&&D){const te=()=>{a.subTree=us(a),D(q,a.subTree,a,g,null)};me?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=us(a);T(null,te,p,y,a,g,_),f.el=te.el}if(ie&&dt(ie,g),!me&&(J=G&&G.onVnodeMounted)){const te=f;dt(()=>Vt(J,fe,te),g)}(f.shapeFlag&256||fe&&yr(fe.vnode)&&fe.vnode.shapeFlag&256)&&a.a&&dt(a.a,g),a.isMounted=!0,f=p=y=null}},F=a.effect=new vo(A,()=>So(M),a.scope),M=a.update=()=>F.run();M.id=a.uid,jn(a,!0),M()},ue=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,af(a,f.props,y,p),uf(a,f.children,p),kr(),ea(),Dr()},oe=(a,f,p,y,g,_,C,A,F=!1)=>{const M=a&&a.children,J=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Ue(M,q,p,y,g,_,C,A,F);return}else if(G&256){Ve(M,q,p,y,g,_,C,A,F);return}}Z&8?(J&16&&Ne(M,g,_),q!==M&&d(p,q)):J&16?Z&16?Ue(M,q,p,y,g,_,C,A,F):Ne(M,g,_,!0):(J&8&&d(p,""),Z&16&&re(q,p,y,g,_,C,A,F))},Ve=(a,f,p,y,g,_,C,A,F)=>{a=a||ur,f=f||ur;const M=a.length,J=f.length,q=Math.min(M,J);let G;for(G=0;G<q;G++){const Z=f[G]=F?Dn(f[G]):rn(f[G]);T(a[G],Z,p,null,g,_,C,A,F)}M>J?Ne(a,g,_,!0,!1,q):re(f,p,y,g,_,C,A,F,q)},Ue=(a,f,p,y,g,_,C,A,F)=>{let M=0;const J=f.length;let q=a.length-1,G=J-1;for(;M<=q&&M<=G;){const Z=a[M],ie=f[M]=F?Dn(f[M]):rn(f[M]);if(or(Z,ie))T(Z,ie,p,null,g,_,C,A,F);else break;M++}for(;M<=q&&M<=G;){const Z=a[q],ie=f[G]=F?Dn(f[G]):rn(f[G]);if(or(Z,ie))T(Z,ie,p,null,g,_,C,A,F);else break;q--,G--}if(M>q){if(M<=G){const Z=G+1,ie=Z<J?f[Z].el:y;for(;M<=G;)T(null,f[M]=F?Dn(f[M]):rn(f[M]),p,ie,g,_,C,A,F),M++}}else if(M>G)for(;M<=q;)Re(a[M],g,_,!0),M++;else{const Z=M,ie=M,fe=new Map;for(M=ie;M<=G;M++){const Q=f[M]=F?Dn(f[M]):rn(f[M]);Q.key!=null&&fe.set(Q.key,M)}let me,te=0;const m=G-ie+1;let h=!1,v=0;const S=new Array(m);for(M=0;M<m;M++)S[M]=0;for(M=Z;M<=q;M++){const Q=a[M];if(te>=m){Re(Q,g,_,!0);continue}let ee;if(Q.key!=null)ee=fe.get(Q.key);else for(me=ie;me<=G;me++)if(S[me-ie]===0&&or(Q,f[me])){ee=me;break}ee===void 0?Re(Q,g,_,!0):(S[ee-ie]=M+1,ee>=v?v=ee:h=!0,T(Q,f[ee],p,null,g,_,C,A,F),te++)}const I=h?df(S):ur;for(me=I.length-1,M=m-1;M>=0;M--){const Q=ie+M,ee=f[Q],pe=Q+1<J?f[Q+1].el:y;S[M]===0?T(null,ee,p,pe,g,_,C,A,F):h&&(me<0||M!==I[me]?Ze(ee,p,pe,2):me--)}}},Ze=(a,f,p,y,g=null)=>{const{el:_,type:C,transition:A,children:F,shapeFlag:M}=a;if(M&6){Ze(a.component.subTree,f,p,y);return}if(M&128){a.suspense.move(f,p,y);return}if(M&64){C.move(a,f,p,Y);return}if(C===nt){r(_,f,p);for(let q=0;q<F.length;q++)Ze(F[q],f,p,y);r(a.anchor,f,p);return}if(C===ps){E(a,f,p);return}if(y!==2&&M&1&&A)if(y===0)A.beforeEnter(_),r(_,f,p),dt(()=>A.enter(_),g);else{const{leave:q,delayLeave:G,afterLeave:Z}=A,ie=()=>r(_,f,p),fe=()=>{q(_,()=>{ie(),Z&&Z()})};G?G(_,ie,fe):fe()}else r(_,f,p)},Re=(a,f,p,y=!1,g=!1)=>{const{type:_,props:C,ref:A,children:F,dynamicChildren:M,shapeFlag:J,patchFlag:q,dirs:G}=a;if(A!=null&&Ms(A,null,p,a,!0),J&256){f.ctx.deactivate(a);return}const Z=J&1&&G,ie=!yr(a);let fe;if(ie&&(fe=C&&C.onVnodeBeforeUnmount)&&Vt(fe,f,a),J&6)ce(a.component,p,y);else{if(J&128){a.suspense.unmount(p,y);return}Z&&Bn(a,null,f,"beforeUnmount"),J&64?a.type.remove(a,f,p,g,Y,y):M&&(_!==nt||q>0&&q&64)?Ne(M,f,p,!1,!0):(_===nt&&q&384||!g&&J&16)&&Ne(F,f,p),y&&$t(a)}(ie&&(fe=C&&C.onVnodeUnmounted)||Z)&&dt(()=>{fe&&Vt(fe,f,a),Z&&Bn(a,null,f,"unmounted")},p)},$t=a=>{const{type:f,el:p,anchor:y,transition:g}=a;if(f===nt){ye(p,y);return}if(f===ps){N(a);return}const _=()=>{i(p),g&&!g.persisted&&g.afterLeave&&g.afterLeave()};if(a.shapeFlag&1&&g&&!g.persisted){const{leave:C,delayLeave:A}=g,F=()=>C(p,_);A?A(a.el,_,F):F()}else _()},ye=(a,f)=>{let p;for(;a!==f;)p=w(a),i(a),a=p;i(f)},ce=(a,f,p)=>{const{bum:y,scope:g,update:_,subTree:C,um:A}=a;y&&hr(y),g.stop(),_&&(_.active=!1,Re(C,a,f,p)),A&&dt(A,f),dt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Ne=(a,f,p,y=!1,g=!1,_=0)=>{for(let C=_;C<a.length;C++)Re(a[C],f,p,y,g)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():w(a.anchor||a.el),W=(a,f,p)=>{a==null?f._vnode&&Re(f._vnode,null,null,!0):T(f._vnode||null,a,f,null,null,null,p),ea(),fl(),f._vnode=a},Y={p:T,um:Re,m:Ze,r:$t,mt:ae,mc:re,pc:oe,pbc:b,n:K,o:e};let X,D;return t&&([X,D]=t(Y)),{render:W,hydrate:X,createApp:rf(W,X)}}function jn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Il(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const o=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=Dn(i[s]),c.el=o.el),n||Il(o,c)),c.type===ts&&(c.el=o.el)}}function df(e){const t=e.slice(),n=[0];let r,i,s,o,c;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)c=s+o>>1,e[n[c]]<u?s=c+1:o=c;u<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const pf=e=>e.__isTeleport,nt=Symbol.for("v-fgt"),ts=Symbol.for("v-txt"),$n=Symbol.for("v-cmt"),ps=Symbol.for("v-stc"),Mr=[];let Wt=null;function he(e=!1){Mr.push(Wt=e?null:[])}function yf(){Mr.pop(),Wt=Mr[Mr.length-1]||null}let Yr=1;function ua(e){Yr+=e}function Nl(e){return e.dynamicChildren=Yr>0?Wt||ur:null,yf(),Yr>0&&Wt&&Wt.push(e),e}function De(e,t,n,r,i,s){return Nl(R(e,t,n,r,i,s,!0))}function Ot(e,t,n,r,i){return Nl(rt(e,t,n,r,i,!0))}function Oo(e){return e?e.__v_isVNode===!0:!1}function or(e,t){return e.type===t.type&&e.key===t.key}const ns="__vInternal",Fl=({key:e})=>e??null,Di=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ct(e)||gt(e)||Oe(e)?{i:vt,r:e,k:t,f:!!n}:e:null);function R(e,t=null,n=null,r=0,i=null,s=e===nt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fl(t),ref:t&&Di(t),scopeId:pl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vt};return c?(Ao(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ct(n)?8:16),Yr>0&&!o&&Wt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Wt.push(l),l}const rt=mf;function mf(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Ju)&&(e=$n),Oo(e)){const c=Gn(e,t,!0);return n&&Ao(c,n),Yr>0&&!s&&Wt&&(c.shapeFlag&6?Wt[Wt.indexOf(e)]=c:Wt.push(c)),c.patchFlag|=-2,c}if(Df(e)&&(e=e.__vccOpts),t){t=gf(t);let{class:c,style:l}=t;c&&!ct(c)&&(t.class=Ct(c)),tt(l)&&(sl(l)&&!Te(l)&&(l=ft({},l)),t.style=Wi(l))}const o=ct(e)?1:yl(e)?128:pf(e)?64:tt(e)?4:Oe(e)?2:0;return R(e,t,n,r,i,o,s,!0)}function gf(e){return e?sl(e)||ns in e?ft({},e):e:null}function Gn(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=e,c=t?vf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Fl(c),ref:t&&t.ref?n&&i?Te(i)?i.concat(Di(t)):[i,Di(t)]:Di(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==nt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gn(e.ssContent),ssFallback:e.ssFallback&&Gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Lt(e=" ",t=0){return rt(ts,null,e,t)}function We(e="",t=!1){return t?(he(),Ot($n,null,e)):rt($n,null,e)}function rn(e){return e==null||typeof e=="boolean"?rt($n):Te(e)?rt(nt,null,e.slice()):typeof e=="object"?Dn(e):rt(ts,null,String(e))}function Dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gn(e)}function Ao(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ao(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(ns in t)?t._ctx=vt:i===3&&vt&&(vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Oe(t)?(t={default:t,_ctx:vt},n=32):(t=String(t),r&64?(n=16,t=[Lt(t)]):n=8);e.children=t,e.shapeFlag|=n}function vf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Ct([t.class,r.class]));else if(i==="style")t.style=Wi([t.style,r.style]);else if(Ji(i)){const s=t[i],o=r[i];o&&s!==o&&!(Te(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function Vt(e,t,n,r=null){Qt(e,t,7,[n,r])}const bf=Tl();let _f=0;function wf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||bf,s={uid:_f++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ja(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ol(r,i),emitsOptions:dl(r,i),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:r.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Au.bind(null,s),e.ce&&e.ce(s),s}let pt=null;const Ml=()=>pt||vt;let Po,rr,fa="__VUE_INSTANCE_SETTERS__";(rr=Ss()[fa])||(rr=Ss()[fa]=[]),rr.push(e=>pt=e),Po=e=>{rr.length>1?rr.forEach(t=>t(e)):rr[0](e)};const xr=e=>{Po(e),e.scope.on()},Jn=()=>{pt&&pt.scope.off(),Po(null)};function Ll(e){return e.vnode.shapeFlag&4}let Jr=!1;function xf(e,t=!1){Jr=t;const{props:n,children:r}=e.vnode,i=Ll(e);of(e,n,i,t),cf(e,r);const s=i?Cf(e,t):void 0;return Jr=!1,s}function Cf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Co(new Proxy(e.ctx,zu));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?jl(e):null;xr(e),kr();const s=An(r,e,0,[e.props,i]);if(Dr(),Jn(),Ka(s)){if(s.then(Jn,Jn),t)return s.then(o=>{ha(e,o,t)}).catch(o=>{Xi(o,e,0)});e.asyncDep=s}else ha(e,s,t)}else Bl(e,t)}function ha(e,t,n){Oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:tt(t)&&(e.setupState=ll(t)),Bl(e,n)}let da;function Bl(e,t,n){const r=e.type;if(!e.render){if(!t&&da&&!r.render){const i=r.template||To(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,u=ft(ft({isCustomElement:s,delimiters:c},o),l);r.render=da(i,u)}}e.render=r.render||Xt}xr(e),kr(),Xu(e),Dr(),Jn()}function kf(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Pt(e,"get","$attrs"),t[n]}}))}function jl(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return kf(e)},slots:e.slots,emit:e.emit,expose:t}}function rs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ll(Co(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Fr)return Fr[n](e)},has(t,n){return n in t||n in Fr}}))}function pa(e,t=!0){return Oe(e)?e.displayName||e.name:e.name||t&&e.__name}function Df(e){return Oe(e)&&"__vccOpts"in e}const Rl=(e,t)=>Cu(e,t,Jr),Sf=Symbol.for("v-scx"),Tf=()=>ki(Sf),Ef="3.3.4",Of="http://www.w3.org/2000/svg",Un=typeof document<"u"?document:null,ya=Un&&Un.createElement("template"),Af={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Un.createElementNS(Of,e):Un.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Un.createTextNode(e),createComment:e=>Un.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Un.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ya.innerHTML=r?`<svg>${e}</svg>`:e;const c=ya.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Pf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function $f(e,t,n){const r=e.style,i=ct(n);if(n&&!i){if(t&&!ct(t))for(const s in t)n[s]==null&&Ls(r,s,"");for(const s in n)Ls(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const ma=/\s*!important$/;function Ls(e,t,n){if(Te(n))n.forEach(r=>Ls(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=If(e,t);ma.test(n)?e.setProperty(Zn(r),n.replace(ma,""),"important"):e[r]=n}}const ga=["Webkit","Moz","ms"],ys={};function If(e,t){const n=ys[t];if(n)return n;let r=_r(t);if(r!=="filter"&&r in e)return ys[t]=r;r=Ha(r);for(let i=0;i<ga.length;i++){const s=ga[i]+r;if(s in e)return ys[t]=s}return t}const va="http://www.w3.org/1999/xlink";function Nf(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(va,t.slice(6,t.length)):e.setAttributeNS(va,t,n);else{const s=Uc(t);n==null||s&&!qa(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function Ff(e,t,n,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),e[t]=n??"";return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){e._value=n;const u=c==="OPTION"?e.getAttribute("value"):e.value,d=n??"";u!==d&&(e.value=d),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=qa(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function ar(e,t,n,r){e.addEventListener(t,n,r)}function Mf(e,t,n,r){e.removeEventListener(t,n,r)}function Lf(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[c,l]=Bf(t);if(r){const u=s[t]=Kf(r,i);ar(e,c,u,l)}else o&&(Mf(e,c,o,l),s[t]=void 0)}}const ba=/(?:Once|Passive|Capture)$/;function Bf(e){let t;if(ba.test(e)){t={};let r;for(;r=e.match(ba);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let ms=0;const jf=Promise.resolve(),Rf=()=>ms||(jf.then(()=>ms=0),ms=Date.now());function Kf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Qt(Uf(r,n.value),t,5,[r])};return n.value=e,n.attached=Rf(),n}function Uf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const _a=/^on[a-z]/,Vf=(e,t,n,r,i=!1,s,o,c,l)=>{t==="class"?Pf(e,r,i):t==="style"?$f(e,n,r):Ji(t)?ho(t)||Lf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hf(e,t,r,i))?Ff(e,t,r,s,o,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Nf(e,t,r,i))};function Hf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&_a.test(t)&&Oe(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||_a.test(t)&&ct(n)?!1:t in e}const wa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>hr(t,n):t};function qf(e){e.target.composing=!0}function xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=wa(i);const s=r||i.props&&i.props.type==="number";ar(e,t?"change":"input",o=>{if(o.target.composing)return;let c=e.value;n&&(c=c.trim()),s&&(c=Ds(c)),e._assign(c)}),n&&ar(e,"change",()=>{e.value=e.value.trim()}),t||(ar(e,"compositionstart",qf),ar(e,"compositionend",xa),ar(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=wa(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ds(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Yf=["ctrl","shift","alt","meta"],Jf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Yf.some(n=>e[`${n}Key`]&&!t.includes(n))},Bt=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=Jf[t[i]];if(s&&s(n,t))return}return e(n,...r)},zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wf=(e,t)=>n=>{if(!("key"in n))return;const r=Zn(n.key);if(t.some(i=>i===r||zf[i]===r))return e(n)},Gf=ft({patchProp:Vf},Af);let Ca;function Xf(){return Ca||(Ca=ff(Gf))}const Qf=(...e)=>{const t=Xf().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Zf(r);if(!i)return;const s=t._component;!Oe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Zf(e){return ct(e)?document.querySelector(e):e}var eh=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const th=Symbol();var ka;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ka||(ka={}));function nh(){const e=Vc(!0),t=e.run(()=>mn({}));let n=[],r=[];const i=Co({install(s){i._a=s,s.provide(th,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!eh?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const rh={key:0,class:"button-loader"},ih=R("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),sh=[ih],jt=an({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=Wu();return(r,i)=>(he(),De("button",{class:Ct(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(he(),De("div",rh,sh)):We("",!0),t.icon?(he(),De("i",{key:1,class:Ct([{"opacity-0":t.loading,"mr-2":we(n).default},"font-icon"])},je(t.icon),3)):We("",!0),we(n).default?(he(),De("span",{key:2,class:Ct({"opacity-0":t.loading})},[kl(r.$slots,"default")],2)):We("",!0)],2))}});var Tn=(e=>(e.ReviewsFilter="reviews_filter",e.ParsingResult="parsing_result",e.ProfileSavedList="profile_saved_list",e.Settings="settings",e))(Tn||{});class oh{constructor(){un(this,"active",mn("reviews_filter"));un(this,"list",[{value:"reviews_filter",text:"Фильтр отзывов",icon:"tune"},{value:"parsing_result",text:"Результаты парсинга",icon:"view_list"},{value:"profile_saved_list",text:"Список профилей",icon:"people"}])}changeTab(t){this.active.value=t}}const on=new oh,ah={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},lh={class:"centered py-3 flex flex-wrap items-center gap-3"},ch=an({__name:"Header",setup(e){return(t,n)=>(he(),De("header",ah,[R("div",lh,[(he(!0),De(nt,null,Yn(we(on).list,r=>(he(),Ot(jt,{key:r.value,icon:r.icon,class:Ct([we(on).active.value===r.value?"ring-2 ring-white":""]),onClick:i=>we(on).changeTab(r.value)},{default:At(()=>[Lt(je(r.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),rt(jt,{theme:"info",type:"button",icon:"settings",class:Ct(["ml-auto",[we(on).active.value===we(Tn).Settings?"ring-2 ring-white":""]]),onClick:n[0]||(n[0]=r=>we(on).changeTab(we(Tn).Settings))},null,8,["class"])])]))}}),uh={class:"switch"},fh=["tabindex","checked"],hh=["tabindex","checked"],dh=R("div",{class:"switch__label"},null,-1),ph=an({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,i)=>(he(),De("div",uh,[r.type==="checkbox"?(he(),De("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,fh)):We("",!0),r.type==="radio"?(he(),De("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,hh)):We("",!0),dh]))}});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kl={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(yh,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return Y}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function c(){let{tagName:D="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=document.createElement(D);return a&&g.classList.add(...a.split(" ")),p&&(g.id=p),f&&(g.innerHTML=f),y&&l(g,y),g}function l(D,a){for(let[f,p]of Object.entries(a))p!==void 0&&D.setAttribute(f,p);return D}function u(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function d(D){let a=D.getHours(),{hours:f,dayPeriod:p}=x(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:w(a),hours12:f,dayPeriod:p,fullHours12:w(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function x(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function w(D){return D<10?"0"+D:D}function P(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function $(){let D=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let g in y)y[g]&&D.push(g);else y&&D.push(y)}),D.join(" ")}function T(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!D||!a)return!1;let p=d(D),y=d(a);return{[i.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[i.months]:p.month===y.month&&p.year===y.year,[i.years]:p.year===y.year}[f]}function B(D,a,f){let p=O(D,!1).getTime(),y=O(a,!1).getTime();return f?p>=y:p>y}function L(D,a){return!B(D,a,!0)}function O(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||E(f),f}function E(D){return D.setHours(0,0,0,0),D}function N(D,a,f){D.length?D.forEach(p=>{p.addEventListener(a,f)}):D.addEventListener(a,f)}function V(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:V(D.parentNode,a))}function z(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[g,_]of Object.entries(y))if(_!==void 0&&_.toString()==="[object Object]"){let C=D[g]!==void 0?D[g].toString():void 0,A=_.toString(),F=Array.isArray(_)?[]:{};D[g]=D[g]?C!==A?F:D[g]:F,H(D[g],_)}else D[g]=_}),D}function re(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function b(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class U{constructor(){let{type:a,date:f,dp:p,opts:y,body:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),b(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),b(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),b(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),b(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),b(this,"onChangeFocusDate",_=>{if(!_)return void(this.focused&&this.removeFocus());let C=T(_,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),b(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=g,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=d(this.date),g=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=c({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...g}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:g}=this.opts,{minDate:_,maxDate:C}=this.dp,{day:A}=d(this.date),F=this._isOutOfMinMaxRange(),M=(a=this.customData)===null||a===void 0?void 0:a.disabled,J=$("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(p,this.date,this.type),"-min-date-":_&&T(_,this.date,this.type),"-max-date-":C&&T(C,this.date,this.type)}),q="";switch(this.type){case i.days:q=$({"-weekend-":this.dp.isWeekend(A),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||F||M});break;case i.months:q=$({"-disabled-":F||M});break;case i.years:q=$({"-other-decade-":this.isOtherDecade,"-disabled-":F||this.isOtherDecade&&!g||M})}return $(J,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=d(this.date),{showOtherMonths:g,showOtherYears:_}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case i.days:return!g&&this.isOtherMonth?"":y;case i.months:return this.dp.locale[this.opts.monthsField][p];case i.years:return!_&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:g,year:_,date:C}=d(y),A=p===i.days,F=p===i.years,M=!!a&&new Date(_,F?a.getMonth():g,A?C:a.getDate()),J=!!f&&new Date(_,F?f.getMonth():g,A?C:f.getDate());return a&&f?L(M,a)||B(J,f):a?L(M,a):f?B(J,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=$({"-in-range-":a&&f&&(y=this.date,g=a,_=f,B(y,g)&&L(y,_)),"-range-from-":a&&T(this.date,a,this.type),"-range-to-":f&&T(this.date,f,this.type)});var y,g,_;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function j(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let ve={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const ae=".air-datepicker-cell";class Ae{constructor(a){let{dp:f,type:p,opts:y}=a;j(this,"handleClick",g=>{let _=g.target.closest(ae).adpCell;if(_.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(_.date,_.type);C?this.dp._handleAlreadySelectedDates(C,_.date):this.dp.selectDate(_.date)}),j(this,"handleDayNameClick",g=>{let _=g.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(_),datepicker:this.dp})}),j(this,"onChangeCurrentView",g=>{g!==this.type?this.hide():(this.show(),this.render())}),j(this,"onMouseOverCell",g=>{let _=V(g.target,ae);this.dp.setFocusDate(!!_&&_.adpCell.date)}),j(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),j(this,"onClickBody",g=>{let{onClickDayName:_}=this.opts,C=g.target;C.closest(ae)&&this.handleClick(g),_&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(g)}),j(this,"onMouseDown",g=>{this.pressed=!0;let _=V(g.target,ae),C=_&&_.adpCell;T(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),j(this,"onMouseMove",g=>{if(!this.pressed||!this.dp.isMinViewReached)return;g.preventDefault();let _=V(g.target,ae),C=_&&_.adpCell,{selectedDates:A,rangeDateTo:F,rangeDateFrom:M}=this.dp;if(!C||C.isDisabled)return;let{date:J}=C;if(A.length===2){if(this.rangeFromFocused&&!B(J,F)){let{hours:q,minutes:G}=d(M);J.setHours(q),J.setMinutes(G),this.dp.rangeDateFrom=J,this.dp.replaceDate(M,J)}if(this.rangeToFocused&&!L(J,M)){let{hours:q,minutes:G}=d(F);J.setHours(q),J.setMinutes(G),this.dp.rangeDateTo=J,this.dp.replaceDate(F,J)}}}),j(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),j(this,"onChangeViewDate",(g,_)=>{if(!this.isVisible)return;let C=P(g),A=P(_);switch(this.dp.currentView){case i.days:if(T(g,_,i.months))return;break;case i.months:if(T(g,_,i.years))return;break;case i.years:if(C[0]===A[0]&&C[1]===A[1])return}this.render()}),j(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(g=>{this.$cells.appendChild(g.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;N(this.$el,"mouseover",this.onMouseOverCell),N(this.$el,"mouseout",this.onMouseOutCell),N(this.$el,"click",this.onClickBody),a&&f&&(N(this.$el,"mousedown",this.onMouseDown),N(this.$el,"mousemove",this.onMouseMove),N(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=c({className:`air-datepicker-body -${this.type}-`,innerHtml:ve[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,g=a,_=0;for(;_<7;){let C=g%7;f+=`<div class="${$("air-datepicker-body--day-name",{[i.cssClassWeekend]:p(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,_++,g++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=u(a),{year:y,month:g}=d(a),_=new Date(y,g,1),C=new Date(y,g,p),A=_.getDay()-f,F=6-C.getDay()+f;A=A<0?A+7:A,F=F>6?F-7:F;let M=function(fe,me){let{year:te,month:m,date:h}=d(fe);return new Date(te,m,h-me)}(_,A),J=p+A+F,q=M.getDate(),{year:G,month:Z}=d(M),ie=0;for(;ie<J;){let fe=new Date(G,Z,q+ie);this._generateCell(fe),ie++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,g=new U({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(g),g}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=P(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case i.days:this._generateDayCells();break;case i.months:this._generateMonthCells();break;case i.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}}function ge(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class ue{constructor(a){let{dp:f,opts:p}=a;ge(this,"onClickNav",y=>{let g=V(y.target,".air-datepicker-nav--action");if(!g)return;let _=g.dataset.action;this.dp[_]()}),ge(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),ge(this,"update",()=>{let{prevHtml:y,nextHtml:g}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=g,this._resetNavStatus(),this.render(),this.handleNavStatus()}),ge(this,"renderDelay",()=>{setTimeout(this.render)}),ge(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,g){for(let _ in g)g[_]?y.classList.add(_):y.classList.remove(_)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=c({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:g}=this.dp.parsedViewDate,_=!!f&&d(f),C=!!p&&d(p);switch(this.dp.currentView){case i.days:f&&_.month>=g&&_.year>=y&&this._disableNav("prev"),p&&C.month<=g&&C.year<=y&&this._disableNav("next");break;case i.months:f&&_.year>=y&&this._disableNav("prev"),p&&C.year<=y&&this._disableNav("next");break;case i.years:{let A=P(this.dp.viewDate);f&&_.year>=A[0]&&this._disableNav("prev"),p&&C.year<=A[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(g=>{g.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var oe={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class Ve{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=c({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&oe[f]&&(p=oe[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:g={}}=a;return c({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:$("air-datepicker-button",p),attrs:g})}render(){this.generateButtons()}}function Ue(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Ze{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Ue(this,"onChangeSelectedDate",y=>{let{date:g,updateTime:_=!1}=y;g&&(this.setMinMaxTime(g),this.setCurrentTime(!!_&&g),this.addTimeToDate(g))}),Ue(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Ue(this,"onChangeInputRange",y=>{let g=y.target;this[g.getAttribute("name")]=g.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Ue(this,"onMouseEnterLeave",y=>{let g=y.target.getAttribute("name"),_=this.$minutesText;g==="hours"&&(_=this.$hoursText),_.classList.toggle("-focus-")}),Ue(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Ue(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(k("h"))||p.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),N(this.$ranges,a,this.onChangeInputRange),N(this.$ranges,"mouseenter",this.onMouseEnterLeave),N(this.$ranges,"mouseleave",this.onMouseEnterLeave),N(this.$ranges,"focus",this.onFocus),N(this.$ranges,"mousedown",this.onFocus),N(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=c({className:$("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:g,minMinutes:_,maxHours:C,maxMinutes:A,dayPeriod:F,opts:{hoursStep:M,minutesStep:J}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${w(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${w(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${F}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${g}" max="${C}" step="${M}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${_}" max="${A}" step="${J}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&T(a,f)&&this.setMinTimeFromMinDate(f),p&&T(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?d(a):this;this.hours=z(f,this.minHours,this.maxHours),this.minutes=z(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=z(a,0,23),this.minMinutes=z(f,0,59),this.maxHours=z(p,0,23),this.maxMinutes=z(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){l(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,l(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=w(this.displayHours),this.$minutesText.innerHTML=w(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=x(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function Re(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class $t{constructor(a){let{dp:f,opts:p}=a;Re(this,"pressedKeys",new Set),Re(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,g)=>g.up()]])),Re(this,"handleHotKey",y=>{let g=this.hotKeys.get(y),_=d(this.getInitialFocusDate());g(_,this.dp);let{year:C,month:A,date:F}=_,M=u(new Date(C,A));M<F&&(F=M);let J=this.dp.getClampedDate(new Date(C,A,F));this.dp.setFocusDate(J,{viewDateTransition:!0})}),Re(this,"isHotKeyPressed",()=>{let y=!1,g=this.pressedKeys.size,_=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(A=>{y||g!==A.length||(y=A.every(_)&&C)});else{if(g!==C.length)continue;y=C.every(_)&&C}}return y}),Re(this,"isArrow",y=>y>=37&&y<=40),Re(this,"onKeyDown",y=>{let{key:g,which:_}=y,{dp:C,dp:{focusDate:A},opts:F}=this;this.registerKey(g);let M=this.isHotKeyPressed();if(M)return y.preventDefault(),void this.handleHotKey(M);if(this.isArrow(_))return y.preventDefault(),void this.focusNextCell(g);if(g==="Enter"){if(C.currentView!==F.minView)return void C.down();if(A){let J=C._checkIfDateIsSelected(A);return void(J?C._handleAlreadySelectedDates(J,A):C.selectDate(A))}}g==="Escape"&&this.dp.hide()}),Re(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:g}}=this.dp,_=a||p[p.length-1];if(!_)switch(f){case i.days:_=new Date(y,g,new Date().getDate());break;case i.months:_=new Date(y,g,1);break;case i.years:_=new Date(y,0,1)}return _}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:g,years:_}=i,C=d(f),A=C.year,F=C.month,M=C.date;switch(a){case"ArrowLeft":p===y&&(M-=1),p===g&&(F-=1),p===_&&(A-=1);break;case"ArrowUp":p===y&&(M-=7),p===g&&(F-=3),p===_&&(A-=4);break;case"ArrowRight":p===y&&(M+=1),p===g&&(F+=1),p===_&&(A+=1);break;case"ArrowDown":p===y&&(M+=7),p===g&&(F+=3),p===_&&(A+=4)}let J=this.dp.getClampedDate(new Date(A,F,M));this.dp.setFocusDate(J,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ye={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function ce(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Ne="",K="",W=!1;class Y{static buildGlobalContainer(a){W=!0,Ne=c({className:a,id:a}),o("body").appendChild(Ne)}constructor(a,f){var p=this;if(ce(this,"viewIndexes",[i.days,i.months,i.years]),ce(this,"next",()=>{let{year:_,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,C+1,1));break;case i.months:this.setViewDate(new Date(_+1,C,1));break;case i.years:this.setViewDate(new Date(_+10,0,1))}}),ce(this,"prev",()=>{let{year:_,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,C-1,1));break;case i.months:this.setViewDate(new Date(_-1,C,1));break;case i.years:this.setViewDate(new Date(_-10,0,1))}}),ce(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),ce(this,"setPosition",function(_){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(_=_||p.opts.position)=="function")return void(p.customHide=_({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:C,done:p._finishHide}));let A,F,{isMobile:M}=p.opts,J=p.$el.getBoundingClientRect(),q=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,ie=p.$datepicker.getBoundingClientRect(),fe=_.split(" "),me=window.scrollY,te=window.scrollX,m=p.opts.offset,h=fe[0],v=fe[1];if(M)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:J.width,height:p.$el.offsetHeight},me=0,te=0),G!==Z&&G!==document.body){let S=G.getBoundingClientRect();q={top:J.top-S.top,left:J.left-S.left,width:J.width,height:J.height},me=0,te=0}switch(h){case"top":A=q.top-ie.height-m;break;case"right":F=q.left+q.width+m;break;case"bottom":A=q.top+q.height+m;break;case"left":F=q.left-ie.width-m}switch(v){case"top":A=q.top;break;case"right":F=q.left+q.width-ie.width;break;case"bottom":A=q.top+q.height-ie.height;break;case"left":F=q.left;break;case"center":/left|right/.test(h)?A=q.top+q.height/2-ie.height/2:F=q.left+q.width/2-ie.width/2}p.$datepicker.style.cssText=`left: ${F+te}px; top: ${A+me}px`}}),ce(this,"_setInputValue",()=>{let{opts:_,$altField:C,locale:{dateFormat:A}}=this,{altFieldDateFormat:F,altField:M}=_;M&&C&&(C.value=this._getInputValue(F)),this.$el.value=this._getInputValue(A)}),ce(this,"_getInputValue",_=>{let{selectedDates:C,opts:A}=this,{multipleDates:F,multipleDatesSeparator:M}=A;if(!C.length)return"";let J=typeof _=="function",q=J?_(F?C:C[0]):C.map(G=>this.formatDate(G,_));return q=J?q:q.join(M),q}),ce(this,"_checkIfDateIsSelected",function(_){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,A=!1;return p.selectedDates.some(F=>{let M=T(_,F,C);return A=M&&F,M}),A}),ce(this,"_scheduleCallAfterTransition",_=>{this._cancelScheduledCall(),_&&_(!1),this._onTransitionEnd=()=>{_&&_(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),ce(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),ce(this,"setViewDate",_=>{if(!((_=re(_))instanceof Date)||T(_,this.viewDate))return;let C=this.viewDate;this.viewDate=_;let{onChangeViewDate:A}=this.opts;if(A){let{month:F,year:M}=this.parsedViewDate;A({month:F,year:M,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,_,C)}),ce(this,"setFocusDate",function(_){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!_||(_=re(_))instanceof Date)&&(p.focusDate=_,p.opts.range&&_&&p._handleRangeOnFocus(),p.trigger(i.eventChangeFocusDate,_,C))}),ce(this,"setCurrentView",_=>{if(this.viewIndexes.includes(_)){if(this.currentView=_,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(i.eventChangeCurrentView,_),!this.views[_]){let C=this.views[_]=new Ae({dp:this,opts:this.opts,type:_});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(_)}}),ce(this,"_updateLastSelectedDate",_=>{this.lastSelectedDate=_,this.trigger(i.eventChangeLastSelectedDate,_)}),ce(this,"destroy",()=>{let{showEvent:_,isMobile:C}=this.opts,A=this.$datepicker.parentNode;A&&A.removeChild(this.$datepicker),this.$el.removeEventListener(_,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),ce(this,"update",_=>{let C=H({},this.opts);H(this.opts,_);let{timepicker:A,buttons:F,range:M,selectedDates:J,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&J&&this.selectDate(J),_.view&&this.setCurrentView(_.view),this._setInputValue(),C.range&&!M?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&M&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!A?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&A&&this._addTimepicker(),!C.buttons&&F?this._addButtons():C.buttons&&!F?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&F&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===i.days&&this.views[this.currentView].renderDayNames())}),ce(this,"isOtherMonth",_=>{let{month:C}=d(_);return C!==this.parsedViewDate.month}),ce(this,"isOtherYear",_=>{let{year:C}=d(_);return C!==this.parsedViewDate.year}),ce(this,"isOtherDecade",_=>{let{year:C}=d(_),[A,F]=P(this.viewDate);return C<A||C>F}),ce(this,"_onChangeSelectedDate",_=>{let{silent:C}=_;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),ce(this,"_onChangeFocusedDate",function(_){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_)return;let A=!1;C&&(A=p.isOtherMonth(_)||p.isOtherYear(_)||p.isOtherDecade(_)),A&&p.setViewDate(_)}),ce(this,"_onChangeTime",_=>{let{hours:C,minutes:A}=_,F=new Date,{lastSelectedDate:M,opts:{onSelect:J}}=this,q=M;M||(q=F);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(A),M?(this._setInputValue(),J&&this._triggerOnSelect()):this.selectDate(q))}),ce(this,"_onFocus",_=>{this.visible||this.show()}),ce(this,"_onBlur",_=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),ce(this,"_onMouseDown",_=>{this.inFocus=!0}),ce(this,"_onMouseUp",_=>{this.inFocus=!1,this.$el.focus()}),ce(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),ce(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),ce(this,"isWeekend",_=>this.opts.weekends.includes(_)),ce(this,"getClampedDate",_=>{let{minDate:C,maxDate:A}=this,F=_;return A&&B(_,A)?F=A:C&&L(_,C)&&(F=C),F}),this.$el=o(a),!this.$el)return;this.$datepicker=c({className:"air-datepicker"}),this.opts=H({},s,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:g}=this.opts;g||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=re(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:g,keyboardNav:_,onlyTimepicker:C}}=this,A=o("body");(!W||W&&Ne&&!A.contains(Ne))&&!p&&this.elIsInput&&!this.$customContainer&&Y.buildGlobalContainer(Y.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),_&&!C&&(this.keyboardNav=new $t({dp:this,opts:a}))),g&&this.selectDate(g,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=c({className:"air-datepicker-overlay"}),Ne.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:g,position:_,classes:C,onlyTimepicker:A,isMobile:F}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(_)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),A&&this.$datepicker.classList.add("-only-timepicker-"),F&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Ae({dp:this,type:this.currentView,opts:a}),this.nav=new ue({dp:this,opts:a}),g&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&re(a),this.maxDate=!!f&&re(f)}_addTimepicker(){this.$timepicker=c({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new Ze({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=c({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Ve({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:g,timeFormat:_,dateTimeSeparator:C}=this.opts;var A;this.locale=(A=a,JSON.parse(JSON.stringify(A))),f&&(this.locale.dateFormat=f),_!==void 0&&_!==""&&(this.locale.timeFormat=_);let{timeFormat:F}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let M=F?C:"";this.locale.dateFormat=[this.locale.dateFormat,F||""].join(M)}g&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&B(a,p)&&this.setViewDate(p),f&&L(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=re(a),!(a instanceof Date))return;let p=f,y=this.locale,g=d(a),_=g.dayPeriod,C=P(a),A=Y.replacer,F={T:a.getTime(),m:g.minutes,mm:g.fullMinutes,h:g.hours12,hh:g.fullHours12,H:g.hours,HH:g.fullHours,aa:_,AA:_.toUpperCase(),E:y.daysShort[g.day],EEEE:y.days[g.day],d:g.date,dd:g.fullDate,M:g.month+1,MM:g.fullMonth,MMM:y.monthsShort[g.month],MMMM:y.months[g.month],yy:g.year.toString().slice(-2),yyyy:g.year,yyyy1:C[0],yyyy2:C[1]};for(let[M,J]of Object.entries(F))p=A(p,k(M),J);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:g,selectedDates:_}=this,{updateTime:C}=p,{moveToOtherMonthsOnSelect:A,moveToOtherYearsOnSelect:F,multipleDates:M,range:J,autoClose:q}=this.opts,G=_.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=re(a))instanceof Date){if(y===i.days&&a.getMonth()!==g.month&&A&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===i.years&&a.getFullYear()!==g.year&&F&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),M&&!J){if(G===M)return;this._checkIfDateIsSelected(a)||_.push(a)}else if(J)switch(G){case 1:_.push(a),this.rangeDateTo||(this.rangeDateTo=a),B(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(M||J?J&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=re(a))instanceof Date)return f.some((y,g)=>{if(T(y,a))return f.splice(g,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(g=>T(g,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||T(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:g,multipleDates:_,range:C}}=this,A=_||C,F=typeof y.dateFormat=="function";p.length&&(a=p.map(O),f=F?_?y.dateFormat(a):a.map(M=>y.dateFormat(M)):a.map(M=>this.formatDate(M,y.dateFormat))),g({date:A?a:a[0],formattedDate:A?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=re(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(B(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!((a=re(a))instanceof Date))return;let{year:p,month:y,date:g}=d(a),_=`[data-year="${p}"]`,C=`[data-month="${y}"]`,A={[i.day]:`${_}${C}[data-date="${g}"]`,[i.month]:`${_}${C}`,[i.year]:`${_}`};return this.views[this.currentView].$el.querySelector(A[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return d(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return P(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Ne}static replacer(a,f,p){return a.replace(f,function(y,g,_,C){return g+p+C})}}var X;return ce(Y,"defaults",s),ce(Y,"version","3.3.5"),ce(Y,"defaultGlobalContainerId","air-datepicker-global-container"),X=Y.prototype,Object.assign(X,ye),r.default}()})})(Kl);var gh=Kl.exports;const Da=mh(gh);function Sa(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function mr(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ta(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}const Qe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lt=Object.keys,bt=Array.isArray;function St(e,t){return typeof t!="object"||lt(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Qe.Promise||(Qe.Promise=Promise);const zr=Object.getPrototypeOf,vh={}.hasOwnProperty;function Rt(e,t){return vh.call(e,t)}function Cr(e,t){typeof t=="function"&&(t=t(zr(e))),(typeof Reflect>"u"?lt:Reflect.ownKeys)(t).forEach(n=>{gn(e,n,t[n])})}const Ul=Object.defineProperty;function gn(e,t,n,r){Ul(e,t,St(n&&Rt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function gr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),gn(e.prototype,"constructor",e),{extend:Cr.bind(null,e.prototype)}}}}const bh=Object.getOwnPropertyDescriptor;function $o(e,t){let n;return bh(e,t)||(n=zr(e))&&$o(n,t)}const _h=[].slice;function Bi(e,t,n){return _h.call(e,t,n)}function Vl(e,t){return t(e)}function $r(e){if(!e)throw new Error("Assertion Failed")}function Hl(e){Qe.setImmediate?setImmediate(e):setTimeout(e,0)}function ql(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function vn(e,t){if(Rt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=vn(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var c=e[t.substr(0,o)];return c===void 0?void 0:vn(c,t.substr(o+1))}}function Zt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){$r(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Zt(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),c=t.substr(s+1);if(c==="")n===void 0?bt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var l=e[o];l&&Rt(e,o)||(l=e[o]={}),Zt(l,c,n)}}else n===void 0?bt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Yl(e){var t={};for(var n in e)Rt(e,n)&&(t[n]=e[n]);return t}const wh=[].concat;function Jl(e){return wh.apply([],e)}const zl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Jl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Qe[e]),xh=zl.map(e=>Qe[e]);ql(zl,e=>[e,!0]);let Sn=null;function ri(e){Sn=typeof WeakMap<"u"&&new WeakMap;const t=Bs(e);return Sn=null,t}function Bs(e){if(!e||typeof e!="object")return e;let t=Sn&&Sn.get(e);if(t)return t;if(bt(e)){t=[],Sn&&Sn.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Bs(e[n]))}else if(xh.indexOf(e.constructor)>=0)t=e;else{const s=zr(e);for(var i in t=s===Object.prototype?{}:Object.create(s),Sn&&Sn.set(e,t),e)Rt(e,i)&&(t[i]=Bs(e[i]))}return t}const{toString:Ch}={};function js(e){return Ch.call(e).slice(8,-1)}const Rs=typeof Symbol<"u"?Symbol.iterator:"@@iterator",kh=typeof Rs=="symbol"?function(e){var t;return e!=null&&(t=e[Rs])&&t.apply(e)}:function(){return null},lr={};function pn(e){var t,n,r,i;if(arguments.length===1){if(bt(e))return e.slice();if(this===lr&&typeof e=="string")return[e];if(i=kh(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Io=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wl(e,t){ln=e,Gl=t}var Gl=()=>!0;const Dh=!new Error("").stack;function tr(){if(Dh)try{throw tr.arguments,new Error}catch(e){return e}return new Error}function Ks(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Gl).map(r=>`
`+r).join("")):""}var Xl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],No=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Xl),Sh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vr(e,t){this._e=tr(),this.name=e,this.message=t}function Ql(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function ji(e,t,n,r){this._e=tr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ql(e,t)}function Lr(e,t){this._e=tr(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Ql(e,t)}gr(vr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ks(this._e,2))}},toString:function(){return this.name+": "+this.message}}),gr(ji).from(vr),gr(Lr).from(vr);var Fo=No.reduce((e,t)=>(e[t]=t+"Error",e),{});const Th=vr;var Se=No.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=tr(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Sh[t]||n,this.inner=null)}return gr(r).from(Th),e[t]=r,e},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Ea=Xl.reduce((e,t)=>(e[t+"Error"]=Se[t],e),{}),Si=No.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Se[t]),e),{});function Ye(){}function Wr(e){return e}function Eh(e,t){return e==null||e===Wr?t:function(n){return t(e(n))}}function Xn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Oh(e,t){return e===Ye?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xn(i,this.onerror):i),s!==void 0?s:n}}function Ah(e,t){return e===Ye?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xn(r,this.onerror):r)}}function Ph(e,t){return e===Ye?t:function(n){var r=e.apply(this,arguments);St(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Xn(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Xn(s,this.onerror):s),r===void 0?o===void 0?void 0:o:St(r,o)}}function $h(e,t){return e===Ye?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Mo(e,t){return e===Ye?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Si.ModifyError=ji,Si.DexieError=vr,Si.BulkError=Lr;var Gr={};const Zl=100,[Us,Ri,Vs]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,zr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,zr(t),e]})(),ec=Ri&&Ri.then,Ti=Us&&Us.constructor,Lo=!!Vs;var Hs=!1,Ih=Vs?()=>{Vs.then(pi)}:Qe.setImmediate?setImmediate.bind(null,pi):Qe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{pi(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(pi,0)},Br=function(e,t){Ir.push([e,t]),Ki&&(Ih(),Ki=!1)},qs=!0,Ki=!0,zn=[],Ei=[],Ys=null,Js=Wr,br={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pa,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Pa(e[0],e[1])}catch{}})}},_e=br,Ir=[],Wn=0,Oi=[];function le(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ye,this._lib=!1;var t=this._PSD=_e;if(ln&&(this._stackHolder=tr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Gr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ws(this,this._value))}this._state=null,this._value=null,++t.ref,nc(this,e)}const zs={get:function(){var e=_e,t=Ui;function n(r,i){var s=!e.global&&(e!==_e||t!==Ui);const o=s&&!_n();var c=new le((l,u)=>{Bo(this,new tc(Vi(r,e,s,o),Vi(i,e,s,o),l,u,e))});return ln&&sc(c,this),c}return n.prototype=Gr,n},set:function(e){gn(this,"then",e&&e.prototype===Gr?zs:{get:function(){return e},set:zs.set})}};function tc(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function nc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&ii();n&&typeof n.then=="function"?nc(e,(i,s)=>{n instanceof le?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,rc(e)),r&&si()}},Ws.bind(null,e))}catch(n){Ws(e,n)}}function Ws(e,t){if(Ei.push(t),e._state===null){var n=e._lib&&ii();t=Js(t),e._state=!1,e._value=t,ln&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=$o(t,"stack");t._promise=e,gn(t,"stack",{get:()=>Hs?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){zn.some(i=>i._value===r._value)||zn.push(r)}(e),rc(e),n&&si()}}function rc(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Bo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Wn===0&&(++Wn,Br(()=>{--Wn==0&&jo()},[]))}function Bo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Wn,Br(Nh,[n,e,t])}else e._listeners.push(t)}function Nh(e,t,n){try{Ys=t;var r,i=t._value;t._state?r=e(i):(Ei.length&&(Ei=[]),r=e(i),Ei.indexOf(i)===-1&&function(s){for(var o=zn.length;o;)if(zn[--o]._value===s._value)return void zn.splice(o,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{Ys=null,--Wn==0&&jo(),--n.psd.ref||n.psd.finalize()}}function ic(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Ks(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return ln&&((r=Ks(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&ic(e._prev,t,n)),t}function sc(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function pi(){ii()&&si()}function ii(){var e=qs;return qs=!1,Ki=!1,e}function si(){var e,t,n;do for(;Ir.length>0;)for(e=Ir,Ir=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ir.length>0);qs=!0,Ki=!0}function jo(){var e=zn;zn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Oi.slice(0),n=t.length;n;)t[--n]()}function yi(e){return new le(Gr,!1,e)}function et(e,t){var n=_e;return function(){var r=ii(),i=_e;try{return Nn(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Nn(i,!1),r&&si()}}}Cr(le.prototype,{then:zs,_then:function(e,t){Bo(this,new tc(null,null,e,t,_e))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):yi(r)):this.then(null,r=>r&&r.name===t?n(r):yi(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),yi(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Hs=!0;var e=ic(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Hs=!1}}},timeout:function(e,t){return e<1/0?new le((n,r)=>{var i=setTimeout(()=>r(new Se.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&gn(le.prototype,Symbol.toStringTag,"Dexie.Promise"),br.env=oc(),Cr(le,{all:function(){var e=pn.apply(null,arguments).map(mi);return new le(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>le.resolve(i).then(o=>{e[s]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof le)return e;if(e&&typeof e.then=="function")return new le((n,r)=>{e.then(n,r)});var t=new le(Gr,!0,e);return sc(t,Ys),t},reject:yi,race:function(){var e=pn.apply(null,arguments).map(mi);return new le((t,n)=>{e.map(r=>le.resolve(r).then(t,n))})},PSD:{get:()=>_e,set:e=>_e=e},totalEchoes:{get:()=>Ui},newPSD:In,usePSD:Tr,scheduler:{get:()=>Br,set:e=>{Br=e}},rejectionMapper:{get:()=>Js,set:e=>{Js=e}},follow:(e,t)=>new le((n,r)=>In((i,s)=>{var o=_e;o.unhandleds=[],o.onunhandled=s,o.finalize=Xn(function(){(function(c){function l(){c(),Oi.splice(Oi.indexOf(l),1)}Oi.push(l),++Wn,Br(()=>{--Wn==0&&jo()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Ti&&(Ti.allSettled&&gn(le,"allSettled",function(){const e=pn.apply(null,arguments).map(mi);return new le(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>le.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Ti.any&&typeof AggregateError<"u"&&gn(le,"any",function(){const e=pn.apply(null,arguments).map(mi);return new le((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,o)=>le.resolve(s).then(c=>t(c),c=>{i[o]=c,--r||n(new AggregateError(i))}))})}));const mt={awaits:0,echoes:0,id:0};var Fh=0,Ai=[],gs=0,Ui=0,Mh=0;function In(e,t,n,r){var i=_e,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Mh;var o=br.env;s.env=Lo?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject,nthen:Oa(o.nthen,s),gthen:Oa(o.gthen,s)}:{},t&&St(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=Tr(s,e,n,r);return s.ref===0&&s.finalize(),c}function Sr(){return mt.id||(mt.id=++Fh),++mt.awaits,mt.echoes+=Zl,mt.id}function _n(){return!!mt.awaits&&(--mt.awaits==0&&(mt.id=0),mt.echoes=mt.awaits*Zl,!0)}function mi(e){return mt.echoes&&e&&e.constructor===Ti?(Sr(),e.then(t=>(_n(),t),t=>(_n(),ut(t)))):e}function Lh(e){++Ui,mt.echoes&&--mt.echoes!=0||(mt.echoes=mt.id=0),Ai.push(_e),Nn(e,!0)}function Bh(){var e=Ai[Ai.length-1];Ai.pop(),Nn(e,!1)}function Nn(e,t){var n=_e;if((t?!mt.echoes||gs++&&e===_e:!gs||--gs&&e===_e)||ac(t?Lh.bind(null,e):Bh),e!==_e&&(_e=e,n===br&&(br.env=oc()),Lo)){var r=br.env.Promise,i=e.env;Ri.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Qe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function oc(){var e=Qe.Promise;return Lo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Qe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ri.then,gthen:e.prototype.then}:{}}function Tr(e,t,n,r,i){var s=_e;try{return Nn(e,!0),t(n,r,i)}finally{Nn(s,!1)}}function ac(e){ec.call(Us,e)}function Vi(e,t,n,r){return typeof e!="function"?e:function(){var i=_e;n&&Sr(),Nn(t,!0);try{return e.apply(this,arguments)}finally{Nn(i,!1),r&&ac(_n)}}}function Oa(e,t){return function(n,r){return e.call(this,Vi(n,t),Vi(r,t))}}(""+ec).indexOf("[native code]")===-1&&(Sr=_n=Ye);const Aa="unhandledrejection";function Pa(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Qe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Aa,!0,!0),St(r,i)):Qe.CustomEvent&&St(r=new CustomEvent(Aa,{detail:i}),i),r&&Qe.dispatchEvent&&(dispatchEvent(r),!Qe.PromiseRejectionEvent&&Qe.onunhandledrejection))try{Qe.onunhandledrejection(r)}catch{}ln&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ut=le.reject;function Gs(e,t,n,r){if(e.idbdb&&(e._state.openComplete||_e.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Gs(e,t,n,r))):ut(s)}return i._promise(t,(s,o)=>In(()=>(_e.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ut(new Se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ut(new Se.DatabaseClosed);e.open().catch(Ye)}return e._state.dbReadyPromise.then(()=>Gs(e,t,n,r))}const $a="3.2.4",Hn=String.fromCharCode(65535),Xs=-1/0,fn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lc="String expected.",jr=[],is=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),jh=is,Rh=is,cc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ss="__dbnames",vs="readonly",bs="readwrite";function Qn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const uc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gi(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=ri(t))[e],t)}class Kh{_trans(t,n,r){const i=this._tx||_e.trans,s=this.name;function o(l,u,d){if(!d.schema[s])throw new Se.NotFound("Table "+s+" not part of transaction");return n(d.idbtrans,d)}const c=ii();try{return i&&i.db===this.db?i===_e.trans?i._promise(t,o,r):In(()=>i._promise(t,o,r),{trans:i,transless:_e.transless||_e}):Gs(this.db,t,[this.name],o)}finally{c&&si()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(bt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=lt(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(d=>u.keyPath.indexOf(d)>=0)&&u.keyPath.every(d=>n.indexOf(d)>=0))[0];if(r&&this.db._maxKey!==Hn)return this.where(r.name).equals(r.keyPath.map(u=>t[u]));!r&&ln&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,d){try{return s.cmp(u,d)===0}catch{return!1}}const[c,l]=n.reduce(([u,d],x)=>{const w=i[x],P=t[x];return[u||w,u||!w?Qn(d,w&&w.multi?$=>{const T=vn($,x);return bt(T)&&T.some(B=>o(P,B))}:$=>o(P,vn($,x))):d]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,bt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(Rt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){St(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=gi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?le.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Zt(t,i,o)}catch{}return o})}update(t,n){if(typeof t!="object"||bt(t))return this.where(":id").equals(t).modify(n);{const r=vn(t,this.schema.primKey.keyPath);if(r===void 0)return ut(new Se.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?lt(n).forEach(i=>{Zt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=gi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?le.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Zt(t,i,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?le.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:uc})).then(t=>t.numFailures?le.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let d=l&&c?t.map(gi(l)):t;return this.core.mutate({trans:o,type:"add",keys:i,values:d,wantResults:s}).then(({numFailures:x,results:w,lastResult:P,failures:$})=>{if(x===0)return s?w:P;throw new Lr(`${this.name}.bulkAdd(): ${x} of ${u} operations failed`,$)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let d=l&&c?t.map(gi(l)):t;return this.core.mutate({trans:o,type:"put",keys:i,values:d,wantResults:s}).then(({numFailures:x,results:w,lastResult:P,failures:$})=>{if(x===0)return s?w:P;throw new Lr(`${this.name}.bulkPut(): ${x} of ${u} operations failed`,$)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Lr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Rr(e){var t={},n=function(o,c){if(c){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return t[o].subscribe.apply(null,u),e}if(typeof o=="string")return t[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,c,l){if(typeof o!="object"){var u;c||(c=$h),l||(l=Ye);var d={subscribers:[],fire:l,subscribe:function(x){d.subscribers.indexOf(x)===-1&&(d.subscribers.push(x),d.fire=c(d.fire,x))},unsubscribe:function(x){d.subscribers=d.subscribers.filter(function(w){return w!==x}),d.fire=d.subscribers.reduce(c,l)}};return t[o]=n[o]=d,d}lt(u=o).forEach(function(x){var w=u[x];if(bt(w))s(x,u[x][0],u[x][1]);else{if(w!=="asap")throw new Se.InvalidArgument("Invalid event config");var P=s(x,Wr,function(){for(var $=arguments.length,T=new Array($);$--;)T[$]=arguments[$];P.subscribers.forEach(function(B){Hl(function(){B.apply(null,T)})})})}})}}function Er(e,t){return gr(t).from({prototype:e}),t}function ir(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function _s(e,t){e.filter=Qn(e.filter,t)}function ws(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Qn(r(),t()):t,e.justLimit=n&&!r}function Pi(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ia(e,t,n){const r=Pi(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function vi(e,t,n,r){const i=e.replayFilter?Qn(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(c,l,u)=>{if(!i||i(l,u,w=>l.stop(w),w=>l.fail(w))){var d=l.primaryKey,x=""+d;x==="[object ArrayBuffer]"&&(x=""+new Uint8Array(d)),Rt(s,x)||(s[x]=!0,t(c,l,u))}};return Promise.all([e.or._iterate(o,n),Na(Ia(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Na(Ia(e,r,n),Qn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Na(e,t,n,r){var i=et(r?(s,o,c)=>n(r(s),o,c):n);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();t&&!t(s,c=>o=c,c=>{s.stop(c),o=Ye},c=>{s.fail(c),o=Ye})||i(s.value,s,c=>o=c),o()})})}function kt(e,t){try{const n=Fa(e),r=Fa(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const o=i.length,c=s.length,l=o<c?o:c;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===c?0:o<c?-1:1}(Ma(e),Ma(t));case"Array":return function(i,s){const o=i.length,c=s.length,l=o<c?o:c;for(let u=0;u<l;++u){const d=kt(i[u],s[u]);if(d!==0)return d}return o===c?0:o<c?-1:1}(e,t)}}catch{}return NaN}function Fa(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=js(e);return n==="ArrayBuffer"?"binary":n}function Ma(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Uh{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,ut.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,ut.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Qn(n.algorithm,t)}_iterate(t,n){return vi(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&St(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>vi(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(ir(r,!0))return i.count({trans:n,query:{index:Pi(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return vi(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(u,d){return d?o(u[r[d]],d-1):u[i]}var c=this._ctx.dir==="next"?1:-1;function l(u,d){var x=o(u,s),w=o(d,s);return x<w?-c:x>w?c:0}return this.toArray(function(u){return u.sort(l)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ir(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Pi(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return vi(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ir(n)?ws(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):ws(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ws(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return _s(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return _s(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=Qn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ir(n,!0)&&n.limit>0)return this._read(i=>{var s=Pi(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return _s(this._ctx,function(i){var s=i.primaryKey.toString(),o=Rt(r,s);return r[s]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=lt(t),o=s.length;i=function(T){for(var B=!1,L=0;L<o;++L){var O=s[L],E=t[O];vn(T,O)!==E&&(Zt(T,O,E),B=!0)}return B}}const c=n.table.core,{outbound:l,extractKey:u}=c.schema.primaryKey,d=this.db._options.modifyChunkSize||200,x=[];let w=0;const P=[],$=(T,B)=>{const{failures:L,numFailures:O}=B;w+=T-O;for(let E of lt(L))x.push(L[E])};return this.clone().primaryKeys().then(T=>{const B=L=>{const O=Math.min(d,T.length-L);return c.getMany({trans:r,keys:T.slice(L,L+O),cache:"immutable"}).then(E=>{const N=[],V=[],z=l?[]:null,H=[];for(let k=0;k<O;++k){const b=E[k],U={value:ri(b),primKey:T[L+k]};i.call(U,U.value,U)!==!1&&(U.value==null?H.push(T[L+k]):l||kt(u(b),u(U.value))===0?(V.push(U.value),l&&z.push(T[L+k])):(H.push(T[L+k]),N.push(U.value)))}const re=ir(n)&&n.limit===1/0&&(typeof t!="function"||t===xs)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&c.mutate({trans:r,type:"add",values:N}).then(k=>{for(let b in k.failures)H.splice(parseInt(b),1);$(N.length,k)})).then(()=>(V.length>0||re&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:z,values:V,criteria:re,changeSpec:typeof t!="function"&&t}).then(k=>$(V.length,k))).then(()=>(H.length>0||re&&t===xs)&&c.mutate({trans:r,type:"delete",keys:H,criteria:re}).then(k=>$(H.length,k))).then(()=>T.length>L+O&&B(L+d))})};return B(0).then(()=>{if(x.length>0)throw new ji("Error modifying one or more objects",x,w,P);return T.length})})})}delete(){var t=this._ctx,n=t.range;return ir(t)&&(t.isPrimKey&&!Rh||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:c,lastResult:l,results:u,numFailures:d})=>{if(d)throw new ji("Could not delete some values",Object.keys(c).map(x=>c[x]),o-d);return o-d}))}):this.modify(xs)}}const xs=(e,t)=>t.value=null;function Vh(e,t){return e<t?-1:e===t?0:1}function Hh(e,t){return e>t?-1:e===t?0:1}function Ft(e,t,n){var r=e instanceof hc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function sr(e){return new e.Collection(e,()=>fc("")).limit(0)}function qh(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),c=-1,l=0;l<o;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[l],u)<0&&(c=l)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function bi(e,t,n,r){var i,s,o,c,l,u,d,x=n.length;if(!n.every(T=>typeof T=="string"))return Ft(e,lc);function w(T){i=function(L){return L==="next"?O=>O.toUpperCase():O=>O.toLowerCase()}(T),s=function(L){return L==="next"?O=>O.toLowerCase():O=>O.toUpperCase()}(T),o=T==="next"?Vh:Hh;var B=n.map(function(L){return{lower:s(L),upper:i(L)}}).sort(function(L,O){return o(L.lower,O.lower)});c=B.map(function(L){return L.upper}),l=B.map(function(L){return L.lower}),u=T,d=T==="next"?"":r}w("next");var P=new e.Collection(e,()=>kn(c[0],l[x-1]+r));P._ondirectionchange=function(T){w(T)};var $=0;return P._addAlgorithm(function(T,B,L){var O=T.key;if(typeof O!="string")return!1;var E=s(O);if(t(E,l,$))return!0;for(var N=null,V=$;V<x;++V){var z=qh(O,E,c[V],l[V],o,u);z===null&&N===null?$=V+1:(N===null||o(N,z)>0)&&(N=z)}return B(N!==null?function(){T.continue(N+d)}:L),!1}),P}function kn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function fc(e){return{type:1,lower:e,upper:e}}class hc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?sr(this):new this.Collection(this,()=>kn(t,n,!r,!i))}catch{return Ft(this,fn)}}equals(t){return t==null?Ft(this,fn):new this.Collection(this,()=>fc(t))}above(t){return t==null?Ft(this,fn):new this.Collection(this,()=>kn(t,void 0,!0))}aboveOrEqual(t){return t==null?Ft(this,fn):new this.Collection(this,()=>kn(t,void 0,!1))}below(t){return t==null?Ft(this,fn):new this.Collection(this,()=>kn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Ft(this,fn):new this.Collection(this,()=>kn(void 0,t))}startsWith(t){return typeof t!="string"?Ft(this,lc):this.between(t,t+Hn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):bi(this,(n,r)=>n.indexOf(r[0])===0,[t],Hn)}equalsIgnoreCase(t){return bi(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=pn.apply(lr,arguments);return t.length===0?sr(this):bi(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=pn.apply(lr,arguments);return t.length===0?sr(this):bi(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Hn)}anyOf(){const t=pn.apply(lr,arguments);let n=this._cmp;try{t.sort(n)}catch{return Ft(this,fn)}if(t.length===0)return sr(this);const r=new this.Collection(this,()=>kn(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,o,c)=>{const l=s.key;for(;n(l,t[i])>0;)if(++i,i===t.length)return o(c),!1;return n(l,t[i])===0||(o(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[Xs,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=pn.apply(lr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ft(this,fn)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Xs,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,c=this._max;if(t.length===0)return sr(this);if(!t.every(O=>O[0]!==void 0&&O[1]!==void 0&&i(O[0],O[1])<=0))return Ft(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);const l=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let d,x=i;function w(O,E){return x(O[0],E[0])}try{d=t.reduce(function(O,E){let N=0,V=O.length;for(;N<V;++N){const z=O[N];if(r(E[0],z[1])<0&&r(E[1],z[0])>0){z[0]=o(z[0],E[0]),z[1]=c(z[1],E[1]);break}}return N===V&&O.push(E),O},[]),d.sort(w)}catch{return Ft(this,fn)}let P=0;const $=u?O=>i(O,d[P][1])>0:O=>i(O,d[P][1])>=0,T=l?O=>s(O,d[P][0])>0:O=>s(O,d[P][0])>=0;let B=$;const L=new this.Collection(this,()=>kn(d[0][0],d[d.length-1][1],!l,!u));return L._ondirectionchange=O=>{O==="next"?(B=$,x=i):(B=T,x=s),d.sort(w)},L._addAlgorithm((O,E,N)=>{for(var V=O.key;B(V);)if(++P,P===d.length)return E(N),!1;return!!function(z){return!$(z)&&!T(z)}(V)||(this._cmp(V,d[P][1])===0||this._cmp(V,d[P][0])===0||E(()=>{x===i?O.continue(d[P][0]):O.continue(d[P][1])}),!1)}),L}startsWithAnyOf(){const t=pn.apply(lr,arguments);return t.every(n=>typeof n=="string")?t.length===0?sr(this):this.inAnyRange(t.map(n=>[n,n+Hn])):Ft(this,"startsWithAnyOf() only works with strings")}}function nn(e){return et(function(t){return Xr(t),e(t.target.error),!1})}function Xr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Qr="storagemutated",En="x-storagemutated-1",Fn=Rr(null,Qr);class Yh{_lock(){return $r(!_e.global),++this._reculock,this._reculock!==1||_e.global||(_e.lockOwnerFor=this),this}_unlock(){if($r(!_e.global),--this._reculock==0)for(_e.global||(_e.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Tr(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&_e.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if($r(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(r);case"MissingAPIError":throw new Se.MissingAPI(r.message,r);default:throw new Se.OpenFailed(r)}if(!this.active)throw new Se.TransactionInactive;return $r(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=et(i=>{Xr(i),this._reject(t.error)}),t.onabort=et(i=>{Xr(i),this.active&&this._reject(new Se.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=et(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Fn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return ut(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return ut(new Se.TransactionInactive);if(this._locked())return new le((s,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,o)},_e])});if(r)return In(()=>{var s=new le((o,c)=>{this._lock();const l=n(o,c,this);l&&l.then&&l.then(o,c)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new le((s,o)=>{var c=n(s,o,this);c&&c.then&&c.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=le.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new le((o,c)=>{r.then(l=>n._waitingQueue.push(et(o.bind(null,l))),l=>n._waitingQueue.push(et(c.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Rt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Se.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Qs(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+dc(t)}}function dc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ql(n,r=>[r.name,r])}}let Zr=e=>{try{return e.only([[]]),Zr=()=>[[]],[[]]}catch{return Zr=()=>Hn,Hn}};function Zs(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>vn(r,t)}(e):t=>vn(t,e)}function La(e){return[].slice.call(e)}let Jh=0;function Kr(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function zh(e,t,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:d,lowerOpen:x,upperOpen:w}=l;return u===void 0?d===void 0?null:t.upperBound(d,!!w):d===void 0?t.lowerBound(u,!!x):t.bound(u,d,!!x,!!w)}const{schema:i,hasGetAll:s}=function(l,u){const d=La(l.objectStoreNames);return{schema:{name:l.name,tables:d.map(x=>u.objectStore(x)).map(x=>{const{keyPath:w,autoIncrement:P}=x,$=bt(w),T=w==null,B={},L={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:$,keyPath:w,autoIncrement:P,unique:!0,extractKey:Zs(w)},indexes:La(x.indexNames).map(O=>x.index(O)).map(O=>{const{name:E,unique:N,multiEntry:V,keyPath:z}=O,H={name:E,compound:bt(z),keyPath:z,unique:N,multiEntry:V,extractKey:Zs(z)};return B[Kr(z)]=H,H}),getIndexByKeyPath:O=>B[Kr(O)]};return B[":id"]=L.primaryKey,w!=null&&(B[Kr(w)]=L.primaryKey),L})},hasGetAll:d.length>0&&"getAll"in u.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map(l=>function(u){const d=u.name;return{name:d,schema:u,mutate:function({trans:x,type:w,keys:P,values:$,range:T}){return new Promise((B,L)=>{B=et(B);const O=x.objectStore(d),E=O.keyPath==null,N=w==="put"||w==="add";if(!N&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);const{length:V}=P||$||{length:1};if(P&&$&&P.length!==$.length)throw new Error("Given keys array must have same length as given values array.");if(V===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});let z;const H=[],re=[];let k=0;const b=j=>{++k,Xr(j)};if(w==="deleteRange"){if(T.type===4)return B({numFailures:k,failures:re,results:[],lastResult:void 0});T.type===3?H.push(z=O.clear()):H.push(z=O.delete(r(T)))}else{const[j,ve]=N?E?[$,P]:[$,null]:[P,null];if(N)for(let ae=0;ae<V;++ae)H.push(z=ve&&ve[ae]!==void 0?O[w](j[ae],ve[ae]):O[w](j[ae])),z.onerror=b;else for(let ae=0;ae<V;++ae)H.push(z=O[w](j[ae])),z.onerror=b}const U=j=>{const ve=j.target.result;H.forEach((ae,Ae)=>ae.error!=null&&(re[Ae]=ae.error)),B({numFailures:k,failures:re,results:w==="delete"?P:H.map(ae=>ae.result),lastResult:ve})};z.onerror=j=>{b(j),U(j)},z.onsuccess=U})},getMany:({trans:x,keys:w})=>new Promise((P,$)=>{P=et(P);const T=x.objectStore(d),B=w.length,L=new Array(B);let O,E=0,N=0;const V=H=>{const re=H.target;L[re._pos]=re.result,++N===E&&P(L)},z=nn($);for(let H=0;H<B;++H)w[H]!=null&&(O=T.get(w[H]),O._pos=H,O.onsuccess=V,O.onerror=z,++E);E===0&&P(L)}),get:({trans:x,key:w})=>new Promise((P,$)=>{P=et(P);const T=x.objectStore(d).get(w);T.onsuccess=B=>P(B.target.result),T.onerror=nn($)}),query:function(x){return w=>new Promise((P,$)=>{P=et(P);const{trans:T,values:B,limit:L,query:O}=w,E=L===1/0?void 0:L,{index:N,range:V}=O,z=T.objectStore(d),H=N.isPrimaryKey?z:z.index(N.name),re=r(V);if(L===0)return P({result:[]});if(x){const k=B?H.getAll(re,E):H.getAllKeys(re,E);k.onsuccess=b=>P({result:b.target.result}),k.onerror=nn($)}else{let k=0;const b=B||!("openKeyCursor"in H)?H.openCursor(re):H.openKeyCursor(re),U=[];b.onsuccess=j=>{const ve=b.result;return ve?(U.push(B?ve.value:ve.primaryKey),++k===L?P({result:U}):void ve.continue()):P({result:U})},b.onerror=nn($)}})}(s),openCursor:function({trans:x,values:w,query:P,reverse:$,unique:T}){return new Promise((B,L)=>{B=et(B);const{index:O,range:E}=P,N=x.objectStore(d),V=O.isPrimaryKey?N:N.index(O.name),z=$?T?"prevunique":"prev":T?"nextunique":"next",H=w||!("openKeyCursor"in V)?V.openCursor(r(E),z):V.openKeyCursor(r(E),z);H.onerror=nn(L),H.onsuccess=et(re=>{const k=H.result;if(!k)return void B(null);k.___id=++Jh,k.done=!1;const b=k.continue.bind(k);let U=k.continuePrimaryKey;U&&(U=U.bind(k));const j=k.advance.bind(k),ve=()=>{throw new Error("Cursor not stopped")};k.trans=x,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=et(L),k.next=function(){let ae=1;return this.start(()=>ae--?this.continue():this.stop()).then(()=>this)},k.start=ae=>{const Ae=new Promise((ue,oe)=>{ue=et(ue),H.onerror=nn(oe),k.fail=oe,k.stop=Ve=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=ve,ue(Ve)}}),ge=()=>{if(H.result)try{ae()}catch(ue){k.fail(ue)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=et(ue=>{H.onsuccess=ge,ge()}),k.continue=b,k.continuePrimaryKey=U,k.advance=j,ge(),Ae},B(k)},L)})},count({query:x,trans:w}){const{index:P,range:$}=x;return new Promise((T,B)=>{const L=w.objectStore(d),O=P.isPrimaryKey?L:L.index(P.name),E=r($),N=E?O.count(E):O.count();N.onsuccess=et(V=>T(V.target.result)),N.onerror=nn(B)})}}}(l)),c={};return o.forEach(l=>c[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!c[l])throw new Error(`Table '${l}' not found`);return c[l]},MIN_KEY:-1/0,MAX_KEY:Zr(t),schema:i}}function eo({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:o,indexedDB:c},l){return{dbcore:function(d,x){return x.reduce((w,{create:P})=>({...w,...P(w)}),d)}(zh(s,o,l),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Hi({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(o=>{const c=$o(o,i);(!c||"value"in c&&c.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?gn(o,i,{get(){return this.table(i)},set(l){Ul(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function to({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Wh(e,t){return e._cfg.version-t._cfg.version}function Gh(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),c=_e.transless||_e;In(()=>{_e.trans=s,_e.transless=c,t===0?(lt(i).forEach(l=>{Cs(n,l,i[l].primKey,i[l].indexes)}),eo(e,n),le.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:l},u,d,x){const w=[],P=l._versions;let $=l._dbSchema=ro(l,l.idbdb,x),T=!1;const B=P.filter(O=>O._cfg.version>=u);function L(){return w.length?le.resolve(w.shift()(d.idbtrans)).then(L):le.resolve()}return B.forEach(O=>{w.push(()=>{const E=$,N=O._cfg.dbschema;io(l,E,x),io(l,N,x),$=l._dbSchema=N;const V=yc(E,N);V.add.forEach(H=>{Cs(x,H[0],H[1].primKey,H[1].indexes)}),V.change.forEach(H=>{if(H.recreate)throw new Se.Upgrade("Not yet support for changing primary key");{const re=x.objectStore(H.name);H.add.forEach(k=>no(re,k)),H.change.forEach(k=>{re.deleteIndex(k.name),no(re,k)}),H.del.forEach(k=>re.deleteIndex(k))}});const z=O._cfg.contentUpgrade;if(z&&O._cfg.version>u){eo(l,x),d._memoizedTables={},T=!0;let H=Yl(N);V.del.forEach(U=>{H[U]=E[U]}),to(l,[l.Transaction.prototype]),Hi(l,[l.Transaction.prototype],lt(H),H),d.schema=H;const re=Io(z);let k;re&&Sr();const b=le.follow(()=>{if(k=z(d),k&&re){var U=_n.bind(null,null);k.then(U,U)}});return k&&typeof k.then=="function"?le.resolve(k):b.then(()=>k)}}),w.push(E=>{(!T||!jh)&&function(N,V){[].slice.call(V.db.objectStoreNames).forEach(z=>N[z]==null&&V.db.deleteObjectStore(z))}(O._cfg.dbschema,E),to(l,[l.Transaction.prototype]),Hi(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),d.schema=l._dbSchema})}),L().then(()=>{var O,E;E=x,lt(O=$).forEach(N=>{E.db.objectStoreNames.contains(N)||Cs(E,N,O[N].primKey,O[N].indexes)})})}(e,t,s,n).catch(o)})}function yc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!is)o.recreate=!0,n.change.push(o);else{const c=i.idxByName,l=s.idxByName;let u;for(u in c)l[u]||o.del.push(u);for(u in l){const d=c[u],x=l[u];d?d.src!==x.src&&o.change.push(x):o.add.push(x)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function Cs(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>no(i,s)),i}function no(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ro(e,t,n){const r={};return Bi(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const c=Qs(dc(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let d=0;d<s.indexNames.length;++d){const x=s.index(s.indexNames[d]);o=x.keyPath;var u=Qs(x.name,o,!!x.unique,!!x.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}r[i]=pc(i,c,l)}),r}function io({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(let c=0;c<o.indexNames.length;++c){const l=o.indexNames[c],u=o.index(l).keyPath,d=typeof u=="string"?u:"["+Bi(u).join("+")+"]";if(t[s]){const x=t[s].idxByName[d];x&&(x.name=l,delete t[s].idxByName[d],t[s].idxByName[l]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Qe.WorkerGlobalScope&&Qe instanceof Qe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Xh{_parseStoresSpec(t,n){lt(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((o,c)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Qs(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),bt(u),c===0)}),s=i.shift();if(s.multi)throw new Se.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),n[r]=pc(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?St(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(o=>{St(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,to(n,[n._allTables,n,n.Transaction.prototype]),Hi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],lt(s),s),n._storeNames=lt(s),this}upgrade(t){return this._cfg.contentUpgrade=Mo(this._cfg.contentUpgrade||Ye,t),this}}function Ro(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new st(ss,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ko(e){return e&&typeof e.databases=="function"}function so(e){return In(function(){return _e.letThrough=!0,e()})}function Qh(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Zh(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?ut(t.dbOpenError):e);ln&&(t.openCanceller._stackHolder=tr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Se.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,c=!1;return le.race([r,(typeof navigator>"u"?le.resolve():Qh()).then(()=>new le((l,u)=>{if(i(),!n)throw new Se.MissingAPI;const d=e.name,x=t.autoSchema?n.open(d):n.open(d,Math.round(10*e.verno));if(!x)throw new Se.MissingAPI;x.onerror=nn(u),x.onblocked=et(e._fireOnBlocked),x.onupgradeneeded=et(w=>{if(o=x.transaction,t.autoSchema&&!e._options.allowEmptyDB){x.onerror=Xr,o.abort(),x.result.close();const $=n.deleteDatabase(d);$.onsuccess=$.onerror=et(()=>{u(new Se.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{o.onerror=nn(u);var P=w.oldVersion>Math.pow(2,62)?0:w.oldVersion;c=P<1,e._novip.idbdb=x.result,Gh(e,P/10,o,u)}},u),x.onsuccess=et(()=>{o=null;const w=e._novip.idbdb=x.result,P=Bi(w.objectStoreNames);if(P.length>0)try{const T=w.transaction(($=P).length===1?$[0]:$,"readonly");t.autoSchema?function({_novip:B},L,O){B.verno=L.version/10;const E=B._dbSchema=ro(0,L,O);B._storeNames=Bi(L.objectStoreNames,0),Hi(B,[B._allTables],lt(E),E)}(e,w,T):(io(e,e._dbSchema,T),function(B,L){const O=yc(ro(0,B.idbdb,L),B._dbSchema);return!(O.add.length||O.change.some(E=>E.add.length||E.change.length))}(e,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),eo(e,T)}catch{}var $;jr.push(e),w.onversionchange=et(T=>{t.vcFired=!0,e.on("versionchange").fire(T)}),w.onclose=et(T=>{e.on("close").fire(T)}),c&&function({indexedDB:T,IDBKeyRange:B},L){!Ko(T)&&L!==ss&&Ro(T,B).put({name:L}).catch(Ye)}(e._deps,d),l()},u)}))]).then(()=>(i(),t.onReadyBeingFired=[],le.resolve(so(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let u=t.onReadyBeingFired.reduce(Mo,Ye);return t.onReadyBeingFired=[],le.resolve(so(()=>u(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),ut(l)}).finally(()=>{t.openComplete=!0,s()})}function oo(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return o=>{var c=s(o),l=c.value;return c.done?l:l&&typeof l.then=="function"?l.then(n,r):bt(l)?Promise.all(l).then(n,r):n(l)}}return i(t)()}function ed(e,t,n){var r=arguments.length;if(r<2)throw new Se.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Jl(i),n]}function mc(e,t,n,r,i){return le.resolve().then(()=>{const s=_e.transless||_e,o=e._createTransaction(t,n,e._dbSchema,r),c={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(x){return x.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>mc(e,t,n,null,i))):ut(x)}const l=Io(i);let u;l&&Sr();const d=le.follow(()=>{if(u=i.call(o,o),u)if(l){var x=_n.bind(null,null);u.then(x,x)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=oo(u))},c);return(u&&typeof u.then=="function"?le.resolve(u).then(x=>o.active?x:ut(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>u)).then(x=>(r&&o._resolve(),o._completion.then(()=>x))).catch(x=>(o._reject(x),ut(x)))})}function _i(e,t,n){const r=bt(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const td={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function o(d,x,w){const P=Kr(d),$=i[P]=i[P]||[],T=d==null?0:typeof d=="string"?1:d.length,B=x>0,L={...w,isVirtual:B,keyTail:x,keyLength:T,extractKey:Zs(d),unique:!B&&w.unique};return $.push(L),L.isPrimaryKey||s.push(L),T>1&&o(T===2?d[0]:d.slice(0,T-1),x+1,w),$.sort((O,E)=>O.keyTail-E.keyTail),L}const c=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const d of r.indexes)o(d.keyPath,0,d);function l(d){const x=d.query.index;return x.isVirtual?{...d,query:{index:x,range:(w=d.query.range,P=x.keyTail,{type:w.type===1?2:w.type,lower:_i(w.lower,w.lowerOpen?e.MAX_KEY:e.MIN_KEY,P),lowerOpen:!0,upper:_i(w.upper,w.upperOpen?e.MIN_KEY:e.MAX_KEY,P),upperOpen:!0})}}:d;var w,P}return{...n,schema:{...r,primaryKey:c,indexes:s,getIndexByKeyPath:function(d){const x=i[Kr(d)];return x&&x[0]}},count:d=>n.count(l(d)),query:d=>n.query(l(d)),openCursor(d){const{keyTail:x,isVirtual:w,keyLength:P}=d.query.index;return w?n.openCursor(l(d)).then($=>$&&function(T){return Object.create(T,{continue:{value:function(L){L!=null?T.continue(_i(L,d.reverse?e.MAX_KEY:e.MIN_KEY,x)):d.unique?T.continue(T.key.slice(0,P).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,x)):T.continue()}},continuePrimaryKey:{value(L,O){T.continuePrimaryKey(_i(L,e.MAX_KEY,x),O)}},primaryKey:{get:()=>T.primaryKey},key:{get(){const L=T.key;return P===1?L[0]:L.slice(0,P)}},value:{get:()=>T.value}})}($)):n.openCursor(d)}}}}}};function Uo(e,t,n,r){return n=n||{},r=r||"",lt(e).forEach(i=>{if(Rt(t,i)){var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const c=js(s);c!==js(o)?n[r+i]=t[i]:c==="Object"?Uo(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0}),lt(t).forEach(i=>{Rt(e,i)||(n[r+i]=t[i])}),n}const nd={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=_e.trans,{deleting:c,creating:l,updating:u}=o.table(t).hook;switch(s.type){case"add":if(l.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"put":if(l.fire===Ye&&u.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"delete":if(c.fire===Ye)break;return o._promise("readwrite",()=>d(s),!0);case"deleteRange":if(c.fire===Ye)break;return o._promise("readwrite",()=>function(w){return x(w.trans,w.range,1e4)}(s),!0)}return n.mutate(s);function d(w){const P=_e.trans,$=w.keys||function(T,B){return B.type==="delete"?B.keys:B.keys||B.values.map(T.extractKey)}(r,w);if(!$)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?{...w,keys:$}:{...w}).type!=="delete"&&(w.values=[...w.values]),w.keys&&(w.keys=[...w.keys]),function(T,B,L){return B.type==="add"?Promise.resolve([]):T.getMany({trans:B.trans,keys:L,cache:"immutable"})}(n,w,$).then(T=>{const B=$.map((L,O)=>{const E=T[O],N={onerror:null,onsuccess:null};if(w.type==="delete")c.fire.call(N,L,E,P);else if(w.type==="add"||E===void 0){const V=l.fire.call(N,L,w.values[O],P);L==null&&V!=null&&(L=V,w.keys[O]=L,r.outbound||Zt(w.values[O],r.keyPath,L))}else{const V=Uo(E,w.values[O]),z=u.fire.call(N,V,L,E,P);if(z){const H=w.values[O];Object.keys(z).forEach(re=>{Rt(H,re)?H[re]=z[re]:Zt(H,re,z[re])})}}return N});return n.mutate(w).then(({failures:L,results:O,numFailures:E,lastResult:N})=>{for(let V=0;V<$.length;++V){const z=O?O[V]:$[V],H=B[V];z==null?H.onerror&&H.onerror(L[V]):H.onsuccess&&H.onsuccess(w.type==="put"&&T[V]?w.values[V]:z)}return{failures:L,results:O,numFailures:E,lastResult:N}}).catch(L=>(B.forEach(O=>O.onerror&&O.onerror(L)),Promise.reject(L)))})}function x(w,P,$){return n.query({trans:w,values:!1,query:{index:r,range:P},limit:$}).then(({result:T})=>d({type:"delete",keys:T,trans:w}).then(B=>B.numFailures>0?Promise.reject(B.failures[0]):T.length<$?{failures:[],numFailures:0,lastResult:void 0}:x(w,{...P,lower:T[T.length-1],lowerOpen:!0},$)))}}}}})};function gc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)kt(t.keys[i],e[s])===0&&(r.push(n?ri(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const rd={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=gc(r.keys,r.trans._cache,r.cache==="clone");return i?le.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?ri(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Vo(e){return!("from"in e)}const dn=function(e,t){if(!this){const n=new dn;return e&&"d"in e&&St(n,e),n}St(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function ei(e,t,n){const r=kt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vo(e))return St(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(kt(n,e.from)<0)return i?ei(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ba(e);if(kt(t,e.to)>0)return s?ei(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ba(e);kt(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),kt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&qi(e,i),s&&o&&qi(e,s)}function qi(e,t){Vo(t)||function n(r,{from:i,to:s,l:o,r:c}){ei(r,i,s),o&&n(r,o),c&&n(r,c)}(e,t)}function id(e,t){const n=ao(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=ao(e);let o=s.next(i.from),c=o.value;for(;!r.done&&!o.done;){if(kt(c.from,i.to)<=0&&kt(c.to,i.from)>=0)return!0;kt(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(o=s.next(i.from)).value}return!1}function ao(e){let t=Vo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&kt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||kt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ba(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],o[i]=c[s],e[s]=o,o.d=ja(o)}e.d=ja(e)}function ja({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Cr(dn.prototype,{add(e){return qi(this,e),this},addKey(e){return ei(this,e,e),this},addKeys(e){return e.forEach(t=>ei(this,t,t)),this},[Rs](){return ao(this)}});const sd={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new dn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:c,outbound:l}=o,u={...i,mutate:w=>{const P=w.trans,$=P.mutatedParts||(P.mutatedParts={}),T=z=>{const H=`idb://${t}/${r}/${z}`;return $[H]||($[H]=new dn)},B=T(""),L=T(":dels"),{type:O}=w;let[E,N]=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[[],w.values]:[];const V=w.trans._cache;return i.mutate(w).then(z=>{if(bt(E)){O!=="delete"&&(E=z.results),B.addKeys(E);const H=gc(E,V);H||O==="add"||L.addKeys(E),(H||N)&&function(re,k,b,U){function j(ve){const ae=re(ve.name||"");function Ae(ue){return ue!=null?ve.extractKey(ue):null}const ge=ue=>ve.multiEntry&&bt(ue)?ue.forEach(oe=>ae.addKey(oe)):ae.addKey(ue);(b||U).forEach((ue,oe)=>{const Ve=b&&Ae(b[oe]),Ue=U&&Ae(U[oe]);kt(Ve,Ue)!==0&&(Ve!=null&&ge(Ve),Ue!=null&&ge(Ue))})}k.indexes.forEach(j)}(T,s,H,N)}else if(E){const H={from:E.lower,to:E.upper};L.add(H),B.add(H)}else B.add(n),L.add(n),s.indexes.forEach(H=>T(H.name).add(n));return z})}},d=({query:{index:w,range:P}})=>{var $,T;return[w,new dn(($=P.lower)!==null&&$!==void 0?$:e.MIN_KEY,(T=P.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},x={get:w=>[o,new dn(w.key)],getMany:w=>[o,new dn().addKeys(w.keys)],count:d,query:d,openCursor:d};return lt(x).forEach(w=>{u[w]=function(P){const{subscr:$}=_e;if($){const T=N=>{const V=`idb://${t}/${r}/${N}`;return $[V]||($[V]=new dn)},B=T(""),L=T(":dels"),[O,E]=x[w](P);if(T(O.name||"").add(E),!O.isPrimaryKey){if(w!=="count"){const N=w==="query"&&l&&P.values&&i.query({...P,values:!1});return i[w].apply(this,arguments).then(V=>{if(w==="query"){if(l&&P.values)return N.then(({result:H})=>(B.addKeys(H),V));const z=P.values?V.result.map(c):V.result;P.values?B.addKeys(z):L.addKeys(z)}else if(w==="openCursor"){const z=V,H=P.values;return z&&Object.create(z,{key:{get:()=>(L.addKey(z.primaryKey),z.key)},primaryKey:{get(){const re=z.primaryKey;return L.addKey(re),re}},value:{get:()=>(H&&B.addKey(z.primaryKey),z.value)}})}return V})}L.add(n)}}return i[w].apply(this,arguments)}}),u}}}};class st{constructor(t,n){this._middlewares={},this.verno=0;const r=st.dependencies;this._options=n={addons:st.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ye,dbReadyPromise:null,cancelOpen:Ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new le(c=>{s.dbReadyResolve=c}),s.openCanceller=new le((c,l)=>{s.cancelOpen=l}),this._state=s,this.name=t,this.on=Rr(this,"populate","blocked","versionchange","close",{ready:[Mo,Ye]}),this.on.ready.subscribe=Vl(this.on.ready.subscribe,c=>(l,u)=>{st.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||le.resolve().then(l),u&&c(l);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(l),u&&c(l);else{c(l);const x=this;u||c(function w(){x.on.ready.unsubscribe(l),x.on.ready.unsubscribe(w)})}})}),this.Collection=(o=this,Er(Uh.prototype,function(c,l){this.db=o;let u=uc,d=null;if(l)try{u=l()}catch($){d=$}const x=c._ctx,w=x.table,P=w.hook.reading.fire;this._ctx={table:w,index:x.index,isPrimKey:!x.index||w.schema.primKey.keyPath&&x.index===w.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:x.or,valueMapper:P!==Wr?P:null}})),this.Table=function(c){return Er(Kh.prototype,function(l,u,d){this.db=c,this._tx=d,this.name=l,this.schema=u,this.hook=c._allTables[l]?c._allTables[l].hook:Rr(null,{creating:[Oh,Ye],reading:[Eh,Wr],updating:[Ph,Ye],deleting:[Ah,Ye]})})}(this),this.Transaction=function(c){return Er(Yh.prototype,function(l,u,d,x,w){this.db=c,this.mode=l,this.storeNames=u,this.schema=d,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Rr(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le((P,$)=>{this._resolve=P,this._reject=$}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},P=>{var $=this.active;return this.active=!1,this.on.error.fire(P),this.parent?this.parent._reject(P):$&&this.idbtrans&&this.idbtrans.abort(),ut(P)})})}(this),this.Version=function(c){return Er(Xh.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return Er(hc.prototype,function(l,u,d){this.db=c,this._ctx={table:l,index:u===":id"?null:u,or:d};const x=c._deps.indexedDB;if(!x)throw new Se.MissingAPI;this._cmp=this._ascending=x.cmp.bind(x),this._descending=(w,P)=>x.cmp(P,w),this._max=(w,P)=>x.cmp(w,P)>0?w:P,this._min=(w,P)=>x.cmp(w,P)<0?w:P,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=Zr(n.IDBKeyRange),this._createTransaction=(c,l,u,d)=>new this.Transaction(c,l,u,this._options.chromeTransactionDurability,d),this._fireOnBlocked=c=>{this.on("blocked").fire(c),jr.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(c))},this.use(td),this.use(nd),this.use(sd),this.use(rd),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new Se.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Wh),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||_e.letThrough||this._vip)?t():new le((n,r)=>{if(this._state.openComplete)return r(new Se.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Se.DatabaseClosed);this.open().catch(Ye)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((o,c)=>o.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Zh(this)}_close(){const t=this._state,n=jr.indexOf(this);if(n>=0&&jr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new le(r=>{t.dbReadyResolve=r}),t.openCanceller=new le((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Se.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new le((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=et(()=>{(function({indexedDB:c,IDBKeyRange:l},u){!Ko(c)&&u!==ss&&Ro(c,l).delete(u).catch(Ye)})(this._deps,this.name),r()}),o.onerror=nn(i),o.onblocked=this._fireOnBlocked};if(t)throw new Se.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return lt(this._allTables).map(t=>this._allTables[t])}transaction(){const t=ed.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=_e.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let o,c;t=t.replace("!","").replace("?","");try{if(c=n.map(u=>{var d=u instanceof this.Table?u.name:u;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===vs)o=vs;else{if(t!="rw"&&t!=bs)throw new Se.InvalidArgument("Invalid transaction mode: "+t);o=bs}if(i){if(i.mode===vs&&o===bs){if(!s)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new Se.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(d,x)=>{x(u)}):ut(u)}const l=mc.bind(null,this,o,c,i,r);return i?i._promise(o,l,"lock"):_e.trans?Tr(_e.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!Rt(this._allTables,t))throw new Se.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const od=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ad{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[od](){return this}}function vc(e,t){return lt(t).forEach(n=>{qi(e[n]||(e[n]=new dn),t[n])}),e}function ld(e){let t,n=!1;const r=new ad(i=>{const s=Io(e);let o=!1,c={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Fn.storagemutated.unsubscribe(P)}};i.start&&i.start(u);let d=!1,x=!1;function w(){return lt(l).some(T=>c[T]&&id(c[T],l[T]))}const P=T=>{vc(c,T),w()&&$()},$=()=>{if(d||o)return;c={};const T={},B=function(L){s&&Sr();const O=()=>In(e,{subscr:L,trans:null}),E=_e.trans?Tr(_e.transless,O):O();return s&&E.then(_n,_n),E}(T);x||(Fn(Qr,P),x=!0),d=!0,Promise.resolve(B).then(L=>{n=!0,t=L,d=!1,o||(w()?$():(c={},l=T,i.next&&i.next(L)))},L=>{d=!1,n=!1,i.error&&i.error(L),u.unsubscribe()})};return $(),u});return r.hasValue=()=>n,r.getValue=()=>t,r}let lo;try{lo={indexedDB:Qe.indexedDB||Qe.mozIndexedDB||Qe.webkitIndexedDB||Qe.msIndexedDB,IDBKeyRange:Qe.IDBKeyRange||Qe.webkitIDBKeyRange}}catch{lo={indexedDB:null,IDBKeyRange:null}}const Rn=st;function $i(e){let t=yn;try{yn=!0,Fn.storagemutated.fire(e)}finally{yn=t}}Cr(Rn,{...Si,delete:e=>new Rn(e,{addons:[]}).delete(),exists:e=>new Rn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Ko(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==ss)):Ro(t,n).toCollection().primaryKeys()}(Rn.dependencies).then(e)}catch{return ut(new Se.MissingAPI)}},defineClass:()=>function(e){St(this,e)},ignoreTransaction:e=>_e.trans?Tr(_e.transless,e):e(),vip:so,async:function(e){return function(){try{var t=oo(e.apply(this,arguments));return t&&typeof t.then=="function"?t:le.resolve(t)}catch(n){return ut(n)}}},spawn:function(e,t,n){try{var r=oo(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:le.resolve(r)}catch(i){return ut(i)}},currentTransaction:{get:()=>_e.trans||null},waitFor:function(e,t){const n=le.resolve(typeof e=="function"?Rn.ignoreTransaction(e):e).timeout(t||6e4);return _e.trans?_e.trans.waitFor(n):n},Promise:le,debug:{get:()=>ln,set:e=>{Wl(e,e==="dexie"?()=>!0:cc)}},derive:gr,extend:St,props:Cr,override:Vl,Events:Rr,on:Fn,liveQuery:ld,extendObservabilitySet:vc,getByKeyPath:vn,setByKeyPath:Zt,delByKeyPath:function(e,t){typeof t=="string"?Zt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Zt(e,n,void 0)})},shallowClone:Yl,deepClone:ri,getObjectDiff:Uo,cmp:kt,asap:Hl,minKey:Xs,addons:[],connections:jr,errnames:Fo,dependencies:lo,semVer:$a,version:$a.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Rn.maxKey=Zr(Rn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fn(Qr,e=>{if(!yn){let t;is?(t=document.createEvent("CustomEvent"),t.initCustomEvent(En,!0,!0,e)):t=new CustomEvent(En,{detail:e}),yn=!0,dispatchEvent(t),yn=!1}}),addEventListener(En,({detail:e})=>{yn||$i(e)}));let yn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(En);typeof e.unref=="function"&&e.unref(),Fn(Qr,t=>{yn||e.postMessage(t)}),e.onmessage=t=>{t.data&&$i(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Fn(Qr,t=>{try{yn||(typeof localStorage<"u"&&localStorage.setItem(En,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:En,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===En){const n=JSON.parse(t.newValue);n&&$i(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===En&&$i(t.changedParts)})}le.rejectionMapper=function(e,t){if(!e||e instanceof vr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ea[e.name])return e;var n=new Ea[e.name](t||e.message,e);return"stack"in e&&gn(n,"stack",{get:function(){return this.inner.stack}}),n},Wl(ln,cc);const Dt=new st("avito_scraper");function cd(e=1){Dt.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class ud{constructor(t){un(this,"canvas",null);un(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var l,u;const i={...this.settings,...r,type:t},s=(l=this.canvas)==null?void 0:l.querySelector(`.${this.settings.groupContainerClass}.position-${i.position}`),o=this.createToast(n,i);if(s)return s.append(o),o;const c=this.createContainer(i);return c.append(o),(u=this.canvas)==null||u.append(c),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),i=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...i),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const s=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(s),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const ot=new ud({hideOnClick:!0,position:"bottom-right"});var at=(e=>(e.ReviewsFilterSaved="Фильтр сохранен",e.ReviewsFilterSaveError="Не удалось сохранить фильтр",e.ReviewsFilterCleared="Фильтр сброшен (удален из базы)",e.ReviewsFilterClearError="Не удалось удалить фильтр из базы",e.ReviewsFilterGetError="Не удалось достать фильтр из базы",e.ParsingCanceled="Парсинг отзывов отменен",e.ParsingStarted="Парсинг отзывов запущен",e.TabOpenError="Не удалось открыть ссылку",e.ProfileCreated="Профиль добавлен в базу",e.ProfileCreateError="Не удалось сохранить профиль в базу",e.ProfileEdited="Профиль успешно обновлен",e.ProfileEditeError="Не удалось обновить профиль",e.ProfileDeleted="Профиль успешно удален",e.ProfileDeleteError="Не удалось удалить профиль",e.ProfileLinkCopied="Ссылка скопирована в буффер",e.InfoCopied="Информация скопирована в буффер",e.ProductNameCopied="Название товара скопировано в буффер",e.DBExportSuccess="Экпорт базы успешно завершен",e.DBExportError="Не удалось экспортировать базу",e.DBImportError="Не удалось импортировать базу",e.DBImportSuccess="Импорт базы успешно завершен",e.DBDropSuccess="База данных успешно удалена",e.DBDropError="Не удалось удалить базу данных",e))(at||{});async function fd(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(i,s){s.status==="complete"&&i===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function hd(){const t=(await chrome.tabs.query({active:!1})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}function Ho(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("Ошибка при копировании в буффер",n)}t.remove()}class dd{constructor(){un(this,"fields",ni({profilesLinks:[{url:"",status:"new"}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,scrollInterval:2,openTabInterval:2,deliveryOnly:!1}));un(this,"openedTab",mn({}))}get newProfileLink(){return this.fields.profilesLinks.find(t=>t.status==="new")}getProfileLinkByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}pushNewProfileLink(){this.fields.profilesLinks.push({url:"",status:"new"})}removeProfileLink(t){this.fields.profilesLinks.splice(t,1)}setProfileLinksStatusNew(){this.fields.profilesLinks.forEach(t=>{t.info="",t.status="new"})}setProfileLinkInfo(t,n){const r=this.getProfileLinkByUrl(t);r&&(r.info=n)}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.deliveryOnly=t.deliveryOnly,this.fields.productName=t.productName,this.fields.scrollInterval=t.scrollInterval,this.fields.openTabInterval=t.openTabInterval,t}catch(t){console.log(t),ot.show("error",at.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new"}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.scrollInterval=2,this.fields.openTabInterval=2,this.fields.deliveryOnly=!1,await this.apiRemoveFilter()}async parsingStart(){try{if(this.newProfileLink){const t=await fd(this.newProfileLink.url);this.openedTab.value=t,t.id&&chrome.tabs.sendMessage(t.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.newProfileLink.url})}}catch{ot.show("error",at.TabOpenError)}}async apiRemoveFilter(){try{await Dt.reviewsFilter.where("key").equals("reviewsFilter").delete(),ot.show("warning",at.ReviewsFilterCleared)}catch(t){console.log(t),ot.show("warning",at.ReviewsFilterClearError)}}async apiGetFilter(){const t=await Dt.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ta(t.dateFrom),t.dateTo=Ta(t.dateTo),t.profilesLinks.forEach(r=>r.status="new"),(await Dt.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?Dt.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):Dt.reviewsFilter.add({...t,key:"reviewsFilter"}),ot.show("success",at.ReviewsFilterSaved)}catch(t){console.log(t),ot.show("success",at.ReviewsFilterSaveError)}}}const Fe=new dd;class pd{constructor(){un(this,"list",mn([]))}pushProfileInfo(t){this.list.value.push(t)}pushProductsByUrl(t,n){const r=this.list.value.find(i=>i.url===t);r&&(r.reviewsList=n,this.sortResults(r,"productName"))}sortResults(t,n){t.reviewsList&&(n==="productName"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>r.productName.localeCompare(i.productName))),n==="rating"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>i.rating-r.rating)),n==="date"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>i.date-r.date)))}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}



`,n+=`${mr(t.parsingDate)}
`,this.sortResults(t,"productName"),(r=t.reviewsList)==null||r.forEach(i=>{let s=new Date(i.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit"}).format(s),c=new Intl.DateTimeFormat("ru",{year:"numeric"}).format(s);n+=`${i.productName}~${o}.${c}${i.delivery?"~Delivery":""}
`}),n&&(Ho(n),ot.show("success",at.InfoCopied))}copyAllInfo(){}async apiCheckInDB(t){let n=await Dt.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers}]};const i=await Dt.savedProfiles.add(r);t.id=i,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,ot.show("success",at.ProfileCreateError)}catch(n){console.log(n),ot.show("error",at.ProfileCreateError)}finally{}}}const Et=new pd,yd=["onSubmit"],md={class:"grid grid-cols-4 gap-5"},gd={class:"col-span-4"},vd=R("div",{class:"text-sm font-medium mb-2"},"Ссылки на профили",-1),bd={class:"flex items-center gap-4"},_d={class:"flex-none select-none"},wd={key:0,class:"font-icon text-3xl block text-green-400"},xd={key:1,class:"font-icon text-3xl block text-red-400"},Cd={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},kd={key:3,class:"font-icon text-3xl block text-gray-400"},Dd=["onUpdate:modelValue","onInput"],Sd={key:0,class:"flex-none cursor-pointer select-none"},Td=["onClick"],Ed={class:"flex-none cursor-pointer select-none ml-auto"},Od=["innerHTML"],Ad=R("div",{class:"mb-2 text-sm font-medium"},"Дата от",-1),Pd=R("div",{class:"mb-2 text-sm font-medium"},"Дата до",-1),$d={class:"col-span-2"},Id=R("div",{class:"mb-2 text-sm font-medium"},"Название товара",-1),Nd=R("div",{class:"mb-2 text-sm font-medium"},"Рейтинг от",-1),Fd=R("div",{class:"mb-2 text-sm font-medium"},"Рейтинг до",-1),Md=R("div",{class:"mb-2 text-sm font-medium"},"Интервал прокрутки отзывов (сек.)",-1),Ld=R("div",{class:"mb-2 text-sm font-medium"},"Интервал открытия страниц (сек.)",-1),Bd={class:"col-span-4 select-none"},jd={class:"inline-block"},Rd=R("div",{class:"mb-3 text-sm font-medium"},"Только с доставкой",-1),Kd={class:"flex items-center gap-4 mt-10"},Ud=an({__name:"ReviewsFilter",setup(e){const t={dateFrom:null,dateTo:null},n={autoClose:!0,onSelect:({formattedDate:c,datepicker:l})=>{l.$el.id==="dateFrom"&&(Fe.fields.dateFrom=c),l.$el.id==="dateTo"&&(Fe.fields.dateTo=c)}};function r(c){c.status="new",c.info=""}async function i(){window.confirm("Сбросить фильтр ?")&&(Fe.resetFields(),t.dateFrom.selectDate(Sa()),t.dateTo.selectDate(new Date))}async function s(){Fe.apiCreateFilter()}async function o(){Fe.setProfileLinksStatusNew(),Fe.apiCreateFilter(),Et.list.value=[],Fe.parsingStart()}return er(()=>{t.dateFrom=new Da("#dateFrom",n),t.dateTo=new Da("#dateTo",n),t.dateFrom.selectDate(Sa()),t.dateTo.selectDate(new Date),setTimeout(async()=>{const c=await Fe.setFilterFromDB();c&&(t.dateFrom.selectDate(c.dateFrom),t.dateTo.selectDate(c.dateTo))},0)}),es(()=>{t.dateFrom.destroy(),t.dateTo.destroy()}),(c,l)=>(he(),De("form",{class:"pb-20",onSubmit:Bt(o,["prevent"])},[R("div",md,[R("div",gd,[vd,(he(!0),De(nt,null,Yn(we(Fe).fields.profilesLinks,(u,d)=>(he(),De("div",{key:d,class:Ct(d>0?"mt-5":"")},[R("div",bd,[R("div",_d,[u.status==="success"?(he(),De("i",wd,"check_circle")):We("",!0),u.status==="error"?(he(),De("i",xd,"cancel")):We("",!0),u.status==="wait"?(he(),De("i",Cd,"rotate_right")):We("",!0),u.status==="new"?(he(),De("i",kd,"watch_later")):We("",!0)]),en(R("input",{"onUpdate:modelValue":x=>u.url=x,tabindex:"1",type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",onInput:x=>r(u)},null,40,Dd),[[tn,u.url]]),we(Fe).fields.profilesLinks.length>1?(he(),De("div",Sd,[R("i",{class:"font-icon text-3xl block text-red-400",onClick:x=>we(Fe).removeProfileLink(d)},"remove_circle_outline",8,Td)])):We("",!0),R("div",Ed,[R("i",{class:"font-icon text-3xl block text-green-400",onClick:l[0]||(l[0]=x=>we(Fe).pushNewProfileLink())},"add_circle_outline")])]),u.info?(he(),De("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:u.info},null,8,Od)):We("",!0)],2))),128))]),R("div",null,[Ad,en(R("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>we(Fe).fields.dateFrom=u),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.dateFrom]])]),R("div",null,[Pd,en(R("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>we(Fe).fields.dateTo=u),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.dateTo]])]),R("div",$d,[Id,en(R("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>we(Fe).fields.productName=u),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.productName]])]),R("div",null,[Nd,en(R("input",{"onUpdate:modelValue":l[4]||(l[4]=u=>we(Fe).fields.ratingFrom=u),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.ratingFrom]])]),R("div",null,[Fd,en(R("input",{"onUpdate:modelValue":l[5]||(l[5]=u=>we(Fe).fields.ratingTo=u),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.ratingTo]])]),R("div",null,[Md,en(R("input",{"onUpdate:modelValue":l[6]||(l[6]=u=>we(Fe).fields.scrollInterval=u),tabindex:"10",type:"number",min:"0",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.scrollInterval]])]),R("div",null,[Ld,en(R("input",{"onUpdate:modelValue":l[7]||(l[7]=u=>we(Fe).fields.openTabInterval=u),tabindex:"11",type:"number",min:"0",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,we(Fe).fields.openTabInterval]])]),R("div",Bd,[R("label",jd,[Rd,rt(ph,{tabindex:6,modelValue:we(Fe).fields.deliveryOnly,"onUpdate:modelValue":l[8]||(l[8]=u=>we(Fe).fields.deliveryOnly=u)},null,8,["modelValue"])])])]),R("div",Kd,[rt(jt,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:At(()=>[Lt("Начать парсинг")]),_:1}),rt(jt,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:Bt(s,["stop","prevent"])},{default:At(()=>[Lt("Сохранить фильтр")]),_:1},8,["onClick"]),rt(jt,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:Bt(i,["stop","prevent"])},{default:At(()=>[Lt("Сбросить фильтр")]),_:1},8,["onClick"])])],40,yd))}}),Vd={class:"space-y-2"},Hd={class:"flex items-center"},qd={class:"font-bold"},Yd={class:"flex items-center"},Jd=["href"],zd={class:"flex items-center"},Wd={class:"font-bold"},Gd={class:"flex items-center"},Xd={class:"font-bold"},Qd={class:"flex items-center"},Zd={class:"font-bold"},ep={class:"flex items-center"},tp={class:"font-bold"},np={class:"flex items-center"},rp=R("div",{class:"mr-3 opacity-80"},"Дата парсинга:",-1),ip={class:"font-bold"},sp={key:0,class:"flex items-center"},op=R("div",{class:"mr-3 opacity-80"},"Дата сохранения:",-1),ap={class:"font-bold"},lp={class:"flex items-center"},cp=R("div",{class:"mr-3 opacity-80"},"Найден в базе:",-1),up={class:"font-bold"},fp={key:1,class:"flex items-center"},hp=R("div",{class:"mr-3 opacity-80"},"ID:",-1),dp={class:"font-bold"},pp={key:2,class:"flex items-center"},yp=R("div",{class:"mr-3 opacity-80"},"Комментарий:",-1),mp={class:"font-bold"},gp={key:3},vp=R("div",{class:"mb-3 opacity-80"},"Комментарий:",-1),bp=["onUpdate:modelValue"],_p={class:"flex items-center gap-4 mt-8 empty:hidden"},wp={key:0,class:"mt-10"},xp={class:"mb-8 font-bold text-xl"},Cp={class:"w-full relative"},kp={class:"text-[16px] sticky top-[64px] bg-gray-600"},Dp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Sp=["onClick"],Tp=R("div",null,"Дата",-1),Ep={class:"text-left px-4 py-2 border border-white border-opacity-50"},Op=["onClick"],Ap=R("div",null,"Оценка",-1),Pp={class:"text-left px-4 py-2 border border-white border-opacity-50"},$p=["onClick"],Ip=R("div",null,"Название товара",-1),Np=R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"}," Доставка ",-1),Fp={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Mp={class:"px-4 py-2 border border-white border-opacity-50"},Lp={class:"flex-none flex items-center"},Bp={class:"text-base font-medium mr-1"},jp={class:"text-[18px] font-icon text-yellow-400"},Rp={class:"px-4 py-2 border border-white border-opacity-50"},Kp={class:"flex items-center gap-4"},Up=["onClick"],Vp={class:"px-4 py-2 border border-white border-opacity-50"},Hp={key:1,class:"text-center text-xl font-bold mt-10"},qp={key:1,class:"text-center text-xl font-bold"},Yp=an({__name:"ProfileInfoList",setup(e){function t(o){Ho(o),ot.show("success",at.ProductNameCopied)}function n(o,c){Et.sortResults(o,c)}function r(o){o.opened===void 0&&(o.opened=!0),o.opened=!o.opened}async function i(o){Et.apiProfileCreate(o)}async function s(o){Et.copyItemInfo(o)}return er(()=>{Et.list.value.forEach(async o=>{await Et.apiCheckInDB(o)}),Et.list.value.length>0&&Et.list.value.length<2&&(Et.list.value[0].opened=!0)}),(o,c)=>we(Et).list.value.length?(he(!0),De(nt,{key:0},Yn(we(Et).list.value,l=>{var u,d,x;return he(),De("div",{key:l.url,class:"relative rounded-xl shadow-xl bg-gray-600 p-5 mb-5 text-[16px]"},[R("div",{class:"absolute right-5 top-5 w-12 h-8 rounded-md",style:Wi({"background-color":l.color,"box-shadow":"0 0 10px rgba(0,0,0,.5)"})},null,4),R("div",null,[R("div",Vd,[R("div",Hd,[R("div",qd,je(l.name),1)]),R("div",Yd,[R("a",{href:l.url,target:"_blank"},je(l.url),9,Jd)]),R("div",zd,[R("div",Wd,je(l.rating),1)]),R("div",Gd,[R("div",Xd,je(l.reviewsCount),1)]),R("div",Qd,[R("div",Zd,je(l.subscribers),1)]),R("div",ep,[R("div",tp,je(l.deliveryInfo),1)]),R("div",np,[rp,R("div",ip,je(we(mr)(l.parsingDate)),1)]),l.savedDate?(he(),De("div",sp,[op,R("div",ap,je(we(mr)(l.savedDate)),1)])):We("",!0),R("div",lp,[cp,R("div",up,[R("strong",{class:Ct([l.existsInDataBase?"text-green-400":"text-red-400"])},je(l.existsInDataBase?"Да":"Нет"),3)])]),l.id?(he(),De("div",fp,[hp,R("div",dp,je(l.id),1)])):We("",!0),l.existsInDataBase?(he(),De("div",pp,[yp,R("em",mp,je(l.comment),1)])):(he(),De("div",gp,[vp,en(R("input",{"onUpdate:modelValue":w=>l.comment=w,type:"search",required:"",class:"text-base w-[640px] max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,bp),[[tn,l.comment]])]))]),R("div",null,[R("div",_p,[(u=l.reviewsList)!=null&&u.length?(he(),Ot(jt,{key:0,type:"button",theme:"success",icon:"content_copy",onClick:Bt(w=>s(l),["prevent"])},{default:At(()=>[Lt("Копировать результаты")]),_:2},1032,["onClick"])):We("",!0),l.existsInDataBase?We("",!0):(he(),Ot(jt,{key:1,type:"button",icon:"cloud_upload",onClick:Bt(w=>i(l),["prevent"])},{default:At(()=>[Lt("Сохранить в базу")]),_:2},1032,["onClick"])),(d=l.reviewsList)!=null&&d.length?(he(),Ot(jt,{key:2,theme:"warning",type:"button",icon:l.opened?"keyboard_arrow_up":"keyboard_arrow_down",onClick:Bt(w=>r(l),["prevent"])},{default:At(()=>[Lt(je(l.opened?"Скрыть результаты":"Раскрыть результаты")+" ",1),R("strong",null," ("+je(l.reviewsList.length)+")",1)]),_:2},1032,["icon","onClick"])):We("",!0)])])]),l.opened?(he(),De(nt,{key:0},[(x=l.reviewsList)!=null&&x.length?(he(),De("div",wp,[R("div",xp,[R("div",null,[Lt("Найдено отзывов - "),R("strong",null,je(l.reviewsList.length),1)])]),R("table",Cp,[R("tr",kp,[R("th",Dp,[R("div",{class:"flex items-center cursor-pointer",onClick:w=>n(l,"date")},[R("div",{class:Ct(["font-icon flex-none mr-2",{"text-cyan-400":l.reviewsSortedBy==="date"}])},"sort",2),Tp],8,Sp)]),R("th",Ep,[R("div",{class:"flex items-center cursor-pointer",onClick:w=>n(l,"rating")},[R("div",{class:Ct(["font-icon flex-none mr-2",{"text-cyan-400":l.reviewsSortedBy==="rating"}])},"sort",2),Ap],8,Op)]),R("th",Pp,[R("div",{class:"flex items-center cursor-pointer",onClick:w=>n(l,"productName")},[R("div",{class:Ct(["font-icon flex-none mr-2",{"text-cyan-400":l.reviewsSortedBy==="productName"}])},"sort",2),Ip],8,$p)]),Np]),(he(!0),De(nt,null,Yn(l.reviewsList,(w,P)=>{var $;return he(),De("tr",{key:l.reviewsSortedBy+P,class:"text-[14px] hover:bg-gray-600"},[R("td",Fp,je(($=we(mr)(w.date))==null?void 0:$.slice(0,10)),1),R("td",Mp,[R("div",Lp,[R("div",Bp,"("+je(w.rating)+") - ",1),(he(!0),De(nt,null,Yn(w.rating,T=>(he(),De("div",jp,"star"))),256))])]),R("td",Rp,[R("div",Kp,[R("div",{class:"font-icon text-green-400 cursor-pointer",onClick:Bt(T=>t(w.productName),["stop"])},"content_copy",8,Up),R("div",null,je(w.productName),1)])]),R("td",Vp,[R("strong",{class:Ct(w.delivery?"text-green-400":"text-red-400")},je(w.delivery?"Да":"Нет"),3)])])}),128))])])):(he(),De("div",Hp,"Отзывов не найдено"))],64)):We("",!0)])}),128)):(he(),De("div",qp,"Ничего не найдено"))}}),Jp=an({__name:"ParsingResult",setup(e){return(t,n)=>(he(),Ot(Yp))}});const zp=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Wp={},Gp=R("svg",{class:"spinner",viewBox:"0 0 50 50"},[R("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),Xp=[Gp];function Qp(e,t){return he(),De("div",null,Xp)}const bc=zp(Wp,[["render",Qp]]),Zp=["onKeydown"],ey={class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-5 m-auto w-[580px] max-w-full break-all"},ty=an({__name:"Modal",emits:["close"],setup(e,{emit:t}){const n=mn();function r(s){const o=s.target;!o.classList.contains("app-modal__body")&&!o.closest(".app-modal__body")&&i()}function i(){t("close")}return es(()=>{document.body.classList.remove("overflow-hidden")}),er(()=>{var s;(s=n==null?void 0:n.value)==null||s.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(s,o)=>(he(),De("div",{ref_key:"modalRef",ref:n,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-40 z-100 overflow-y-auto p-10 flex",onClick:r,onKeydown:Wf(i,["esc"])},[R("div",ey,[R("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:i},"close"),kl(s.$slots,"default")])],40,Zp))}});class ny{constructor(){un(this,"list",mn([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Et.list.value.find(i=>i.url===t),r=await Dt.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let i=JSON.parse(JSON.stringify(n)),s=r[0];s.parsingResults.unshift({parsingDate:i.parsingDate,rating:i.rating,reviewsCount:i.reviewsCount,deliveryInfo:i.deliveryInfo,subscribers:i.subscribers});const o=await Dt.savedProfiles.put(s)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){t===0&&n===0&&(this.list.value=await Dt.savedProfiles.toArray())}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await Dt.savedProfiles.put(n))ot.show("success",at.ProfileEdited);else throw new Error}catch{ot.show("success",at.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await Dt.savedProfiles.delete(t.id),ot.show("success",at.ProfileDeleted)}catch(n){console.log(n),ot.show("error",at.ProfileDeleteError)}finally{}}}const Mt=new ny,ry={key:0,class:"flex justify-center"},iy=["onClick"],sy={class:"min-w-0 flex-1"},oy={class:"flex items-center gap-4 mb-4"},ay={class:"text-xl font-medium"},ly={key:0,class:"text-[16px] text-sky-300 font-medium"},cy={class:"flex items-center gap-4"},uy={class:"text-[16px] text-orange-300 font-medium"},fy={class:"text-[16px] text-yellow-300 font-medium"},hy={class:"text-[16px] text-teal-300 font-medium"},dy={class:"text-[16px] text-gray-300 font-medium"},py={class:"flex-none flex items-center gap-4"},yy=["onClick"],my=R("i",{class:"font-icon text-3xl text-green-500"},"edit",-1),gy=[my],vy=["onClick"],by=R("i",{class:"font-icon text-3xl text-sky-500"},"content_copy",-1),_y=[by],wy=["onClick"],xy=R("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),Cy=[xy],ky={key:0,class:"text-[14px] px-4 p-5"},Dy={key:0,class:"w-full"},Sy=R("tr",null,[R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Дата парсинга"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Рейтинг"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Отзывы"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Подписки"),R("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Продаж с доставкой")],-1),Ty={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ey={class:"text-left px-4 py-2 border border-white border-opacity-50"},Oy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ay={class:"text-left px-4 py-2 border border-white border-opacity-50"},Py={class:"text-left px-4 py-2 border border-white border-opacity-50"},$y={key:1,class:"text-center text-xl font-medium"},Iy={key:2,class:"text-center text-xl font-bold"},Ny={key:0},Fy={class:"text-2xl font-bold mb-5 pr-10"},My={class:"mb-6"},Ly=R("div",{class:"mb-2 text-sm font-medium"},"Комментарий",-1),By=an({__name:"ProfileSavedList",setup(e){const t=mn(!1),n=mn(null),r=mn(!1);function i(d){d.url&&(Ho(d.url),ot.show("success",at.ProfileLinkCopied))}function s(d){d.opened=!d.opened}function o(){t.value=!1,n.value=null}function c(d){t.value=!0,n.value=d}async function l(d){Mt.apiProfileUpdate(d),t.value=!1,n.value=null}async function u(d){window.confirm(`Удаляем "${d.name}" ?`)&&d.id&&(await Mt.apiProfileDelete(d),setTimeout(()=>{Mt.apiGetList()},0))}return er(async()=>{setTimeout(()=>{Mt.apiGetList()},0)}),wl(()=>{Mt.list.value.forEach(d=>d.opened=!1)}),(d,x)=>(he(),De(nt,null,[r.value?(he(),De("div",ry,[rt(bc,{class:"w-10 h-10 flex-none"})])):we(Mt).list.value.length?(he(!0),De(nt,{key:1},Yn(we(Mt).list.value,w=>{var P,$,T,B,L,O;return he(),De("div",{key:w.id,class:Ct([w.opened?"ring ring-blue-400":"","rounded-lg bg-gray-600 shadow-xl mb-3"])},[R("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:E=>s(w)},[R("div",sy,[R("div",oy,[R("div",ay,je(w.name),1),w.comment?(he(),De("div",ly,je(w.comment),1)):We("",!0)]),R("div",cy,[R("div",uy,je((P=we(Mt).getLastParsingInfo(w))==null?void 0:P.rating),1),R("div",fy,je(($=we(Mt).getLastParsingInfo(w))==null?void 0:$.reviewsCount),1),R("div",hy,je((T=we(Mt).getLastParsingInfo(w))==null?void 0:T.subscribers),1),R("div",dy,je((B=we(Mt).getLastParsingInfo(w))!=null&&B.parsingDate?we(mr)((L=we(Mt).getLastParsingInfo(w))==null?void 0:L.parsingDate):""),1)])]),R("div",py,[R("div",{class:"flex-none ml-auto",onClick:Bt(E=>c(w),["stop"])},gy,8,yy),R("div",{class:"flex-none",onClick:Bt(E=>i(w),["stop"])},_y,8,vy),R("div",{class:"flex-none",onClick:Bt(E=>u(w),["stop"])},Cy,8,wy)])],8,iy),w.opened?(he(),De("div",ky,[(O=w.parsingResults)!=null&&O.length?(he(),De("table",Dy,[Sy,(he(!0),De(nt,null,Yn(w.parsingResults,E=>(he(),De("tr",null,[R("td",Ty,je(we(mr)(E.parsingDate)),1),R("td",Ey,je(E.rating),1),R("td",Oy,je(E.reviewsCount),1),R("td",Ay,je(E.subscribers),1),R("td",Py,je(E.deliveryInfo),1)]))),256))])):(he(),De("div",$y,"Парсинги не найдены"))])):We("",!0)],2)}),128)):(he(),De("div",Iy,"Ничего не найдено")),t.value?(he(),Ot(ty,{key:3,onClose:o},{default:At(()=>[n.value?(he(),De("div",Ny,[R("form",{onSubmit:x[1]||(x[1]=Bt(w=>l(n.value),["prevent"]))},[R("div",Fy,je(n.value.name),1),R("div",My,[Ly,en(R("input",{"onUpdate:modelValue":x[0]||(x[0]=w=>n.value.comment=w),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[tn,n.value.comment]])]),R("div",null,[rt(jt,{type:"submit",theme:"success"},{default:At(()=>[Lt("Сохранить")]),_:1})])],32)])):We("",!0)]),_:1})):We("",!0)],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Mn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(d){try{u(r.next(d))}catch(x){o(x)}}function l(d){try{u(r.throw(d))}catch(x){o(x)}}function u(d){d.done?s(d.value):i(d.value).then(c,l)}u((r=r.apply(e,t||[])).next())})}function Gt(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function jy(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function Ry(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function _c(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function wc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var os=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(W){return typeof W}:n=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(K)}function r(K,W,Y,X,D,a,f){try{var p=K[a](f),y=p.value}catch(g){Y(g);return}p.done?W(y):Promise.resolve(y).then(X,D)}function i(K){return function(){var W=this,Y=arguments;return new Promise(function(X,D){var a=K.apply(W,Y);function f(y){r(a,X,D,f,p,"next",y)}function p(y){r(a,X,D,f,p,"throw",y)}f(void 0)})}}function s(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}function o(K,W){for(var Y=0;Y<W.length;Y++){var X=W[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function c(K,W,Y){return W&&o(K.prototype,W),Y&&o(K,Y),K}function l(K,W,Y){return W in K?Object.defineProperty(K,W,{value:Y,enumerable:!0,configurable:!0,writable:!0}):K[W]=Y,K}function u(K,W){var Y=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);W&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),Y.push.apply(Y,X)}return Y}function d(K){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{};W%2?u(Object(Y),!0).forEach(function(X){l(K,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(Y)):u(Object(Y)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(Y,X))})}return K}function x(K,W){return $(K)||B(K,W)||O()}function w(K){return P(K)||T(K)||L()}function P(K){if(Array.isArray(K)){for(var W=0,Y=new Array(K.length);W<K.length;W++)Y[W]=K[W];return Y}}function $(K){if(Array.isArray(K))return K}function T(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function B(K,W){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var Y=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(Y.push(p.value),!(W&&Y.length===W));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return Y}}function L(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var E=function K(W){s(this,K),this.p=new Promise(W)};E.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(E.prototype[Symbol.toStringTag]="TypesonPromise"),E.prototype.then=function(K,W){var Y=this;return new E(function(X,D){Y.p.then(function(a){X(K?K(a):a)}).catch(function(a){return W?W(a):Promise.reject(a)}).then(X,D)})},E.prototype.catch=function(K){return this.then(null,K)},E.resolve=function(K){return new E(function(W){W(K)})},E.reject=function(K){return new E(function(W,Y){Y(K)})},["all","race"].forEach(function(K){E[K]=function(W){return new E(function(Y,X){Promise[K](W.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(Y,X)})}});var N={},V=N.toString,z={}.hasOwnProperty,H=Object.getPrototypeOf,re=z.toString;function k(K,W){return ae(K)&&typeof K.then=="function"&&(!W||typeof K.catch=="function")}function b(K){return V.call(K).slice(8,-1)}function U(K,W){if(!K||n(K)!=="object")return!1;var Y=H(K);if(!Y)return W===null;var X=z.call(Y,"constructor")&&Y.constructor;return typeof X!="function"?W===null:W===X||W!==null&&re.call(X)===re.call(W)||typeof W=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===W.__typeson__type__}function j(K){if(!K||b(K)!=="Object")return!1;var W=H(K);return W?U(K,Object):!0}function ve(K){if(!K||b(K)!=="Object")return!1;var W=H(K);return W?U(K,Object)||ve(W):!0}function ae(K){return K&&n(K)==="object"}function Ae(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function ge(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function ue(K,W){if(W==="")return K;var Y=W.indexOf(".");if(Y>-1){var X=K[ge(W.slice(0,Y))];return X===void 0?void 0:ue(X,W.slice(Y+1))}return K[ge(W)]}function oe(K,W,Y){if(W==="")return Y;var X=W.indexOf(".");if(X>-1){var D=K[ge(W.slice(0,X))];return oe(D,W.slice(X+1),Y)}return K[ge(W)]=Y,K}function Ve(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Ue=Object.keys,Ze=Array.isArray,Re={}.hasOwnProperty,$t=["type","replaced","iterateIn","iterateUnsetNumeric"];function ye(K,W){if(K.keypath==="")return-1;var Y=K.keypath.match(/\./g)||0,X=W.keypath.match(/\./g)||0;return Y&&(Y=Y.length),X&&(X=X.length),Y>X?-1:Y<X?1:K.keypath<W.keypath?-1:K.keypath>W.keypath}var ce=function(){function K(W){s(this,K),this.options=W,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c(K,[{key:"stringify",value:function(Y,X,D,a){a=d({},this.options,{},a,{stringification:!0});var f=this.encapsulate(Y,null,a);return Ze(f)?JSON.stringify(f[0],X,D):f.then(function(p){return JSON.stringify(p,X,D)})}},{key:"stringifySync",value:function(Y,X,D,a){return this.stringify(Y,X,D,d({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(Y,X,D,a){return this.stringify(Y,X,D,d({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(Y,X,D){return D=d({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(Y,X),D)}},{key:"parseSync",value:function(Y,X,D){return this.parse(Y,X,d({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(Y,X,D){return this.parse(Y,X,d({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(Y,X,D)}},{key:"rootTypeName",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(Y,X,D)}},{key:"encapsulate",value:function(Y,X,D){D=d({sync:!0},this.options,{},D);var a=D,f=a.sync,p=this,y={},g=[],_=[],C=[],A="cyclic"in D?D.cyclic:!0,F=D,M=F.encapsulateObserver,J=fe("",Y,A,X||{},C);function q(te){var m=Object.values(y);if(D.iterateNone)return m.length?m[0]:K.getJSONType(te);if(m.length){if(D.returnTypeNames)return w(new Set(m));!te||!j(te)||Re.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else ae(te)&&Re.call(te,"$types")&&(te={$:te,$types:!0});return D.returnTypeNames?!1:te}function G(te,m){return Z.apply(this,arguments)}function Z(){return Z=i(regeneratorRuntime.mark(function te(m,h){var v;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(h.map(function(Q){return Q[1].p}));case 2:return v=I.sent,I.next=5,Promise.all(v.map(function(){var Q=i(regeneratorRuntime.mark(function ee(pe){var se,Ce,Pe,$e,He,Be,Me,Je,ze,Ee,ht,de,ne,xe;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(se=[],Ce=h.splice(0,1),Pe=x(Ce,1),$e=Pe[0],He=x($e,7),Be=He[0],Me=He[2],Je=He[3],ze=He[4],Ee=He[5],ht=He[6],de=fe(Be,pe,Me,Je,se,!0,ht),ne=U(de,E),!(Be&&ne)){ke.next=11;break}return ke.next=8,de.p;case 8:return xe=ke.sent,ze[Ee]=xe,ke.abrupt("return",G(m,se));case 11:return Be?ze[Ee]=de:ne?m=de.p:m=de,ke.abrupt("return",G(m,se));case 13:case"end":return ke.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return I.abrupt("return",m);case 6:case"end":return I.stop()}},te)})),Z.apply(this,arguments)}function ie(te,m,h){Object.assign(te,m);var v=$t.map(function(S){var I=te[S];return delete te[S],I});h(),$t.forEach(function(S,I){te[S]=v[I]})}function fe(te,m,h,v,S,I,Q){var ee,pe={},se=n(m),Ce=M?function(ne){var xe=Q||v.type||K.getJSONType(m);M(Object.assign(ne||pe,{keypath:te,value:m,cyclic:h,stateObj:v,promisesData:S,resolvingTypesonPromise:I,awaitingTypesonPromise:U(m,E)},{type:xe}))}:null;if(["string","boolean","number","undefined"].includes(se))return m===void 0||se==="number"&&(isNaN(m)||m===-1/0||m===1/0)?(v.replaced?ee=m:ee=me(te,m,v,S,!1,I,Ce),ee!==m&&(pe={replaced:ee})):ee=m,Ce&&Ce(),ee;if(m===null)return Ce&&Ce(),m;if(h&&!v.iterateIn&&!v.iterateUnsetNumeric&&m&&n(m)==="object"){var Pe=g.indexOf(m);if(Pe<0)h===!0&&(g.push(m),_.push(te));else return y[te]="#",Ce&&Ce({cyclicKeypath:_[Pe]}),"#"+_[Pe]}var $e=j(m),He=Ze(m),Be=($e||He)&&(!p.plainObjectReplacers.length||v.replaced)||v.iterateIn?m:me(te,m,v,S,$e||He,null,Ce),Me;if(Be!==m?(ee=Be,pe={replaced:Be}):te===""&&U(m,E)?(S.push([te,m,h,v,void 0,void 0,v.type]),ee=m):He&&v.iterateIn!=="object"||v.iterateIn==="array"?(Me=new Array(m.length),pe={clone:Me}):!["function","symbol"].includes(n(m))&&!("toJSON"in m)&&!U(m,E)&&!U(m,Promise)&&!U(m,ArrayBuffer)||$e||v.iterateIn==="object"?(Me={},v.addLength&&(Me.length=m.length),pe={clone:Me}):ee=m,Ce&&Ce(),D.iterateNone)return Me||ee;if(!Me)return ee;if(v.iterateIn){var Je=function(xe){var be={ownKeys:Re.call(m,xe)};ie(v,be,function(){var ke=te+(te?".":"")+Ae(xe),Ie=fe(ke,m[xe],!!h,v,S,I);U(Ie,E)?S.push([ke,Ie,!!h,v,Me,xe,v.type]):Ie!==void 0&&(Me[xe]=Ie)})};for(var ze in m)Je(ze);Ce&&Ce({endIterateIn:!0,end:!0})}else Ue(m).forEach(function(ne){var xe=te+(te?".":"")+Ae(ne),be={ownKeys:!0};ie(v,be,function(){var ke=fe(xe,m[ne],!!h,v,S,I);U(ke,E)?S.push([xe,ke,!!h,v,Me,ne,v.type]):ke!==void 0&&(Me[ne]=ke)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(v.iterateUnsetNumeric){for(var Ee=m.length,ht=function(xe){if(!(xe in m)){var be=te+(te?".":"")+xe,ke={ownKeys:!1};ie(v,ke,function(){var Ie=fe(be,void 0,!!h,v,S,I);U(Ie,E)?S.push([be,Ie,!!h,v,Me,xe,v.type]):Ie!==void 0&&(Me[xe]=Ie)})}},de=0;de<Ee;de++)ht(de);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return Me}function me(te,m,h,v,S,I,Q){for(var ee=S?p.plainObjectReplacers:p.nonplainObjectReplacers,pe=ee.length;pe--;){var se=ee[pe];if(se.test(m,h)){var Ce=se.type;if(p.revivers[Ce]){var Pe=y[te];y[te]=Pe?[Ce].concat(Pe):Ce}if(Object.assign(h,{type:Ce,replaced:!0}),(f||!se.replaceAsync)&&!se.replace)return Q&&Q({typeDetected:!0}),fe(te,m,A&&"readonly",h,v,I,Ce);Q&&Q({replacing:!0});var $e=f||!se.replaceAsync?"replace":"replaceAsync";return fe(te,se[$e](m,h),A&&"readonly",h,v,I,Ce)}}return m}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(J,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(J)]:f?q(J):Promise.resolve(q(J))}},{key:"encapsulateSync",value:function(Y,X,D){return this.encapsulate(Y,X,d({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(Y,X,D){return this.encapsulate(Y,X,d({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(Y,X){var D=Y&&Y.$types;if(!D)return Y;if(D===!0)return Y.$;X=d({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},g=!0;D.$&&j(D.$)&&(Y=Y.$,D=D.$,g=!1);var _=this;function C(Z,ie){var fe=_.revivers[Z]||[],me=x(fe,1),te=me[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?ie:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](ie,y)}function A(){var Z=[];if(Object.entries(D).forEach(function(ie){var fe=x(ie,2),me=fe[0],te=fe[1];te!=="#"&&[].concat(te).forEach(function(m){var h=_.revivers[m]||[null,{}],v=x(h,2),S=v[1].plain;S&&(Z.push({keypath:me,type:m}),delete D[me])})}),!!Z.length)return Z.sort(ye).reduce(function ie(fe,me){var te=me.keypath,m=me.type;if(k(fe))return fe.then(function(S){return ie(S,{keypath:te,type:m})});var h=ue(Y,te);if(h=C(m,h),U(h,E))return h.then(function(S){var I=oe(Y,te,S);I===S&&(Y=I)});var v=oe(Y,te,h);v===h&&(Y=v)},void 0)}var F=[];function M(Z,ie,fe,me,te){if(!(g&&Z==="$types")){var m=D[Z],h=Ze(ie);if(h||j(ie)){var v=h?new Array(ie.length):{};for(Ue(ie).forEach(function(Pe){var $e=M(Z+(Z?".":"")+Ae(Pe),ie[Pe],fe||v,v,Pe),He=function(Me){return U(Me,Ne)?v[Pe]=void 0:Me!==void 0&&(v[Pe]=Me),Me};U($e,E)?F.push($e.then(function(Be){return He(Be)})):He($e)}),ie=v;p.length;){var S=x(p[0],4),I=S[0],Q=S[1],ee=S[2],pe=S[3],se=ue(I,Q);if(se!==void 0)ee[pe]=se;else break;p.splice(0,1)}}if(!m)return ie;if(m==="#"){var Ce=ue(fe,ie.slice(1));return Ce===void 0&&p.push([fe,ie.slice(1),me,te]),Ce}return[].concat(m).reduce(function Pe($e,He){return U($e,E)?$e.then(function(Be){return Pe(Be,He)}):C(He,$e)},ie)}}function J(Z){return U(Z,Ne)?void 0:Z}var q=A(),G;return U(q,E)?G=q.then(function(){return Y}):(G=M("",Y,null),F.length&&(G=E.resolve(G).then(function(Z){return E.all([Z].concat(F))}).then(function(Z){var ie=x(Z,1),fe=ie[0];return fe}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():U(G,E)?G.p.then(J):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?J(G):Promise.resolve(J(G))}},{key:"reviveSync",value:function(Y,X){return this.revive(Y,d({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Y,X){return this.revive(Y,d({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Y,X){return X=X||{},[].concat(Y).forEach(function D(a){var f=this;if(Ze(a))return a.map(function(p){return D.call(f,p)});a&&Ue(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],g=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,_=g.filter(function(fe){return fe.type===p});if(_.length&&(g.splice(g.indexOf(_[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var C=y;y={test:function(me){return me&&me.constructor===C},replace:function(me){return d({},me)},revive:function(me){return Object.assign(Object.create(C.prototype),me)}}}else if(Ze(y)){var A=y,F=x(A,3),M=F[0],J=F[1],q=F[2];y={test:M,replace:J,revive:q}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var ie={};y.revive&&(ie.revive=y.revive.bind(y)),y.reviveAsync&&(ie.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[ie,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Ne=function K(){s(this,K)};return Ne.__typeson__type__="TypesonUndefined",ce.Undefined=Ne,ce.Promise=E,ce.isThenable=k,ce.toStringTag=b,ce.hasConstructorOf=U,ce.isObject=ae,ce.isPlainObject=j,ce.isUserObject=ve,ce.escapeKeyPathComponent=Ae,ce.unescapeKeyPathComponent=ge,ce.getByKeyPath=ue,ce.getJSONType=Ve,ce.JSON_TYPES=["null","boolean","number","string","array","object"],ce})}),Ky=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function r(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function i(m,h){for(var v=0;v<h.length;v++){var S=h[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function s(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function o(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);h&&(S=S.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,S)}return v}function c(m){return function(v){if(Array.isArray(v))return l(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||function(v,S){if(v){if(typeof v=="string")return l(v,S);var I=Object.prototype.toString.call(v).slice(8,-1);if(I==="Object"&&v.constructor&&(I=v.constructor.name),I==="Map"||I==="Set")return Array.from(v);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return l(v,S)}}(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,S=new Array(h);v<h;v++)S[v]=m[v];return S}function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}function d(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function x(m,h){for(var v=0;v<h.length;v++){var S=h[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function w(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function P(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);h&&(S=S.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,S)}return v}function $(m){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?P(Object(v),!0).forEach(function(S){w(m,S,v[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(v)):P(Object(v)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(v,S))})}return m}function T(m,h){return function(S){if(Array.isArray(S))return S}(m)||function(S,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(S)))){var Q=[],ee=!0,pe=!1,se=void 0;try{for(var Ce,Pe=S[Symbol.iterator]();!(ee=(Ce=Pe.next()).done)&&(Q.push(Ce.value),!I||Q.length!==I);ee=!0);}catch($e){pe=!0,se=$e}finally{try{ee||Pe.return==null||Pe.return()}finally{if(pe)throw se}}return Q}}(m,h)||L(m,h)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(m){return function(v){if(Array.isArray(v))return O(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||L(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(m,h){if(m){if(typeof m=="string")return O(m,h);var v=Object.prototype.toString.call(m).slice(8,-1);return v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set"?Array.from(m):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?O(m,h):void 0}}function O(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,S=new Array(h);v<h;v++)S[v]=m[v];return S}var E=function m(h){d(this,m),this.p=new Promise(h)};E.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(E.prototype[Symbol.toStringTag]="TypesonPromise"),E.prototype.then=function(m,h){var v=this;return new E(function(S,I){v.p.then(function(Q){S(m?m(Q):Q)}).catch(function(Q){return h?h(Q):Promise.reject(Q)}).then(S,I)})},E.prototype.catch=function(m){return this.then(null,m)},E.resolve=function(m){return new E(function(h){h(m)})},E.reject=function(m){return new E(function(h,v){v(m)})},["all","race"].forEach(function(m){E[m]=function(h){return new E(function(v,S){Promise[m](h.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(v,S)})}});var N={}.toString,V={}.hasOwnProperty,z=Object.getPrototypeOf,H=V.toString;function re(m,h){return j(m)&&typeof m.then=="function"&&(!h||typeof m.catch=="function")}function k(m){return N.call(m).slice(8,-1)}function b(m,h){if(!m||u(m)!=="object")return!1;var v=z(m);if(!v)return h===null;var S=V.call(v,"constructor")&&v.constructor;return typeof S!="function"?h===null:h===S||h!==null&&H.call(S)===H.call(h)||typeof h=="function"&&typeof S.__typeson__type__=="string"&&S.__typeson__type__===h.__typeson__type__}function U(m){return!(!m||k(m)!=="Object")&&(!z(m)||b(m,Object))}function j(m){return m&&u(m)==="object"}function ve(m){return m.replace(/~/g,"~0").replace(/\./g,"~1")}function ae(m){return m.replace(/~1/g,".").replace(/~0/g,"~")}function Ae(m,h){if(h==="")return m;var v=h.indexOf(".");if(v>-1){var S=m[ae(h.slice(0,v))];return S===void 0?void 0:Ae(S,h.slice(v+1))}return m[ae(h)]}function ge(m,h,v){if(h==="")return v;var S=h.indexOf(".");return S>-1?ge(m[ae(h.slice(0,S))],h.slice(S+1),v):(m[ae(h)]=v,m)}function ue(m,h,v){return v?h?h(m):m:(m&&m.then||(m=Promise.resolve(m)),h?m.then(h):m)}var oe=Object.keys,Ve=Array.isArray,Ue={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function Re(m){return function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];try{return Promise.resolve(m.apply(this,h))}catch(S){return Promise.reject(S)}}}function $t(m,h){if(m.keypath==="")return-1;var v=m.keypath.match(/\./g)||0,S=h.keypath.match(/\./g)||0;return v&&(v=v.length),S&&(S=S.length),v>S?-1:v<S?1:m.keypath<h.keypath?-1:m.keypath>h.keypath}var ye=function(){function m(h){d(this,m),this.options=h,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(v,S,I){return S&&x(v.prototype,S),I&&x(v,I),v}(m,[{key:"stringify",value:function(v,S,I,Q){Q=$($($({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(v,null,Q);return Ve(ee)?JSON.stringify(ee[0],S,I):ee.then(function(pe){return JSON.stringify(pe,S,I)})}},{key:"stringifySync",value:function(v,S,I,Q){return this.stringify(v,S,I,$($({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(v,S,I,Q){return this.stringify(v,S,I,$($({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(v,S,I){return I=$($($({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(v,S),I)}},{key:"parseSync",value:function(v,S,I){return this.parse(v,S,$($({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(v,S,I){return this.parse(v,S,$($({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(v,S){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(v,S,I)}},{key:"rootTypeName",value:function(v,S){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(v,S,I)}},{key:"encapsulate",value:function(v,S,I){var Q=Re(function(de,ne){return ue(Promise.all(ne.map(function(xe){return xe[1].p})),function(xe){return ue(Promise.all(xe.map(Re(function(be){var ke=!1,Ie=[],It=T(ne.splice(0,1),1),it=T(It[0],7),Tt=it[0],Kt=it[2],qe=it[3],Ut=it[4],Ge=it[5],Nt=it[6],_t=Ee(Tt,be,Kt,qe,Ie,!0,Nt),qt=b(_t,E);return function(as,oi){var nr=as();return nr&&nr.then?nr.then(oi):oi(nr)}(function(){if(Tt&&qt)return ue(_t.p,function(Yt){return Ut[Ge]=Yt,ke=!0,Q(de,Ie)})},function(Yt){return ke?Yt:(Tt?Ut[Ge]=_t:de=qt?_t.p:_t,Q(de,Ie))})}))),function(){return de})})}),ee=(I=$($({sync:!0},this.options),I)).sync,pe=this,se={},Ce=[],Pe=[],$e=[],He=!("cyclic"in I)||I.cyclic,Be=I.encapsulateObserver,Me=Ee("",v,He,S||{},$e);function Je(de){var ne=Object.values(se);if(I.iterateNone)return ne.length?ne[0]:m.getJSONType(de);if(ne.length){if(I.returnTypeNames)return B(new Set(ne));de&&U(de)&&!Ue.call(de,"$types")?de.$types=se:de={$:de,$types:{$:se}}}else j(de)&&Ue.call(de,"$types")&&(de={$:de,$types:!0});return!I.returnTypeNames&&de}function ze(de,ne,xe){Object.assign(de,ne);var be=Ze.map(function(ke){var Ie=de[ke];return delete de[ke],Ie});xe(),Ze.forEach(function(ke,Ie){de[ke]=be[Ie]})}function Ee(de,ne,xe,be,ke,Ie,It){var it,Tt={},Kt=u(ne),qe=Be?function(xn){var wt=It||be.type||m.getJSONType(ne);Be(Object.assign(xn||Tt,{keypath:de,value:ne,cyclic:xe,stateObj:be,promisesData:ke,resolvingTypesonPromise:Ie,awaitingTypesonPromise:b(ne,E)},{type:wt}))}:null;if(["string","boolean","number","undefined"].includes(Kt))return ne===void 0||Number.isNaN(ne)||ne===Number.NEGATIVE_INFINITY||ne===Number.POSITIVE_INFINITY?(it=be.replaced?ne:ht(de,ne,be,ke,!1,Ie,qe))!==ne&&(Tt={replaced:it}):it=ne,qe&&qe(),it;if(ne===null)return qe&&qe(),ne;if(xe&&!be.iterateIn&&!be.iterateUnsetNumeric&&ne&&u(ne)==="object"){var Ut=Ce.indexOf(ne);if(!(Ut<0))return se[de]="#",qe&&qe({cyclicKeypath:Pe[Ut]}),"#"+Pe[Ut];xe===!0&&(Ce.push(ne),Pe.push(de))}var Ge,Nt=U(ne),_t=Ve(ne),qt=(Nt||_t)&&(!pe.plainObjectReplacers.length||be.replaced)||be.iterateIn?ne:ht(de,ne,be,ke,Nt||_t,null,qe);if(qt!==ne?(it=qt,Tt={replaced:qt}):de===""&&b(ne,E)?(ke.push([de,ne,xe,be,void 0,void 0,be.type]),it=ne):_t&&be.iterateIn!=="object"||be.iterateIn==="array"?(Ge=new Array(ne.length),Tt={clone:Ge}):(["function","symbol"].includes(u(ne))||"toJSON"in ne||b(ne,E)||b(ne,Promise)||b(ne,ArrayBuffer))&&!Nt&&be.iterateIn!=="object"?it=ne:(Ge={},be.addLength&&(Ge.length=ne.length),Tt={clone:Ge}),qe&&qe(),I.iterateNone)return Ge||it;if(!Ge)return it;if(be.iterateIn){var Yt=function(wt){var cn={ownKeys:Ue.call(ne,wt)};ze(be,cn,function(){var Ln=de+(de?".":"")+ve(wt),ai=Ee(Ln,ne[wt],!!xe,be,ke,Ie);b(ai,E)?ke.push([Ln,ai,!!xe,be,Ge,wt,be.type]):ai!==void 0&&(Ge[wt]=ai)})};for(var as in ne)Yt(as);qe&&qe({endIterateIn:!0,end:!0})}else oe(ne).forEach(function(xn){var wt=de+(de?".":"")+ve(xn);ze(be,{ownKeys:!0},function(){var cn=Ee(wt,ne[xn],!!xe,be,ke,Ie);b(cn,E)?ke.push([wt,cn,!!xe,be,Ge,xn,be.type]):cn!==void 0&&(Ge[xn]=cn)})}),qe&&qe({endIterateOwn:!0,end:!0});if(be.iterateUnsetNumeric){for(var oi=ne.length,nr=function(wt){if(!(wt in ne)){var cn=de+(de?".":"")+wt;ze(be,{ownKeys:!1},function(){var Ln=Ee(cn,void 0,!!xe,be,ke,Ie);b(Ln,E)?ke.push([cn,Ln,!!xe,be,Ge,wt,be.type]):Ln!==void 0&&(Ge[wt]=Ln)})}},ls=0;ls<oi;ls++)nr(ls);qe&&qe({endIterateUnsetNumeric:!0,end:!0})}return Ge}function ht(de,ne,xe,be,ke,Ie,It){for(var it=ke?pe.plainObjectReplacers:pe.nonplainObjectReplacers,Tt=it.length;Tt--;){var Kt=it[Tt];if(Kt.test(ne,xe)){var qe=Kt.type;if(pe.revivers[qe]){var Ut=se[de];se[de]=Ut?[qe].concat(Ut):qe}return Object.assign(xe,{type:qe,replaced:!0}),!ee&&Kt.replaceAsync||Kt.replace?(It&&It({replacing:!0}),Ee(de,Kt[ee||!Kt.replaceAsync?"replace":"replaceAsync"](ne,xe),He&&"readonly",xe,be,Ie,qe)):(It&&It({typeDetected:!0}),Ee(de,ne,He&&"readonly",xe,be,Ie,qe))}}return ne}return $e.length?ee&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(Me,$e)).then(Je):!ee&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&ee?[Je(Me)]:ee?Je(Me):Promise.resolve(Je(Me))}},{key:"encapsulateSync",value:function(v,S,I){return this.encapsulate(v,S,$($({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(v,S,I){return this.encapsulate(v,S,$($({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(v,S){var I=v&&v.$types;if(!I)return v;if(I===!0)return v.$;var Q=(S=$($({sync:!0},this.options),S)).sync,ee=[],pe={},se=!0;I.$&&U(I.$)&&(v=v.$,I=I.$,se=!1);var Ce=this;function Pe(Je,ze){var Ee=T(Ce.revivers[Je]||[],1)[0];if(!Ee)throw new Error("Unregistered type: "+Je);return Q&&!("revive"in Ee)?ze:Ee[Q&&Ee.revive?"revive":!Q&&Ee.reviveAsync?"reviveAsync":"revive"](ze,pe)}var $e=[];function He(Je){return b(Je,ce)?void 0:Je}var Be,Me=function(){var ze=[];if(Object.entries(I).forEach(function(Ee){var ht=T(Ee,2),de=ht[0],ne=ht[1];ne!=="#"&&[].concat(ne).forEach(function(xe){T(Ce.revivers[xe]||[null,{}],2)[1].plain&&(ze.push({keypath:de,type:xe}),delete I[de])})}),ze.length)return ze.sort($t).reduce(function Ee(ht,de){var ne=de.keypath,xe=de.type;if(re(ht))return ht.then(function(Ie){return Ee(Ie,{keypath:ne,type:xe})});var be=Ae(v,ne);if(b(be=Pe(xe,be),E))return be.then(function(Ie){var It=ge(v,ne,Ie);It===Ie&&(v=It)});var ke=ge(v,ne,be);ke===be&&(v=ke)},void 0)}();return b(Me,E)?Be=Me.then(function(){return v}):(Be=function Je(ze,Ee,ht,de,ne){if(!se||ze!=="$types"){var xe=I[ze],be=Ve(Ee);if(be||U(Ee)){var ke=be?new Array(Ee.length):{};for(oe(Ee).forEach(function(Ge){var Nt=Je(ze+(ze?".":"")+ve(Ge),Ee[Ge],ht||ke,ke,Ge),_t=function(Yt){return b(Yt,ce)?ke[Ge]=void 0:Yt!==void 0&&(ke[Ge]=Yt),Yt};b(Nt,E)?$e.push(Nt.then(function(qt){return _t(qt)})):_t(Nt)}),Ee=ke;ee.length;){var Ie=T(ee[0],4),It=Ie[0],it=Ie[1],Tt=Ie[2],Kt=Ie[3],qe=Ae(It,it);if(qe===void 0)break;Tt[Kt]=qe,ee.splice(0,1)}}if(!xe)return Ee;if(xe==="#"){var Ut=Ae(ht,Ee.slice(1));return Ut===void 0&&ee.push([ht,Ee.slice(1),de,ne]),Ut}return[].concat(xe).reduce(function Ge(Nt,_t){return b(Nt,E)?Nt.then(function(qt){return Ge(qt,_t)}):Pe(_t,Nt)},Ee)}}("",v,null),$e.length&&(Be=E.resolve(Be).then(function(Je){return E.all([Je].concat($e))}).then(function(Je){return T(Je,1)[0]}))),re(Be)?Q&&S.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():b(Be,E)?Be.p.then(He):Be:!Q&&S.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?He(Be):Promise.resolve(He(Be))}},{key:"reviveSync",value:function(v,S){return this.revive(v,$($({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"reviveAsync",value:function(v,S){return this.revive(v,$($({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"register",value:function(v,S){return S=S||{},[].concat(v).forEach(function I(Q){var ee=this;if(Ve(Q))return Q.map(function(pe){return I.call(ee,pe)});Q&&oe(Q).forEach(function(pe){if(pe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(m.JSON_TYPES.includes(pe))throw new TypeError("Plain JSON object types are reserved as type names");var se=Q[pe],Ce=se&&se.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Pe=Ce.filter(function(ze){return ze.type===pe});if(Pe.length&&(Ce.splice(Ce.indexOf(Pe[0]),1),delete this.revivers[pe],delete this.types[pe]),typeof se=="function"){var $e=se;se={test:function(Ee){return Ee&&Ee.constructor===$e},replace:function(Ee){return $({},Ee)},revive:function(Ee){return Object.assign(Object.create($e.prototype),Ee)}}}else if(Ve(se)){var He=T(se,3);se={test:He[0],replace:He[1],revive:He[2]}}if(se&&se.test){var Be={type:pe,test:se.test.bind(se)};se.replace&&(Be.replace=se.replace.bind(se)),se.replaceAsync&&(Be.replaceAsync=se.replaceAsync.bind(se));var Me=typeof S.fallback=="number"?S.fallback:S.fallback?0:Number.POSITIVE_INFINITY;if(se.testPlainObjects?this.plainObjectReplacers.splice(Me,0,Be):this.nonplainObjectReplacers.splice(Me,0,Be),se.revive||se.reviveAsync){var Je={};se.revive&&(Je.revive=se.revive.bind(se)),se.reviveAsync&&(Je.reviveAsync=se.reviveAsync.bind(se)),this.revivers[pe]=[Je,{plain:se.testPlainObjects}]}this.types[pe]=se}},this)},this),this}}]),m}(),ce=function m(){d(this,m)};ce.__typeson__type__="TypesonUndefined",ye.Undefined=ce,ye.Promise=E,ye.isThenable=re,ye.toStringTag=k,ye.hasConstructorOf=b,ye.isObject=j,ye.isPlainObject=U,ye.isUserObject=function m(h){if(!h||k(h)!=="Object")return!1;var v=z(h);return!v||b(h,Object)||m(v)},ye.escapeKeyPathComponent=ve,ye.unescapeKeyPathComponent=ae,ye.getByKeyPath=Ae,ye.getJSONType=function(h){return h===null?"null":Array.isArray(h)?"array":u(h)},ye.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ne={userObject:{test:function(h,v){return ye.isUserObject(h)},replace:function(h){return function(S){for(var I=1;I<arguments.length;I++){var Q=arguments[I]!=null?arguments[I]:{};I%2?o(Object(Q),!0).forEach(function(ee){s(S,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(S,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return S}({},h)},revive:function(h){return h}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(h,v){return!!Array.isArray(h)&&(Object.keys(h).some(function(S){return String(Number.parseInt(S))!==S})&&(v.iterateIn="object",v.addLength=!0),!0)},replace:function(h,v){return v.iterateUnsetNumeric=!0,h},revive:function(h){if(Array.isArray(h))return h;var v=[];return Object.keys(h).forEach(function(S){var I=h[S];v[S]=I}),v}}},{sparseUndefined:{test:function(h,v){return h===void 0&&v.ownKeys===!1},replace:function(h){return 0},revive:function(h){}}}],W={undef:{test:function(h,v){return h===void 0&&(v.ownKeys||!("ownKeys"in v))},replace:function(h){return 0},revive:function(h){return new ye.Undefined}}},Y={StringObject:{test:function(h){return ye.toStringTag(h)==="String"&&n(h)==="object"},replace:function(h){return String(h)},revive:function(h){return new String(h)}},BooleanObject:{test:function(h){return ye.toStringTag(h)==="Boolean"&&n(h)==="object"},replace:function(h){return!!h},revive:function(h){return new Boolean(h)}},NumberObject:{test:function(h){return ye.toStringTag(h)==="Number"&&n(h)==="object"},replace:function(h){return Number(h)},revive:function(h){return new Number(h)}}},X=[{nan:{test:function(h){return Number.isNaN(h)},replace:function(h){return"NaN"},revive:function(h){return Number.NaN}}},{infinity:{test:function(h){return h===Number.POSITIVE_INFINITY},replace:function(h){return"Infinity"},revive:function(h){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(h){return h===Number.NEGATIVE_INFINITY},replace:function(h){return"-Infinity"},revive:function(h){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(h){return ye.toStringTag(h)==="Date"},replace:function(h){var v=h.getTime();return Number.isNaN(v)?"NaN":v},revive:function(h){return h==="NaN"?new Date(Number.NaN):new Date(h)}}},a={regexp:{test:function(h){return ye.toStringTag(h)==="RegExp"},replace:function(h){return{source:h.source,flags:(h.global?"g":"")+(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.sticky?"y":"")+(h.unicode?"u":"")}},revive:function(h){var v=h.source,S=h.flags;return new RegExp(v,S)}}},f={map:{test:function(h){return ye.toStringTag(h)==="Map"},replace:function(h){return c(h.entries())},revive:function(h){return new Map(h)}}},p={set:{test:function(h){return ye.toStringTag(h)==="Set"},replace:function(h){return c(h.values())},revive:function(h){return new Set(h)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),_=0;_<y.length;_++)g[y.charCodeAt(_)]=_;var C=function(h,v,S){S==null&&(S=h.byteLength);for(var I=new Uint8Array(h,v||0,S),Q=I.length,ee="",pe=0;pe<Q;pe+=3)ee+=y[I[pe]>>2],ee+=y[(3&I[pe])<<4|I[pe+1]>>4],ee+=y[(15&I[pe+1])<<2|I[pe+2]>>6],ee+=y[63&I[pe+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},A=function(h){var v,S,I,Q,ee=h.length,pe=.75*h.length,se=0;h[h.length-1]==="="&&(pe--,h[h.length-2]==="="&&pe--);for(var Ce=new ArrayBuffer(pe),Pe=new Uint8Array(Ce),$e=0;$e<ee;$e+=4)v=g[h.charCodeAt($e)],S=g[h.charCodeAt($e+1)],I=g[h.charCodeAt($e+2)],Q=g[h.charCodeAt($e+3)],Pe[se++]=v<<2|S>>4,Pe[se++]=(15&S)<<4|I>>2,Pe[se++]=(3&I)<<6|63&Q;return Ce},F={arraybuffer:{test:function(h){return ye.toStringTag(h)==="ArrayBuffer"},replace:function(h,v){v.buffers||(v.buffers=[]);var S=v.buffers.indexOf(h);return S>-1?{index:S}:(v.buffers.push(h),C(h))},revive:function(h,v){if(v.buffers||(v.buffers=[]),n(h)==="object")return v.buffers[h.index];var S=A(h);return v.buffers.push(S),S}}},M=typeof self>"u"?co:self,J={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(m){var h=m,v=M[h];v&&(J[m.toLowerCase()]={test:function(I){return ye.toStringTag(I)===h},replace:function(I,Q){var ee=I.buffer,pe=I.byteOffset,se=I.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:pe,length:se}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:pe,length:se})},revive:function(I,Q){Q.buffers||(Q.buffers=[]);var ee,pe=I.byteOffset,se=I.length,Ce=I.encoded,Pe=I.index;return"index"in I?ee=Q.buffers[Pe]:(ee=A(Ce),Q.buffers.push(ee)),new v(ee,pe,se)}})});var q={dataview:{test:function(h){return ye.toStringTag(h)==="DataView"},replace:function(h,v){var S=h.buffer,I=h.byteOffset,Q=h.byteLength;v.buffers||(v.buffers=[]);var ee=v.buffers.indexOf(S);return ee>-1?{index:ee,byteOffset:I,byteLength:Q}:(v.buffers.push(S),{encoded:C(S),byteOffset:I,byteLength:Q})},revive:function(h,v){v.buffers||(v.buffers=[]);var S,I=h.byteOffset,Q=h.byteLength,ee=h.encoded,pe=h.index;return"index"in h?S=v.buffers[pe]:(S=A(ee),v.buffers.push(S)),new DataView(S,I,Q)}}},G={IntlCollator:{test:function(h){return ye.hasConstructorOf(h,Intl.Collator)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.Collator(h.locale,h)}},IntlDateTimeFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.DateTimeFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.DateTimeFormat(h.locale,h)}},IntlNumberFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.NumberFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.NumberFormat(h.locale,h)}}};function Z(m){for(var h=new Uint8Array(m.length),v=0;v<m.length;v++)h[v]=m.charCodeAt(v);return h.buffer}var ie={file:{test:function(h){return ye.toStringTag(h)==="File"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad File access: "+v.status);return{type:h.type,stringContents:v.responseText,name:h.name,lastModified:h.lastModified}},revive:function(h){var v=h.name,S=h.type,I=h.stringContents,Q=h.lastModified;return new File([Z(I)],v,{type:S,lastModified:Q})},replaceAsync:function(h){return new ye.Promise(function(v,S){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result,name:h.name,lastModified:h.lastModified})}),I.addEventListener("error",function(){S(I.error)}),I.readAsBinaryString(h)})}}},fe={bigint:{test:function(h){return typeof h=="bigint"},replace:function(h){return String(h)},revive:function(h){return BigInt(h)}}},me={bigintObject:{test:function(h){return n(h)==="object"&&ye.hasConstructorOf(h,BigInt)},replace:function(h){return String(h)},revive:function(h){return new Object(BigInt(h))}}},te={cryptokey:{test:function(h){return ye.toStringTag(h)==="CryptoKey"&&h.extractable},replaceAsync:function(h){return new ye.Promise(function(v,S){crypto.subtle.exportKey("jwk",h).catch(function(I){S(I)}).then(function(I){v({jwk:I,algorithm:h.algorithm,usages:h.usages})})})},revive:function(h){var v=h.jwk,S=h.algorithm,I=h.usages;return crypto.subtle.importKey("jwk",v,S,!0,I)}}};return[Ne,W,K,Y,X,D,a,{imagedata:{test:function(h){return ye.toStringTag(h)==="ImageData"},replace:function(h){return{array:c(h.data),width:h.width,height:h.height}},revive:function(h){return new ImageData(new Uint8ClampedArray(h.array),h.width,h.height)}}},{imagebitmap:{test:function(h){return ye.toStringTag(h)==="ImageBitmap"||h&&h.dataset&&h.dataset.toStringTag==="ImageBitmap"},replace:function(h){var v=document.createElement("canvas");return v.getContext("2d").drawImage(h,0,0),v.toDataURL()},revive:function(h){var v=document.createElement("canvas"),S=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){S.drawImage(I,0,0)}),I.src=h,v},reviveAsync:function(h){var v=document.createElement("canvas"),S=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){S.drawImage(I,0,0)}),I.src=h,createImageBitmap(v)}}},ie,{file:ie.file,filelist:{test:function(h){return ye.toStringTag(h)==="FileList"},replace:function(h){for(var v=[],S=0;S<h.length;S++)v[S]=h.item(S);return v},revive:function(h){return new(function(){function v(){r(this,v),this._files=arguments[0],this.length=this._files.length}return function(I,Q,ee){return Q&&i(I.prototype,Q),ee&&i(I,ee),I}(v,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),v}())(h)}}},{blob:{test:function(h){return ye.toStringTag(h)==="Blob"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad Blob access: "+v.status);return{type:h.type,stringContents:v.responseText}},revive:function(h){var v=h.type,S=h.stringContents;return new Blob([Z(S)],{type:v})},replaceAsync:function(h){return new ye.Promise(function(v,S){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result})}),I.addEventListener("error",function(){S(I.error)}),I.readAsBinaryString(h)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?F:[],typeof Uint8Array=="function"?J:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[fe,me]:[])})}),cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nr=new Uint8Array(256);for(var wi=0;wi<cr.length;wi++)Nr[cr.codePointAt(wi)]=wi;var uo=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),s=i.length,o="",c=0;c<s;c+=3)o+=cr[i[c]>>2],o+=cr[(i[c]&3)<<4|i[c+1]>>4],o+=cr[(i[c+1]&15)<<2|i[c+2]>>6],o+=cr[i[c+2]&63];return s%3===2?o=o.slice(0,-1)+"=":s%3===1&&(o=o.slice(0,-2)+"=="),o},xc=function(t){var n=t.length,r=t.length*.75,i=0,s,o,c,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var u=new ArrayBuffer(r),d=new Uint8Array(u),x=0;x<n;x+=4)s=Nr[t.codePointAt(x)],o=Nr[t.codePointAt(x+1)],c=Nr[t.codePointAt(x+2)],l=Nr[t.codePointAt(x+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|c>>2,d[i++]=(c&3)<<6|l&63;return u},Uy=typeof self>"u"?global:self,Cc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=Uy[t];n&&(Cc[e.toLowerCase()+"2"]={test:function(r){return os.toStringTag(r)===t},replace:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return{buffer:i,byteOffset:s,length:o}},revive:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return new n(i,s,o)}})});var Vy={arraybuffer:{test:function(e){return os.toStringTag(e)==="ArrayBuffer"},replace:function(e){return uo(e,0,e.byteLength)},revive:function(e){var t=xc(e);return t}}},Ht=new os().register(Ky),Hy="FileReaderSync"in self,Yi=[],ks=0;Ht.register([Vy,Cc,{blob2:{test:function(e){return os.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Hy){var t=wc(e,"binary"),n=uo(t,0,t.byteLength);return{type:e.type,data:n}}else{Yi.push(e);var r={type:e.type,data:{start:ks,end:ks+e.size}};return ks+=e.size,r}},finalize:function(e,t){e.data=uo(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([xc(n)],{type:t})}}}]);Ht.mustFinalize=function(){return Yi.length>0};Ht.finalize=function(e){return Mn(void 0,void 0,void 0,function(){var t,n,r,i,s,o,c,l,u,d;return Gt(this,function(x){switch(x.label){case 0:return[4,_c(new Blob(Yi),"binary")];case 1:if(t=x.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,o=s.$,o&&(s=s.$);for(c in s)l=s[c],u=Ht.types[l],u&&u.finalize&&(d=st.getByKeyPath(i,o?"$."+c:c),u.finalize(d,t.slice(d.start,d.end)))}}return Yi=[],[2]}})})};var qy=2e3;function kc(e,t){return Mn(this,void 0,void 0,function(){function n(){return Mn(this,void 0,void 0,function(){var u,d,x,w,P,$,T,B,L;return Gt(this,function(O){switch(O.label){case 0:return[4,Promise.all(e.tables.map(function(E){return E.count()}))];case 1:u=O.sent(),u.forEach(function(E,N){return i[N].rowCount=E}),l.totalRows=u.reduce(function(E,N){return E+N}),d=JSON.stringify(o,void 0,s?2:void 0),x=d.lastIndexOf("]"),w=d.substring(0,x),r.push(w),P=t.filter,$=function(E){var N,V,z,H,re,k,b,U,j,ve,ae,Ae;return Gt(this,function(ge){switch(ge.label){case 0:N=e.table(E),V=N.schema.primKey,z=!!V.keyPath,H=t.numRowsPerChunk||qy,re=z?{tableName:N.name,inbound:!0,rows:[]}:{tableName:N.name,inbound:!1,rows:[]},k=JSON.stringify(re,void 0,s?2:void 0),s&&(k=k.split(`
`).join(`
    `)),b=k.lastIndexOf("]"),r.push(k.substring(0,b)),U=null,j=0,ve=!0,ae=function(){var ue,oe,Ve,Ue,ye,Ze,Re,$t,ye;return Gt(this,function(ce){switch(ce.label){case 0:return c&&st.ignoreTransaction(function(){return c(l)}),ue=U==null?N.limit(H):N.where(":id").above(U).limit(H),[4,ue.toArray()];case 1:return oe=ce.sent(),oe.length===0?[2,"break"]:(U!=null&&j>0&&(r.push(","),s&&r.push(`
      `)),ve=oe.length===H,z?(Ve=P?oe.filter(function(Ne){return P(E,Ne)}):oe,Ue=Ve.map(function(Ne){return Ht.encapsulate(Ne)}),Ht.mustFinalize()?[4,st.waitFor(Ht.finalize(Ue))]:[3,3]):[3,4]);case 2:ce.sent(),ce.label=3;case 3:return ye=JSON.stringify(Ue,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),j=Ve.length,U=oe.length>0?st.getByKeyPath(oe[oe.length-1],V.keyPath):null,[3,8];case 4:return[4,ue.primaryKeys()];case 5:return Ze=ce.sent(),Re=Ze.map(function(Ne,K){return[Ne,oe[K]]}),P&&(Re=Re.filter(function(Ne){var K=Ne[0],W=Ne[1];return P(E,W,K)})),$t=Re.map(function(Ne){return Ht.encapsulate(Ne)}),Ht.mustFinalize()?[4,st.waitFor(Ht.finalize($t))]:[3,7];case 6:ce.sent(),ce.label=7;case 7:ye=JSON.stringify($t,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),j=Re.length,U=Ze.length>0?Ze[Ze.length-1]:null,ce.label=8;case 8:return l.completedRows+=oe.length,[2]}})},ge.label=1;case 1:return ve?[5,ae()]:[3,3];case 2:return Ae=ge.sent(),Ae==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(b)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}})},T=0,B=i,O.label=2;case 2:return T<B.length?(L=B[T].name,[5,$(L)]):[3,5];case 3:O.sent(),O.label=4;case 4:return T++,[3,2];case 5:return r.push(d.substr(x)),l.done=!0,c&&st.ignoreTransaction(function(){return c(l)}),[2]}})})}var r,i,s,o,c,l;return Gt(this,function(u){switch(u.label){case 0:t=t||{},r=[],i=e.tables.map(function(d){return{name:d.name,schema:jy(d),rowCount:0}}),s=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},c=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},u.label=1;case 1:return u.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:return Ht.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var Yy=1,Jy={Stream:function(){}},zy=qo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new P(k)},n.CParser=P,n.CStream=T,n.createStream=$,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,c;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var l in n.STATE)n.STATE[n.STATE[l]]=l;o=n.STATE;const u={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function b(){this.__proto__=k}return b.prototype=k,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var b=[];for(var U in k)k.hasOwnProperty(U)&&b.push(U);return b});function d(k){var b=Math.max(n.MAX_BUFFER_LENGTH,10),U=0;for(var j in i){var ve=k[j]===void 0?0:k[j].length;if(ve>b)switch(j){case"text":closeText(k);break;default:V(k,"Max buffer length exceeded: "+j)}U=Math.max(U,ve)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-U+k.position}function x(k){for(var b in i)k[b]=i[b]}var w=/[\\"\n]/g;function P(k){if(!(this instanceof P))return new P(k);var b=this;x(b),b.bufferCheckPosition=n.MAX_BUFFER_LENGTH,b.q=b.c=b.p="",b.opt=k||{},b.closed=b.closedRoot=b.sawRoot=!1,b.tag=b.error=null,b.state=o.BEGIN,b.stack=new Array,b.position=b.column=0,b.line=1,b.slashed=!1,b.unicodeI=0,b.unicodeS=null,b.depth=0,B(b,"onready")}P.prototype={end:function(){z(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{c=Jy.Stream}catch{c=function(){}}function $(k){return new T(k)}function T(k){if(!(this instanceof T))return new T(k);this._parser=new P(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var b=this;c.apply(b),this._parser.onend=function(){b.emit("end")},this._parser.onerror=function(U){b.emit("error",U),b._parser.error=null},s.forEach(function(U){Object.defineProperty(b,"on"+U,{get:function(){return b._parser["on"+U]},set:function(j){if(!j)return b.removeAllListeners(U),b._parser["on"+U]=j,j;b.on(U,j)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(c.prototype,{constructor:{value:T}}),T.prototype.write=function(k){k=new Buffer(k);for(var b=0;b<k.length;b++){var U=k[b];if(this.bytes_remaining>0){for(var j=0;j<this.bytes_remaining;j++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+j]=k[j];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,b=b+j-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&U>=128)if(U>=194&&U<=223&&(this.bytes_in_sequence=2),U>=224&&U<=239&&(this.bytes_in_sequence=3),U>=240&&U<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+b>k.length){for(var ve=0;ve<=k.length-1-b;ve++)this.temp_buffs[this.bytes_in_sequence][ve]=k[b+ve];return this.bytes_remaining=b+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(b,b+this.bytes_in_sequence).toString(),b=b+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ae=b;ae<k.length&&!(k[ae]>=128);ae++);this.string=k.slice(b,ae).toString(),this._parser.write(this.string),this.emit("data",this.string),b=ae-1}},T.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},T.prototype.on=function(k,b){var U=this;return!U._parser["on"+k]&&s.indexOf(k)!==-1&&(U._parser["on"+k]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,k),U.emit.apply(U,j)}),c.prototype.on.call(U,k,b)},T.prototype.destroy=function(){x(this._parser),this.emit("close")};function B(k,b,U){n.INFO&&console.log("-- emit",b,U),k[b]&&k[b](U)}function L(k,b,U){O(k),B(k,b,U)}function O(k,b){k.textNode=N(k.opt,k.textNode),k.textNode!==void 0&&B(k,b||"onvalue",k.textNode),k.textNode=void 0}function E(k){k.numberNode&&B(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function N(k,b){return b===void 0||(k.trim&&(b=b.trim()),k.normalize&&(b=b.replace(/\s+/g," "))),b}function V(k,b){return O(k),b+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,b=new Error(b),k.error=b,B(k,"onerror",b),k}function z(k){return(k.state!==o.VALUE||k.depth!==0)&&V(k,"Unexpected end"),O(k),k.c="",k.closed=!0,B(k,"onend"),P.call(k,k.opt),k}function H(k){return k===u.carriageReturn||k===u.lineFeed||k===u.space||k===u.tab}function re(k){var b=this;if(this.error)throw this.error;if(b.closed)return V(b,"Cannot write after close. Assign an onready handler.");if(k===null)return z(b);var U=0,j=k.charCodeAt(0),ve=b.p;for(n.DEBUG&&console.log("write -> ["+k+"]");j&&(ve=j,b.c=j=k.charCodeAt(U++),ve!==j?b.p=ve:ve=b.p,!!j);)switch(n.DEBUG&&console.log(U,j,n.STATE[b.state]),b.position++,j===u.lineFeed?(b.line++,b.column=0):b.column++,b.state){case o.BEGIN:j===u.openBrace?b.state=o.OPEN_OBJECT:j===u.openBracket?b.state=o.OPEN_ARRAY:H(j)||V(b,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(j))continue;if(b.state===o.OPEN_KEY)b.stack.push(o.CLOSE_KEY);else if(j===u.closeBrace){B(b,"onopenobject"),this.depth++,B(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_OBJECT);j===u.doubleQuote?b.state=o.STRING:V(b,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(j))continue;b.state,o.CLOSE_KEY,j===u.colon?(b.state===o.CLOSE_OBJECT?(b.stack.push(o.CLOSE_OBJECT),O(b,"onopenobject"),this.depth++):O(b,"onkey"),b.state=o.VALUE):j===u.closeBrace?(L(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE):j===u.comma?(b.state===o.CLOSE_OBJECT&&b.stack.push(o.CLOSE_OBJECT),O(b),b.state=o.OPEN_KEY):V(b,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(j))continue;if(b.state===o.OPEN_ARRAY)if(B(b,"onopenarray"),this.depth++,b.state=o.VALUE,j===u.closeBracket){B(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_ARRAY);j===u.doubleQuote?b.state=o.STRING:j===u.openBrace?b.state=o.OPEN_OBJECT:j===u.openBracket?b.state=o.OPEN_ARRAY:j===u.t?b.state=o.TRUE:j===u.f?b.state=o.FALSE:j===u.n?b.state=o.NULL:j===u.minus?b.numberNode+="-":u._0<=j&&j<=u._9?(b.numberNode+=String.fromCharCode(j),b.state=o.NUMBER_DIGIT):V(b,"Bad value");continue;case o.CLOSE_ARRAY:if(j===u.comma)b.stack.push(o.CLOSE_ARRAY),O(b,"onvalue"),b.state=o.VALUE;else if(j===u.closeBracket)L(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;else{if(H(j))continue;V(b,"Bad array")}continue;case o.STRING:b.textNode===void 0&&(b.textNode="");var ae=U-1,Ae=b.slashed,ge=b.unicodeI;e:for(;;){for(n.DEBUG&&console.log(U,j,n.STATE[b.state],Ae);ge>0;)if(b.unicodeS+=String.fromCharCode(j),j=k.charCodeAt(U++),b.position++,ge===4?(b.textNode+=String.fromCharCode(parseInt(b.unicodeS,16)),ge=0,ae=U-1):ge++,!j)break e;if(j===u.doubleQuote&&!Ae){b.state=b.stack.pop()||o.VALUE,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}if(j===u.backslash&&!Ae&&(Ae=!0,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae,j=k.charCodeAt(U++),b.position++,!j))break;if(Ae){if(Ae=!1,j===u.n?b.textNode+=`
`:j===u.r?b.textNode+="\r":j===u.t?b.textNode+="	":j===u.f?b.textNode+="\f":j===u.b?b.textNode+="\b":j===u.u?(ge=1,b.unicodeS=""):b.textNode+=String.fromCharCode(j),j=k.charCodeAt(U++),b.position++,ae=U-1,j)continue;break}w.lastIndex=U;var ue=w.exec(k);if(ue===null){U=k.length+1,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}if(U=ue.index+1,j=k.charCodeAt(ue.index),!j){b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}}b.slashed=Ae,b.unicodeI=ge;continue;case o.TRUE:j===u.r?b.state=o.TRUE2:V(b,"Invalid true started with t"+j);continue;case o.TRUE2:j===u.u?b.state=o.TRUE3:V(b,"Invalid true started with tr"+j);continue;case o.TRUE3:j===u.e?(B(b,"onvalue",!0),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid true started with tru"+j);continue;case o.FALSE:j===u.a?b.state=o.FALSE2:V(b,"Invalid false started with f"+j);continue;case o.FALSE2:j===u.l?b.state=o.FALSE3:V(b,"Invalid false started with fa"+j);continue;case o.FALSE3:j===u.s?b.state=o.FALSE4:V(b,"Invalid false started with fal"+j);continue;case o.FALSE4:j===u.e?(B(b,"onvalue",!1),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid false started with fals"+j);continue;case o.NULL:j===u.u?b.state=o.NULL2:V(b,"Invalid null started with n"+j);continue;case o.NULL2:j===u.l?b.state=o.NULL3:V(b,"Invalid null started with nu"+j);continue;case o.NULL3:j===u.l?(B(b,"onvalue",null),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid null started with nul"+j);continue;case o.NUMBER_DECIMAL_POINT:j===u.period?(b.numberNode+=".",b.state=o.NUMBER_DIGIT):V(b,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:u._0<=j&&j<=u._9?b.numberNode+=String.fromCharCode(j):j===u.period?(b.numberNode.indexOf(".")!==-1&&V(b,"Invalid number has two dots"),b.numberNode+="."):j===u.e||j===u.E?((b.numberNode.indexOf("e")!==-1||b.numberNode.indexOf("E")!==-1)&&V(b,"Invalid number has two exponential"),b.numberNode+="e"):j===u.plus||j===u.minus?(ve===u.e||ve===u.E||V(b,"Invalid symbol in number"),b.numberNode+=String.fromCharCode(j)):(E(b),U--,b.state=b.stack.pop()||o.VALUE);continue;default:V(b,"Unknown state: "+b.state)}return b.position>=b.bufferCheckPosition&&d(b),b}})(t)});function Wy(e){var t=0,n=Gy(!0),r={pullAsync:function(i){return Mn(this,void 0,void 0,function(){var s,o,c;return Gt(this,function(l){switch(l.label){case 0:return s=e.slice(t,t+i),t+=i,[4,_c(s,"text")];case 1:return o=l.sent(),c=n.write(o),r.result=c||{},[2,c]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=wc(s,"text"),c=n.write(o);return r.result=c||{},c},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Gy(e){var t=zy.parser(),n=0,r,i=[],s,o,c=!1,l=!1;return t.onopenobject=function(u){var d={};d.incomplete=!0,r||(r=d),s&&(i.push([o,s,l]),e&&(l?s.push(d):s[o]=d)),s=d,o=u,l=!1,++n},t.onkey=function(u){return o=u},t.onvalue=function(u){return l?s.push(u):s[o]=u},t.oncloseobject=function(){var u;if(delete s.incomplete,o=null,--n===0)c=!0;else{var d=s;u=i.pop(),o=u[0],s=u[1],l=u[2],e||(l?s.push(d):s[o]=d)}},t.onopenarray=function(){var u=[];u.incomplete=!0,r||(r=u),s&&(i.push([o,s,l]),e&&(l?s.push(u):s[o]=u)),s=u,l=!0,o=null,++n},t.onclosearray=function(){var u;if(delete s.incomplete,o=null,--n===0)c=!0;else{var d=s;u=i.pop(),o=u[0],s=u[1],l=u[2],e||(l?s.push(d):s[o]=d)}},{write:function(u){return t.write(u),r},done:function(){return c}}}var Dc=1024;function Xy(e,t){return Mn(this,void 0,void 0,function(){var n,r,i,s;return Gt(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Dc*1024,[4,Tc(e,n)];case 1:return r=o.sent(),i=r.result.data,s=new st(i.databaseName),s.version(i.databaseVersion).stores(Ry(i)),[4,Sc(s,r,t)];case 2:return o.sent(),[2,s]}})})}function Sc(e,t,n){return Mn(this,void 0,void 0,function(){function r(){return Mn(this,void 0,void 0,function(){var $,T,B,L,O;return Gt(this,function(E){switch(E.label){case 0:$=function(N){var V,z,H,re,k,b,U,j,ve,ae,Ae,ge;return Gt(this,function(ue){switch(ue.label){case 0:if(!N.rows)return[2,"break"];if(!N.rows.incomplete&&N.rows.length===0)return[2,"continue"];if(u&&st.ignoreTransaction(function(){return u(d)}),V=N.tableName,z=e.table(V),H=l.tables.filter(function(oe){return oe.name===V})[0].schema,!z){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(N.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=z.schema.primKey.src)throw new Error("Primary key differs for table ".concat(N.tableName,". "));for(re=N.rows,k=[],b=0;b<re.length&&(U=re[b],!U.incomplete);b++)k.push(Ht.revive(U));return j=n.filter,ve=j?N.inbound?k.filter(function(oe){return j(V,oe)}):k.filter(function(oe){var Ve=oe[0],Ue=oe[1];return j(V,Ue,Ve)}):k,ae=N.inbound?[void 0,ve]:[ve.map(function(oe){return oe[0]}),k.map(function(oe){return oe[1]})],Ae=ae[0],ge=ae[1],n.overwriteValues?[4,z.bulkPut(ge,Ae)]:[3,2];case 1:return ue.sent(),[3,4];case 2:return[4,z.bulkAdd(ge,Ae)];case 3:ue.sent(),ue.label=4;case 4:return d.completedRows+=k.length,k.incomplete||(d.completedTables+=1),re.splice(0,k.length),[2]}})},T=0,B=l.data,E.label=1;case 1:return T<B.length?(L=B[T],[5,$(L)]):[3,4];case 2:if(O=E.sent(),O==="break")return[3,4];E.label=3;case 3:return T++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return!s.done()&&!s.eof()?c?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,st.waitFor(s.pullAsync(i))];case 6:E.sent(),E.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,c,l,u,d,x,w,P;return Gt(this,function($){switch($.label){case 0:return n=n||{},i=n.chunkSizeBytes||Dc*1024,[4,Tc(t,i)];case 1:if(s=$.sent(),o=s.result,c="FileReaderSync"in self,l=o.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(T,B){return T+B.rowCount},0),totalTables:l.tables.length},u&&st.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];x=0,w=e.tables,$.label=2;case 2:return x<w.length?(P=w[x],[4,P.clear()]):[3,5];case 3:$.sent(),$.label=4;case 4:return x++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return $.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:$.sent(),$.label=9;case 9:return d.done=!0,u&&st.ignoreTransaction(function(){return u(d)}),[2]}})})}function Tc(e,t){return Mn(this,void 0,void 0,function(){var n,r;return Gt(this,function(i){switch(i.label){case 0:n="slice"in e?Wy(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Yy)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}st.prototype.export=function(e){return kc(this,e)};st.prototype.import=function(e,t){return Sc(this,e,t)};st.import=function(e,t){return Xy(e,t)};const Qy={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},Zy=R("div",{class:"text-2xl font-bold mb-6"},"База данных",-1),em={class:"flex flex-wrap items-center gap-5"},tm=R("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),nm=R("span",{class:"pointer-events-none"},"Импорт",-1),rm={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},im=R("div",{class:"text-2xl font-bold mb-6 text-red-400"},"Осторожно!",-1),sm={class:"flex flex-wrap items-center gap-5"},om=an({__name:"Settings",setup(e){const t=ni({dbLoading:!1});Rl(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("Удаляем базу данных ?"))try{await Dt.close(),window.indexedDB.deleteDatabase("avito_scraper"),ot.show("error",at.DBDropSuccess),window.location.reload()}catch{ot.show("error",at.DBDropError)}}async function r(){window.confirm("Чистим хранилище ?")&&(await chrome.storage.local.remove(["profileList","parsingResults","filterFields","reviewsFilter"]),window.location.reload())}async function i(){t.dbLoading=!0;try{const c=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,l=await kc(Dt),u=new Blob([l],{type:"text/json"}),d=document.createElement("a");d.href=URL.createObjectURL(u),d.download=c,d.click(),d.remove(),ot.show("success",at.DBExportSuccess)}catch{ot.show("error",at.DBExportError)}finally{t.dbLoading=!1}}return(s,o)=>(he(),De(nt,null,[R("div",Qy,[t.dbLoading?(he(),Ot(bc,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):We("",!0),Zy,R("div",em,[rt(jt,{theme:"success",icon:"cloud_upload"},{default:At(()=>[tm,nm]),_:1}),rt(jt,{theme:"info",icon:"cloud_download",onClick:i},{default:At(()=>[Lt("Экспорт")]),_:1})])]),R("div",rm,[im,R("div",sm,[rt(jt,{theme:"danger",icon:"delete_sweep",onClick:Bt(r,["stop"])},{default:At(()=>[Lt("Очистить localStorage")]),_:1},8,["onClick"]),rt(jt,{theme:"danger",icon:"delete_forever",onClick:Bt(n,["stop"])},{default:At(()=>[Lt("Очистить IndexedDB")]),_:1},8,["onClick"])])])],64))}}),am={class:"centered"},lm=an({__name:"App",setup(e){return er(async()=>{cd(),chrome.runtime.onMessage.addListener(async({message:t,action:n,status:r,currentUrl:i,data:s})=>{if(r&&t&&ot.show(r,t),n==="reviews-parsing-started"){const o=Fe.getProfileLinkByUrl(i);o&&(o.status="wait")}if(n==="reviews-parsing-ended"){if(r==="success"){Et.pushProductsByUrl(i,s),Mt.pushParsingResult(i);const o=Fe.getProfileLinkByUrl(i);o&&(o.status="success")}if(r==="error"){const o=Fe.getProfileLinkByUrl(i);o&&(o.status="error")}Fe.newProfileLink?Fe.parsingStart():(on.changeTab(Tn.ParsingResult),hd())}if(n==="profile-info"){Et.list.value.push(s);let o=`
                ${s.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.deliveryInfo}
            `;Fe.setProfileLinkInfo(i,o)}})}),(t,n)=>(he(),De(nt,null,[rt(ch),R("main",am,[(he(),Ot(Bu,null,[we(on).active.value===we(Tn).ReviewsFilter?(he(),Ot(Ud,{key:0,ref:"filterRef"},null,512)):We("",!0)],1024)),we(on).active.value===we(Tn).ParsingResult?(he(),Ot(Jp,{key:0})):We("",!0),we(on).active.value===we(Tn).ProfileSavedList?(he(),Ot(By,{key:1})):We("",!0),we(on).active.value===we(Tn).Settings?(he(),Ot(om,{key:2})):We("",!0)])],64))}}),cm=nh();Qf(lm).use(cm).mount("#options");

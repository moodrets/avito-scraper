var Oc=Object.defineProperty;var Ac=(e,t,n)=>t in e?Oc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var en=(e,t,n)=>(Ac(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fo(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Qe={},ur=[],Xt=()=>{},Pc=()=>!1,$c=/^on[^a-z]/,zi=e=>$c.test(e),ho=e=>e.startsWith("onUpdate:"),ht=Object.assign,po=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Nc=Object.prototype.hasOwnProperty,Be=(e,t)=>Nc.call(e,t),Te=Array.isArray,fr=e=>ni(e)==="[object Map]",ja=e=>ni(e)==="[object Set]",Ic=e=>ni(e)==="[object RegExp]",Oe=e=>typeof e=="function",ut=e=>typeof e=="string",yo=e=>typeof e=="symbol",it=e=>e!==null&&typeof e=="object",Ka=e=>it(e)&&Oe(e.then)&&Oe(e.catch),Ua=Object.prototype.toString,ni=e=>Ua.call(e),Fc=e=>ni(e).slice(8,-1),Va=e=>ni(e)==="[object Object]",mo=e=>ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ki=fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Mc=/-(\w)/g,_r=Gi(e=>e.replace(Mc,(t,n)=>n?n.toUpperCase():"")),Lc=/\B([A-Z])/g,Zn=Gi(e=>e.replace(Lc,"-$1").toLowerCase()),Ha=Gi(e=>e.charAt(0).toUpperCase()+e.slice(1)),cs=Gi(e=>e?`on${Ha(e)}`:""),Vr=(e,t)=>!Object.is(e,t),hr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Fi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Yo;const Ss=()=>Yo||(Yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ri(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ut(r)?Kc(r):ri(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(ut(e))return e;if(it(e))return e}}const Bc=/;(?![^(]*\))/g,Rc=/:([^]+)/,jc=/\/\*[^]*?\*\//g;function Kc(e){const t={};return e.replace(jc,"").split(Bc).forEach(n=>{if(n){const r=n.split(Rc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function vt(e){let t="";if(ut(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=vt(e[n]);r&&(t+=r+" ")}else if(it(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Uc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vc=fo(Uc);function qa(e){return!!e||e===""}const Me=e=>ut(e)?e:e==null?"":Te(e)||it(e)&&(e.toString===Ua||!Oe(e.toString))?JSON.stringify(e,Ya,2):String(e),Ya=(e,t)=>t&&t.__v_isRef?Ya(e,t.value):fr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ja(t)?{[`Set(${t.size})`]:[...t.values()]}:it(t)&&!Te(t)&&!Va(t)?String(t):t;let Jt;class Ja{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Jt;try{return Jt=this,t()}finally{Jt=n}}}on(){Jt=this}off(){Jt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Hc(e){return new Ja(e)}function qc(e,t=Jt){t&&t.active&&t.effects.push(e)}function Yc(){return Jt}const go=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Wa=e=>(e.w&Pn)>0,za=e=>(e.n&Pn)>0,Jc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Pn},Wc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];Wa(i)&&!za(i)?i.delete(e):t[n++]=i,i.w&=~Pn,i.n&=~Pn}t.length=n}},Ts=new WeakMap;let Ar=0,Pn=1;const Es=30;let Wt;const qn=Symbol(""),Os=Symbol("");class vo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,qc(this,r)}run(){if(!this.active)return this.fn();let t=Wt,n=On;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Wt,Wt=this,On=!0,Pn=1<<++Ar,Ar<=Es?Jc(this):Jo(this),this.fn()}finally{Ar<=Es&&Wc(this),Pn=1<<--Ar,Wt=this.parent,On=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wt===this?this.deferStop=!0:this.active&&(Jo(this),this.onStop&&this.onStop(),this.active=!1)}}function Jo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let On=!0;const Ga=[];function kr(){Ga.push(On),On=!1}function Dr(){const e=Ga.pop();On=e===void 0?!0:e}function Ft(e,t,n){if(On&&Wt){let r=Ts.get(e);r||Ts.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=go()),Xa(i)}}function Xa(e,t){let n=!1;Ar<=Es?za(e)||(e.n|=Pn,n=!Wa(e)):n=!e.has(Wt),n&&(e.add(Wt),Wt.deps.push(e))}function gn(e,t,n,r,i,s){const o=Ts.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&Te(e)){const u=Number(r);o.forEach((c,d)=>{(d==="length"||d>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":Te(e)?mo(n)&&l.push(o.get("length")):(l.push(o.get(qn)),fr(e)&&l.push(o.get(Os)));break;case"delete":Te(e)||(l.push(o.get(qn)),fr(e)&&l.push(o.get(Os)));break;case"set":fr(e)&&l.push(o.get(qn));break}if(l.length===1)l[0]&&As(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);As(go(u))}}function As(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&Wo(r);for(const r of n)r.computed||Wo(r)}function Wo(e,t){(e!==Wt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const zc=fo("__proto__,__v_isRef,__isVue"),Qa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yo)),Gc=bo(),Xc=bo(!1,!0),Qc=bo(!0),zo=Zc();function Zc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ke(this);for(let s=0,o=this.length;s<o;s++)Ft(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ke)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){kr();const r=Ke(this)[t].apply(this,n);return Dr(),r}}),e}function eu(e){const t=Ke(this);return Ft(t,"has",e),t.hasOwnProperty(e)}function bo(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?mu:rl:t?nl:tl).get(r))return r;const o=Te(r);if(!e){if(o&&Be(zo,i))return Reflect.get(zo,i,s);if(i==="hasOwnProperty")return eu}const l=Reflect.get(r,i,s);return(yo(i)?Qa.has(i):zc(i))||(e||Ft(r,"get",i),t)?l:wt(l)?o&&mo(i)?l:l.value:it(l)?e?il(l):Sr(l):l}}const tu=Za(),nu=Za(!0);function Za(e=!1){return function(n,r,i,s){let o=n[r];if(wr(o)&&wt(o)&&!wt(i))return!1;if(!e&&(!Mi(i)&&!wr(i)&&(o=Ke(o),i=Ke(i)),!Te(n)&&wt(o)&&!wt(i)))return o.value=i,!0;const l=Te(n)&&mo(r)?Number(r)<n.length:Be(n,r),u=Reflect.set(n,r,i,s);return n===Ke(s)&&(l?Vr(i,o)&&gn(n,"set",r,i):gn(n,"add",r,i)),u}}function ru(e,t){const n=Be(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&gn(e,"delete",t,void 0),r}function iu(e,t){const n=Reflect.has(e,t);return(!yo(t)||!Qa.has(t))&&Ft(e,"has",t),n}function su(e){return Ft(e,"iterate",Te(e)?"length":qn),Reflect.ownKeys(e)}const el={get:Gc,set:tu,deleteProperty:ru,has:iu,ownKeys:su},ou={get:Qc,set(e,t){return!0},deleteProperty(e,t){return!0}},au=ht({},el,{get:Xc,set:nu}),_o=e=>e,Xi=e=>Reflect.getPrototypeOf(e);function ui(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ke(e),s=Ke(t);n||(t!==s&&Ft(i,"get",t),Ft(i,"get",s));const{has:o}=Xi(i),l=r?_o:n?ko:Hr;if(o.call(i,t))return l(e.get(t));if(o.call(i,s))return l(e.get(s));e!==i&&e.get(t)}function fi(e,t=!1){const n=this.__v_raw,r=Ke(n),i=Ke(e);return t||(e!==i&&Ft(r,"has",e),Ft(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function hi(e,t=!1){return e=e.__v_raw,!t&&Ft(Ke(e),"iterate",qn),Reflect.get(e,"size",e)}function Go(e){e=Ke(e);const t=Ke(this);return Xi(t).has.call(t,e)||(t.add(e),gn(t,"add",e,e)),this}function Xo(e,t){t=Ke(t);const n=Ke(this),{has:r,get:i}=Xi(n);let s=r.call(n,e);s||(e=Ke(e),s=r.call(n,e));const o=i.call(n,e);return n.set(e,t),s?Vr(t,o)&&gn(n,"set",e,t):gn(n,"add",e,t),this}function Qo(e){const t=Ke(this),{has:n,get:r}=Xi(t);let i=n.call(t,e);i||(e=Ke(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&gn(t,"delete",e,void 0),s}function Zo(){const e=Ke(this),t=e.size!==0,n=e.clear();return t&&gn(e,"clear",void 0,void 0),n}function di(e,t){return function(r,i){const s=this,o=s.__v_raw,l=Ke(o),u=t?_o:e?ko:Hr;return!e&&Ft(l,"iterate",qn),o.forEach((c,d)=>r.call(i,u(c),u(d),s))}}function pi(e,t,n){return function(...r){const i=this.__v_raw,s=Ke(i),o=fr(s),l=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=i[e](...r),d=n?_o:t?ko:Hr;return!t&&Ft(s,"iterate",u?Os:qn),{next(){const{value:w,done:x}=c.next();return x?{value:w,done:x}:{value:l?[d(w[0]),d(w[1])]:d(w),done:x}},[Symbol.iterator](){return this}}}}function wn(e){return function(...t){return e==="delete"?!1:this}}function lu(){const e={get(s){return ui(this,s)},get size(){return hi(this)},has:fi,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:di(!1,!1)},t={get(s){return ui(this,s,!1,!0)},get size(){return hi(this)},has:fi,add:Go,set:Xo,delete:Qo,clear:Zo,forEach:di(!1,!0)},n={get(s){return ui(this,s,!0)},get size(){return hi(this,!0)},has(s){return fi.call(this,s,!0)},add:wn("add"),set:wn("set"),delete:wn("delete"),clear:wn("clear"),forEach:di(!0,!1)},r={get(s){return ui(this,s,!0,!0)},get size(){return hi(this,!0)},has(s){return fi.call(this,s,!0)},add:wn("add"),set:wn("set"),delete:wn("delete"),clear:wn("clear"),forEach:di(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=pi(s,!1,!1),n[s]=pi(s,!0,!1),t[s]=pi(s,!1,!0),r[s]=pi(s,!0,!0)}),[e,n,t,r]}const[cu,uu,fu,hu]=lu();function wo(e,t){const n=t?e?hu:fu:e?uu:cu;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Be(n,i)&&i in r?n:r,i,s)}const du={get:wo(!1,!1)},pu={get:wo(!1,!0)},yu={get:wo(!0,!1)},tl=new WeakMap,nl=new WeakMap,rl=new WeakMap,mu=new WeakMap;function gu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vu(e){return e.__v_skip||!Object.isExtensible(e)?0:gu(Fc(e))}function Sr(e){return wr(e)?e:xo(e,!1,el,du,tl)}function bu(e){return xo(e,!1,au,pu,nl)}function il(e){return xo(e,!0,ou,yu,rl)}function xo(e,t,n,r,i){if(!it(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=vu(e);if(o===0)return e;const l=new Proxy(e,o===2?r:n);return i.set(e,l),l}function dr(e){return wr(e)?dr(e.__v_raw):!!(e&&e.__v_isReactive)}function wr(e){return!!(e&&e.__v_isReadonly)}function Mi(e){return!!(e&&e.__v_isShallow)}function sl(e){return dr(e)||wr(e)}function Ke(e){const t=e&&e.__v_raw;return t?Ke(t):e}function Co(e){return Fi(e,"__v_skip",!0),e}const Hr=e=>it(e)?Sr(e):e,ko=e=>it(e)?il(e):e;function ol(e){On&&Wt&&(e=Ke(e),Xa(e.dep||(e.dep=go())))}function al(e,t){e=Ke(e);const n=e.dep;n&&As(n)}function wt(e){return!!(e&&e.__v_isRef===!0)}function pn(e){return _u(e,!1)}function _u(e,t){return wt(e)?e:new wu(e,t)}class wu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ke(t),this._value=n?t:Hr(t)}get value(){return ol(this),this._value}set value(t){const n=this.__v_isShallow||Mi(t)||wr(t);t=n?t:Ke(t),Vr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Hr(t),al(this))}}function ve(e){return wt(e)?e.value:e}const xu={get:(e,t,n)=>ve(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return wt(i)&&!wt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ll(e){return dr(e)?e:new Proxy(e,xu)}class Cu{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new vo(t,()=>{this._dirty||(this._dirty=!0,al(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ke(this);return ol(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ku(e,t,n=!1){let r,i;const s=Oe(e);return s?(r=e,i=Xt):(r=e.get,i=e.set),new Cu(r,i,s||!i,n)}function An(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Qi(s,t,n)}return i}function Qt(e,t,n,r){if(Oe(e)){const s=An(e,t,n,r);return s&&Ka(s)&&s.catch(o=>{Qi(o,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Qt(e[s],t,n,r));return i}function Qi(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,l=n;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,o,l)===!1)return}s=s.parent}const u=t.appContext.config.errorHandler;if(u){An(u,null,10,[e,o,l]);return}}Du(e,n,i,r)}function Du(e,t,n,r=!0){console.error(e)}let qr=!1,Ps=!1;const bt=[];let rn=0;const pr=[];let un=null,Kn=0;const cl=Promise.resolve();let Do=null;function Su(e){const t=Do||cl;return e?t.then(this?e.bind(this):e):t}function Tu(e){let t=rn+1,n=bt.length;for(;t<n;){const r=t+n>>>1;Yr(bt[r])<e?t=r+1:n=r}return t}function So(e){(!bt.length||!bt.includes(e,qr&&e.allowRecurse?rn+1:rn))&&(e.id==null?bt.push(e):bt.splice(Tu(e.id),0,e),ul())}function ul(){!qr&&!Ps&&(Ps=!0,Do=cl.then(hl))}function Eu(e){const t=bt.indexOf(e);t>rn&&bt.splice(t,1)}function Ou(e){Te(e)?pr.push(...e):(!un||!un.includes(e,e.allowRecurse?Kn+1:Kn))&&pr.push(e),ul()}function ea(e,t=qr?rn+1:0){for(;t<bt.length;t++){const n=bt[t];n&&n.pre&&(bt.splice(t,1),t--,n())}}function fl(e){if(pr.length){const t=[...new Set(pr)];if(pr.length=0,un){un.push(...t);return}for(un=t,un.sort((n,r)=>Yr(n)-Yr(r)),Kn=0;Kn<un.length;Kn++)un[Kn]();un=null,Kn=0}}const Yr=e=>e.id==null?1/0:e.id,Au=(e,t)=>{const n=Yr(e)-Yr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function hl(e){Ps=!1,qr=!0,bt.sort(Au);const t=Xt;try{for(rn=0;rn<bt.length;rn++){const n=bt[rn];n&&n.active!==!1&&An(n,null,14)}}finally{rn=0,bt.length=0,fl(),qr=!1,Do=null,(bt.length||pr.length)&&hl()}}function Pu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Qe;let i=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:w,trim:x}=r[d]||Qe;x&&(i=n.map(E=>ut(E)?E.trim():E)),w&&(i=n.map(Ds))}let l,u=r[l=cs(t)]||r[l=cs(_r(t))];!u&&s&&(u=r[l=cs(Zn(t))]),u&&Qt(u,e,6,i);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Qt(c,e,6,i)}}function dl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},l=!1;if(!Oe(e)){const u=c=>{const d=dl(c,t,!0);d&&(l=!0,ht(o,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!l?(it(e)&&r.set(e,null),null):(Te(s)?s.forEach(u=>o[u]=null):ht(o,s),it(e)&&r.set(e,o),o)}function Zi(e,t){return!e||!zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Be(e,t[0].toLowerCase()+t.slice(1))||Be(e,Zn(t))||Be(e,t))}let xt=null,pl=null;function Li(e){const t=xt;return xt=e,pl=e&&e.type.__scopeId||null,t}function gt(e,t=xt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ua(-1);const s=Li(t);let o;try{o=e(...i)}finally{Li(s),r._d&&ua(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function us(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:l,attrs:u,emit:c,render:d,renderCache:w,data:x,setupState:E,ctx:N,inheritAttrs:S}=e;let B,L;const O=Li(e);try{if(n.shapeFlag&4){const $=i||r;B=nn(d.call($,$,w,s,E,x,N)),L=u}else{const $=t;B=nn($.length>1?$(s,{attrs:u,slots:l,emit:c}):$(s,null)),L=t.props?u:$u(u)}}catch($){Lr.length=0,Qi($,e,1),B=ot($n)}let P=B;if(L&&S!==!1){const $=Object.keys(L),{shapeFlag:V}=P;$.length&&V&7&&(o&&$.some(ho)&&(L=Nu(L,o)),P=Gn(P,L))}return n.dirs&&(P=Gn(P),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&(P.transition=n.transition),B=P,Li(O),B}const $u=e=>{let t;for(const n in e)(n==="class"||n==="style"||zi(n))&&((t||(t={}))[n]=e[n]);return t},Nu=(e,t)=>{const n={};for(const r in e)(!ho(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Iu(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:l,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?ta(r,o,c):!!o;if(u&8){const d=t.dynamicProps;for(let w=0;w<d.length;w++){const x=d[w];if(o[x]!==r[x]&&!Zi(c,x))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?ta(r,o,c):!0:!!o;return!1}function ta(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Zi(n,s))return!0}return!1}function Fu({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const yl=e=>e.__isSuspense;function Mu(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Ou(e)}const yi={};function Di(e,t,n){return ml(e,t,n)}function ml(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Qe){var l;const u=Yc()===((l=mt)==null?void 0:l.scope)?mt:null;let c,d=!1,w=!1;if(wt(e)?(c=()=>e.value,d=Mi(e)):dr(e)?(c=()=>e,r=!0):Te(e)?(w=!0,d=e.some($=>dr($)||Mi($)),c=()=>e.map($=>{if(wt($))return $.value;if(dr($))return Vn($);if(Oe($))return An($,u,2)})):Oe(e)?t?c=()=>An(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return x&&x(),Qt(e,u,3,[E])}:c=Xt,t&&r){const $=c;c=()=>Vn($())}let x,E=$=>{x=O.onStop=()=>{An($,u,4)}},N;if(Wr)if(E=Xt,t?n&&Qt(t,u,3,[c(),w?[]:void 0,E]):c(),i==="sync"){const $=Ef();N=$.__watcherHandles||($.__watcherHandles=[])}else return Xt;let S=w?new Array(e.length).fill(yi):yi;const B=()=>{if(O.active)if(t){const $=O.run();(r||d||(w?$.some((V,W)=>Vr(V,S[W])):Vr($,S)))&&(x&&x(),Qt(t,u,3,[$,S===yi?void 0:w&&S[0]===yi?[]:S,E]),S=$)}else O.run()};B.allowRecurse=!!t;let L;i==="sync"?L=B:i==="post"?L=()=>pt(B,u&&u.suspense):(B.pre=!0,u&&(B.id=u.uid),L=()=>So(B));const O=new vo(c,L);t?n?B():S=O.run():i==="post"?pt(O.run.bind(O),u&&u.suspense):O.run();const P=()=>{O.stop(),u&&u.scope&&po(u.scope.effects,O)};return N&&N.push(P),P}function Lu(e,t,n){const r=this.proxy,i=ut(e)?e.includes(".")?gl(r,e):()=>r[e]:e.bind(r,r);let s;Oe(t)?s=t:(s=t.handler,n=t);const o=mt;xr(this);const l=ml(i,s.bind(r),n);return o?xr(o):Jn(),l}function gl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Vn(e,t){if(!it(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),wt(e))Vn(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Vn(e[n],t);else if(ja(e)||fr(e))e.forEach(n=>{Vn(n,t)});else if(Va(e))for(const n in e)Vn(e[n],t);return e}function Cn(e,t){const n=xt;if(n===null)return e;const r=rs(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,l,u,c=Qe]=t[s];o&&(Oe(o)&&(o={mounted:o,updated:o}),o.deep&&Vn(l),i.push({dir:o,instance:r,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function Bn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let u=l.dir[r];u&&(kr(),Qt(u,n,8,[e.el,l,e,t]),Dr())}}function vl(e,t){e.shapeFlag&6&&e.component?vl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function on(e,t){return Oe(e)?(()=>ht({name:e.name},t,{setup:e}))():e}const yr=e=>!!e.type.__asyncLoader,bl=e=>e.type.__isKeepAlive,Bu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ml(),r=n.ctx;if(!r.renderer)return()=>{const O=t.default&&t.default();return O&&O.length===1?O[0]:O};const i=new Map,s=new Set;let o=null;const l=n.suspense,{renderer:{p:u,m:c,um:d,o:{createElement:w}}}=r,x=w("div");r.activate=(O,P,$,V,W)=>{const H=O.component;c(O,P,$,0,l),u(H.vnode,O,P,$,H,l,V,O.slotScopeIds,W),pt(()=>{H.isDeactivated=!1,H.a&&hr(H.a);const re=O.props&&O.props.onVnodeMounted;re&&Vt(re,H.parent,O)},l)},r.deactivate=O=>{const P=O.component;c(O,x,null,1,l),pt(()=>{P.da&&hr(P.da);const $=O.props&&O.props.onVnodeUnmounted;$&&Vt($,P.parent,O),P.isDeactivated=!0},l)};function E(O){fs(O),d(O,n,l,!0)}function N(O){i.forEach((P,$)=>{const V=pa(P.type);V&&(!O||!O(V))&&S($)})}function S(O){const P=i.get(O);!o||!or(P,o)?E(P):o&&fs(o),i.delete(O),s.delete(O)}Di(()=>[e.include,e.exclude],([O,P])=>{O&&N($=>Pr(O,$)),P&&N($=>!Pr(P,$))},{flush:"post",deep:!0});let B=null;const L=()=>{B!=null&&i.set(B,hs(n.subTree))};return er(L),xl(L),ii(()=>{i.forEach(O=>{const{subTree:P,suspense:$}=n,V=hs(P);if(O.type===V.type&&O.key===V.key){fs(V);const W=V.component.da;W&&pt(W,$);return}E(O)})}),()=>{if(B=null,!t.default)return null;const O=t.default(),P=O[0];if(O.length>1)return o=null,O;if(!Oo(P)||!(P.shapeFlag&4)&&!(P.shapeFlag&128))return o=null,P;let $=hs(P);const V=$.type,W=pa(yr($)?$.type.__asyncResolved||{}:V),{include:H,exclude:re,max:k}=e;if(H&&(!W||!Pr(H,W))||re&&W&&Pr(re,W))return o=$,P;const b=$.key==null?V:$.key,U=i.get(b);return $.el&&($=Gn($),P.shapeFlag&128&&(P.ssContent=$)),B=b,U?($.el=U.el,$.component=U.component,$.transition&&vl($,$.transition),$.shapeFlag|=512,s.delete(b),s.add(b)):(s.add(b),k&&s.size>parseInt(k,10)&&S(s.values().next().value)),$.shapeFlag|=256,o=$,yl(P.type)?P:$}}},Ru=Bu;function Pr(e,t){return Te(e)?e.some(n=>Pr(n,t)):ut(e)?e.split(",").includes(t):Ic(e)?e.test(t):!1}function ju(e,t){_l(e,"a",t)}function Ku(e,t){_l(e,"da",t)}function _l(e,t,n=mt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(es(t,r,n),n){let i=n.parent;for(;i&&i.parent;)bl(i.parent.vnode)&&Uu(r,t,n,i),i=i.parent}}function Uu(e,t,n,r){const i=es(t,e,r,!0);Cl(()=>{po(r[t],i)},n)}function fs(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function hs(e){return e.shapeFlag&128?e.ssContent:e}function es(e,t,n=mt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;kr(),xr(n);const l=Qt(t,n,e,o);return Jn(),Dr(),l});return r?i.unshift(s):i.push(s),s}}const bn=e=>(t,n=mt)=>(!Wr||e==="sp")&&es(e,(...r)=>t(...r),n),wl=bn("bm"),er=bn("m"),Vu=bn("bu"),xl=bn("u"),ii=bn("bum"),Cl=bn("um"),Hu=bn("sp"),qu=bn("rtg"),Yu=bn("rtc");function Ju(e,t=mt){es("ec",e,t)}const Wu=Symbol.for("v-ndc");function Yn(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||ut(e)){i=new Array(e.length);for(let o=0,l=e.length;o<l;o++)i[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(it(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];i[l]=t(e[c],c,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function kl(e,t,n={},r,i){if(xt.isCE||xt.parent&&yr(xt.parent)&&xt.parent.isCE)return t!=="default"&&(n.name=t),ot("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),le();const o=s&&Dl(s(n)),l=yt(rt,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Dl(e){return e.some(t=>Oo(t)?!(t.type===$n||t.type===rt&&!Dl(t.children)):!0)?e:null}const $s=e=>e?Ll(e)?rs(e)||e.proxy:$s(e.parent):null,Mr=ht(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$s(e.parent),$root:e=>$s(e.root),$emit:e=>e.emit,$options:e=>To(e),$forceUpdate:e=>e.f||(e.f=()=>So(e.update)),$nextTick:e=>e.n||(e.n=Su.bind(e.proxy)),$watch:e=>Lu.bind(e)}),ds=(e,t)=>e!==Qe&&!e.__isScriptSetup&&Be(e,t),zu={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const E=o[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(ds(r,t))return o[t]=1,r[t];if(i!==Qe&&Be(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Be(c,t))return o[t]=3,s[t];if(n!==Qe&&Be(n,t))return o[t]=4,n[t];Ns&&(o[t]=0)}}const d=Mr[t];let w,x;if(d)return t==="$attrs"&&Ft(e,"get",t),d(e);if((w=l.__cssModules)&&(w=w[t]))return w;if(n!==Qe&&Be(n,t))return o[t]=4,n[t];if(x=u.config.globalProperties,Be(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return ds(i,t)?(i[t]=n,!0):r!==Qe&&Be(r,t)?(r[t]=n,!0):Be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||e!==Qe&&Be(e,o)||ds(t,o)||(l=s[0])&&Be(l,o)||Be(r,o)||Be(Mr,o)||Be(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Gu(){return Xu().slots}function Xu(){const e=Ml();return e.setupContext||(e.setupContext=Rl(e))}function na(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ns=!0;function Qu(e){const t=To(e),n=e.proxy,r=e.ctx;Ns=!1,t.beforeCreate&&ra(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:l,provide:u,inject:c,created:d,beforeMount:w,mounted:x,beforeUpdate:E,updated:N,activated:S,deactivated:B,beforeDestroy:L,beforeUnmount:O,destroyed:P,unmounted:$,render:V,renderTracked:W,renderTriggered:H,errorCaptured:re,serverPrefetch:k,expose:b,inheritAttrs:U,components:R,directives:be,filters:ae}=t;if(c&&Zu(c,r,null),o)for(const fe in o){const oe=o[fe];Oe(oe)&&(r[fe]=oe.bind(n))}if(i){const fe=i.call(n,n);it(fe)&&(e.data=Sr(fe))}if(Ns=!0,s)for(const fe in s){const oe=s[fe],He=Oe(oe)?oe.bind(n,n):Oe(oe.get)?oe.get.bind(n,n):Xt,Ue=!Oe(oe)&&Oe(oe.set)?oe.set.bind(n):Xt,et=jl({get:He,set:Ue});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>et.value,set:je=>et.value=je})}if(l)for(const fe in l)Sl(l[fe],r,n,fe);if(u){const fe=Oe(u)?u.call(n):u;Reflect.ownKeys(fe).forEach(oe=>{of(oe,fe[oe])})}d&&ra(d,e,"c");function ge(fe,oe){Te(oe)?oe.forEach(He=>fe(He.bind(n))):oe&&fe(oe.bind(n))}if(ge(wl,w),ge(er,x),ge(Vu,E),ge(xl,N),ge(ju,S),ge(Ku,B),ge(Ju,re),ge(Yu,W),ge(qu,H),ge(ii,O),ge(Cl,$),ge(Hu,k),Te(b))if(b.length){const fe=e.exposed||(e.exposed={});b.forEach(oe=>{Object.defineProperty(fe,oe,{get:()=>n[oe],set:He=>n[oe]=He})})}else e.exposed||(e.exposed={});V&&e.render===Xt&&(e.render=V),U!=null&&(e.inheritAttrs=U),R&&(e.components=R),be&&(e.directives=be)}function Zu(e,t,n=Xt){Te(e)&&(e=Is(e));for(const r in e){const i=e[r];let s;it(i)?"default"in i?s=Si(i.from||r,i.default,!0):s=Si(i.from||r):s=Si(i),wt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ra(e,t,n){Qt(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Sl(e,t,n,r){const i=r.includes(".")?gl(n,r):()=>n[r];if(ut(e)){const s=t[e];Oe(s)&&Di(i,s)}else if(Oe(e))Di(i,e.bind(n));else if(it(e))if(Te(e))e.forEach(s=>Sl(s,t,n,r));else{const s=Oe(e.handler)?e.handler.bind(n):t[e.handler];Oe(s)&&Di(i,s,e)}}function To(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let u;return l?u=l:!i.length&&!n&&!r?u=t:(u={},i.length&&i.forEach(c=>Bi(u,c,o,!0)),Bi(u,t,o)),it(t)&&s.set(t,u),u}function Bi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Bi(e,s,n,!0),i&&i.forEach(o=>Bi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const l=ef[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const ef={data:ia,props:sa,emits:sa,methods:$r,computed:$r,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:$r,directives:$r,watch:nf,provide:ia,inject:tf};function ia(e,t){return t?e?function(){return ht(Oe(e)?e.call(this,this):e,Oe(t)?t.call(this,this):t)}:t:e}function tf(e,t){return $r(Is(e),Is(t))}function Is(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function St(e,t){return e?[...new Set([].concat(e,t))]:t}function $r(e,t){return e?ht(Object.create(null),e,t):t}function sa(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:ht(Object.create(null),na(e),na(t??{})):t}function nf(e,t){if(!e)return t;if(!t)return e;const n=ht(Object.create(null),e);for(const r in t)n[r]=St(e[r],t[r]);return n}function Tl(){return{app:null,config:{isNativeTag:Pc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rf=0;function sf(e,t){return function(r,i=null){Oe(r)||(r=ht({},r)),i!=null&&!it(i)&&(i=null);const s=Tl(),o=new Set;let l=!1;const u=s.app={_uid:rf++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Of,get config(){return s.config},set config(c){},use(c,...d){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(u,...d)):Oe(c)&&(o.add(c),c(u,...d))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,d){return d?(s.components[c]=d,u):s.components[c]},directive(c,d){return d?(s.directives[c]=d,u):s.directives[c]},mount(c,d,w){if(!l){const x=ot(r,i);return x.appContext=s,d&&t?t(x,c):e(x,c,w),l=!0,u._container=c,c.__vue_app__=u,rs(x.component)||x.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return s.provides[c]=d,u},runWithContext(c){Ri=u;try{return c()}finally{Ri=null}}};return u}}let Ri=null;function of(e,t){if(mt){let n=mt.provides;const r=mt.parent&&mt.parent.provides;r===n&&(n=mt.provides=Object.create(r)),n[e]=t}}function Si(e,t,n=!1){const r=mt||xt;if(r||Ri){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ri._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Oe(t)?t.call(r&&r.proxy):t}}function af(e,t,n,r=!1){const i={},s={};Fi(s,ns,1),e.propsDefaults=Object.create(null),El(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:bu(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function lf(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,l=Ke(i),[u]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let w=0;w<d.length;w++){let x=d[w];if(Zi(e.emitsOptions,x))continue;const E=t[x];if(u)if(Be(s,x))E!==s[x]&&(s[x]=E,c=!0);else{const N=_r(x);i[N]=Fs(u,l,N,E,e,!1)}else E!==s[x]&&(s[x]=E,c=!0)}}}else{El(e,t,i,s)&&(c=!0);let d;for(const w in l)(!t||!Be(t,w)&&((d=Zn(w))===w||!Be(t,d)))&&(u?n&&(n[w]!==void 0||n[d]!==void 0)&&(i[w]=Fs(u,l,w,void 0,e,!0)):delete i[w]);if(s!==l)for(const w in s)(!t||!Be(t,w))&&(delete s[w],c=!0)}c&&gn(e,"set","$attrs")}function El(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,l;if(t)for(let u in t){if(ki(u))continue;const c=t[u];let d;i&&Be(i,d=_r(u))?!s||!s.includes(d)?n[d]=c:(l||(l={}))[d]=c:Zi(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(s){const u=Ke(n),c=l||Qe;for(let d=0;d<s.length;d++){const w=s[d];n[w]=Fs(i,u,w,c[w],e,!Be(c,w))}}return o}function Fs(e,t,n,r,i,s){const o=e[n];if(o!=null){const l=Be(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(u)){const{propsDefaults:c}=i;n in c?r=c[n]:(xr(i),r=c[n]=u.call(null,t),Jn())}else r=u}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}function Ol(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},l=[];let u=!1;if(!Oe(e)){const d=w=>{u=!0;const[x,E]=Ol(w,t,!0);ht(o,x),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!u)return it(e)&&r.set(e,ur),ur;if(Te(s))for(let d=0;d<s.length;d++){const w=_r(s[d]);oa(w)&&(o[w]=Qe)}else if(s)for(const d in s){const w=_r(d);if(oa(w)){const x=s[d],E=o[w]=Te(x)||Oe(x)?{type:x}:ht({},x);if(E){const N=ca(Boolean,E.type),S=ca(String,E.type);E[0]=N>-1,E[1]=S<0||N<S,(N>-1||Be(E,"default"))&&l.push(w)}}}const c=[o,l];return it(e)&&r.set(e,c),c}function oa(e){return e[0]!=="$"}function aa(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function la(e,t){return aa(e)===aa(t)}function ca(e,t){return Te(t)?t.findIndex(n=>la(n,e)):Oe(t)&&la(t,e)?0:-1}const Al=e=>e[0]==="_"||e==="$stable",Eo=e=>Te(e)?e.map(nn):[nn(e)],cf=(e,t,n)=>{if(t._n)return t;const r=gt((...i)=>Eo(t(...i)),n);return r._c=!1,r},Pl=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Al(i))continue;const s=e[i];if(Oe(s))t[i]=cf(i,s,r);else if(s!=null){const o=Eo(s);t[i]=()=>o}}},$l=(e,t)=>{const n=Eo(t);e.slots.default=()=>n},uf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ke(t),Fi(t,"_",n)):Pl(t,e.slots={})}else e.slots={},t&&$l(e,t);Fi(e.slots,ns,1)},ff=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=Qe;if(r.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:(ht(i,t),!n&&l===1&&delete i._):(s=!t.$stable,Pl(t,i)),o=t}else t&&($l(e,t),o={default:1});if(s)for(const l in i)!Al(l)&&!(l in o)&&delete i[l]};function Ms(e,t,n,r,i=!1){if(Te(e)){e.forEach((x,E)=>Ms(x,t&&(Te(t)?t[E]:t),n,r,i));return}if(yr(r)&&!i)return;const s=r.shapeFlag&4?rs(r.component)||r.component.proxy:r.el,o=i?null:s,{i:l,r:u}=e,c=t&&t.r,d=l.refs===Qe?l.refs={}:l.refs,w=l.setupState;if(c!=null&&c!==u&&(ut(c)?(d[c]=null,Be(w,c)&&(w[c]=null)):wt(c)&&(c.value=null)),Oe(u))An(u,l,12,[o,d]);else{const x=ut(u),E=wt(u);if(x||E){const N=()=>{if(e.f){const S=x?Be(w,u)?w[u]:d[u]:u.value;i?Te(S)&&po(S,s):Te(S)?S.includes(s)||S.push(s):x?(d[u]=[s],Be(w,u)&&(w[u]=d[u])):(u.value=[s],e.k&&(d[e.k]=u.value))}else x?(d[u]=o,Be(w,u)&&(w[u]=o)):E&&(u.value=o,e.k&&(d[e.k]=o))};o?(N.id=-1,pt(N,n)):N()}}}const pt=Mu;function hf(e){return df(e)}function df(e,t){const n=Ss();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:u,setText:c,setElementText:d,parentNode:w,nextSibling:x,setScopeId:E=Xt,insertStaticContent:N}=e,S=(a,f,p,y=null,g=null,_=null,C=!1,A=null,F=!!f.dynamicChildren)=>{if(a===f)return;a&&!or(a,f)&&(y=K(a),je(a,g,_,!0),a=null),f.patchFlag===-2&&(F=!1,f.dynamicChildren=null);const{type:M,ref:J,shapeFlag:q}=f;switch(M){case ts:B(a,f,p,y);break;case $n:L(a,f,p,y);break;case ps:a==null&&O(f,p,y,C);break;case rt:R(a,f,p,y,g,_,C,A,F);break;default:q&1?V(a,f,p,y,g,_,C,A,F):q&6?be(a,f,p,y,g,_,C,A,F):(q&64||q&128)&&M.process(a,f,p,y,g,_,C,A,F,Y)}J!=null&&g&&Ms(J,a&&a.ref,_,f||a,!f)},B=(a,f,p,y)=>{if(a==null)r(f.el=l(f.children),p,y);else{const g=f.el=a.el;f.children!==a.children&&c(g,f.children)}},L=(a,f,p,y)=>{a==null?r(f.el=u(f.children||""),p,y):f.el=a.el},O=(a,f,p,y)=>{[a.el,a.anchor]=N(a.children,f,p,y,a.el,a.anchor)},P=({el:a,anchor:f},p,y)=>{let g;for(;a&&a!==f;)g=x(a),r(a,p,y),a=g;r(f,p,y)},$=({el:a,anchor:f})=>{let p;for(;a&&a!==f;)p=x(a),i(a),a=p;i(f)},V=(a,f,p,y,g,_,C,A,F)=>{C=C||f.type==="svg",a==null?W(f,p,y,g,_,C,A,F):k(a,f,g,_,C,A,F)},W=(a,f,p,y,g,_,C,A)=>{let F,M;const{type:J,props:q,shapeFlag:G,transition:Z,dirs:ie}=a;if(F=a.el=o(a.type,_,q&&q.is,q),G&8?d(F,a.children):G&16&&re(a.children,F,null,y,g,_&&J!=="foreignObject",C,A),ie&&Bn(a,null,y,"created"),H(F,a,a.scopeId,C,y),q){for(const me in q)me!=="value"&&!ki(me)&&s(F,me,null,q[me],_,a.children,y,g,Ie);"value"in q&&s(F,"value",null,q.value),(M=q.onVnodeBeforeMount)&&Vt(M,y,a)}ie&&Bn(a,null,y,"beforeMount");const he=(!g||g&&!g.pendingBranch)&&Z&&!Z.persisted;he&&Z.beforeEnter(F),r(F,f,p),((M=q&&q.onVnodeMounted)||he||ie)&&pt(()=>{M&&Vt(M,y,a),he&&Z.enter(F),ie&&Bn(a,null,y,"mounted")},g)},H=(a,f,p,y,g)=>{if(p&&E(a,p),y)for(let _=0;_<y.length;_++)E(a,y[_]);if(g){let _=g.subTree;if(f===_){const C=g.vnode;H(a,C,C.scopeId,C.slotScopeIds,g.parent)}}},re=(a,f,p,y,g,_,C,A,F=0)=>{for(let M=F;M<a.length;M++){const J=a[M]=A?kn(a[M]):nn(a[M]);S(null,J,f,p,y,g,_,C,A)}},k=(a,f,p,y,g,_,C)=>{const A=f.el=a.el;let{patchFlag:F,dynamicChildren:M,dirs:J}=f;F|=a.patchFlag&16;const q=a.props||Qe,G=f.props||Qe;let Z;p&&Rn(p,!1),(Z=G.onVnodeBeforeUpdate)&&Vt(Z,p,f,a),J&&Bn(f,a,p,"beforeUpdate"),p&&Rn(p,!0);const ie=g&&f.type!=="foreignObject";if(M?b(a.dynamicChildren,M,A,p,y,ie,_):C||oe(a,f,A,null,p,y,ie,_,!1),F>0){if(F&16)U(A,f,q,G,p,y,g);else if(F&2&&q.class!==G.class&&s(A,"class",null,G.class,g),F&4&&s(A,"style",q.style,G.style,g),F&8){const he=f.dynamicProps;for(let me=0;me<he.length;me++){const te=he[me],m=q[te],h=G[te];(h!==m||te==="value")&&s(A,te,m,h,g,a.children,p,y,Ie)}}F&1&&a.children!==f.children&&d(A,f.children)}else!C&&M==null&&U(A,f,q,G,p,y,g);((Z=G.onVnodeUpdated)||J)&&pt(()=>{Z&&Vt(Z,p,f,a),J&&Bn(f,a,p,"updated")},y)},b=(a,f,p,y,g,_,C)=>{for(let A=0;A<f.length;A++){const F=a[A],M=f[A],J=F.el&&(F.type===rt||!or(F,M)||F.shapeFlag&70)?w(F.el):p;S(F,M,J,null,y,g,_,C,!0)}},U=(a,f,p,y,g,_,C)=>{if(p!==y){if(p!==Qe)for(const A in p)!ki(A)&&!(A in y)&&s(a,A,p[A],null,C,f.children,g,_,Ie);for(const A in y){if(ki(A))continue;const F=y[A],M=p[A];F!==M&&A!=="value"&&s(a,A,M,F,C,f.children,g,_,Ie)}"value"in y&&s(a,"value",p.value,y.value)}},R=(a,f,p,y,g,_,C,A,F)=>{const M=f.el=a?a.el:l(""),J=f.anchor=a?a.anchor:l("");let{patchFlag:q,dynamicChildren:G,slotScopeIds:Z}=f;Z&&(A=A?A.concat(Z):Z),a==null?(r(M,p,y),r(J,p,y),re(f.children,p,J,g,_,C,A,F)):q>0&&q&64&&G&&a.dynamicChildren?(b(a.dynamicChildren,G,p,g,_,C,A),(f.key!=null||g&&f===g.subTree)&&Nl(a,f,!0)):oe(a,f,p,J,g,_,C,A,F)},be=(a,f,p,y,g,_,C,A,F)=>{f.slotScopeIds=A,a==null?f.shapeFlag&512?g.ctx.activate(f,p,y,C,F):ae(f,p,y,g,_,C,F):Ae(a,f,F)},ae=(a,f,p,y,g,_,C)=>{const A=a.component=xf(a,y,g);if(bl(a)&&(A.ctx.renderer=Y),Cf(A),A.asyncDep){if(g&&g.registerDep(A,ge),!a.el){const F=A.subTree=ot($n);L(null,F,f,p)}return}ge(A,a,f,p,g,_,C)},Ae=(a,f,p)=>{const y=f.component=a.component;if(Iu(a,f,p))if(y.asyncDep&&!y.asyncResolved){fe(y,f,p);return}else y.next=f,Eu(y.update),y.update();else f.el=a.el,y.vnode=f},ge=(a,f,p,y,g,_,C)=>{const A=()=>{if(a.isMounted){let{next:J,bu:q,u:G,parent:Z,vnode:ie}=a,he=J,me;Rn(a,!1),J?(J.el=ie.el,fe(a,J,C)):J=ie,q&&hr(q),(me=J.props&&J.props.onVnodeBeforeUpdate)&&Vt(me,Z,J,ie),Rn(a,!0);const te=us(a),m=a.subTree;a.subTree=te,S(m,te,w(m.el),K(m),a,g,_),J.el=te.el,he===null&&Fu(a,te.el),G&&pt(G,g),(me=J.props&&J.props.onVnodeUpdated)&&pt(()=>Vt(me,Z,J,ie),g)}else{let J;const{el:q,props:G}=f,{bm:Z,m:ie,parent:he}=a,me=yr(f);if(Rn(a,!1),Z&&hr(Z),!me&&(J=G&&G.onVnodeBeforeMount)&&Vt(J,he,f),Rn(a,!0),q&&D){const te=()=>{a.subTree=us(a),D(q,a.subTree,a,g,null)};me?f.type.__asyncLoader().then(()=>!a.isUnmounted&&te()):te()}else{const te=a.subTree=us(a);S(null,te,p,y,a,g,_),f.el=te.el}if(ie&&pt(ie,g),!me&&(J=G&&G.onVnodeMounted)){const te=f;pt(()=>Vt(J,he,te),g)}(f.shapeFlag&256||he&&yr(he.vnode)&&he.vnode.shapeFlag&256)&&a.a&&pt(a.a,g),a.isMounted=!0,f=p=y=null}},F=a.effect=new vo(A,()=>So(M),a.scope),M=a.update=()=>F.run();M.id=a.uid,Rn(a,!0),M()},fe=(a,f,p)=>{f.component=a;const y=a.vnode.props;a.vnode=f,a.next=null,lf(a,f.props,y,p),ff(a,f.children,p),kr(),ea(),Dr()},oe=(a,f,p,y,g,_,C,A,F=!1)=>{const M=a&&a.children,J=a?a.shapeFlag:0,q=f.children,{patchFlag:G,shapeFlag:Z}=f;if(G>0){if(G&128){Ue(M,q,p,y,g,_,C,A,F);return}else if(G&256){He(M,q,p,y,g,_,C,A,F);return}}Z&8?(J&16&&Ie(M,g,_),q!==M&&d(p,q)):J&16?Z&16?Ue(M,q,p,y,g,_,C,A,F):Ie(M,g,_,!0):(J&8&&d(p,""),Z&16&&re(q,p,y,g,_,C,A,F))},He=(a,f,p,y,g,_,C,A,F)=>{a=a||ur,f=f||ur;const M=a.length,J=f.length,q=Math.min(M,J);let G;for(G=0;G<q;G++){const Z=f[G]=F?kn(f[G]):nn(f[G]);S(a[G],Z,p,null,g,_,C,A,F)}M>J?Ie(a,g,_,!0,!1,q):re(f,p,y,g,_,C,A,F,q)},Ue=(a,f,p,y,g,_,C,A,F)=>{let M=0;const J=f.length;let q=a.length-1,G=J-1;for(;M<=q&&M<=G;){const Z=a[M],ie=f[M]=F?kn(f[M]):nn(f[M]);if(or(Z,ie))S(Z,ie,p,null,g,_,C,A,F);else break;M++}for(;M<=q&&M<=G;){const Z=a[q],ie=f[G]=F?kn(f[G]):nn(f[G]);if(or(Z,ie))S(Z,ie,p,null,g,_,C,A,F);else break;q--,G--}if(M>q){if(M<=G){const Z=G+1,ie=Z<J?f[Z].el:y;for(;M<=G;)S(null,f[M]=F?kn(f[M]):nn(f[M]),p,ie,g,_,C,A,F),M++}}else if(M>G)for(;M<=q;)je(a[M],g,_,!0),M++;else{const Z=M,ie=M,he=new Map;for(M=ie;M<=G;M++){const Q=f[M]=F?kn(f[M]):nn(f[M]);Q.key!=null&&he.set(Q.key,M)}let me,te=0;const m=G-ie+1;let h=!1,v=0;const T=new Array(m);for(M=0;M<m;M++)T[M]=0;for(M=Z;M<=q;M++){const Q=a[M];if(te>=m){je(Q,g,_,!0);continue}let ee;if(Q.key!=null)ee=he.get(Q.key);else for(me=ie;me<=G;me++)if(T[me-ie]===0&&or(Q,f[me])){ee=me;break}ee===void 0?je(Q,g,_,!0):(T[ee-ie]=M+1,ee>=v?v=ee:h=!0,S(Q,f[ee],p,null,g,_,C,A,F),te++)}const I=h?pf(T):ur;for(me=I.length-1,M=m-1;M>=0;M--){const Q=ie+M,ee=f[Q],pe=Q+1<J?f[Q+1].el:y;T[M]===0?S(null,ee,p,pe,g,_,C,A,F):h&&(me<0||M!==I[me]?et(ee,p,pe,2):me--)}}},et=(a,f,p,y,g=null)=>{const{el:_,type:C,transition:A,children:F,shapeFlag:M}=a;if(M&6){et(a.component.subTree,f,p,y);return}if(M&128){a.suspense.move(f,p,y);return}if(M&64){C.move(a,f,p,Y);return}if(C===rt){r(_,f,p);for(let q=0;q<F.length;q++)et(F[q],f,p,y);r(a.anchor,f,p);return}if(C===ps){P(a,f,p);return}if(y!==2&&M&1&&A)if(y===0)A.beforeEnter(_),r(_,f,p),pt(()=>A.enter(_),g);else{const{leave:q,delayLeave:G,afterLeave:Z}=A,ie=()=>r(_,f,p),he=()=>{q(_,()=>{ie(),Z&&Z()})};G?G(_,ie,he):he()}else r(_,f,p)},je=(a,f,p,y=!1,g=!1)=>{const{type:_,props:C,ref:A,children:F,dynamicChildren:M,shapeFlag:J,patchFlag:q,dirs:G}=a;if(A!=null&&Ms(A,null,p,a,!0),J&256){f.ctx.deactivate(a);return}const Z=J&1&&G,ie=!yr(a);let he;if(ie&&(he=C&&C.onVnodeBeforeUnmount)&&Vt(he,f,a),J&6)ue(a.component,p,y);else{if(J&128){a.suspense.unmount(p,y);return}Z&&Bn(a,null,f,"beforeUnmount"),J&64?a.type.remove(a,f,p,g,Y,y):M&&(_!==rt||q>0&&q&64)?Ie(M,f,p,!1,!0):(_===rt&&q&384||!g&&J&16)&&Ie(F,f,p),y&&Mt(a)}(ie&&(he=C&&C.onVnodeUnmounted)||Z)&&pt(()=>{he&&Vt(he,f,a),Z&&Bn(a,null,f,"unmounted")},p)},Mt=a=>{const{type:f,el:p,anchor:y,transition:g}=a;if(f===rt){ye(p,y);return}if(f===ps){$(a);return}const _=()=>{i(p),g&&!g.persisted&&g.afterLeave&&g.afterLeave()};if(a.shapeFlag&1&&g&&!g.persisted){const{leave:C,delayLeave:A}=g,F=()=>C(p,_);A?A(a.el,_,F):F()}else _()},ye=(a,f)=>{let p;for(;a!==f;)p=x(a),i(a),a=p;i(f)},ue=(a,f,p)=>{const{bum:y,scope:g,update:_,subTree:C,um:A}=a;y&&hr(y),g.stop(),_&&(_.active=!1,je(C,a,f,p)),A&&pt(A,f),pt(()=>{a.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Ie=(a,f,p,y=!1,g=!1,_=0)=>{for(let C=_;C<a.length;C++)je(a[C],f,p,y,g)},K=a=>a.shapeFlag&6?K(a.component.subTree):a.shapeFlag&128?a.suspense.next():x(a.anchor||a.el),z=(a,f,p)=>{a==null?f._vnode&&je(f._vnode,null,null,!0):S(f._vnode||null,a,f,null,null,null,p),ea(),fl(),f._vnode=a},Y={p:S,um:je,m:et,r:Mt,mt:ae,mc:re,pc:oe,pbc:b,n:K,o:e};let X,D;return t&&([X,D]=t(Y)),{render:z,hydrate:X,createApp:sf(z,X)}}function Rn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Nl(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=kn(i[s]),l.el=o.el),n||Nl(o,l)),l.type===ts&&(l.el=o.el)}}function pf(e){const t=e.slice(),n=[0];let r,i,s,o,l;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,e[n[l]]<c?s=l+1:o=l;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const yf=e=>e.__isTeleport,rt=Symbol.for("v-fgt"),ts=Symbol.for("v-txt"),$n=Symbol.for("v-cmt"),ps=Symbol.for("v-stc"),Lr=[];let zt=null;function le(e=!1){Lr.push(zt=e?null:[])}function mf(){Lr.pop(),zt=Lr[Lr.length-1]||null}let Jr=1;function ua(e){Jr+=e}function Il(e){return e.dynamicChildren=Jr>0?zt||ur:null,mf(),Jr>0&&zt&&zt.push(e),e}function ke(e,t,n,r,i,s){return Il(j(e,t,n,r,i,s,!0))}function yt(e,t,n,r,i){return Il(ot(e,t,n,r,i,!0))}function Oo(e){return e?e.__v_isVNode===!0:!1}function or(e,t){return e.type===t.type&&e.key===t.key}const ns="__vInternal",Fl=({key:e})=>e??null,Ti=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ut(e)||wt(e)||Oe(e)?{i:xt,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,r=0,i=null,s=e===rt?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fl(t),ref:t&&Ti(t),scopeId:pl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:xt};return l?(Ao(u,n),s&128&&e.normalize(u)):n&&(u.shapeFlag|=ut(n)?8:16),Jr>0&&!o&&zt&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&zt.push(u),u}const ot=gf;function gf(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Wu)&&(e=$n),Oo(e)){const l=Gn(e,t,!0);return n&&Ao(l,n),Jr>0&&!s&&zt&&(l.shapeFlag&6?zt[zt.indexOf(e)]=l:zt.push(l)),l.patchFlag|=-2,l}if(Sf(e)&&(e=e.__vccOpts),t){t=vf(t);let{class:l,style:u}=t;l&&!ut(l)&&(t.class=vt(l)),it(u)&&(sl(u)&&!Te(u)&&(u=ht({},u)),t.style=ri(u))}const o=ut(e)?1:yl(e)?128:yf(e)?64:it(e)?4:Oe(e)?2:0;return j(e,t,n,r,i,o,s,!0)}function vf(e){return e?sl(e)||ns in e?ht({},e):e:null}function Gn(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=e,l=t?bf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Fl(l),ref:t&&t.ref?n&&i?Te(i)?i.concat(Ti(t)):[i,Ti(t)]:Ti(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gn(e.ssContent),ssFallback:e.ssFallback&&Gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ot(e=" ",t=0){return ot(ts,null,e,t)}function Ye(e="",t=!1){return t?(le(),yt($n,null,e)):ot($n,null,e)}function nn(e){return e==null||typeof e=="boolean"?ot($n):Te(e)?ot(rt,null,e.slice()):typeof e=="object"?kn(e):ot(ts,null,String(e))}function kn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gn(e)}function Ao(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ao(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(ns in t)?t._ctx=xt:i===3&&xt&&(xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Oe(t)?(t={default:t,_ctx:xt},n=32):(t=String(t),r&64?(n=16,t=[Ot(t)]):n=8);e.children=t,e.shapeFlag|=n}function bf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=vt([t.class,r.class]));else if(i==="style")t.style=ri([t.style,r.style]);else if(zi(i)){const s=t[i],o=r[i];o&&s!==o&&!(Te(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function Vt(e,t,n,r=null){Qt(e,t,7,[n,r])}const _f=Tl();let wf=0;function xf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||_f,s={uid:wf++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ja(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ol(r,i),emitsOptions:dl(r,i),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:r.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Pu.bind(null,s),e.ce&&e.ce(s),s}let mt=null;const Ml=()=>mt||xt;let Po,rr,fa="__VUE_INSTANCE_SETTERS__";(rr=Ss()[fa])||(rr=Ss()[fa]=[]),rr.push(e=>mt=e),Po=e=>{rr.length>1?rr.forEach(t=>t(e)):rr[0](e)};const xr=e=>{Po(e),e.scope.on()},Jn=()=>{mt&&mt.scope.off(),Po(null)};function Ll(e){return e.vnode.shapeFlag&4}let Wr=!1;function Cf(e,t=!1){Wr=t;const{props:n,children:r}=e.vnode,i=Ll(e);af(e,n,i,t),uf(e,r);const s=i?kf(e,t):void 0;return Wr=!1,s}function kf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Co(new Proxy(e.ctx,zu));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?Rl(e):null;xr(e),kr();const s=An(r,e,0,[e.props,i]);if(Dr(),Jn(),Ka(s)){if(s.then(Jn,Jn),t)return s.then(o=>{ha(e,o,t)}).catch(o=>{Qi(o,e,0)});e.asyncDep=s}else ha(e,s,t)}else Bl(e,t)}function ha(e,t,n){Oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:it(t)&&(e.setupState=ll(t)),Bl(e,n)}let da;function Bl(e,t,n){const r=e.type;if(!e.render){if(!t&&da&&!r.render){const i=r.template||To(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:u}=r,c=ht(ht({isCustomElement:s,delimiters:l},o),u);r.render=da(i,c)}}e.render=r.render||Xt}xr(e),kr(),Qu(e),Dr(),Jn()}function Df(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Ft(e,"get","$attrs"),t[n]}}))}function Rl(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Df(e)},slots:e.slots,emit:e.emit,expose:t}}function rs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ll(Co(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Mr)return Mr[n](e)},has(t,n){return n in t||n in Mr}}))}function pa(e,t=!0){return Oe(e)?e.displayName||e.name:e.name||t&&e.__name}function Sf(e){return Oe(e)&&"__vccOpts"in e}const jl=(e,t)=>ku(e,t,Wr),Tf=Symbol.for("v-scx"),Ef=()=>Si(Tf),Of="3.3.4",Af="http://www.w3.org/2000/svg",Un=typeof document<"u"?document:null,ya=Un&&Un.createElement("template"),Pf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Un.createElementNS(Af,e):Un.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Un.createTextNode(e),createComment:e=>Un.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Un.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ya.innerHTML=r?`<svg>${e}</svg>`:e;const l=ya.content;if(r){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function $f(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Nf(e,t,n){const r=e.style,i=ut(n);if(n&&!i){if(t&&!ut(t))for(const s in t)n[s]==null&&Ls(r,s,"");for(const s in n)Ls(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const ma=/\s*!important$/;function Ls(e,t,n){if(Te(n))n.forEach(r=>Ls(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=If(e,t);ma.test(n)?e.setProperty(Zn(r),n.replace(ma,""),"important"):e[r]=n}}const ga=["Webkit","Moz","ms"],ys={};function If(e,t){const n=ys[t];if(n)return n;let r=_r(t);if(r!=="filter"&&r in e)return ys[t]=r;r=Ha(r);for(let i=0;i<ga.length;i++){const s=ga[i]+r;if(s in e)return ys[t]=s}return t}const va="http://www.w3.org/1999/xlink";function Ff(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(va,t.slice(6,t.length)):e.setAttributeNS(va,t,n);else{const s=Vc(t);n==null||s&&!qa(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function Mf(e,t,n,r,i,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,i,s),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=n;const c=l==="OPTION"?e.getAttribute("value"):e.value,d=n??"";c!==d&&(e.value=d),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=qa(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function ar(e,t,n,r){e.addEventListener(t,n,r)}function Lf(e,t,n,r){e.removeEventListener(t,n,r)}function Bf(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[l,u]=Rf(t);if(r){const c=s[t]=Uf(r,i);ar(e,l,c,u)}else o&&(Lf(e,l,o,u),s[t]=void 0)}}const ba=/(?:Once|Passive|Capture)$/;function Rf(e){let t;if(ba.test(e)){t={};let r;for(;r=e.match(ba);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let ms=0;const jf=Promise.resolve(),Kf=()=>ms||(jf.then(()=>ms=0),ms=Date.now());function Uf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Qt(Vf(r,n.value),t,5,[r])};return n.value=e,n.attached=Kf(),n}function Vf(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const _a=/^on[a-z]/,Hf=(e,t,n,r,i=!1,s,o,l,u)=>{t==="class"?$f(e,r,i):t==="style"?Nf(e,n,r):zi(t)?ho(t)||Bf(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qf(e,t,r,i))?Mf(e,t,r,s,o,l,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Ff(e,t,r,i))};function qf(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&_a.test(t)&&Oe(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||_a.test(t)&&ut(n)?!1:t in e}const wa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>hr(t,n):t};function Yf(e){e.target.composing=!0}function xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Dn={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=wa(i);const s=r||i.props&&i.props.type==="number";ar(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=Ds(l)),e._assign(l)}),n&&ar(e,"change",()=>{e.value=e.value.trim()}),t||(ar(e,"compositionstart",Yf),ar(e,"compositionend",xa),ar(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=wa(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ds(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},Jf=["ctrl","shift","alt","meta"],Wf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Jf.some(n=>e[`${n}Key`]&&!t.includes(n))},At=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=Wf[t[i]];if(s&&s(n,t))return}return e(n,...r)},zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gf=(e,t)=>n=>{if(!("key"in n))return;const r=Zn(n.key);if(t.some(i=>i===r||zf[i]===r))return e(n)},Xf=ht({patchProp:Hf},Pf);let Ca;function Qf(){return Ca||(Ca=hf(Xf))}const Zf=(...e)=>{const t=Qf().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=eh(r);if(!i)return;const s=t._component;!Oe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function eh(e){return ut(e)?document.querySelector(e):e}var th=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const nh=Symbol();var ka;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ka||(ka={}));function rh(){const e=Hc(!0),t=e.run(()=>pn({}));let n=[],r=[];const i=Co({install(s){i._a=s,s.provide(nh,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!th?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const ih={key:0,class:"button-loader"},sh=j("i",{class:"font-icon animate-spin text-3xl block"},"rotate_right",-1),oh=[sh],Pt=on({__name:"Button",props:{icon:{default:""},loading:{type:Boolean,default:!1},theme:{default:"info"}},setup(e){const t=e,n=Gu();return(r,i)=>(le(),ke("button",{class:vt(["button",[`button--${t.theme}`,t.loading?"pointer-events-none":"",t.icon?"px-3 py-1.5 ":"px-3 py-2.5"]])},[t.loading?(le(),ke("div",ih,oh)):Ye("",!0),t.icon?(le(),ke("i",{key:1,class:vt([{"opacity-0":t.loading,"mr-2":ve(n).default},"font-icon"])},Me(t.icon),3)):Ye("",!0),ve(n).default?(le(),ke("span",{key:2,class:vt({"opacity-0":t.loading})},[kl(r.$slots,"default")],2)):Ye("",!0)],2))}});var Tn=(e=>(e.ReviewsFilter="reviews_filter",e.ParsingResult="parsing_result",e.ProfileSavedList="profile_saved_list",e.Settings="settings",e))(Tn||{});class ah{constructor(){en(this,"active",pn("reviews_filter"));en(this,"list",[{value:"reviews_filter",text:"Фильтр отзывов",icon:"tune"},{value:"parsing_result",text:"Результаты парсинга",icon:"view_list"},{value:"profile_saved_list",text:"Список профилей",icon:"people"}])}changeTab(t){this.active.value=t}}const sn=new ah,Ze=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ct=Object.keys,Ct=Array.isArray;function $t(e,t){return typeof t!="object"||ct(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Ze.Promise||(Ze.Promise=Promise);const zr=Object.getPrototypeOf,lh={}.hasOwnProperty;function jt(e,t){return lh.call(e,t)}function Cr(e,t){typeof t=="function"&&(t=t(zr(e))),(typeof Reflect>"u"?ct:Reflect.ownKeys)(t).forEach(n=>{yn(e,n,t[n])})}const Kl=Object.defineProperty;function yn(e,t,n,r){Kl(e,t,$t(n&&jt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function mr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),yn(e.prototype,"constructor",e),{extend:Cr.bind(null,e.prototype)}}}}const ch=Object.getOwnPropertyDescriptor;function $o(e,t){let n;return ch(e,t)||(n=zr(e))&&$o(n,t)}const uh=[].slice;function ji(e,t,n){return uh.call(e,t,n)}function Ul(e,t){return t(e)}function Nr(e){if(!e)throw new Error("Assertion Failed")}function Vl(e){Ze.setImmediate?setImmediate(e):setTimeout(e,0)}function Hl(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function mn(e,t){if(jt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=mn(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l===void 0?void 0:mn(l,t.substr(o+1))}}function Zt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Nr(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Zt(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var o=t.substr(0,s),l=t.substr(s+1);if(l==="")n===void 0?Ct(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&jt(e,o)||(u=e[o]={}),Zt(u,l,n)}}else n===void 0?Ct(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ql(e){var t={};for(var n in e)jt(e,n)&&(t[n]=e[n]);return t}const fh=[].concat;function Yl(e){return fh.apply([],e)}const Jl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Yl([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Ze[e]),hh=Jl.map(e=>Ze[e]);Hl(Jl,e=>[e,!0]);let Sn=null;function si(e){Sn=typeof WeakMap<"u"&&new WeakMap;const t=Bs(e);return Sn=null,t}function Bs(e){if(!e||typeof e!="object")return e;let t=Sn&&Sn.get(e);if(t)return t;if(Ct(e)){t=[],Sn&&Sn.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Bs(e[n]))}else if(hh.indexOf(e.constructor)>=0)t=e;else{const s=zr(e);for(var i in t=s===Object.prototype?{}:Object.create(s),Sn&&Sn.set(e,t),e)jt(e,i)&&(t[i]=Bs(e[i]))}return t}const{toString:dh}={};function Rs(e){return dh.call(e).slice(8,-1)}const js=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ph=typeof js=="symbol"?function(e){var t;return e!=null&&(t=e[js])&&t.apply(e)}:function(){return null},lr={};function hn(e){var t,n,r,i;if(arguments.length===1){if(Ct(e))return e.slice();if(this===lr&&typeof e=="string")return[e];if(i=ph(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const No=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var an=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wl(e,t){an=e,zl=t}var zl=()=>!0;const yh=!new Error("").stack;function tr(){if(yh)try{throw tr.arguments,new Error}catch(e){return e}return new Error}function Ks(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(zl).map(r=>`
`+r).join("")):""}var Gl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Io=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Gl),mh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function gr(e,t){this._e=tr(),this.name=e,this.message=t}function Xl(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ki(e,t,n,r){this._e=tr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Xl(e,t)}function Br(e,t){this._e=tr(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Xl(e,t)}mr(gr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ks(this._e,2))}},toString:function(){return this.name+": "+this.message}}),mr(Ki).from(gr),mr(Br).from(gr);var Fo=Io.reduce((e,t)=>(e[t]=t+"Error",e),{});const gh=gr;var Se=Io.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=tr(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=mh[t]||n,this.inner=null)}return mr(r).from(gh),e[t]=r,e},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var Da=Gl.reduce((e,t)=>(e[t+"Error"]=Se[t],e),{}),Ei=Io.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Se[t]),e),{});function We(){}function Gr(e){return e}function vh(e,t){return e==null||e===Gr?t:function(n){return t(e(n))}}function Xn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bh(e,t){return e===We?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xn(i,this.onerror):i),s!==void 0?s:n}}function _h(e,t){return e===We?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xn(r,this.onerror):r)}}function wh(e,t){return e===We?t:function(n){var r=e.apply(this,arguments);$t(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Xn(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Xn(s,this.onerror):s),r===void 0?o===void 0?void 0:o:$t(r,o)}}function xh(e,t){return e===We?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Mo(e,t){return e===We?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}Ei.ModifyError=Ki,Ei.DexieError=gr,Ei.BulkError=Br;var Xr={};const Ql=100,[Us,Ui,Vs]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,zr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,zr(t),e]})(),Zl=Ui&&Ui.then,Oi=Us&&Us.constructor,Lo=!!Vs;var Hs=!1,Ch=Vs?()=>{Vs.then(mi)}:Ze.setImmediate?setImmediate.bind(null,mi):Ze.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{mi(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(mi,0)},Rr=function(e,t){Ir.push([e,t]),Vi&&(Ch(),Vi=!1)},qs=!0,Vi=!0,Wn=[],Ai=[],Ys=null,Js=Gr,vr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ea,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Ea(e[0],e[1])}catch{}})}},we=vr,Ir=[],zn=0,Pi=[];function ce(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=We,this._lib=!1;var t=this._PSD=we;if(an&&(this._stackHolder=tr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Xr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zs(this,this._value))}this._state=null,this._value=null,++t.ref,tc(this,e)}const Ws={get:function(){var e=we,t=Hi;function n(r,i){var s=!e.global&&(e!==we||t!==Hi);const o=s&&!vn();var l=new ce((u,c)=>{Bo(this,new ec(qi(r,e,s,o),qi(i,e,s,o),u,c,e))});return an&&ic(l,this),l}return n.prototype=Xr,n},set:function(e){yn(this,"then",e&&e.prototype===Xr?Ws:{get:function(){return e},set:Ws.set})}};function ec(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function tc(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&oi();n&&typeof n.then=="function"?tc(e,(i,s)=>{n instanceof ce?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,nc(e)),r&&ai()}},zs.bind(null,e))}catch(n){zs(e,n)}}function zs(e,t){if(Ai.push(t),e._state===null){var n=e._lib&&oi();t=Js(t),e._state=!1,e._value=t,an&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=$o(t,"stack");t._promise=e,yn(t,"stack",{get:()=>Hs?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Wn.some(i=>i._value===r._value)||Wn.push(r)}(e),nc(e),n&&ai()}}function nc(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Bo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),zn===0&&(++zn,Rr(()=>{--zn==0&&Ro()},[]))}function Bo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++zn,Rr(kh,[n,e,t])}else e._listeners.push(t)}function kh(e,t,n){try{Ys=t;var r,i=t._value;t._state?r=e(i):(Ai.length&&(Ai=[]),r=e(i),Ai.indexOf(i)===-1&&function(s){for(var o=Wn.length;o;)if(Wn[--o]._value===s._value)return void Wn.splice(o,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{Ys=null,--zn==0&&Ro(),--n.psd.ref||n.psd.finalize()}}function rc(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,o=e._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Ks(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return an&&((r=Ks(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&rc(e._prev,t,n)),t}function ic(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function mi(){oi()&&ai()}function oi(){var e=qs;return qs=!1,Vi=!1,e}function ai(){var e,t,n;do for(;Ir.length>0;)for(e=Ir,Ir=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ir.length>0);qs=!0,Vi=!0}function Ro(){var e=Wn;Wn=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Pi.slice(0),n=t.length;n;)t[--n]()}function gi(e){return new ce(Xr,!1,e)}function tt(e,t){var n=we;return function(){var r=oi(),i=we;try{return In(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{In(i,!1),r&&ai()}}}Cr(ce.prototype,{then:Ws,_then:function(e,t){Bo(this,new ec(null,null,e,t,we))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):gi(r)):this.then(null,r=>r&&r.name===t?n(r):gi(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),gi(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Hs=!0;var e=rc(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Hs=!1}}},timeout:function(e,t){return e<1/0?new ce((n,r)=>{var i=setTimeout(()=>r(new Se.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&yn(ce.prototype,Symbol.toStringTag,"Dexie.Promise"),vr.env=sc(),Cr(ce,{all:function(){var e=hn.apply(null,arguments).map(vi);return new ce(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>ce.resolve(i).then(o=>{e[s]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof ce)return e;if(e&&typeof e.then=="function")return new ce((n,r)=>{e.then(n,r)});var t=new ce(Xr,!0,e);return ic(t,Ys),t},reject:gi,race:function(){var e=hn.apply(null,arguments).map(vi);return new ce((t,n)=>{e.map(r=>ce.resolve(r).then(t,n))})},PSD:{get:()=>we,set:e=>we=e},totalEchoes:{get:()=>Hi},newPSD:Nn,usePSD:Er,scheduler:{get:()=>Rr,set:e=>{Rr=e}},rejectionMapper:{get:()=>Js,set:e=>{Js=e}},follow:(e,t)=>new ce((n,r)=>Nn((i,s)=>{var o=we;o.unhandleds=[],o.onunhandled=s,o.finalize=Xn(function(){(function(l){function u(){l(),Pi.splice(Pi.indexOf(u),1)}Pi.push(u),++zn,Rr(()=>{--zn==0&&Ro()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),Oi&&(Oi.allSettled&&yn(ce,"allSettled",function(){const e=hn.apply(null,arguments).map(vi);return new ce(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>ce.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),Oi.any&&typeof AggregateError<"u"&&yn(ce,"any",function(){const e=hn.apply(null,arguments).map(vi);return new ce((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,o)=>ce.resolve(s).then(l=>t(l),l=>{i[o]=l,--r||n(new AggregateError(i))}))})}));const _t={awaits:0,echoes:0,id:0};var Dh=0,$i=[],gs=0,Hi=0,Sh=0;function Nn(e,t,n,r){var i=we,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Sh;var o=vr.env;s.env=Lo?{Promise:ce,PromiseProp:{value:ce,configurable:!0,writable:!0},all:ce.all,race:ce.race,allSettled:ce.allSettled,any:ce.any,resolve:ce.resolve,reject:ce.reject,nthen:Sa(o.nthen,s),gthen:Sa(o.gthen,s)}:{},t&&$t(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Er(s,e,n,r);return s.ref===0&&s.finalize(),l}function Tr(){return _t.id||(_t.id=++Dh),++_t.awaits,_t.echoes+=Ql,_t.id}function vn(){return!!_t.awaits&&(--_t.awaits==0&&(_t.id=0),_t.echoes=_t.awaits*Ql,!0)}function vi(e){return _t.echoes&&e&&e.constructor===Oi?(Tr(),e.then(t=>(vn(),t),t=>(vn(),ft(t)))):e}function Th(e){++Hi,_t.echoes&&--_t.echoes!=0||(_t.echoes=_t.id=0),$i.push(we),In(e,!0)}function Eh(){var e=$i[$i.length-1];$i.pop(),In(e,!1)}function In(e,t){var n=we;if((t?!_t.echoes||gs++&&e===we:!gs||--gs&&e===we)||oc(t?Th.bind(null,e):Eh),e!==we&&(we=e,n===vr&&(vr.env=sc()),Lo)){var r=vr.env.Promise,i=e.env;Ui.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Ze,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function sc(){var e=Ze.Promise;return Lo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ze,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ui.then,gthen:e.prototype.then}:{}}function Er(e,t,n,r,i){var s=we;try{return In(e,!0),t(n,r,i)}finally{In(s,!1)}}function oc(e){Zl.call(Us,e)}function qi(e,t,n,r){return typeof e!="function"?e:function(){var i=we;n&&Tr(),In(t,!0);try{return e.apply(this,arguments)}finally{In(i,!1),r&&oc(vn)}}}function Sa(e,t){return function(n,r){return e.call(this,qi(n,t),qi(r,t))}}(""+Zl).indexOf("[native code]")===-1&&(Tr=vn=We);const Ta="unhandledrejection";function Ea(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Ze.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Ta,!0,!0),$t(r,i)):Ze.CustomEvent&&$t(r=new CustomEvent(Ta,{detail:i}),i),r&&Ze.dispatchEvent&&(dispatchEvent(r),!Ze.PromiseRejectionEvent&&Ze.onunhandledrejection))try{Ze.onunhandledrejection(r)}catch{}an&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var ft=ce.reject;function Gs(e,t,n,r){if(e.idbdb&&(e._state.openComplete||we.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Gs(e,t,n,r))):ft(s)}return i._promise(t,(s,o)=>Nn(()=>(we.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return ft(new Se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ft(new Se.DatabaseClosed);e.open().catch(We)}return e._state.dbReadyPromise.then(()=>Gs(e,t,n,r))}const Oa="3.2.4",Hn=String.fromCharCode(65535),Xs=-1/0,cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ac="String expected.",jr=[],is=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Oh=is,Ah=is,lc=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ss="__dbnames",vs="readonly",bs="readwrite";function Qn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const cc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bi(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=si(t))[e],t)}class Ph{_trans(t,n,r){const i=this._tx||we.trans,s=this.name;function o(u,c,d){if(!d.schema[s])throw new Se.NotFound("Table "+s+" not part of transaction");return n(d.idbtrans,d)}const l=oi();try{return i&&i.db===this.db?i===we.trans?i._promise(t,o,r):Nn(()=>i._promise(t,o,r),{trans:i,transless:we.transless||we}):Gs(this.db,t,[this.name],o)}finally{l&&ai()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ct(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=ct(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(d=>c.keyPath.indexOf(d)>=0)&&c.keyPath.every(d=>n.indexOf(d)>=0))[0];if(r&&this.db._maxKey!==Hn)return this.where(r.name).equals(r.keyPath.map(c=>t[c]));!r&&an&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,d){try{return s.cmp(c,d)===0}catch{return!1}}const[l,u]=n.reduce(([c,d],w)=>{const x=i[w],E=t[w];return[c||x,c||!x?Qn(d,x&&x.multi?N=>{const S=mn(N,w);return Ct(S)&&S.some(B=>o(E,B))}:N=>o(E,mn(N,w))):d]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ct(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(jt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){$t(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=bi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?ce.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Zt(t,i,o)}catch{}return o})}update(t,n){if(typeof t!="object"||Ct(t))return this.where(":id").equals(t).modify(n);{const r=mn(t,this.schema.primKey.keyPath);if(r===void 0)return ft(new Se.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ct(n).forEach(i=>{Zt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=bi(i)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?ce.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Zt(t,i,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?ce.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:cc})).then(t=>t.numFailures?ce.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let d=u&&l?t.map(bi(u)):t;return this.core.mutate({trans:o,type:"add",keys:i,values:d,wantResults:s}).then(({numFailures:w,results:x,lastResult:E,failures:N})=>{if(w===0)return s?x:E;throw new Br(`${this.name}.bulkAdd(): ${w} of ${c} operations failed`,N)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:u}=this.schema.primKey;if(u&&i)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let d=u&&l?t.map(bi(u)):t;return this.core.mutate({trans:o,type:"put",keys:i,values:d,wantResults:s}).then(({numFailures:w,results:x,lastResult:E,failures:N})=>{if(w===0)return s?x:E;throw new Br(`${this.name}.bulkPut(): ${w} of ${c} operations failed`,N)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Br(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Kr(e){var t={},n=function(o,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[o].subscribe.apply(null,c),e}if(typeof o=="string")return t[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,l,u){if(typeof o!="object"){var c;l||(l=xh),u||(u=We);var d={subscribers:[],fire:u,subscribe:function(w){d.subscribers.indexOf(w)===-1&&(d.subscribers.push(w),d.fire=l(d.fire,w))},unsubscribe:function(w){d.subscribers=d.subscribers.filter(function(x){return x!==w}),d.fire=d.subscribers.reduce(l,u)}};return t[o]=n[o]=d,d}ct(c=o).forEach(function(w){var x=c[w];if(Ct(x))s(w,c[w][0],c[w][1]);else{if(x!=="asap")throw new Se.InvalidArgument("Invalid event config");var E=s(w,Gr,function(){for(var N=arguments.length,S=new Array(N);N--;)S[N]=arguments[N];E.subscribers.forEach(function(B){Vl(function(){B.apply(null,S)})})})}})}}function Or(e,t){return mr(t).from({prototype:e}),t}function ir(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function _s(e,t){e.filter=Qn(e.filter,t)}function ws(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Qn(r(),t()):t,e.justLimit=n&&!r}function Ni(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Aa(e,t,n){const r=Ni(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function _i(e,t,n,r){const i=e.replayFilter?Qn(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(l,u,c)=>{if(!i||i(u,c,x=>u.stop(x),x=>u.fail(x))){var d=u.primaryKey,w=""+d;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(d)),jt(s,w)||(s[w]=!0,t(l,u,c))}};return Promise.all([e.or._iterate(o,n),Pa(Aa(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Pa(Aa(e,r,n),Qn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Pa(e,t,n,r){var i=tt(r?(s,o,l)=>n(r(s),o,l):n);return e.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();t&&!t(s,l=>o=l,l=>{s.stop(l),o=We},l=>{s.fail(l),o=We})||i(s.value,s,l=>o=l),o()})})}function Tt(e,t){try{const n=$a(e),r=$a(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===l?0:o<l?-1:1}(Na(e),Na(t));case"Array":return function(i,s){const o=i.length,l=s.length,u=o<l?o:l;for(let c=0;c<u;++c){const d=Tt(i[c],s[c]);if(d!==0)return d}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function $a(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Rs(e);return n==="ArrayBuffer"?"binary":n}function Na(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class $h{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,ft.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,ft.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Qn(n.algorithm,t)}_iterate(t,n){return _i(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&$t(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>_i(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(ir(r,!0))return i.count({trans:n,query:{index:Ni(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return _i(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function o(c,d){return d?o(c[r[d]],d-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function u(c,d){var w=o(c,s),x=o(d,s);return w<x?-l:w>x?l:0}return this.toArray(function(c){return c.sort(u)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ir(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Ni(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return _i(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ir(n)?ws(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):ws(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ws(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return _s(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return _s(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=Qn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ir(n,!0)&&n.limit>0)return this._read(i=>{var s=Ni(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return _s(this._ctx,function(i){var s=i.primaryKey.toString(),o=jt(r,s);return r[s]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=ct(t),o=s.length;i=function(S){for(var B=!1,L=0;L<o;++L){var O=s[L],P=t[O];mn(S,O)!==P&&(Zt(S,O,P),B=!0)}return B}}const l=n.table.core,{outbound:u,extractKey:c}=l.schema.primaryKey,d=this.db._options.modifyChunkSize||200,w=[];let x=0;const E=[],N=(S,B)=>{const{failures:L,numFailures:O}=B;x+=S-O;for(let P of ct(L))w.push(L[P])};return this.clone().primaryKeys().then(S=>{const B=L=>{const O=Math.min(d,S.length-L);return l.getMany({trans:r,keys:S.slice(L,L+O),cache:"immutable"}).then(P=>{const $=[],V=[],W=u?[]:null,H=[];for(let k=0;k<O;++k){const b=P[k],U={value:si(b),primKey:S[L+k]};i.call(U,U.value,U)!==!1&&(U.value==null?H.push(S[L+k]):u||Tt(c(b),c(U.value))===0?(V.push(U.value),u&&W.push(S[L+k])):(H.push(S[L+k]),$.push(U.value)))}const re=ir(n)&&n.limit===1/0&&(typeof t!="function"||t===xs)&&{index:n.index,range:n.range};return Promise.resolve($.length>0&&l.mutate({trans:r,type:"add",values:$}).then(k=>{for(let b in k.failures)H.splice(parseInt(b),1);N($.length,k)})).then(()=>(V.length>0||re&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:W,values:V,criteria:re,changeSpec:typeof t!="function"&&t}).then(k=>N(V.length,k))).then(()=>(H.length>0||re&&t===xs)&&l.mutate({trans:r,type:"delete",keys:H,criteria:re}).then(k=>N(H.length,k))).then(()=>S.length>L+O&&B(L+d))})};return B(0).then(()=>{if(w.length>0)throw new Ki("Error modifying one or more objects",w,x,E);return S.length})})})}delete(){var t=this._ctx,n=t.range;return ir(t)&&(t.isPrimKey&&!Ah||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:l,lastResult:u,results:c,numFailures:d})=>{if(d)throw new Ki("Could not delete some values",Object.keys(l).map(w=>l[w]),o-d);return o-d}))}):this.modify(xs)}}const xs=(e,t)=>t.value=null;function Nh(e,t){return e<t?-1:e===t?0:1}function Ih(e,t){return e>t?-1:e===t?0:1}function Rt(e,t,n){var r=e instanceof fc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function sr(e){return new e.Collection(e,()=>uc("")).limit(0)}function Fh(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),l=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;i(e[u],c)<0&&(l=u)}return o<r.length&&s==="next"?e+n.substr(e.length):o<e.length&&s==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function wi(e,t,n,r){var i,s,o,l,u,c,d,w=n.length;if(!n.every(S=>typeof S=="string"))return Rt(e,ac);function x(S){i=function(L){return L==="next"?O=>O.toUpperCase():O=>O.toLowerCase()}(S),s=function(L){return L==="next"?O=>O.toLowerCase():O=>O.toUpperCase()}(S),o=S==="next"?Nh:Ih;var B=n.map(function(L){return{lower:s(L),upper:i(L)}}).sort(function(L,O){return o(L.lower,O.lower)});l=B.map(function(L){return L.upper}),u=B.map(function(L){return L.lower}),c=S,d=S==="next"?"":r}x("next");var E=new e.Collection(e,()=>xn(l[0],u[w-1]+r));E._ondirectionchange=function(S){x(S)};var N=0;return E._addAlgorithm(function(S,B,L){var O=S.key;if(typeof O!="string")return!1;var P=s(O);if(t(P,u,N))return!0;for(var $=null,V=N;V<w;++V){var W=Fh(O,P,l[V],u[V],o,c);W===null&&$===null?N=V+1:($===null||o($,W)>0)&&($=W)}return B($!==null?function(){S.continue($+d)}:L),!1}),E}function xn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function uc(e){return{type:1,lower:e,upper:e}}class fc{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?sr(this):new this.Collection(this,()=>xn(t,n,!r,!i))}catch{return Rt(this,cn)}}equals(t){return t==null?Rt(this,cn):new this.Collection(this,()=>uc(t))}above(t){return t==null?Rt(this,cn):new this.Collection(this,()=>xn(t,void 0,!0))}aboveOrEqual(t){return t==null?Rt(this,cn):new this.Collection(this,()=>xn(t,void 0,!1))}below(t){return t==null?Rt(this,cn):new this.Collection(this,()=>xn(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Rt(this,cn):new this.Collection(this,()=>xn(void 0,t))}startsWith(t){return typeof t!="string"?Rt(this,ac):this.between(t,t+Hn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):wi(this,(n,r)=>n.indexOf(r[0])===0,[t],Hn)}equalsIgnoreCase(t){return wi(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=hn.apply(lr,arguments);return t.length===0?sr(this):wi(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=hn.apply(lr,arguments);return t.length===0?sr(this):wi(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Hn)}anyOf(){const t=hn.apply(lr,arguments);let n=this._cmp;try{t.sort(n)}catch{return Rt(this,cn)}if(t.length===0)return sr(this);const r=new this.Collection(this,()=>xn(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,o,l)=>{const u=s.key;for(;n(u,t[i])>0;)if(++i,i===t.length)return o(l),!1;return n(u,t[i])===0||(o(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[Xs,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=hn.apply(lr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Rt(this,cn)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Xs,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,l=this._max;if(t.length===0)return sr(this);if(!t.every(O=>O[0]!==void 0&&O[1]!==void 0&&i(O[0],O[1])<=0))return Rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);const u=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let d,w=i;function x(O,P){return w(O[0],P[0])}try{d=t.reduce(function(O,P){let $=0,V=O.length;for(;$<V;++$){const W=O[$];if(r(P[0],W[1])<0&&r(P[1],W[0])>0){W[0]=o(W[0],P[0]),W[1]=l(W[1],P[1]);break}}return $===V&&O.push(P),O},[]),d.sort(x)}catch{return Rt(this,cn)}let E=0;const N=c?O=>i(O,d[E][1])>0:O=>i(O,d[E][1])>=0,S=u?O=>s(O,d[E][0])>0:O=>s(O,d[E][0])>=0;let B=N;const L=new this.Collection(this,()=>xn(d[0][0],d[d.length-1][1],!u,!c));return L._ondirectionchange=O=>{O==="next"?(B=N,w=i):(B=S,w=s),d.sort(x)},L._addAlgorithm((O,P,$)=>{for(var V=O.key;B(V);)if(++E,E===d.length)return P($),!1;return!!function(W){return!N(W)&&!S(W)}(V)||(this._cmp(V,d[E][1])===0||this._cmp(V,d[E][0])===0||P(()=>{w===i?O.continue(d[E][0]):O.continue(d[E][1])}),!1)}),L}startsWithAnyOf(){const t=hn.apply(lr,arguments);return t.every(n=>typeof n=="string")?t.length===0?sr(this):this.inAnyRange(t.map(n=>[n,n+Hn])):Rt(this,"startsWithAnyOf() only works with strings")}}function tn(e){return tt(function(t){return Qr(t),e(t.target.error),!1})}function Qr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Zr="storagemutated",En="x-storagemutated-1",Fn=Kr(null,Zr);class Mh{_lock(){return Nr(!we.global),++this._reculock,this._reculock!==1||we.global||(we.lockOwnerFor=this),this}_unlock(){if(Nr(!we.global),--this._reculock==0)for(we.global||(we.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Er(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&we.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Nr(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(r);case"MissingAPIError":throw new Se.MissingAPI(r.message,r);default:throw new Se.OpenFailed(r)}if(!this.active)throw new Se.TransactionInactive;return Nr(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=tt(i=>{Qr(i),this._reject(t.error)}),t.onabort=tt(i=>{Qr(i),this.active&&this._reject(new Se.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=tt(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Fn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return ft(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new Se.TransactionInactive);if(this._locked())return new ce((s,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,o)},we])});if(r)return Nn(()=>{var s=new ce((o,l)=>{this._lock();const u=n(o,l,this);u&&u.then&&u.then(o,l)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new ce((s,o)=>{var l=n(s,o,this);l&&l.then&&l.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=ce.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new ce((o,l)=>{r.then(u=>n._waitingQueue.push(tt(o.bind(null,u))),u=>n._waitingQueue.push(tt(l.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(jt(n,t))return n[t];const r=this.schema[t];if(!r)throw new Se.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Qs(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+hc(t)}}function hc(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function dc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Hl(n,r=>[r.name,r])}}let ei=e=>{try{return e.only([[]]),ei=()=>[[]],[[]]}catch{return ei=()=>Hn,Hn}};function Zs(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>mn(r,t)}(e):t=>mn(t,e)}function Ia(e){return[].slice.call(e)}let Lh=0;function Ur(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Bh(e,t,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:d,lowerOpen:w,upperOpen:x}=u;return c===void 0?d===void 0?null:t.upperBound(d,!!x):d===void 0?t.lowerBound(c,!!w):t.bound(c,d,!!w,!!x)}const{schema:i,hasGetAll:s}=function(u,c){const d=Ia(u.objectStoreNames);return{schema:{name:u.name,tables:d.map(w=>c.objectStore(w)).map(w=>{const{keyPath:x,autoIncrement:E}=w,N=Ct(x),S=x==null,B={},L={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S,compound:N,keyPath:x,autoIncrement:E,unique:!0,extractKey:Zs(x)},indexes:Ia(w.indexNames).map(O=>w.index(O)).map(O=>{const{name:P,unique:$,multiEntry:V,keyPath:W}=O,H={name:P,compound:Ct(W),keyPath:W,unique:$,multiEntry:V,extractKey:Zs(W)};return B[Ur(W)]=H,H}),getIndexByKeyPath:O=>B[Ur(O)]};return B[":id"]=L.primaryKey,x!=null&&(B[Ur(x)]=L.primaryKey),L})},hasGetAll:d.length>0&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map(u=>function(c){const d=c.name;return{name:d,schema:c,mutate:function({trans:w,type:x,keys:E,values:N,range:S}){return new Promise((B,L)=>{B=tt(B);const O=w.objectStore(d),P=O.keyPath==null,$=x==="put"||x==="add";if(!$&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);const{length:V}=E||N||{length:1};if(E&&N&&E.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(V===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});let W;const H=[],re=[];let k=0;const b=R=>{++k,Qr(R)};if(x==="deleteRange"){if(S.type===4)return B({numFailures:k,failures:re,results:[],lastResult:void 0});S.type===3?H.push(W=O.clear()):H.push(W=O.delete(r(S)))}else{const[R,be]=$?P?[N,E]:[N,null]:[E,null];if($)for(let ae=0;ae<V;++ae)H.push(W=be&&be[ae]!==void 0?O[x](R[ae],be[ae]):O[x](R[ae])),W.onerror=b;else for(let ae=0;ae<V;++ae)H.push(W=O[x](R[ae])),W.onerror=b}const U=R=>{const be=R.target.result;H.forEach((ae,Ae)=>ae.error!=null&&(re[Ae]=ae.error)),B({numFailures:k,failures:re,results:x==="delete"?E:H.map(ae=>ae.result),lastResult:be})};W.onerror=R=>{b(R),U(R)},W.onsuccess=U})},getMany:({trans:w,keys:x})=>new Promise((E,N)=>{E=tt(E);const S=w.objectStore(d),B=x.length,L=new Array(B);let O,P=0,$=0;const V=H=>{const re=H.target;L[re._pos]=re.result,++$===P&&E(L)},W=tn(N);for(let H=0;H<B;++H)x[H]!=null&&(O=S.get(x[H]),O._pos=H,O.onsuccess=V,O.onerror=W,++P);P===0&&E(L)}),get:({trans:w,key:x})=>new Promise((E,N)=>{E=tt(E);const S=w.objectStore(d).get(x);S.onsuccess=B=>E(B.target.result),S.onerror=tn(N)}),query:function(w){return x=>new Promise((E,N)=>{E=tt(E);const{trans:S,values:B,limit:L,query:O}=x,P=L===1/0?void 0:L,{index:$,range:V}=O,W=S.objectStore(d),H=$.isPrimaryKey?W:W.index($.name),re=r(V);if(L===0)return E({result:[]});if(w){const k=B?H.getAll(re,P):H.getAllKeys(re,P);k.onsuccess=b=>E({result:b.target.result}),k.onerror=tn(N)}else{let k=0;const b=B||!("openKeyCursor"in H)?H.openCursor(re):H.openKeyCursor(re),U=[];b.onsuccess=R=>{const be=b.result;return be?(U.push(B?be.value:be.primaryKey),++k===L?E({result:U}):void be.continue()):E({result:U})},b.onerror=tn(N)}})}(s),openCursor:function({trans:w,values:x,query:E,reverse:N,unique:S}){return new Promise((B,L)=>{B=tt(B);const{index:O,range:P}=E,$=w.objectStore(d),V=O.isPrimaryKey?$:$.index(O.name),W=N?S?"prevunique":"prev":S?"nextunique":"next",H=x||!("openKeyCursor"in V)?V.openCursor(r(P),W):V.openKeyCursor(r(P),W);H.onerror=tn(L),H.onsuccess=tt(re=>{const k=H.result;if(!k)return void B(null);k.___id=++Lh,k.done=!1;const b=k.continue.bind(k);let U=k.continuePrimaryKey;U&&(U=U.bind(k));const R=k.advance.bind(k),be=()=>{throw new Error("Cursor not stopped")};k.trans=w,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=tt(L),k.next=function(){let ae=1;return this.start(()=>ae--?this.continue():this.stop()).then(()=>this)},k.start=ae=>{const Ae=new Promise((fe,oe)=>{fe=tt(fe),H.onerror=tn(oe),k.fail=oe,k.stop=He=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=be,fe(He)}}),ge=()=>{if(H.result)try{ae()}catch(fe){k.fail(fe)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return H.onsuccess=tt(fe=>{H.onsuccess=ge,ge()}),k.continue=b,k.continuePrimaryKey=U,k.advance=R,ge(),Ae},B(k)},L)})},count({query:w,trans:x}){const{index:E,range:N}=w;return new Promise((S,B)=>{const L=x.objectStore(d),O=E.isPrimaryKey?L:L.index(E.name),P=r(N),$=P?O.count(P):O.count();$.onsuccess=tt(V=>S(V.target.result)),$.onerror=tn(B)})}}}(u)),l={};return o.forEach(u=>l[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!l[u])throw new Error(`Table '${u}' not found`);return l[u]},MIN_KEY:-1/0,MAX_KEY:ei(t),schema:i}}function eo({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:o,indexedDB:l},u){return{dbcore:function(d,w){return w.reduce((x,{create:E})=>({...x,...E(x)}),d)}(Bh(s,o,u),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(o=>o.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Yi({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(o=>{const l=$o(o,i);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?yn(o,i,{get(){return this.table(i)},set(u){Kl(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,s))})})}function to({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Rh(e,t){return e._cfg.version-t._cfg.version}function jh(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),l=we.transless||we;Nn(()=>{we.trans=s,we.transless=l,t===0?(ct(i).forEach(u=>{Cs(n,u,i[u].primKey,i[u].indexes)}),eo(e,n),ce.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:u},c,d,w){const x=[],E=u._versions;let N=u._dbSchema=ro(u,u.idbdb,w),S=!1;const B=E.filter(O=>O._cfg.version>=c);function L(){return x.length?ce.resolve(x.shift()(d.idbtrans)).then(L):ce.resolve()}return B.forEach(O=>{x.push(()=>{const P=N,$=O._cfg.dbschema;io(u,P,w),io(u,$,w),N=u._dbSchema=$;const V=pc(P,$);V.add.forEach(H=>{Cs(w,H[0],H[1].primKey,H[1].indexes)}),V.change.forEach(H=>{if(H.recreate)throw new Se.Upgrade("Not yet support for changing primary key");{const re=w.objectStore(H.name);H.add.forEach(k=>no(re,k)),H.change.forEach(k=>{re.deleteIndex(k.name),no(re,k)}),H.del.forEach(k=>re.deleteIndex(k))}});const W=O._cfg.contentUpgrade;if(W&&O._cfg.version>c){eo(u,w),d._memoizedTables={},S=!0;let H=ql($);V.del.forEach(U=>{H[U]=P[U]}),to(u,[u.Transaction.prototype]),Yi(u,[u.Transaction.prototype],ct(H),H),d.schema=H;const re=No(W);let k;re&&Tr();const b=ce.follow(()=>{if(k=W(d),k&&re){var U=vn.bind(null,null);k.then(U,U)}});return k&&typeof k.then=="function"?ce.resolve(k):b.then(()=>k)}}),x.push(P=>{(!S||!Oh)&&function($,V){[].slice.call(V.db.objectStoreNames).forEach(W=>$[W]==null&&V.db.deleteObjectStore(W))}(O._cfg.dbschema,P),to(u,[u.Transaction.prototype]),Yi(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),d.schema=u._dbSchema})}),L().then(()=>{var O,P;P=w,ct(O=N).forEach($=>{P.db.objectStoreNames.contains($)||Cs(P,$,O[$].primKey,O[$].indexes)})})}(e,t,s,n).catch(o)})}function pc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!is)o.recreate=!0,n.change.push(o);else{const l=i.idxByName,u=s.idxByName;let c;for(c in l)u[c]||o.del.push(c);for(c in u){const d=l[c],w=u[c];d?d.src!==w.src&&o.change.push(w):o.add.push(w)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function Cs(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>no(i,s)),i}function no(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ro(e,t,n){const r={};return ji(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const l=Qs(hc(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),u=[];for(let d=0;d<s.indexNames.length;++d){const w=s.index(s.indexNames[d]);o=w.keyPath;var c=Qs(w.name,o,!!w.unique,!!w.multiEntry,!1,o&&typeof o!="string",!1);u.push(c)}r[i]=dc(i,l,u)}),r}function io({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const u=o.indexNames[l],c=o.index(u).keyPath,d=typeof c=="string"?c:"["+ji(c).join("+")+"]";if(t[s]){const w=t[s].idxByName[d];w&&(w.name=u,delete t[s].idxByName[d],t[s].idxByName[u]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ze.WorkerGlobalScope&&Ze instanceof Ze.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Kh{_parseStoresSpec(t,n){ct(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((o,l)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Qs(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Ct(c),l===0)}),s=i.shift();if(s.multi)throw new Se.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),n[r]=dc(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?$t(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(o=>{$t(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,to(n,[n._allTables,n,n.Transaction.prototype]),Yi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ct(s),s),n._storeNames=ct(s),this}upgrade(t){return this._cfg.contentUpgrade=Mo(this._cfg.contentUpgrade||We,t),this}}function jo(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new lt(ss,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ko(e){return e&&typeof e.databases=="function"}function so(e){return Nn(function(){return we.letThrough=!0,e()})}function Uh(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Vh(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?ft(t.dbOpenError):e);an&&(t.openCanceller._stackHolder=tr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Se.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,l=!1;return ce.race([r,(typeof navigator>"u"?ce.resolve():Uh()).then(()=>new ce((u,c)=>{if(i(),!n)throw new Se.MissingAPI;const d=e.name,w=t.autoSchema?n.open(d):n.open(d,Math.round(10*e.verno));if(!w)throw new Se.MissingAPI;w.onerror=tn(c),w.onblocked=tt(e._fireOnBlocked),w.onupgradeneeded=tt(x=>{if(o=w.transaction,t.autoSchema&&!e._options.allowEmptyDB){w.onerror=Qr,o.abort(),w.result.close();const N=n.deleteDatabase(d);N.onsuccess=N.onerror=tt(()=>{c(new Se.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{o.onerror=tn(c);var E=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;l=E<1,e._novip.idbdb=w.result,jh(e,E/10,o,c)}},c),w.onsuccess=tt(()=>{o=null;const x=e._novip.idbdb=w.result,E=ji(x.objectStoreNames);if(E.length>0)try{const S=x.transaction((N=E).length===1?N[0]:N,"readonly");t.autoSchema?function({_novip:B},L,O){B.verno=L.version/10;const P=B._dbSchema=ro(0,L,O);B._storeNames=ji(L.objectStoreNames,0),Yi(B,[B._allTables],ct(P),P)}(e,x,S):(io(e,e._dbSchema,S),function(B,L){const O=pc(ro(0,B.idbdb,L),B._dbSchema);return!(O.add.length||O.change.some(P=>P.add.length||P.change.length))}(e,S)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),eo(e,S)}catch{}var N;jr.push(e),x.onversionchange=tt(S=>{t.vcFired=!0,e.on("versionchange").fire(S)}),x.onclose=tt(S=>{e.on("close").fire(S)}),l&&function({indexedDB:S,IDBKeyRange:B},L){!Ko(S)&&L!==ss&&jo(S,B).put({name:L}).catch(We)}(e._deps,d),u()},c)}))]).then(()=>(i(),t.onReadyBeingFired=[],ce.resolve(so(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(Mo,We);return t.onReadyBeingFired=[],ce.resolve(so(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),ft(u)}).finally(()=>{t.openComplete=!0,s()})}function oo(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return o=>{var l=s(o),u=l.value;return l.done?u:u&&typeof u.then=="function"?u.then(n,r):Ct(u)?Promise.all(u).then(n,r):n(u)}}return i(t)()}function Hh(e,t,n){var r=arguments.length;if(r<2)throw new Se.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Yl(i),n]}function yc(e,t,n,r,i){return ce.resolve().then(()=>{const s=we.transless||we,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(w){return w.name===Fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>yc(e,t,n,null,i))):ft(w)}const u=No(i);let c;u&&Tr();const d=ce.follow(()=>{if(c=i.call(o,o),c)if(u){var w=vn.bind(null,null);c.then(w,w)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=oo(c))},l);return(c&&typeof c.then=="function"?ce.resolve(c).then(w=>o.active?w:ft(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>c)).then(w=>(r&&o._resolve(),o._completion.then(()=>w))).catch(w=>(o._reject(w),ft(w)))})}function xi(e,t,n){const r=Ct(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const qh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function o(d,w,x){const E=Ur(d),N=i[E]=i[E]||[],S=d==null?0:typeof d=="string"?1:d.length,B=w>0,L={...x,isVirtual:B,keyTail:w,keyLength:S,extractKey:Zs(d),unique:!B&&x.unique};return N.push(L),L.isPrimaryKey||s.push(L),S>1&&o(S===2?d[0]:d.slice(0,S-1),w+1,x),N.sort((O,P)=>O.keyTail-P.keyTail),L}const l=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const d of r.indexes)o(d.keyPath,0,d);function u(d){const w=d.query.index;return w.isVirtual?{...d,query:{index:w,range:(x=d.query.range,E=w.keyTail,{type:x.type===1?2:x.type,lower:xi(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,E),lowerOpen:!0,upper:xi(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,E),upperOpen:!0})}}:d;var x,E}return{...n,schema:{...r,primaryKey:l,indexes:s,getIndexByKeyPath:function(d){const w=i[Ur(d)];return w&&w[0]}},count:d=>n.count(u(d)),query:d=>n.query(u(d)),openCursor(d){const{keyTail:w,isVirtual:x,keyLength:E}=d.query.index;return x?n.openCursor(u(d)).then(N=>N&&function(S){return Object.create(S,{continue:{value:function(L){L!=null?S.continue(xi(L,d.reverse?e.MAX_KEY:e.MIN_KEY,w)):d.unique?S.continue(S.key.slice(0,E).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,w)):S.continue()}},continuePrimaryKey:{value(L,O){S.continuePrimaryKey(xi(L,e.MAX_KEY,w),O)}},primaryKey:{get:()=>S.primaryKey},key:{get(){const L=S.key;return E===1?L[0]:L.slice(0,E)}},value:{get:()=>S.value}})}(N)):n.openCursor(d)}}}}}};function Uo(e,t,n,r){return n=n||{},r=r||"",ct(e).forEach(i=>{if(jt(t,i)){var s=e[i],o=t[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const l=Rs(s);l!==Rs(o)?n[r+i]=t[i]:l==="Object"?Uo(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i])}else s!==o&&(n[r+i]=t[i])}else n[r+i]=void 0}),ct(t).forEach(i=>{jt(e,i)||(n[r+i]=t[i])}),n}const Yh={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=we.trans,{deleting:l,creating:u,updating:c}=o.table(t).hook;switch(s.type){case"add":if(u.fire===We)break;return o._promise("readwrite",()=>d(s),!0);case"put":if(u.fire===We&&c.fire===We)break;return o._promise("readwrite",()=>d(s),!0);case"delete":if(l.fire===We)break;return o._promise("readwrite",()=>d(s),!0);case"deleteRange":if(l.fire===We)break;return o._promise("readwrite",()=>function(x){return w(x.trans,x.range,1e4)}(s),!0)}return n.mutate(s);function d(x){const E=we.trans,N=x.keys||function(S,B){return B.type==="delete"?B.keys:B.keys||B.values.map(S.extractKey)}(r,x);if(!N)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?{...x,keys:N}:{...x}).type!=="delete"&&(x.values=[...x.values]),x.keys&&(x.keys=[...x.keys]),function(S,B,L){return B.type==="add"?Promise.resolve([]):S.getMany({trans:B.trans,keys:L,cache:"immutable"})}(n,x,N).then(S=>{const B=N.map((L,O)=>{const P=S[O],$={onerror:null,onsuccess:null};if(x.type==="delete")l.fire.call($,L,P,E);else if(x.type==="add"||P===void 0){const V=u.fire.call($,L,x.values[O],E);L==null&&V!=null&&(L=V,x.keys[O]=L,r.outbound||Zt(x.values[O],r.keyPath,L))}else{const V=Uo(P,x.values[O]),W=c.fire.call($,V,L,P,E);if(W){const H=x.values[O];Object.keys(W).forEach(re=>{jt(H,re)?H[re]=W[re]:Zt(H,re,W[re])})}}return $});return n.mutate(x).then(({failures:L,results:O,numFailures:P,lastResult:$})=>{for(let V=0;V<N.length;++V){const W=O?O[V]:N[V],H=B[V];W==null?H.onerror&&H.onerror(L[V]):H.onsuccess&&H.onsuccess(x.type==="put"&&S[V]?x.values[V]:W)}return{failures:L,results:O,numFailures:P,lastResult:$}}).catch(L=>(B.forEach(O=>O.onerror&&O.onerror(L)),Promise.reject(L)))})}function w(x,E,N){return n.query({trans:x,values:!1,query:{index:r,range:E},limit:N}).then(({result:S})=>d({type:"delete",keys:S,trans:x}).then(B=>B.numFailures>0?Promise.reject(B.failures[0]):S.length<N?{failures:[],numFailures:0,lastResult:void 0}:w(x,{...E,lower:S[S.length-1],lowerOpen:!0},N)))}}}}})};function mc(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)Tt(t.keys[i],e[s])===0&&(r.push(n?si(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const Jh={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=mc(r.keys,r.trans._cache,r.cache==="clone");return i?ce.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?si(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Vo(e){return!("from"in e)}const fn=function(e,t){if(!this){const n=new fn;return e&&"d"in e&&$t(n,e),n}$t(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function ti(e,t,n){const r=Tt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Vo(e))return $t(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(Tt(n,e.from)<0)return i?ti(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Fa(e);if(Tt(t,e.to)>0)return s?ti(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Fa(e);Tt(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),Tt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Ji(e,i),s&&o&&Ji(e,s)}function Ji(e,t){Vo(t)||function n(r,{from:i,to:s,l:o,r:l}){ti(r,i,s),o&&n(r,o),l&&n(r,l)}(e,t)}function Wh(e,t){const n=ao(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=ao(e);let o=s.next(i.from),l=o.value;for(;!r.done&&!o.done;){if(Tt(l.from,i.to)<=0&&Tt(l.to,i.from)>=0)return!0;Tt(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(o=s.next(i.from)).value}return!1}function ao(e){let t=Vo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Tt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Tt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Fa(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...e},l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],o[i]=l[s],e[s]=o,o.d=Ma(o)}e.d=Ma(e)}function Ma({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Cr(fn.prototype,{add(e){return Ji(this,e),this},addKey(e){return ti(this,e,e),this},addKeys(e){return e.forEach(t=>ti(this,t,t)),this},[js](){return ao(this)}});const zh={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new fn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:l,outbound:u}=o,c={...i,mutate:x=>{const E=x.trans,N=E.mutatedParts||(E.mutatedParts={}),S=W=>{const H=`idb://${t}/${r}/${W}`;return N[H]||(N[H]=new fn)},B=S(""),L=S(":dels"),{type:O}=x;let[P,$]=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[[],x.values]:[];const V=x.trans._cache;return i.mutate(x).then(W=>{if(Ct(P)){O!=="delete"&&(P=W.results),B.addKeys(P);const H=mc(P,V);H||O==="add"||L.addKeys(P),(H||$)&&function(re,k,b,U){function R(be){const ae=re(be.name||"");function Ae(fe){return fe!=null?be.extractKey(fe):null}const ge=fe=>be.multiEntry&&Ct(fe)?fe.forEach(oe=>ae.addKey(oe)):ae.addKey(fe);(b||U).forEach((fe,oe)=>{const He=b&&Ae(b[oe]),Ue=U&&Ae(U[oe]);Tt(He,Ue)!==0&&(He!=null&&ge(He),Ue!=null&&ge(Ue))})}k.indexes.forEach(R)}(S,s,H,$)}else if(P){const H={from:P.lower,to:P.upper};L.add(H),B.add(H)}else B.add(n),L.add(n),s.indexes.forEach(H=>S(H.name).add(n));return W})}},d=({query:{index:x,range:E}})=>{var N,S;return[x,new fn((N=E.lower)!==null&&N!==void 0?N:e.MIN_KEY,(S=E.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},w={get:x=>[o,new fn(x.key)],getMany:x=>[o,new fn().addKeys(x.keys)],count:d,query:d,openCursor:d};return ct(w).forEach(x=>{c[x]=function(E){const{subscr:N}=we;if(N){const S=$=>{const V=`idb://${t}/${r}/${$}`;return N[V]||(N[V]=new fn)},B=S(""),L=S(":dels"),[O,P]=w[x](E);if(S(O.name||"").add(P),!O.isPrimaryKey){if(x!=="count"){const $=x==="query"&&u&&E.values&&i.query({...E,values:!1});return i[x].apply(this,arguments).then(V=>{if(x==="query"){if(u&&E.values)return $.then(({result:H})=>(B.addKeys(H),V));const W=E.values?V.result.map(l):V.result;E.values?B.addKeys(W):L.addKeys(W)}else if(x==="openCursor"){const W=V,H=E.values;return W&&Object.create(W,{key:{get:()=>(L.addKey(W.primaryKey),W.key)},primaryKey:{get(){const re=W.primaryKey;return L.addKey(re),re}},value:{get:()=>(H&&B.addKey(W.primaryKey),W.value)}})}return V})}L.add(n)}}return i[x].apply(this,arguments)}}),c}}}};class lt{constructor(t,n){this._middlewares={},this.verno=0;const r=lt.dependencies;this._options=n={addons:lt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:We,dbReadyPromise:null,cancelOpen:We,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new ce(l=>{s.dbReadyResolve=l}),s.openCanceller=new ce((l,u)=>{s.cancelOpen=u}),this._state=s,this.name=t,this.on=Kr(this,"populate","blocked","versionchange","close",{ready:[Mo,We]}),this.on.ready.subscribe=Ul(this.on.ready.subscribe,l=>(u,c)=>{lt.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||ce.resolve().then(u),c&&l(u);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(u),c&&l(u);else{l(u);const w=this;c||l(function x(){w.on.ready.unsubscribe(u),w.on.ready.unsubscribe(x)})}})}),this.Collection=(o=this,Or($h.prototype,function(l,u){this.db=o;let c=cc,d=null;if(u)try{c=u()}catch(N){d=N}const w=l._ctx,x=w.table,E=x.hook.reading.fire;this._ctx={table:x,index:w.index,isPrimKey:!w.index||x.schema.primKey.keyPath&&w.index===x.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:w.or,valueMapper:E!==Gr?E:null}})),this.Table=function(l){return Or(Ph.prototype,function(u,c,d){this.db=l,this._tx=d,this.name=u,this.schema=c,this.hook=l._allTables[u]?l._allTables[u].hook:Kr(null,{creating:[bh,We],reading:[vh,Gr],updating:[wh,We],deleting:[_h,We]})})}(this),this.Transaction=function(l){return Or(Mh.prototype,function(u,c,d,w,x){this.db=l,this.mode=u,this.storeNames=c,this.schema=d,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=Kr(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ce((E,N)=>{this._resolve=E,this._reject=N}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},E=>{var N=this.active;return this.active=!1,this.on.error.fire(E),this.parent?this.parent._reject(E):N&&this.idbtrans&&this.idbtrans.abort(),ft(E)})})}(this),this.Version=function(l){return Or(Kh.prototype,function(u){this.db=l,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Or(fc.prototype,function(u,c,d){this.db=l,this._ctx={table:u,index:c===":id"?null:c,or:d};const w=l._deps.indexedDB;if(!w)throw new Se.MissingAPI;this._cmp=this._ascending=w.cmp.bind(w),this._descending=(x,E)=>w.cmp(E,x),this._max=(x,E)=>w.cmp(x,E)>0?x:E,this._min=(x,E)=>w.cmp(x,E)<0?x:E,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=ei(n.IDBKeyRange),this._createTransaction=(l,u,c,d)=>new this.Transaction(l,u,c,this._options.chromeTransactionDurability,d),this._fireOnBlocked=l=>{this.on("blocked").fire(l),jr.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(l))},this.use(qh),this.use(Yh),this.use(zh),this.use(Jh),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new Se.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Rh),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?t():new ce((n,r)=>{if(this._state.openComplete)return r(new Se.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Se.DatabaseClosed);this.open().catch(We)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Vh(this)}_close(){const t=this._state,n=jr.indexOf(this);if(n>=0&&jr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new ce(r=>{t.dbReadyResolve=r}),t.openCanceller=new ce((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Se.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new ce((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=tt(()=>{(function({indexedDB:l,IDBKeyRange:u},c){!Ko(l)&&c!==ss&&jo(l,u).delete(c).catch(We)})(this._deps,this.name),r()}),o.onerror=tn(i),o.onblocked=this._fireOnBlocked};if(t)throw new Se.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ct(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Hh.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=we.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(c=>{var d=c instanceof this.Table?c.name:c;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===vs)o=vs;else{if(t!="rw"&&t!=bs)throw new Se.InvalidArgument("Invalid transaction mode: "+t);o=bs}if(i){if(i.mode===vs&&o===bs){if(!s)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new Se.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(d,w)=>{w(c)}):ft(c)}const u=yc.bind(null,this,o,l,i,r);return i?i._promise(o,u,"lock"):we.trans?Er(we.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!jt(this._allTables,t))throw new Se.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const Gh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Xh{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[Gh](){return this}}function gc(e,t){return ct(t).forEach(n=>{Ji(e[n]||(e[n]=new fn),t[n])}),e}function Qh(e){let t,n=!1;const r=new Xh(i=>{const s=No(e);let o=!1,l={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Fn.storagemutated.unsubscribe(E)}};i.start&&i.start(c);let d=!1,w=!1;function x(){return ct(u).some(S=>l[S]&&Wh(l[S],u[S]))}const E=S=>{gc(l,S),x()&&N()},N=()=>{if(d||o)return;l={};const S={},B=function(L){s&&Tr();const O=()=>Nn(e,{subscr:L,trans:null}),P=we.trans?Er(we.transless,O):O();return s&&P.then(vn,vn),P}(S);w||(Fn(Zr,E),w=!0),d=!0,Promise.resolve(B).then(L=>{n=!0,t=L,d=!1,o||(x()?N():(l={},u=S,i.next&&i.next(L)))},L=>{d=!1,n=!1,i.error&&i.error(L),c.unsubscribe()})};return N(),c});return r.hasValue=()=>n,r.getValue=()=>t,r}let lo;try{lo={indexedDB:Ze.indexedDB||Ze.mozIndexedDB||Ze.webkitIndexedDB||Ze.msIndexedDB,IDBKeyRange:Ze.IDBKeyRange||Ze.webkitIDBKeyRange}}catch{lo={indexedDB:null,IDBKeyRange:null}}const jn=lt;function Ii(e){let t=dn;try{dn=!0,Fn.storagemutated.fire(e)}finally{dn=t}}Cr(jn,{...Ei,delete:e=>new jn(e,{addons:[]}).delete(),exists:e=>new jn(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Ko(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==ss)):jo(t,n).toCollection().primaryKeys()}(jn.dependencies).then(e)}catch{return ft(new Se.MissingAPI)}},defineClass:()=>function(e){$t(this,e)},ignoreTransaction:e=>we.trans?Er(we.transless,e):e(),vip:so,async:function(e){return function(){try{var t=oo(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ce.resolve(t)}catch(n){return ft(n)}}},spawn:function(e,t,n){try{var r=oo(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:ce.resolve(r)}catch(i){return ft(i)}},currentTransaction:{get:()=>we.trans||null},waitFor:function(e,t){const n=ce.resolve(typeof e=="function"?jn.ignoreTransaction(e):e).timeout(t||6e4);return we.trans?we.trans.waitFor(n):n},Promise:ce,debug:{get:()=>an,set:e=>{Wl(e,e==="dexie"?()=>!0:lc)}},derive:mr,extend:$t,props:Cr,override:Ul,Events:Kr,on:Fn,liveQuery:Qh,extendObservabilitySet:gc,getByKeyPath:mn,setByKeyPath:Zt,delByKeyPath:function(e,t){typeof t=="string"?Zt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Zt(e,n,void 0)})},shallowClone:ql,deepClone:si,getObjectDiff:Uo,cmp:Tt,asap:Vl,minKey:Xs,addons:[],connections:jr,errnames:Fo,dependencies:lo,semVer:Oa,version:Oa.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),jn.maxKey=ei(jn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fn(Zr,e=>{if(!dn){let t;is?(t=document.createEvent("CustomEvent"),t.initCustomEvent(En,!0,!0,e)):t=new CustomEvent(En,{detail:e}),dn=!0,dispatchEvent(t),dn=!1}}),addEventListener(En,({detail:e})=>{dn||Ii(e)}));let dn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(En);typeof e.unref=="function"&&e.unref(),Fn(Zr,t=>{dn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ii(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Fn(Zr,t=>{try{dn||(typeof localStorage<"u"&&localStorage.setItem(En,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:En,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===En){const n=JSON.parse(t.newValue);n&&Ii(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===En&&Ii(t.changedParts)})}ce.rejectionMapper=function(e,t){if(!e||e instanceof gr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Da[e.name])return e;var n=new Da[e.name](t||e.message,e);return"stack"in e&&yn(n,"stack",{get:function(){return this.inner.stack}}),n},Wl(an,lc);const Et=new lt("avito_scraper");function Zh(e=1){Et.version(e).stores({reviewsFilter:`
            key,
            productName, 
            dateFrom, 
            dateTo, 
            ratingFrom, 
            ratingTo, 
            scrollInterval, 
            deliveryOnly, 
            *profilesLinks
        `,savedProfiles:`
            ++id,
            &url,
            name,
            comment,
            savedDate,
            *parsingResults
        `})}class ed{constructor(t){en(this,"canvas",null);en(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...t},this.init()}show(t="info",n="",r={}){var u,c;const i={...this.settings,...r,type:t},s=(u=this.canvas)==null?void 0:u.querySelector(`.${this.settings.groupContainerClass}.position-${i.position}`),o=this.createToast(n,i);if(s)return s.append(o),o;const l=this.createContainer(i);return l.append(o),(c=this.canvas)==null||c.append(l),o}drop(t,n={}){const r={...this.settings,...n};this.removeToast(t,r)}createToast(t,n){const r=document.createElement("div"),i=[n.toastClass||"",`type-${n.type}`,`position-${n.position}`||"",n.showClass||""];r.classList.add(...i),r.innerHTML=`<div class="${n.toastContentClass}">${t}</div>`,n.icon&&r.insertAdjacentHTML("afterbegin",`<div class="${n.iconClass}">${n.icon}</div>`);const s=setTimeout(()=>{this.removeToast(r,n)},n.duration);return n.hideOnClick&&r.addEventListener("click",()=>{clearTimeout(s),this.removeToast(r,n)}),r}removeToast(t,n){n.showClass&&t.classList.remove(n.showClass),n.hideClass&&t.classList.add(n.hideClass);let r=getComputedStyle(t).getPropertyValue("animation-duration");setTimeout(()=>{t.remove()},parseFloat(r)*1e3)}createContainer(t){const n=document.createElement("div");return n.classList.add(this.settings.groupContainerClass,`position-${t.position}`),n}init(){const t=document.querySelector(`.${this.settings.canvasClass}`);if(t){this.canvas=t;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const nt=new ed({hideOnClick:!0,position:"bottom-right"});var st=(e=>(e.ReviewsFilterSaved="Фильтр сохранен",e.ReviewsFilterSaveError="Не удалось сохранить фильтр",e.ReviewsFilterCleared="Фильтр сброшен (удален из базы)",e.ReviewsFilterClearError="Не удалось удалить фильтр из базы",e.ReviewsFilterGetError="Не удалось достать фильтр из базы",e.ReviewsFilterAllLinksParser="Все ссылки уже прошли парсинг",e.ParsingCanceled="Парсинг отзывов отменен",e.ParsingStarted="Парсинг отзывов запущен",e.TabOpenError="Не удалось открыть ссылку",e.ProfileCreated="Профиль добавлен в базу",e.ProfileCreateError="Не удалось сохранить профиль в базу",e.ProfileEdited="Профиль успешно обновлен",e.ProfileEditeError="Не удалось обновить профиль",e.ProfileDeleted="Профиль успешно удален",e.ProfileDeleteError="Не удалось удалить профиль",e.ProfileLinkCopied="Ссылка скопирована в буффер",e.InfoCopied="Информация скопирована в буффер",e.ProductNameCopied="Название товара скопировано в буффер",e.WaitOpenPage="Ожидаем открытия страницы ...",e.DBExportSuccess="Экпорт базы успешно завершен",e.DBExportError="Не удалось экспортировать базу",e.DBImportError="Не удалось импортировать базу",e.DBImportSuccess="Импорт базы успешно завершен",e.DBDropSuccess="База данных успешно удалена",e.DBDropError="Не удалось удалить базу данных",e))(st||{});function La(){let e=new Date;return new Date(e.setMonth(e.getMonth()-2))}function br(e){if(e)return new Date(e).toLocaleString("ru-RU")}function Ba(e){let t=e.split(".");return Date.parse(`${t[2]} ${t[1]} ${t[0]}`)}async function td(e){return new Promise(t=>{chrome.tabs.create({url:e,active:!0},async n=>{chrome.tabs.onUpdated.addListener(function r(i,s){s.status==="complete"&&i===n.id&&(chrome.tabs.onUpdated.removeListener(r),t(n))})})})}async function nd(){const t=(await chrome.tabs.query({active:!1})).find(n=>{var r;return(r=n.url)==null?void 0:r.includes("options.html")});t&&t.id&&chrome.tabs.update(t.id,{active:!0})}async function rd(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Ho(e){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",document.body.appendChild(t),t.value=e,t.focus({preventScroll:!0}),t.select();try{document.execCommand("copy")}catch(n){console.error("Ошибка при копировании в буффер",n)}t.remove()}function id(e,t){return Math.floor(Math.random()*(t-e+1))+e}class sd{constructor(){en(this,"list",pn([]));en(this,"state",Sr({contentModalText:"",contentModalVisible:!1,viewAllButtonVisible:!1,viewMoreThanFiveButtonVisible:!1}))}pushProfileInfo(t){this.list.value.push(t)}pushResultsByUrl(t,n){const r=this.list.value.find(i=>i.url===t);r&&(r.reviewsList=n,this.sortResults(r,"productName"))}sortResults(t,n){t.reviewsList&&(n==="productName"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>r.productName.localeCompare(i.productName))),n==="rating"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>i.rating-r.rating)),n==="date"&&(t.reviewsSortedBy=n,t.reviewsList.sort((r,i)=>i.date-r.date)))}copyItemInfo(t){var r;let n="";n+=`${t.name}
`,n+=`${t.url}
`,n+=`${t.rating}
`,n+=`${t.reviewsCount}
`,n+=`${t.subscribers}
`,n+=`${t.deliveryInfo}
`,n+=`${br(t.parsingDate)}



`,this.sortResults(t,"productName"),(r=t.reviewsList)==null||r.forEach(i=>{let s=new Date(i.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(s);n+=`${i.productName}~${o}${i.delivery?"~Delivery":""}
`}),n&&(Ho(n),nt.show("success",st.InfoCopied))}getViewAllContent(t=!0){let n="",r=[];return this.list.value.forEach(i=>{var s;(s=i.reviewsList)==null||s.forEach(o=>{r.push({...o,color:i.color,info:`${i.name} / ${i.rating} / ${i.reviewsCount} / ${i.subscribers} / ${i.deliveryInfo}`})})}),r.sort((i,s)=>i.productName.localeCompare(s.productName)),r.forEach(i=>{let s=new Date(i.date),o=new Intl.DateTimeFormat("ru",{month:"2-digit",year:"numeric"}).format(s);t?n+=`
                    <div class="py-1 px-2 text-[14px] leading-[14px] font-medium border-b border-gray-600 mr-2 text-black" style="background-color: ${i.color}" title='${i.info}'>
                        ${i.productName}~${o}${i.delivery?"~Delivery":""}
                    </div>
                `:n+=`${i.productName}~${o}${i.delivery?"~Delivery":""}`}),n}async apiCheckInDB(t){let n=await Et.savedProfiles.where("url").equals(t.url).toArray();if(n.length&&n[0]){let r=n[0];t.id=r.id,t.savedDate=r.savedDate,t.comment=r.comment,t.existsInDataBase=!0}return null}async apiProfileCreate(t){try{let n=JSON.parse(JSON.stringify(t)),r={url:n.url,name:n.name,comment:n.comment,savedDate:Date.now(),opened:!1,loading:!1,parsingResults:[{parsingDate:n.parsingDate,rating:n.rating,reviewsCount:n.reviewsCount,deliveryInfo:n.deliveryInfo,subscribers:n.subscribers}]};const i=await Et.savedProfiles.add(r);t.id=i,t.existsInDataBase=!0,t.savedDate=r.savedDate,t.comment=r.comment,nt.show("success",st.ProfileCreated)}catch(n){console.log(n),nt.show("error",st.ProfileCreateError)}finally{}}}const Le=new sd,od={class:"mb-8 border-b border-gray-500 sticky top-0 z-[100] bg-gray-700"},ad={class:"centered py-3 flex flex-wrap items-center gap-3"},ld=on({__name:"Header",setup(e){async function t(){Le.state.contentModalVisible=!0,Le.state.contentModalText=Le.getViewAllContent()}async function n(){Le.state.contentModalVisible=!0,Le.state.contentModalText=Le.getViewAllContent()}return(r,i)=>(le(),ke("header",od,[j("div",ad,[(le(!0),ke(rt,null,Yn(ve(sn).list,s=>(le(),yt(Pt,{key:s.value,icon:s.icon,class:vt([ve(sn).active.value===s.value?"ring-2 ring-white":""]),onClick:o=>ve(sn).changeTab(s.value)},{default:gt(()=>[Ot(Me(s.text),1)]),_:2},1032,["icon","class","onClick"]))),128)),ve(Le).state.viewAllButtonVisible&&ve(Le).list.value.length>1?(le(),yt(Pt,{key:0,theme:"success",type:"button",icon:"remove_red_eye",class:"ml-auto",onClick:At(t,["stop","prevent"])},{default:gt(()=>[Ot("Все результаты")]),_:1},8,["onClick"])):Ye("",!0),ve(Le).state.viewMoreThanFiveButtonVisible&&ve(Le).list.value.length>1?(le(),yt(Pt,{key:1,theme:"success",type:"button",icon:"remove_red_eye",class:"mr-auto",onClick:At(n,["stop","prevent"])},{default:gt(()=>[Ot(" >= 5")]),_:1},8,["onClick"])):Ye("",!0),ot(Pt,{theme:"info",type:"button",icon:"settings",class:vt(["ml-auto",[ve(sn).active.value===ve(Tn).Settings?"ring-2 ring-white":""]]),onClick:i[0]||(i[0]=s=>ve(sn).changeTab(ve(Tn).Settings))},null,8,["class"])])]))}}),cd={class:"switch"},ud=["tabindex","checked"],fd=["tabindex","checked"],hd=j("div",{class:"switch__label"},null,-1),dd=on({__name:"Switch",props:{type:{default:"checkbox"},modelValue:{},tabindex:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.checked)};return(r,i)=>(le(),ke("div",cd,[r.type==="checkbox"?(le(),ke("input",{key:0,type:"checkbox",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,ud)):Ye("",!0),r.type==="radio"?(le(),ke("input",{key:1,type:"radio",tabindex:r.tabindex,checked:r.modelValue,onChange:n},null,40,fd)):Ye("",!0),hd]))}});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vc={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pd,function(){return function(){var n={d:function(D,a){for(var f in a)n.o(a,f)&&!n.o(D,f)&&Object.defineProperty(D,f,{enumerable:!0,get:a[f]})},o:function(D,a){return Object.prototype.hasOwnProperty.call(D,a)}},r={};n.d(r,{default:function(){return Y}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function o(D){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof D=="string"?a.querySelector(D):D}function l(){let{tagName:D="div",className:a="",innerHtml:f="",id:p="",attrs:y={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=document.createElement(D);return a&&g.classList.add(...a.split(" ")),p&&(g.id=p),f&&(g.innerHTML=f),y&&u(g,y),g}function u(D,a){for(let[f,p]of Object.entries(a))p!==void 0&&D.setAttribute(f,p);return D}function c(D){return new Date(D.getFullYear(),D.getMonth()+1,0).getDate()}function d(D){let a=D.getHours(),{hours:f,dayPeriod:p}=w(a);return{year:D.getFullYear(),month:D.getMonth(),fullMonth:D.getMonth()+1<10?"0"+(D.getMonth()+1):D.getMonth()+1,date:D.getDate(),fullDate:D.getDate()<10?"0"+D.getDate():D.getDate(),day:D.getDay(),hours:a,fullHours:x(a),hours12:f,dayPeriod:p,fullHours12:x(f),minutes:D.getMinutes(),fullMinutes:D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes()}}function w(D){return{dayPeriod:D>11?"pm":"am",hours:D%12==0?12:D%12}}function x(D){return D<10?"0"+D:D}function E(D){let a=10*Math.floor(D.getFullYear()/10);return[a,a+9]}function N(){let D=[];for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return f.forEach(y=>{if(typeof y=="object")for(let g in y)y[g]&&D.push(g);else y&&D.push(y)}),D.join(" ")}function S(D,a){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.days;if(!D||!a)return!1;let p=d(D),y=d(a);return{[i.days]:p.date===y.date&&p.month===y.month&&p.year===y.year,[i.months]:p.month===y.month&&p.year===y.year,[i.years]:p.year===y.year}[f]}function B(D,a,f){let p=O(D,!1).getTime(),y=O(a,!1).getTime();return f?p>=y:p>y}function L(D,a){return!B(D,a,!0)}function O(D){let a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],f=new Date(D.getTime());return typeof a!="boolean"||a||P(f),f}function P(D){return D.setHours(0,0,0,0),D}function $(D,a,f){D.length?D.forEach(p=>{p.addEventListener(a,f)}):D.addEventListener(a,f)}function V(D,a){return!(!D||D===document||D instanceof DocumentFragment)&&(D.matches(a)?D:V(D.parentNode,a))}function W(D,a,f){return D>f?f:D<a?a:D}function H(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return f.filter(y=>y).forEach(y=>{for(let[g,_]of Object.entries(y))if(_!==void 0&&_.toString()==="[object Object]"){let C=D[g]!==void 0?D[g].toString():void 0,A=_.toString(),F=Array.isArray(_)?[]:{};D[g]=D[g]?C!==A?F:D[g]:F,H(D[g],_)}else D[g]=_}),D}function re(D){let a=D;return D instanceof Date||(a=new Date(D)),isNaN(a.getTime())&&(console.log(`Unable to convert value "${D}" to Date object`),a=!1),a}function k(D){let a="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+a+")("+D+")($|<|"+a+")","g")}function b(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class U{constructor(){let{type:a,date:f,dp:p,opts:y,body:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),b(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),b(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),b(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),b(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),b(this,"onChangeFocusDate",_=>{if(!_)return void(this.focused&&this.removeFocus());let C=S(_,this.date,this.type);C?this.focus():!C&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),b(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=a,this.singleType=this.type.slice(0,-1),this.date=f,this.dp=p,this.opts=y,this.body=g,this.customData=!1,this.init()}init(){let{range:a,onRenderCell:f}=this.opts;f&&(this.customData=f({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),a&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var a;let{year:f,month:p,date:y}=d(this.date),g=((a=this.customData)===null||a===void 0?void 0:a.attrs)||{};this.$cell=l({className:this._getClassName(),attrs:{"data-year":f,"data-month":p,"data-date":y,...g}})}_getClassName(){var a,f;let p=new Date,{selectOtherMonths:y,selectOtherYears:g}=this.opts,{minDate:_,maxDate:C}=this.dp,{day:A}=d(this.date),F=this._isOutOfMinMaxRange(),M=(a=this.customData)===null||a===void 0?void 0:a.disabled,J=N("air-datepicker-cell",`-${this.singleType}-`,{"-current-":S(p,this.date,this.type),"-min-date-":_&&S(_,this.date,this.type),"-max-date-":C&&S(C,this.date,this.type)}),q="";switch(this.type){case i.days:q=N({"-weekend-":this.dp.isWeekend(A),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!y||F||M});break;case i.months:q=N({"-disabled-":F||M});break;case i.years:q=N({"-other-decade-":this.isOtherDecade,"-disabled-":F||this.isOtherDecade&&!g||M})}return N(J,q,(f=this.customData)===null||f===void 0?void 0:f.classes)}_getHtml(){var a;let{year:f,month:p,date:y}=d(this.date),{showOtherMonths:g,showOtherYears:_}=this.opts;if((a=this.customData)!==null&&a!==void 0&&a.html)return this.customData.html;switch(this.type){case i.days:return!g&&this.isOtherMonth?"":y;case i.months:return this.dp.locale[this.opts.monthsField][p];case i.years:return!_&&this.isOtherDecade?"":f}}_isOutOfMinMaxRange(){let{minDate:a,maxDate:f}=this.dp,{type:p,date:y}=this,{month:g,year:_,date:C}=d(y),A=p===i.days,F=p===i.years,M=!!a&&new Date(_,F?a.getMonth():g,A?C:a.getDate()),J=!!f&&new Date(_,F?f.getMonth():g,A?C:f.getDate());return a&&f?L(M,a)||B(J,f):a?L(M,a):f?B(J,f):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:a,rangeDateTo:f}=this.dp,p=N({"-in-range-":a&&f&&(y=this.date,g=a,_=f,B(y,g)&&L(y,_)),"-range-from-":a&&S(this.date,a,this.type),"-range-to-":f&&S(this.date,f,this.type)});var y,g,_;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),p&&this.$cell.classList.add(...p.split(" "))}_handleSelectedStatus(){let a=this.dp._checkIfDateIsSelected(this.date,this.type);a?this.select():!a&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){S(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function R(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let be={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const ae=".air-datepicker-cell";class Ae{constructor(a){let{dp:f,type:p,opts:y}=a;R(this,"handleClick",g=>{let _=g.target.closest(ae).adpCell;if(_.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let C=this.dp._checkIfDateIsSelected(_.date,_.type);C?this.dp._handleAlreadySelectedDates(C,_.date):this.dp.selectDate(_.date)}),R(this,"handleDayNameClick",g=>{let _=g.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(_),datepicker:this.dp})}),R(this,"onChangeCurrentView",g=>{g!==this.type?this.hide():(this.show(),this.render())}),R(this,"onMouseOverCell",g=>{let _=V(g.target,ae);this.dp.setFocusDate(!!_&&_.adpCell.date)}),R(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),R(this,"onClickBody",g=>{let{onClickDayName:_}=this.opts,C=g.target;C.closest(ae)&&this.handleClick(g),_&&C.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(g)}),R(this,"onMouseDown",g=>{this.pressed=!0;let _=V(g.target,ae),C=_&&_.adpCell;S(C.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),S(C.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),R(this,"onMouseMove",g=>{if(!this.pressed||!this.dp.isMinViewReached)return;g.preventDefault();let _=V(g.target,ae),C=_&&_.adpCell,{selectedDates:A,rangeDateTo:F,rangeDateFrom:M}=this.dp;if(!C||C.isDisabled)return;let{date:J}=C;if(A.length===2){if(this.rangeFromFocused&&!B(J,F)){let{hours:q,minutes:G}=d(M);J.setHours(q),J.setMinutes(G),this.dp.rangeDateFrom=J,this.dp.replaceDate(M,J)}if(this.rangeToFocused&&!L(J,M)){let{hours:q,minutes:G}=d(F);J.setHours(q),J.setMinutes(G),this.dp.rangeDateTo=J,this.dp.replaceDate(F,J)}}}),R(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),R(this,"onChangeViewDate",(g,_)=>{if(!this.isVisible)return;let C=E(g),A=E(_);switch(this.dp.currentView){case i.days:if(S(g,_,i.months))return;break;case i.months:if(S(g,_,i.years))return;break;case i.years:if(C[0]===A[0]&&C[1]===A[1])return}this.render()}),R(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(g=>{this.$cells.appendChild(g.render())})}),this.dp=f,this.type=p,this.opts=y,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:a,dynamicRange:f}=this.opts;$(this.$el,"mouseover",this.onMouseOverCell),$(this.$el,"mouseout",this.onMouseOutCell),$(this.$el,"click",this.onClickBody),a&&f&&($(this.$el,"mousedown",this.onMouseDown),$(this.$el,"mousemove",this.onMouseMove),$(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=l({className:`air-datepicker-body -${this.type}-`,innerHtml:be[this.type]}),this.$names=o(".air-datepicker-body--day-names",this.$el),this.$cells=o(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,f="",p=this.dp.isWeekend,{onClickDayName:y}=this.opts,g=a,_=0;for(;_<7;){let C=g%7;f+=`<div class="${N("air-datepicker-body--day-name",{[i.cssClassWeekend]:p(C),"-clickable-":!!y})}" data-day-index='${C}'>${this.dp.locale.daysMin[C]}</div>`,_++,g++}return f}_getDaysCells(){let{viewDate:a,locale:{firstDay:f}}=this.dp,p=c(a),{year:y,month:g}=d(a),_=new Date(y,g,1),C=new Date(y,g,p),A=_.getDay()-f,F=6-C.getDay()+f;A=A<0?A+7:A,F=F>6?F-7:F;let M=function(he,me){let{year:te,month:m,date:h}=d(he);return new Date(te,m,h-me)}(_,A),J=p+A+F,q=M.getDate(),{year:G,month:Z}=d(M),ie=0;for(;ie<J;){let he=new Date(G,Z,q+ie);this._generateCell(he),ie++}}_generateCell(a){let{type:f,dp:p,opts:y}=this,g=new U({type:f,dp:p,opts:y,date:a,body:this});return this.cells.push(g),g}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let{year:a}=this.dp.parsedViewDate,f=0;for(;f<12;)this.cells.push(this._generateCell(new Date(a,f))),f++}_generateYearCells(){let a=E(this.dp.viewDate),f=a[0]-1,p=a[1]+1,y=f;for(;y<=p;)this.cells.push(this._generateCell(new Date(y,0))),y++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case i.days:this._generateDayCells();break;case i.months:this._generateMonthCells();break;case i.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(a=>a.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}}function ge(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class fe{constructor(a){let{dp:f,opts:p}=a;ge(this,"onClickNav",y=>{let g=V(y.target,".air-datepicker-nav--action");if(!g)return;let _=g.dataset.action;this.dp[_]()}),ge(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),ge(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),ge(this,"update",()=>{let{prevHtml:y,nextHtml:g}=this.opts;this.$prev.innerHTML=y,this.$next.innerHTML=g,this._resetNavStatus(),this.render(),this.handleNavStatus()}),ge(this,"renderDelay",()=>{setTimeout(this.render)}),ge(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(y,g){for(let _ in g)g[_]?y.classList.add(_):y.classList.remove(_)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=f,this.opts=p,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=o(".air-datepicker-nav--title",this.$el),this.$prev=o('[data-action="prev"]',this.$el),this.$next=o('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=l({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:a,opts:f}=this,p=f.navTitles[a.currentView];return typeof p=="function"?p(a):a.formatDate(a.viewDate,p)}handleNavStatus(){let{disableNavWhenOutOfRange:a}=this.opts,{minDate:f,maxDate:p}=this.dp;if(!f&&!p||!a)return;let{year:y,month:g}=this.dp.parsedViewDate,_=!!f&&d(f),C=!!p&&d(p);switch(this.dp.currentView){case i.days:f&&_.month>=g&&_.year>=y&&this._disableNav("prev"),p&&C.month<=g&&C.year<=y&&this._disableNav("next");break;case i.months:f&&_.year>=y&&this._disableNav("prev"),p&&C.year<=y&&this._disableNav("next");break;case i.years:{let A=E(this.dp.viewDate);f&&_.year>=A[0]&&this._disableNav("prev"),p&&C.year<=A[1]&&this._disableNav("next");break}}}_disableNav(a){o('[data-action="'+a+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(a){for(var f=arguments.length,p=new Array(f>1?f-1:0),y=1;y<f;y++)p[y-1]=arguments[y];a.length?a.forEach(g=>{g.classList.remove(...p)}):a.classList.remove(...p)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:a,nextHtml:f}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${a}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${f}</div>`}get isNavIsFunction(){let{navTitles:a}=this.opts;return Object.keys(a).find(f=>typeof a[f]=="function")}}var oe={today:{content:D=>D.locale.today,onClick:D=>D.setViewDate(new Date)},clear:{content:D=>D.locale.clear,onClick:D=>D.clear()}};class He{constructor(a){let{dp:f,opts:p}=a;this.dp=f,this.opts=p,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=l({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:a}=this.opts;Array.isArray(a)||(a=[a]),a.forEach(f=>{let p=f;typeof f=="string"&&oe[f]&&(p=oe[f]);let y=this.createButton(p);p.onClick&&this.attachEventToButton(y,p.onClick),this.$el.appendChild(y)})}attachEventToButton(a,f){a.addEventListener("click",()=>{f(this.dp)})}createButton(a){let{content:f,className:p,tagName:y="button",attrs:g={}}=a;return l({tagName:y,innerHtml:`<span tabindex='-1'>${typeof f=="function"?f(this.dp):f}</span>`,className:N("air-datepicker-button",p),attrs:g})}render(){this.generateButtons()}}function Ue(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class et{constructor(){let{opts:a,dp:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue(this,"toggleTimepickerIsActive",y=>{this.dp.timepickerIsActive=y}),Ue(this,"onChangeSelectedDate",y=>{let{date:g,updateTime:_=!1}=y;g&&(this.setMinMaxTime(g),this.setCurrentTime(!!_&&g),this.addTimeToDate(g))}),Ue(this,"onChangeLastSelectedDate",y=>{y&&(this.setTime(y),this.render())}),Ue(this,"onChangeInputRange",y=>{let g=y.target;this[g.getAttribute("name")]=g.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),Ue(this,"onMouseEnterLeave",y=>{let g=y.target.getAttribute("name"),_=this.$minutesText;g==="hours"&&(_=this.$hoursText),_.classList.toggle("-focus-")}),Ue(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),Ue(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=a,this.dp=f;let{timeFormat:p}=this.dp.locale;p&&(p.match(k("h"))||p.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let a="input";navigator.userAgent.match(/trident/gi)&&(a="change"),$(this.$ranges,a,this.onChangeInputRange),$(this.$ranges,"mouseenter",this.onMouseEnterLeave),$(this.$ranges,"mouseleave",this.onMouseEnterLeave),$(this.$ranges,"focus",this.onFocus),$(this.$ranges,"mousedown",this.onFocus),$(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=l({className:N("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:a,hours:f,displayHours:p,minutes:y,minHours:g,minMinutes:_,maxHours:C,maxMinutes:A,dayPeriod:F,opts:{hoursStep:M,minutesStep:J}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${x(p)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${x(y)}</span>   `+(a?`<span class='air-datepicker-time--current-ampm'>${F}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${f}" min="${g}" max="${C}" step="${M}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${y}" min="${_}" max="${A}" step="${J}"/>   </div></div>`}defineDOM(){let a=f=>o(f,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=a('[name="hours"]'),this.$minutes=a('[name="minutes"]'),this.$hoursText=a(".air-datepicker-time--current-hours"),this.$minutesText=a(".air-datepicker-time--current-minutes"),this.$ampm=a(".air-datepicker-time--current-ampm")}setTime(a){this.setMinMaxTime(a),this.setCurrentTime(a)}addTimeToDate(a){a&&(a.setHours(this.hours),a.setMinutes(this.minutes))}setMinMaxTime(a){if(this.setMinMaxTimeFromOptions(),a){let{minDate:f,maxDate:p}=this.dp;f&&S(a,f)&&this.setMinTimeFromMinDate(f),p&&S(a,p)&&this.setMaxTimeFromMaxDate(p)}}setCurrentTime(a){let{hours:f,minutes:p}=a?d(a):this;this.hours=W(f,this.minHours,this.maxHours),this.minutes=W(p,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:a,minMinutes:f,maxHours:p,maxMinutes:y}=this.opts;this.minHours=W(a,0,23),this.minMinutes=W(f,0,59),this.maxHours=W(p,0,23),this.maxMinutes=W(y,0,59)}setMinTimeFromMinDate(a){let{lastSelectedDate:f}=this.dp;this.minHours=a.getHours(),f&&f.getHours()>a.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=a.getMinutes()}setMaxTimeFromMaxDate(a){let{lastSelectedDate:f}=this.dp;this.maxHours=a.getHours(),f&&f.getHours()<a.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=a.getMinutes()}updateSliders(){u(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,u(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=x(this.displayHours),this.$minutesText.innerHTML=x(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(a){this._hours=a;let{hours:f,dayPeriod:p}=w(a);this.displayHours=this.ampm?f:a,this.dayPeriod=p}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function je(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}class Mt{constructor(a){let{dp:f,opts:p}=a;je(this,"pressedKeys",new Set),je(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],y=>y.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],y=>y.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],y=>y.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],y=>y.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],y=>y.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],y=>y.year-=10],[["Control","Shift","ArrowUp"],(y,g)=>g.up()]])),je(this,"handleHotKey",y=>{let g=this.hotKeys.get(y),_=d(this.getInitialFocusDate());g(_,this.dp);let{year:C,month:A,date:F}=_,M=c(new Date(C,A));M<F&&(F=M);let J=this.dp.getClampedDate(new Date(C,A,F));this.dp.setFocusDate(J,{viewDateTransition:!0})}),je(this,"isHotKeyPressed",()=>{let y=!1,g=this.pressedKeys.size,_=C=>this.pressedKeys.has(C);for(let[C]of this.hotKeys){if(y)break;if(Array.isArray(C[0]))C.forEach(A=>{y||g!==A.length||(y=A.every(_)&&C)});else{if(g!==C.length)continue;y=C.every(_)&&C}}return y}),je(this,"isArrow",y=>y>=37&&y<=40),je(this,"onKeyDown",y=>{let{key:g,which:_}=y,{dp:C,dp:{focusDate:A},opts:F}=this;this.registerKey(g);let M=this.isHotKeyPressed();if(M)return y.preventDefault(),void this.handleHotKey(M);if(this.isArrow(_))return y.preventDefault(),void this.focusNextCell(g);if(g==="Enter"){if(C.currentView!==F.minView)return void C.down();if(A){let J=C._checkIfDateIsSelected(A);return void(J?C._handleAlreadySelectedDates(J,A):C.selectDate(A))}}g==="Escape"&&this.dp.hide()}),je(this,"onKeyUp",y=>{this.removeKey(y.key)}),this.dp=f,this.opts=p,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:a}=this.dp;a.addEventListener("keydown",this.onKeyDown),a.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:a}=this.dp;a.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:a,currentView:f,selectedDates:p,parsedViewDate:{year:y,month:g}}=this.dp,_=a||p[p.length-1];if(!_)switch(f){case i.days:_=new Date(y,g,new Date().getDate());break;case i.months:_=new Date(y,g,1);break;case i.years:_=new Date(y,0,1)}return _}focusNextCell(a){let f=this.getInitialFocusDate(),{currentView:p}=this.dp,{days:y,months:g,years:_}=i,C=d(f),A=C.year,F=C.month,M=C.date;switch(a){case"ArrowLeft":p===y&&(M-=1),p===g&&(F-=1),p===_&&(A-=1);break;case"ArrowUp":p===y&&(M-=7),p===g&&(F-=3),p===_&&(A-=4);break;case"ArrowRight":p===y&&(M+=1),p===g&&(F+=1),p===_&&(A+=1);break;case"ArrowDown":p===y&&(M+=7),p===g&&(F+=3),p===_&&(A+=4)}let J=this.dp.getClampedDate(new Date(A,F,M));this.dp.setFocusDate(J,{viewDateTransition:!0})}registerKey(a){this.pressedKeys.add(a)}removeKey(a){this.pressedKeys.delete(a)}}let ye={on(D,a){this.__events||(this.__events={}),this.__events[D]?this.__events[D].push(a):this.__events[D]=[a]},off(D,a){this.__events&&this.__events[D]&&(this.__events[D]=this.__events[D].filter(f=>f!==a))},removeAllEvents(){this.__events={}},trigger(D){for(var a=arguments.length,f=new Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];this.__events&&this.__events[D]&&this.__events[D].forEach(y=>{y(...f)})}};function ue(D,a,f){return(a=function(p){var y=function(g,_){if(typeof g!="object"||g===null)return g;var C=g[Symbol.toPrimitive];if(C!==void 0){var A=C.call(g,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(p,"string");return typeof y=="symbol"?y:String(y)}(a))in D?Object.defineProperty(D,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):D[a]=f,D}let Ie="",K="",z=!1;class Y{static buildGlobalContainer(a){z=!0,Ie=l({className:a,id:a}),o("body").appendChild(Ie)}constructor(a,f){var p=this;if(ue(this,"viewIndexes",[i.days,i.months,i.years]),ue(this,"next",()=>{let{year:_,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,C+1,1));break;case i.months:this.setViewDate(new Date(_+1,C,1));break;case i.years:this.setViewDate(new Date(_+10,0,1))}}),ue(this,"prev",()=>{let{year:_,month:C}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(_,C-1,1));break;case i.months:this.setViewDate(new Date(_-1,C,1));break;case i.years:this.setViewDate(new Date(_-10,0,1))}}),ue(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),ue(this,"setPosition",function(_){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(_=_||p.opts.position)=="function")return void(p.customHide=_({$datepicker:p.$datepicker,$target:p.$el,$pointer:p.$pointer,isViewChange:C,done:p._finishHide}));let A,F,{isMobile:M}=p.opts,J=p.$el.getBoundingClientRect(),q=p.$el.getBoundingClientRect(),G=p.$datepicker.offsetParent,Z=p.$el.offsetParent,ie=p.$datepicker.getBoundingClientRect(),he=_.split(" "),me=window.scrollY,te=window.scrollX,m=p.opts.offset,h=he[0],v=he[1];if(M)p.$datepicker.style.cssText="left: 50%; top: 50%";else{if(G===Z&&G!==document.body&&(q={top:p.$el.offsetTop,left:p.$el.offsetLeft,width:J.width,height:p.$el.offsetHeight},me=0,te=0),G!==Z&&G!==document.body){let T=G.getBoundingClientRect();q={top:J.top-T.top,left:J.left-T.left,width:J.width,height:J.height},me=0,te=0}switch(h){case"top":A=q.top-ie.height-m;break;case"right":F=q.left+q.width+m;break;case"bottom":A=q.top+q.height+m;break;case"left":F=q.left-ie.width-m}switch(v){case"top":A=q.top;break;case"right":F=q.left+q.width-ie.width;break;case"bottom":A=q.top+q.height-ie.height;break;case"left":F=q.left;break;case"center":/left|right/.test(h)?A=q.top+q.height/2-ie.height/2:F=q.left+q.width/2-ie.width/2}p.$datepicker.style.cssText=`left: ${F+te}px; top: ${A+me}px`}}),ue(this,"_setInputValue",()=>{let{opts:_,$altField:C,locale:{dateFormat:A}}=this,{altFieldDateFormat:F,altField:M}=_;M&&C&&(C.value=this._getInputValue(F)),this.$el.value=this._getInputValue(A)}),ue(this,"_getInputValue",_=>{let{selectedDates:C,opts:A}=this,{multipleDates:F,multipleDatesSeparator:M}=A;if(!C.length)return"";let J=typeof _=="function",q=J?_(F?C:C[0]):C.map(G=>this.formatDate(G,_));return q=J?q:q.join(M),q}),ue(this,"_checkIfDateIsSelected",function(_){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.days,A=!1;return p.selectedDates.some(F=>{let M=S(_,F,C);return A=M&&F,M}),A}),ue(this,"_scheduleCallAfterTransition",_=>{this._cancelScheduledCall(),_&&_(!1),this._onTransitionEnd=()=>{_&&_(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),ue(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),ue(this,"setViewDate",_=>{if(!((_=re(_))instanceof Date)||S(_,this.viewDate))return;let C=this.viewDate;this.viewDate=_;let{onChangeViewDate:A}=this.opts;if(A){let{month:F,year:M}=this.parsedViewDate;A({month:F,year:M,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,_,C)}),ue(this,"setFocusDate",function(_){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!_||(_=re(_))instanceof Date)&&(p.focusDate=_,p.opts.range&&_&&p._handleRangeOnFocus(),p.trigger(i.eventChangeFocusDate,_,C))}),ue(this,"setCurrentView",_=>{if(this.viewIndexes.includes(_)){if(this.currentView=_,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(i.eventChangeCurrentView,_),!this.views[_]){let C=this.views[_]=new Ae({dp:this,opts:this.opts,type:_});this.shouldUpdateDOM&&this.$content.appendChild(C.$el)}this.opts.onChangeView&&this.opts.onChangeView(_)}}),ue(this,"_updateLastSelectedDate",_=>{this.lastSelectedDate=_,this.trigger(i.eventChangeLastSelectedDate,_)}),ue(this,"destroy",()=>{let{showEvent:_,isMobile:C}=this.opts,A=this.$datepicker.parentNode;A&&A.removeChild(this.$datepicker),this.$el.removeEventListener(_,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),C&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),ue(this,"update",_=>{let C=H({},this.opts);H(this.opts,_);let{timepicker:A,buttons:F,range:M,selectedDates:J,isMobile:q}=this.opts,G=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!C.selectedDates&&J&&this.selectDate(J),_.view&&this.setCurrentView(_.view),this._setInputValue(),C.range&&!M?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!C.range&&M&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),C.timepicker&&!A?(G&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!C.timepicker&&A&&this._addTimepicker(),!C.buttons&&F?this._addButtons():C.buttons&&!F?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):G&&C.buttons&&F&&this.buttons.clearHtml().render(),!C.isMobile&&q?(this.treatAsInline||K||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):C.isMobile&&!q&&(this._removeMobileAttributes(),this.visible&&(K.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),G&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===i.days&&this.views[this.currentView].renderDayNames())}),ue(this,"isOtherMonth",_=>{let{month:C}=d(_);return C!==this.parsedViewDate.month}),ue(this,"isOtherYear",_=>{let{year:C}=d(_);return C!==this.parsedViewDate.year}),ue(this,"isOtherDecade",_=>{let{year:C}=d(_),[A,F]=E(this.viewDate);return C<A||C>F}),ue(this,"_onChangeSelectedDate",_=>{let{silent:C}=_;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!C&&this._triggerOnSelect()})}),ue(this,"_onChangeFocusedDate",function(_){let{viewDateTransition:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_)return;let A=!1;C&&(A=p.isOtherMonth(_)||p.isOtherYear(_)||p.isOtherDecade(_)),A&&p.setViewDate(_)}),ue(this,"_onChangeTime",_=>{let{hours:C,minutes:A}=_,F=new Date,{lastSelectedDate:M,opts:{onSelect:J}}=this,q=M;M||(q=F);let G=this.getCell(q,this.currentViewSingular),Z=G&&G.adpCell;Z&&Z.isDisabled||(q.setHours(C),q.setMinutes(A),M?(this._setInputValue(),J&&this._triggerOnSelect()):this.selectDate(q))}),ue(this,"_onFocus",_=>{this.visible||this.show()}),ue(this,"_onBlur",_=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),ue(this,"_onMouseDown",_=>{this.inFocus=!0}),ue(this,"_onMouseUp",_=>{this.inFocus=!1,this.$el.focus()}),ue(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),ue(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),ue(this,"isWeekend",_=>this.opts.weekends.includes(_)),ue(this,"getClampedDate",_=>{let{minDate:C,maxDate:A}=this,F=_;return A&&B(_,A)?F=A:C&&L(_,C)&&(F=C),F}),this.$el=o(a),!this.$el)return;this.$datepicker=l({className:"air-datepicker"}),this.opts=H({},s,f),this.$customContainer=!!this.opts.container&&o(this.opts.container),this.$altField=o(this.opts.altField||!1);let{view:y,startDate:g}=this.opts;g||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=re(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=y,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:a,treatAsInline:f,opts:{inline:p,isMobile:y,selectedDates:g,keyboardNav:_,onlyTimepicker:C}}=this,A=o("body");(!z||z&&Ie&&!A.contains(Ie))&&!p&&this.elIsInput&&!this.$customContainer&&Y.buildGlobalContainer(Y.defaultGlobalContainerId),!y||K||f||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(p||this._bindEvents(),_&&!C&&(this.keyboardNav=new Mt({dp:this,opts:a}))),g&&this.selectDate(g,{silent:!0}),this.opts.visible&&!f&&this.show(),y&&!f&&this.$el.setAttribute("readonly",!0),f&&this._createComponents()}_createMobileOverlay(){K=l({className:"air-datepicker-overlay"}),Ie.appendChild(K)}_createComponents(){let{opts:a,treatAsInline:f,opts:{inline:p,buttons:y,timepicker:g,position:_,classes:C,onlyTimepicker:A,isMobile:F}}=this;this._buildBaseHtml(),this.elIsInput&&(p||this._setPositionClasses(_)),!p&&this.elIsInput||this.$datepicker.classList.add("-inline-"),C&&this.$datepicker.classList.add(...C.split(" ")),A&&this.$datepicker.classList.add("-only-timepicker-"),F&&!f&&this._addMobileAttributes(),this.views[this.currentView]=new Ae({dp:this,type:this.currentView,opts:a}),this.nav=new fe({dp:this,opts:a}),g&&this._addTimepicker(),y&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let a in this.views)this.views[a].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){K.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){K.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:a,maxDate:f}=this.opts;this.minDate=!!a&&re(a),this.maxDate=!!f&&re(f)}_addTimepicker(){this.$timepicker=l({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new et({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=l({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new He({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:a}=this.opts;var f,p;this.elIsInput?a?(f=this.$datepicker,(p=this.$el).parentNode.insertBefore(f,p.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=o(".air-datepicker--content",this.$datepicker),this.$pointer=o(".air-datepicker--pointer",this.$datepicker),this.$nav=o(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:a,dateFormat:f,firstDay:p,timepicker:y,onlyTimepicker:g,timeFormat:_,dateTimeSeparator:C}=this.opts;var A;this.locale=(A=a,JSON.parse(JSON.stringify(A))),f&&(this.locale.dateFormat=f),_!==void 0&&_!==""&&(this.locale.timeFormat=_);let{timeFormat:F}=this.locale;if(p!==""&&(this.locale.firstDay=p),y&&typeof f!="function"){let M=F?C:"";this.locale.dateFormat=[this.locale.dateFormat,F||""].join(M)}g&&typeof f!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(a){if(typeof a=="function")return void this.$datepicker.classList.add("-custom-position-");let f=(a=a.split(" "))[0],p=`air-datepicker -${f}-${a[1]}- -from-${f}-`;this.$datepicker.classList.add(...p.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:a,minDate:f,maxDate:p}=this;p&&B(a,p)&&this.setViewDate(p),f&&L(a,f)&&this.setViewDate(f)}formatDate(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,f=arguments.length>1?arguments[1]:void 0;if(a=re(a),!(a instanceof Date))return;let p=f,y=this.locale,g=d(a),_=g.dayPeriod,C=E(a),A=Y.replacer,F={T:a.getTime(),m:g.minutes,mm:g.fullMinutes,h:g.hours12,hh:g.fullHours12,H:g.hours,HH:g.fullHours,aa:_,AA:_.toUpperCase(),E:y.daysShort[g.day],EEEE:y.days[g.day],d:g.date,dd:g.fullDate,M:g.month+1,MM:g.fullMonth,MMM:y.monthsShort[g.month],MMMM:y.months[g.month],yy:g.year.toString().slice(-2),yyyy:g.year,yyyy1:C[0],yyyy2:C[1]};for(let[M,J]of Object.entries(F))p=A(p,k(M),J);return p}down(a){this._handleUpDownActions(a,"down")}up(a){this._handleUpDownActions(a,"up")}selectDate(a){let f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:y,parsedViewDate:g,selectedDates:_}=this,{updateTime:C}=p,{moveToOtherMonthsOnSelect:A,moveToOtherYearsOnSelect:F,multipleDates:M,range:J,autoClose:q}=this.opts,G=_.length;if(Array.isArray(a))return a.forEach(Z=>{this.selectDate(Z,p)}),new Promise(Z=>{setTimeout(Z)});if((a=re(a))instanceof Date){if(y===i.days&&a.getMonth()!==g.month&&A&&(f=new Date(a.getFullYear(),a.getMonth(),1)),y===i.years&&a.getFullYear()!==g.year&&F&&(f=new Date(a.getFullYear(),0,1)),f&&this.setViewDate(f),M&&!J){if(G===M)return;this._checkIfDateIsSelected(a)||_.push(a)}else if(J)switch(G){case 1:_.push(a),this.rangeDateTo||(this.rangeDateTo=a),B(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=a),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[a],this.rangeDateFrom=a,this.rangeDateTo="";break;default:this.selectedDates=[a],this.rangeDateFrom=a}else this.selectedDates=[a];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:p==null?void 0:p.silent,date:a,updateTime:C}),this._updateLastSelectedDate(a),q&&!this.timepickerIsActive&&this.visible&&(M||J?J&&G===1&&this.hide():this.hide()),new Promise(Z=>{setTimeout(Z)})}}unselectDate(a){let f=this.selectedDates,p=this;if((a=re(a))instanceof Date)return f.some((y,g)=>{if(S(y,a))return f.splice(g,1),p.selectedDates.length?p._updateLastSelectedDate(p.selectedDates[p.selectedDates.length-1]):(p.rangeDateFrom="",p.rangeDateTo="",p._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:a}),!0})}replaceDate(a,f){let p=this.selectedDates.find(g=>S(g,a,this.currentView)),y=this.selectedDates.indexOf(p);y<0||S(this.selectedDates[y],f,this.currentView)||(this.selectedDates[y]=f,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:f,updateTime:!0}),this._updateLastSelectedDate(f))}clear(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:a.silent}),new Promise(f=>{setTimeout(f)})}show(){let{onShow:a,isMobile:f}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,a&&this._scheduleCallAfterTransition(a),f&&this._showMobileOverlay()}hide(){let{onHide:a,isMobile:f}=this.opts,p=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(y=>{!this.customHide&&(y&&p||!y&&!p)&&this._finishHide(),a&&a(y)}),f&&K.classList.remove("-active-")}_triggerOnSelect(){let a=[],f=[],{selectedDates:p,locale:y,opts:{onSelect:g,multipleDates:_,range:C}}=this,A=_||C,F=typeof y.dateFormat=="function";p.length&&(a=p.map(O),f=F?_?y.dateFormat(a):a.map(M=>y.dateFormat(M)):a.map(M=>this.formatDate(M,y.dateFormat))),g({date:A?a:a[0],formattedDate:A?f:f[0],datepicker:this})}_handleAlreadySelectedDates(a,f){let{range:p,toggleSelected:y}=this.opts;p?y?this.unselectDate(f):this.selectedDates.length!==2&&this.selectDate(f):y&&this.unselectDate(f),y||this._updateLastSelectedDate(a)}_handleUpDownActions(a,f){if(!((a=re(a||this.focusDate||this.viewDate))instanceof Date))return;let p=f==="up"?this.viewIndex+1:this.viewIndex-1;p>2&&(p=2),p<0&&(p=0),this.setViewDate(new Date(a.getFullYear(),a.getMonth(),1)),this.setCurrentView(this.viewIndexes[p])}_handleRangeOnFocus(){this.selectedDates.length===1&&(B(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(a){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.day;if(!((a=re(a))instanceof Date))return;let{year:p,month:y,date:g}=d(a),_=`[data-year="${p}"]`,C=`[data-month="${y}"]`,A={[i.day]:`${_}${C}[data-date="${g}"]`,[i.month]:`${_}${C}`,[i.year]:`${_}`};return this.views[this.currentView].$el.querySelector(A[f])}_showMobileOverlay(){K.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((a,f)=>parseFloat(f)+a,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return d(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return E(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||Ie}static replacer(a,f,p){return a.replace(f,function(y,g,_,C){return g+p+C})}}var X;return ue(Y,"defaults",s),ue(Y,"version","3.3.5"),ue(Y,"defaultGlobalContainerId","air-datepicker-global-container"),X=Y.prototype,Object.assign(X,ye),r.default}()})})(vc);var md=vc.exports;const Ra=yd(md);class gd{constructor(){en(this,"fields",Sr({profilesLinks:[{url:"",status:"new",highlight:!1}],productName:"",dateFrom:"",dateTo:"",ratingFrom:4,ratingTo:5,deliveryOnly:!1}));en(this,"openedTab",pn({}))}get newProfileLink(){return this.fields.profilesLinks.find(t=>t.status==="new")}getProfileLinkByUrl(t){return this.fields.profilesLinks.find(n=>n.url===t)}pushNewProfileLink(){this.fields.profilesLinks.push({url:"",status:"new",highlight:!1})}removeProfileLink(t){this.fields.profilesLinks.splice(t,1)}setProfileLinksStatusNew(){this.fields.profilesLinks.forEach(t=>{t.info="",t.status="new"})}setProfileLinkInfo(t,n){const r=this.getProfileLinkByUrl(t);r&&(r.info=n)}async setFilterFromDB(){try{const t=await this.apiGetFilter();if(t)return this.fields.profilesLinks=t.profilesLinks,this.fields.ratingFrom=t.ratingFrom,this.fields.ratingTo=t.ratingTo,this.fields.deliveryOnly=t.deliveryOnly,this.fields.productName=t.productName,t}catch(t){console.log(t),nt.show("error",st.ReviewsFilterGetError)}finally{}}async resetFields(){this.fields.profilesLinks=[{url:"",status:"new",highlight:!1}],this.fields.productName="",this.fields.dateFrom="",this.fields.dateTo="",this.fields.ratingFrom=4,this.fields.ratingTo=5,this.fields.deliveryOnly=!1,await this.apiRemoveFilter()}async parsingStart(){try{if(this.newProfileLink){this.apiCreateFilter();const t=this.fields.profilesLinks.map(r=>r.url);Le.list.value=Le.list.value.filter(r=>t.includes(r.url));const n=await td(this.newProfileLink.url);this.openedTab.value=n,n.id&&chrome.tabs.sendMessage(n.id,{action:"reviews-parsing-start",reviewsFilterFields:this.fields,currentUrl:this.newProfileLink.url})}else nt.show("warning",st.ReviewsFilterAllLinksParser)}catch{nt.show("error",st.TabOpenError)}}async apiRemoveFilter(){try{await Et.reviewsFilter.where("key").equals("reviewsFilter").delete(),nt.show("warning",st.ReviewsFilterCleared)}catch(t){console.log(t),nt.show("warning",st.ReviewsFilterClearError)}}async apiGetFilter(){const t=await Et.reviewsFilter.where("key").equals("reviewsFilter").toArray();if(t.length&&t[0]){const n={...t[0]};return delete n.key,n}return null}async apiCreateFilter(){try{const t=JSON.parse(JSON.stringify(this.fields));t.dateFrom=Ba(t.dateFrom),t.dateTo=Ba(t.dateTo),t.profilesLinks.forEach(r=>r.status="new"),(await Et.reviewsFilter.where("key").equals("reviewsFilter").toArray()).length?Et.reviewsFilter.update("reviewsFilter",{...t,key:"reviewsFilter"}):Et.reviewsFilter.add({...t,key:"reviewsFilter"}),nt.show("success",st.ReviewsFilterSaved)}catch(t){console.log(t),nt.show("success",st.ReviewsFilterSaveError)}}}const Ve=new gd,vd=["onSubmit"],bd={class:"grid grid-cols-4 gap-5"},_d={class:"col-span-4"},wd=j("div",{class:"text-sm font-medium mb-2"},"Ссылки на профили",-1),xd={class:"flex items-center gap-4"},Cd={class:"flex-none select-none"},kd={key:0,class:"font-icon text-3xl block text-green-400"},Dd={key:1,class:"font-icon text-3xl block text-red-400"},Sd={key:2,class:"font-icon text-3xl block text-green-400 animate-spin"},Td={key:3,class:"font-icon text-3xl block text-gray-400"},Ed=["onUpdate:modelValue","onInput"],Od={key:0,class:"flex-none cursor-pointer select-none"},Ad=["onClick"],Pd={class:"flex-none cursor-pointer select-none ml-auto"},$d=["innerHTML"],Nd=j("div",{class:"mb-2 text-sm font-medium"},"Дата от",-1),Id=j("div",{class:"mb-2 text-sm font-medium"},"Дата до",-1),Fd={class:"col-span-2"},Md=j("div",{class:"mb-2 text-sm font-medium"},"Название товара",-1),Ld=j("div",{class:"mb-2 text-sm font-medium"},"Рейтинг от",-1),Bd=j("div",{class:"mb-2 text-sm font-medium"},"Рейтинг до",-1),Rd={class:"col-span-4 select-none"},jd={class:"inline-block"},Kd=j("div",{class:"mb-3 text-sm font-medium"},"Только с доставкой",-1),Ud={class:"flex items-center gap-4 mt-10"},Vd=on({__name:"ReviewsFilter",setup(e){const t={dateFrom:null,dateTo:null},n={autoClose:!0,onSelect:({formattedDate:l,datepicker:u})=>{u.$el.id==="dateFrom"&&(Ve.fields.dateFrom=l),u.$el.id==="dateTo"&&(Ve.fields.dateTo=l)}};function r(l){Ve.fields.profilesLinks.forEach(c=>c.highlight=!1);const u=Ve.fields.profilesLinks.filter(c=>c.url===l.url);u.length>1&&(u[0].highlight=!0,l.url=""),l.status="new",l.info=""}async function i(){window.confirm("Сбросить фильтр ?")&&(Ve.resetFields(),t.dateFrom.selectDate(La()),t.dateTo.selectDate(new Date))}async function s(){Ve.apiCreateFilter()}async function o(){Ve.parsingStart()}return er(()=>{t.dateFrom=new Ra("#dateFrom",n),t.dateTo=new Ra("#dateTo",n),t.dateFrom.selectDate(La()),t.dateTo.selectDate(new Date),setTimeout(async()=>{const l=await Ve.setFilterFromDB();l&&(t.dateFrom.selectDate(l.dateFrom),t.dateTo.selectDate(l.dateTo))},0)}),ii(()=>{t.dateFrom.destroy(),t.dateTo.destroy()}),(l,u)=>(le(),ke("form",{class:"pb-20",onSubmit:At(o,["prevent"])},[j("div",bd,[j("div",_d,[wd,(le(!0),ke(rt,null,Yn(ve(Ve).fields.profilesLinks,(c,d)=>(le(),ke("div",{key:d,class:vt(d>0?"mt-5":"")},[j("div",xd,[j("div",Cd,[c.status==="success"?(le(),ke("i",kd,"check_circle")):Ye("",!0),c.status==="error"?(le(),ke("i",Dd,"cancel")):Ye("",!0),c.status==="wait"?(le(),ke("i",Sd,"rotate_right")):Ye("",!0),c.status==="new"?(le(),ke("i",Td,"watch_later")):Ye("",!0)]),Cn(j("input",{"onUpdate:modelValue":w=>c.url=w,tabindex:"1",type:"search",required:"",class:vt(["text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400",{"ring-4 ring-green-500":c.highlight}]),onInput:w=>r(c)},null,42,Ed),[[Dn,c.url]]),ve(Ve).fields.profilesLinks.length>1?(le(),ke("div",Od,[j("i",{class:"font-icon text-3xl block text-red-400",onClick:w=>ve(Ve).removeProfileLink(d)},"remove_circle_outline",8,Ad)])):Ye("",!0),j("div",Pd,[j("i",{class:"font-icon text-3xl block text-green-400",onClick:u[0]||(u[0]=w=>ve(Ve).pushNewProfileLink())},"add_circle_outline")])]),c.info?(le(),ke("div",{key:0,class:"mt-3 ml-12 font-medium",innerHTML:c.info},null,8,$d)):Ye("",!0)],2))),128))]),j("div",null,[Nd,Cn(j("input",{"onUpdate:modelValue":u[1]||(u[1]=c=>ve(Ve).fields.dateFrom=c),tabindex:"2",required:"",autocomplete:"off",type:"text",id:"dateFrom",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,ve(Ve).fields.dateFrom]])]),j("div",null,[Id,Cn(j("input",{"onUpdate:modelValue":u[2]||(u[2]=c=>ve(Ve).fields.dateTo=c),tabindex:"3",autocomplete:"off",required:"",type:"text",id:"dateTo",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,ve(Ve).fields.dateTo]])]),j("div",Fd,[Md,Cn(j("input",{"onUpdate:modelValue":u[3]||(u[3]=c=>ve(Ve).fields.productName=c),tabindex:"9",type:"search",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,ve(Ve).fields.productName]])]),j("div",null,[Ld,Cn(j("input",{"onUpdate:modelValue":u[4]||(u[4]=c=>ve(Ve).fields.ratingFrom=c),tabindex:"4",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,ve(Ve).fields.ratingFrom]])]),j("div",null,[Bd,Cn(j("input",{"onUpdate:modelValue":u[5]||(u[5]=c=>ve(Ve).fields.ratingTo=c),tabindex:"5",type:"number",min:"1",max:"5",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,ve(Ve).fields.ratingTo]])]),j("div",Rd,[j("label",jd,[Kd,ot(dd,{tabindex:6,modelValue:ve(Ve).fields.deliveryOnly,"onUpdate:modelValue":u[6]||(u[6]=c=>ve(Ve).fields.deliveryOnly=c)},null,8,["modelValue"])])])]),j("div",Ud,[ot(Pt,{tabindex:"7",theme:"success",type:"submit",icon:"find_in_page"},{default:gt(()=>[Ot("Начать парсинг")]),_:1}),ot(Pt,{tabindex:"8",theme:"info",type:"button",icon:"save",onClick:At(s,["stop","prevent"])},{default:gt(()=>[Ot("Сохранить фильтр")]),_:1},8,["onClick"]),ot(Pt,{tabindex:"11",theme:"warning",type:"button",icon:"restore",onClick:At(i,["stop","prevent"])},{default:gt(()=>[Ot("Сбросить фильтр")]),_:1},8,["onClick"])])],40,vd))}}),Hd=["onKeydown"],bc=on({__name:"Modal",props:{width:{default:"580px"}},emits:["close"],setup(e,{emit:t}){const n=e,r=pn();function i(o){const l=o.target;!l.classList.contains("app-modal__body")&&!l.closest(".app-modal__body")&&s()}function s(){t("close")}return ii(()=>{document.body.classList.remove("overflow-hidden")}),er(()=>{var o;(o=r==null?void 0:r.value)==null||o.focus({preventScroll:!0}),document.body.classList.add("overflow-hidden")}),(o,l)=>(le(),ke("div",{ref_key:"modalRef",ref:r,tabindex:"0",class:"app-modal fixed inset-0 bg-black bg-opacity-60 z-100 overflow-y-auto p-10 flex",onClick:i,onKeydown:Gf(s,["esc"])},[j("div",{class:"app-modal__body relative bg-gray-600 shadow-xl rounded-xl p-10 m-auto max-w-full min-h-[200px] break-all",style:ri({width:n.width})},[j("div",{class:"font-icon absolute right-4 top-4 z-10 cursor-pointer text-3xl",onClick:s},"close"),kl(o.$slots,"default")],4)],40,Hd))}}),qd={class:"space-y-2"},Yd={class:"flex items-center"},Jd={class:"font-bold"},Wd={class:"flex items-center"},zd=["href"],Gd={class:"flex items-center"},Xd={class:"font-bold"},Qd={class:"flex items-center"},Zd={class:"font-bold"},ep={class:"flex items-center"},tp={class:"font-bold"},np={class:"flex items-center"},rp={class:"font-bold"},ip={class:"flex items-center"},sp=j("div",{class:"mr-3 opacity-80"},"Дата парсинга:",-1),op={class:"font-bold"},ap={key:0,class:"flex items-center"},lp=j("div",{class:"mr-3 opacity-80"},"Дата сохранения:",-1),cp={class:"font-bold"},up={class:"flex items-center"},fp=j("div",{class:"mr-3 opacity-80"},"Найден в базе:",-1),hp={class:"font-bold"},dp={key:1,class:"flex items-center"},pp=j("div",{class:"mr-3 opacity-80"},"ID:",-1),yp={class:"font-bold"},mp={key:2,class:"flex items-center"},gp=j("div",{class:"mr-3 opacity-80"},"Комментарий:",-1),vp={class:"text-[16px] text-sky-300 font-medium"},bp={key:3},_p=j("div",{class:"mb-3 opacity-80"},"Комментарий:",-1),wp=["onUpdate:modelValue"],xp={class:"flex items-center gap-4 mt-8 empty:hidden"},Cp={key:0,class:"mt-10"},kp={class:"mb-8 font-bold text-xl"},Dp={class:"w-full relative"},Sp={class:"text-[16px] sticky top-[64px] bg-gray-600"},Tp={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ep=["onClick"],Op=j("div",null,"Дата",-1),Ap={class:"text-left px-4 py-2 border border-white border-opacity-50"},Pp=["onClick"],$p=j("div",null,"Оценка",-1),Np={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ip=["onClick"],Fp=j("div",null,"Название товара",-1),Mp=j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"}," Доставка ",-1),Lp={class:"px-4 py-2 border border-white border-opacity-50 font-medium"},Bp={class:"px-4 py-2 border border-white border-opacity-50"},Rp={class:"flex-none flex items-center"},jp={class:"text-base font-medium mr-1"},Kp={class:"text-[18px] font-icon text-yellow-400"},Up={class:"px-4 py-2 border border-white border-opacity-50"},Vp={class:"flex items-center gap-4"},Hp=["onClick"],qp={class:"px-4 py-2 border border-white border-opacity-50"},Yp={key:1,class:"text-xl font-bold mt-5 text-red-400"},Jp=["innerHTML"],Wp={key:1,class:"text-center text-xl font-bold"},zp=on({__name:"ProfileInfoList",setup(e){function t(){Le.state.contentModalVisible=!1,Le.state.contentModalText=""}function n(l){Ho(l),nt.show("success",st.ProductNameCopied)}function r(l,u){Le.sortResults(l,u)}function i(l){l.opened===void 0&&(l.opened=!0),l.opened=!l.opened}async function s(l){Le.apiProfileCreate(l)}async function o(l){Le.copyItemInfo(l)}return ii(()=>{Le.state.viewAllButtonVisible=!1,Le.state.viewMoreThanFiveButtonVisible=!1}),er(()=>{Le.state.viewAllButtonVisible=!0,Le.state.viewMoreThanFiveButtonVisible=!0,Le.list.value.forEach(async l=>{await Le.apiCheckInDB(l)}),Le.list.value.length>0&&Le.list.value.length<2&&(Le.list.value[0].opened=!0)}),(l,u)=>ve(Le).list.value.length?(le(),ke(rt,{key:0},[(le(!0),ke(rt,null,Yn(ve(Le).list.value,c=>{var d,w,x;return le(),ke("div",{key:c.url,class:"relative rounded-xl shadow-xl bg-gray-600 p-5 mb-5 text-[16px]"},[j("div",{class:"absolute right-5 top-5 w-12 h-8 rounded-md",style:ri({"background-color":c.color,"box-shadow":"0 0 10px rgba(0,0,0,.35)"})},null,4),j("div",null,[j("div",qd,[j("div",Yd,[j("div",Jd,Me(c.name),1)]),j("div",Wd,[j("a",{href:c.url,target:"_blank"},Me(c.url),9,zd)]),j("div",Gd,[j("div",Xd,Me(c.rating),1)]),j("div",Qd,[j("div",Zd,Me(c.reviewsCount),1)]),j("div",ep,[j("div",tp,Me(c.subscribers),1)]),j("div",np,[j("div",rp,Me(c.deliveryInfo),1)]),j("div",ip,[sp,j("div",op,Me(ve(br)(c.parsingDate)),1)]),c.savedDate?(le(),ke("div",ap,[lp,j("div",cp,Me(ve(br)(c.savedDate)),1)])):Ye("",!0),j("div",up,[fp,j("div",hp,[j("strong",{class:vt([c.existsInDataBase?"text-green-400":"text-red-400"])},Me(c.existsInDataBase?"Да":"Нет"),3)])]),c.id?(le(),ke("div",dp,[pp,j("div",yp,Me(c.id),1)])):Ye("",!0),c.existsInDataBase?(le(),ke("div",mp,[gp,j("em",vp,Me(c.comment),1)])):(le(),ke("div",bp,[_p,Cn(j("input",{"onUpdate:modelValue":E=>c.comment=E,type:"search",required:"",class:"text-base w-[640px] max-w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,8,wp),[[Dn,c.comment]])]))]),j("div",null,[j("div",xp,[(d=c.reviewsList)!=null&&d.length?(le(),yt(Pt,{key:0,type:"button",theme:"success",icon:"content_copy",onClick:At(E=>o(c),["prevent"])},{default:gt(()=>[Ot("Копировать результаты")]),_:2},1032,["onClick"])):Ye("",!0),c.existsInDataBase?Ye("",!0):(le(),yt(Pt,{key:1,type:"button",icon:"cloud_upload",onClick:At(E=>s(c),["prevent"])},{default:gt(()=>[Ot("Сохранить в базу")]),_:2},1032,["onClick"])),(w=c.reviewsList)!=null&&w.length?(le(),yt(Pt,{key:2,theme:"warning",type:"button",icon:c.opened?"keyboard_arrow_up":"keyboard_arrow_down",onClick:At(E=>i(c),["prevent"])},{default:gt(()=>[Ot(Me(c.opened?"Скрыть результаты":"Раскрыть результаты")+" ",1),j("strong",null," ("+Me(c.reviewsList.length)+")",1)]),_:2},1032,["icon","onClick"])):Ye("",!0)])])]),(x=c.reviewsList)!=null&&x.length?(le(),ke(rt,{key:0},[c.opened?(le(),ke("div",Cp,[j("div",kp,[j("div",null,[Ot("Найдено отзывов - "),j("strong",null,Me(c.reviewsList.length),1)])]),j("table",Dp,[j("tr",Sp,[j("th",Tp,[j("div",{class:"flex items-center cursor-pointer",onClick:E=>r(c,"date")},[j("div",{class:vt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="date"}])},"sort",2),Op],8,Ep)]),j("th",Ap,[j("div",{class:"flex items-center cursor-pointer",onClick:E=>r(c,"rating")},[j("div",{class:vt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="rating"}])},"sort",2),$p],8,Pp)]),j("th",Np,[j("div",{class:"flex items-center cursor-pointer",onClick:E=>r(c,"productName")},[j("div",{class:vt(["font-icon flex-none mr-2",{"text-cyan-400":c.reviewsSortedBy==="productName"}])},"sort",2),Fp],8,Ip)]),Mp]),(le(!0),ke(rt,null,Yn(c.reviewsList,(E,N)=>{var S;return le(),ke("tr",{key:c.reviewsSortedBy+N,class:"text-[14px] hover:bg-gray-600"},[j("td",Lp,Me((S=ve(br)(E.date))==null?void 0:S.slice(0,10)),1),j("td",Bp,[j("div",Rp,[j("div",jp,"("+Me(E.rating)+") - ",1),(le(!0),ke(rt,null,Yn(E.rating,B=>(le(),ke("div",Kp,"star"))),256))])]),j("td",Up,[j("div",Vp,[j("div",{class:"font-icon text-green-400 cursor-pointer",onClick:At(B=>n(E.productName),["stop"])},"content_copy",8,Hp),j("div",null,Me(E.productName),1)])]),j("td",qp,[j("strong",{class:vt(E.delivery?"text-green-400":"text-red-400")},Me(E.delivery?"Да":"Нет"),3)])])}),128))])])):Ye("",!0)],64)):(le(),ke("div",Yp,"Результатов не найдено"))])}),128)),ve(Le).state.contentModalVisible?(le(),yt(bc,{key:0,width:"800px",onClose:t},{default:gt(()=>[j("div",{innerHTML:ve(Le).state.contentModalText},null,8,Jp)]),_:1})):Ye("",!0)],64)):(le(),ke("div",Wp,"Ничего не найдено"))}}),Gp=on({__name:"ParsingResult",setup(e){return(t,n)=>(le(),yt(zp))}});const Xp=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Qp={},Zp=j("svg",{class:"spinner",viewBox:"0 0 50 50"},[j("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),ey=[Zp];function ty(e,t){return le(),ke("div",null,ey)}const _c=Xp(Qp,[["render",ty]]);class ny{constructor(){en(this,"list",pn([]))}getLastParsingInfo(t){var n;return(n=this.list.value.find(r=>r.url===t.url))==null?void 0:n.parsingResults[0]}async pushParsingResult(t){try{let n=Le.list.value.find(i=>i.url===t),r=await Et.savedProfiles.where("url").equals(t).toArray();if(r.length&&r[0]&&n){let i=JSON.parse(JSON.stringify(n)),s=r[0];s.parsingResults.unshift({parsingDate:i.parsingDate,rating:i.rating,reviewsCount:i.reviewsCount,deliveryInfo:i.deliveryInfo,subscribers:i.subscribers});const o=await Et.savedProfiles.put(s)}}catch(n){console.log(n)}finally{}}async apiGetList(t=0,n=0){t===0&&n===0&&(this.list.value=await Et.savedProfiles.toArray())}async apiProfileUpdate(t){try{let n=JSON.parse(JSON.stringify(t));if(n.opened=!1,n.loading=!1,await Et.savedProfiles.put(n))nt.show("success",st.ProfileEdited);else throw new Error}catch{nt.show("success",st.ProfileEditeError)}finally{}}async apiProfileDelete(t){try{await Et.savedProfiles.delete(t.id),nt.show("success",st.ProfileDeleted)}catch(n){console.log(n),nt.show("error",st.ProfileDeleteError)}finally{}}}const It=new ny,ry={key:0,class:"flex justify-center"},iy=["onClick"],sy={class:"min-w-0 flex-1"},oy={class:"flex items-center gap-4 mb-4"},ay={class:"text-xl font-medium"},ly={key:0,class:"text-[16px] text-sky-300 font-medium"},cy={class:"flex items-center gap-4"},uy={class:"text-[16px] text-orange-300 font-medium"},fy={class:"text-[16px] text-yellow-300 font-medium"},hy={class:"text-[16px] text-teal-300 font-medium"},dy={class:"text-[16px] text-rose-300 font-medium"},py={class:"text-[16px] text-gray-300 font-medium"},yy={class:"flex-none flex items-center gap-4"},my=["onClick"],gy=j("i",{class:"font-icon text-3xl text-green-500"},"edit",-1),vy=[gy],by=["onClick"],_y=j("i",{class:"font-icon text-3xl text-sky-500"},"content_copy",-1),wy=[_y],xy=["onClick"],Cy=j("i",{class:"font-icon text-3xl text-red-400"},"delete_forever",-1),ky=[Cy],Dy={key:0,class:"text-[14px] px-4 p-5"},Sy={key:0,class:"w-full"},Ty=j("tr",null,[j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Дата парсинга"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Рейтинг"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Отзывы"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Подписки"),j("th",{class:"text-left px-4 py-2 border border-white border-opacity-50"},"Продаж с доставкой")],-1),Ey={class:"text-left px-4 py-2 border border-white border-opacity-50"},Oy={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ay={class:"text-left px-4 py-2 border border-white border-opacity-50"},Py={class:"text-left px-4 py-2 border border-white border-opacity-50"},$y={class:"text-left px-4 py-2 border border-white border-opacity-50"},Ny={key:1,class:"text-center text-xl font-medium"},Iy={key:2,class:"text-center text-xl font-bold"},Fy={key:0},My={class:"text-2xl font-bold mb-5 pr-10"},Ly={class:"mb-6"},By=j("div",{class:"mb-2 text-sm font-medium"},"Комментарий",-1),Ry=on({__name:"ProfileSavedList",setup(e){const t=pn(!1),n=pn(null),r=pn(!1);function i(d){d.url&&(Ho(d.url),nt.show("success",st.ProfileLinkCopied))}function s(d){d.opened=!d.opened}function o(){t.value=!1,n.value=null}function l(d){t.value=!0,n.value=d}async function u(d){It.apiProfileUpdate(d),t.value=!1,n.value=null}async function c(d){window.confirm(`Удаляем "${d.name}" ?`)&&d.id&&(await It.apiProfileDelete(d),setTimeout(()=>{It.apiGetList()},0))}return er(async()=>{setTimeout(()=>{It.apiGetList()},0)}),wl(()=>{It.list.value.forEach(d=>d.opened=!1)}),(d,w)=>(le(),ke(rt,null,[r.value?(le(),ke("div",ry,[ot(_c,{class:"w-10 h-10 flex-none"})])):ve(It).list.value.length?(le(!0),ke(rt,{key:1},Yn(ve(It).list.value,x=>{var E,N,S,B,L,O,P;return le(),ke("div",{key:x.id,class:vt([x.opened?"ring ring-blue-400":"","rounded-lg bg-gray-600 shadow-xl mb-3"])},[j("div",{class:"flex items-start p-4 select-none cursor-pointer",onClick:$=>s(x)},[j("div",sy,[j("div",oy,[j("div",ay,Me(x.name),1),x.comment?(le(),ke("div",ly,Me(x.comment),1)):Ye("",!0)]),j("div",cy,[j("div",uy,Me((E=ve(It).getLastParsingInfo(x))==null?void 0:E.rating),1),j("div",fy,Me((N=ve(It).getLastParsingInfo(x))==null?void 0:N.reviewsCount),1),j("div",hy,Me((S=ve(It).getLastParsingInfo(x))==null?void 0:S.subscribers),1),j("div",dy,Me((B=ve(It).getLastParsingInfo(x))==null?void 0:B.deliveryInfo),1),j("div",py,Me((L=ve(It).getLastParsingInfo(x))!=null&&L.parsingDate?ve(br)((O=ve(It).getLastParsingInfo(x))==null?void 0:O.parsingDate):""),1)])]),j("div",yy,[j("div",{class:"flex-none ml-auto",onClick:At($=>l(x),["stop"])},vy,8,my),j("div",{class:"flex-none",onClick:At($=>i(x),["stop"])},wy,8,by),j("div",{class:"flex-none",onClick:At($=>c(x),["stop"])},ky,8,xy)])],8,iy),x.opened?(le(),ke("div",Dy,[(P=x.parsingResults)!=null&&P.length?(le(),ke("table",Sy,[Ty,(le(!0),ke(rt,null,Yn(x.parsingResults,$=>(le(),ke("tr",null,[j("td",Ey,Me(ve(br)($.parsingDate)),1),j("td",Oy,Me($.rating),1),j("td",Ay,Me($.reviewsCount),1),j("td",Py,Me($.subscribers),1),j("td",$y,Me($.deliveryInfo),1)]))),256))])):(le(),ke("div",Ny,"Парсинги не найдены"))])):Ye("",!0)],2)}),128)):(le(),ke("div",Iy,"Ничего не найдено")),t.value?(le(),yt(bc,{key:3,onClose:o},{default:gt(()=>[n.value?(le(),ke("div",Fy,[j("form",{onSubmit:w[1]||(w[1]=At(x=>u(n.value),["prevent"]))},[j("div",My,Me(n.value.name),1),j("div",Ly,[By,Cn(j("input",{"onUpdate:modelValue":w[0]||(w[0]=x=>n.value.comment=x),type:"search",required:"",class:"text-base w-full text-black px-3 py-2 rounded-lg outline-none focus:outline-blue-400"},null,512),[[Dn,n.value.comment]])]),j("div",null,[ot(Pt,{type:"submit",theme:"success"},{default:gt(()=>[Ot("Сохранить")]),_:1})])],32)])):Ye("",!0)]),_:1})):Ye("",!0)],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Mn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{c(r.next(d))}catch(w){o(w)}}function u(d){try{c(r.throw(d))}catch(w){o(w)}}function c(d){d.done?s(d.value):i(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})}function Gt(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function jy(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function Ky(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function wc(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function xc(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var os=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(K)}function r(K,z,Y,X,D,a,f){try{var p=K[a](f),y=p.value}catch(g){Y(g);return}p.done?z(y):Promise.resolve(y).then(X,D)}function i(K){return function(){var z=this,Y=arguments;return new Promise(function(X,D){var a=K.apply(z,Y);function f(y){r(a,X,D,f,p,"next",y)}function p(y){r(a,X,D,f,p,"throw",y)}f(void 0)})}}function s(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}function o(K,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}function l(K,z,Y){return z&&o(K.prototype,z),Y&&o(K,Y),K}function u(K,z,Y){return z in K?Object.defineProperty(K,z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):K[z]=Y,K}function c(K,z){var Y=Object.keys(K);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(K);z&&(X=X.filter(function(D){return Object.getOwnPropertyDescriptor(K,D).enumerable})),Y.push.apply(Y,X)}return Y}function d(K){for(var z=1;z<arguments.length;z++){var Y=arguments[z]!=null?arguments[z]:{};z%2?c(Object(Y),!0).forEach(function(X){u(K,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(Y)):c(Object(Y)).forEach(function(X){Object.defineProperty(K,X,Object.getOwnPropertyDescriptor(Y,X))})}return K}function w(K,z){return N(K)||B(K,z)||O()}function x(K){return E(K)||S(K)||L()}function E(K){if(Array.isArray(K)){for(var z=0,Y=new Array(K.length);z<K.length;z++)Y[z]=K[z];return Y}}function N(K){if(Array.isArray(K))return K}function S(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function B(K,z){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]"){var Y=[],X=!0,D=!1,a=void 0;try{for(var f=K[Symbol.iterator](),p;!(X=(p=f.next()).done)&&(Y.push(p.value),!(z&&Y.length===z));X=!0);}catch(y){D=!0,a=y}finally{try{!X&&f.return!=null&&f.return()}finally{if(D)throw a}}return Y}}function L(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var P=function K(z){s(this,K),this.p=new Promise(z)};P.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(P.prototype[Symbol.toStringTag]="TypesonPromise"),P.prototype.then=function(K,z){var Y=this;return new P(function(X,D){Y.p.then(function(a){X(K?K(a):a)}).catch(function(a){return z?z(a):Promise.reject(a)}).then(X,D)})},P.prototype.catch=function(K){return this.then(null,K)},P.resolve=function(K){return new P(function(z){z(K)})},P.reject=function(K){return new P(function(z,Y){Y(K)})},["all","race"].forEach(function(K){P[K]=function(z){return new P(function(Y,X){Promise[K](z.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(Y,X)})}});var $={},V=$.toString,W={}.hasOwnProperty,H=Object.getPrototypeOf,re=W.toString;function k(K,z){return ae(K)&&typeof K.then=="function"&&(!z||typeof K.catch=="function")}function b(K){return V.call(K).slice(8,-1)}function U(K,z){if(!K||n(K)!=="object")return!1;var Y=H(K);if(!Y)return z===null;var X=W.call(Y,"constructor")&&Y.constructor;return typeof X!="function"?z===null:z===X||z!==null&&re.call(X)===re.call(z)||typeof z=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===z.__typeson__type__}function R(K){if(!K||b(K)!=="Object")return!1;var z=H(K);return z?U(K,Object):!0}function be(K){if(!K||b(K)!=="Object")return!1;var z=H(K);return z?U(K,Object)||be(z):!0}function ae(K){return K&&n(K)==="object"}function Ae(K){return K.replace(/~/g,"~0").replace(/\./g,"~1")}function ge(K){return K.replace(/~1/g,".").replace(/~0/g,"~")}function fe(K,z){if(z==="")return K;var Y=z.indexOf(".");if(Y>-1){var X=K[ge(z.slice(0,Y))];return X===void 0?void 0:fe(X,z.slice(Y+1))}return K[ge(z)]}function oe(K,z,Y){if(z==="")return Y;var X=z.indexOf(".");if(X>-1){var D=K[ge(z.slice(0,X))];return oe(D,z.slice(X+1),Y)}return K[ge(z)]=Y,K}function He(K){return K===null?"null":Array.isArray(K)?"array":n(K)}var Ue=Object.keys,et=Array.isArray,je={}.hasOwnProperty,Mt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ye(K,z){if(K.keypath==="")return-1;var Y=K.keypath.match(/\./g)||0,X=z.keypath.match(/\./g)||0;return Y&&(Y=Y.length),X&&(X=X.length),Y>X?-1:Y<X?1:K.keypath<z.keypath?-1:K.keypath>z.keypath}var ue=function(){function K(z){s(this,K),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(K,[{key:"stringify",value:function(Y,X,D,a){a=d({},this.options,{},a,{stringification:!0});var f=this.encapsulate(Y,null,a);return et(f)?JSON.stringify(f[0],X,D):f.then(function(p){return JSON.stringify(p,X,D)})}},{key:"stringifySync",value:function(Y,X,D,a){return this.stringify(Y,X,D,d({throwOnBadSyncType:!0},a,{sync:!0}))}},{key:"stringifyAsync",value:function(Y,X,D,a){return this.stringify(Y,X,D,d({throwOnBadSyncType:!0},a,{sync:!1}))}},{key:"parse",value:function(Y,X,D){return D=d({},this.options,{},D,{parse:!0}),this.revive(JSON.parse(Y,X),D)}},{key:"parseSync",value:function(Y,X,D){return this.parse(Y,X,d({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"parseAsync",value:function(Y,X,D){return this.parse(Y,X,d({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"specialTypeNames",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(Y,X,D)}},{key:"rootTypeName",value:function(Y,X){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(Y,X,D)}},{key:"encapsulate",value:function(Y,X,D){D=d({sync:!0},this.options,{},D);var a=D,f=a.sync,p=this,y={},g=[],_=[],C=[],A="cyclic"in D?D.cyclic:!0,F=D,M=F.encapsulateObserver,J=he("",Y,A,X||{},C);function q(te){var m=Object.values(y);if(D.iterateNone)return m.length?m[0]:K.getJSONType(te);if(m.length){if(D.returnTypeNames)return x(new Set(m));!te||!R(te)||je.call(te,"$types")?te={$:te,$types:{$:y}}:te.$types=y}else ae(te)&&je.call(te,"$types")&&(te={$:te,$types:!0});return D.returnTypeNames?!1:te}function G(te,m){return Z.apply(this,arguments)}function Z(){return Z=i(regeneratorRuntime.mark(function te(m,h){var v;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(h.map(function(Q){return Q[1].p}));case 2:return v=I.sent,I.next=5,Promise.all(v.map(function(){var Q=i(regeneratorRuntime.mark(function ee(pe){var se,Ce,Pe,$e,qe,Re,Fe,ze,Ge,Ee,dt,de,ne,xe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(se=[],Ce=h.splice(0,1),Pe=w(Ce,1),$e=Pe[0],qe=w($e,7),Re=qe[0],Fe=qe[2],ze=qe[3],Ge=qe[4],Ee=qe[5],dt=qe[6],de=he(Re,pe,Fe,ze,se,!0,dt),ne=U(de,P),!(Re&&ne)){De.next=11;break}return De.next=8,de.p;case 8:return xe=De.sent,Ge[Ee]=xe,De.abrupt("return",G(m,se));case 11:return Re?Ge[Ee]=de:ne?m=de.p:m=de,De.abrupt("return",G(m,se));case 13:case"end":return De.stop()}},ee)}));return function(ee){return Q.apply(this,arguments)}}()));case 5:return I.abrupt("return",m);case 6:case"end":return I.stop()}},te)})),Z.apply(this,arguments)}function ie(te,m,h){Object.assign(te,m);var v=Mt.map(function(T){var I=te[T];return delete te[T],I});h(),Mt.forEach(function(T,I){te[T]=v[I]})}function he(te,m,h,v,T,I,Q){var ee,pe={},se=n(m),Ce=M?function(ne){var xe=Q||v.type||K.getJSONType(m);M(Object.assign(ne||pe,{keypath:te,value:m,cyclic:h,stateObj:v,promisesData:T,resolvingTypesonPromise:I,awaitingTypesonPromise:U(m,P)},{type:xe}))}:null;if(["string","boolean","number","undefined"].includes(se))return m===void 0||se==="number"&&(isNaN(m)||m===-1/0||m===1/0)?(v.replaced?ee=m:ee=me(te,m,v,T,!1,I,Ce),ee!==m&&(pe={replaced:ee})):ee=m,Ce&&Ce(),ee;if(m===null)return Ce&&Ce(),m;if(h&&!v.iterateIn&&!v.iterateUnsetNumeric&&m&&n(m)==="object"){var Pe=g.indexOf(m);if(Pe<0)h===!0&&(g.push(m),_.push(te));else return y[te]="#",Ce&&Ce({cyclicKeypath:_[Pe]}),"#"+_[Pe]}var $e=R(m),qe=et(m),Re=($e||qe)&&(!p.plainObjectReplacers.length||v.replaced)||v.iterateIn?m:me(te,m,v,T,$e||qe,null,Ce),Fe;if(Re!==m?(ee=Re,pe={replaced:Re}):te===""&&U(m,P)?(T.push([te,m,h,v,void 0,void 0,v.type]),ee=m):qe&&v.iterateIn!=="object"||v.iterateIn==="array"?(Fe=new Array(m.length),pe={clone:Fe}):!["function","symbol"].includes(n(m))&&!("toJSON"in m)&&!U(m,P)&&!U(m,Promise)&&!U(m,ArrayBuffer)||$e||v.iterateIn==="object"?(Fe={},v.addLength&&(Fe.length=m.length),pe={clone:Fe}):ee=m,Ce&&Ce(),D.iterateNone)return Fe||ee;if(!Fe)return ee;if(v.iterateIn){var ze=function(xe){var _e={ownKeys:je.call(m,xe)};ie(v,_e,function(){var De=te+(te?".":"")+Ae(xe),Ne=he(De,m[xe],!!h,v,T,I);U(Ne,P)?T.push([De,Ne,!!h,v,Fe,xe,v.type]):Ne!==void 0&&(Fe[xe]=Ne)})};for(var Ge in m)ze(Ge);Ce&&Ce({endIterateIn:!0,end:!0})}else Ue(m).forEach(function(ne){var xe=te+(te?".":"")+Ae(ne),_e={ownKeys:!0};ie(v,_e,function(){var De=he(xe,m[ne],!!h,v,T,I);U(De,P)?T.push([xe,De,!!h,v,Fe,ne,v.type]):De!==void 0&&(Fe[ne]=De)})}),Ce&&Ce({endIterateOwn:!0,end:!0});if(v.iterateUnsetNumeric){for(var Ee=m.length,dt=function(xe){if(!(xe in m)){var _e=te+(te?".":"")+xe,De={ownKeys:!1};ie(v,De,function(){var Ne=he(_e,void 0,!!h,v,T,I);U(Ne,P)?T.push([_e,Ne,!!h,v,Fe,xe,v.type]):Ne!==void 0&&(Fe[xe]=Ne)})}},de=0;de<Ee;de++)dt(de);Ce&&Ce({endIterateUnsetNumeric:!0,end:!0})}return Fe}function me(te,m,h,v,T,I,Q){for(var ee=T?p.plainObjectReplacers:p.nonplainObjectReplacers,pe=ee.length;pe--;){var se=ee[pe];if(se.test(m,h)){var Ce=se.type;if(p.revivers[Ce]){var Pe=y[te];y[te]=Pe?[Ce].concat(Pe):Ce}if(Object.assign(h,{type:Ce,replaced:!0}),(f||!se.replaceAsync)&&!se.replace)return Q&&Q({typeDetected:!0}),he(te,m,A&&"readonly",h,v,I,Ce);Q&&Q({replacing:!0});var $e=f||!se.replaceAsync?"replace":"replaceAsync";return he(te,se[$e](m,h),A&&"readonly",h,v,I,Ce)}}return m}return C.length?f&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(J,C)).then(q):!f&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&f?[q(J)]:f?q(J):Promise.resolve(q(J))}},{key:"encapsulateSync",value:function(Y,X,D){return this.encapsulate(Y,X,d({throwOnBadSyncType:!0},D,{sync:!0}))}},{key:"encapsulateAsync",value:function(Y,X,D){return this.encapsulate(Y,X,d({throwOnBadSyncType:!0},D,{sync:!1}))}},{key:"revive",value:function(Y,X){var D=Y&&Y.$types;if(!D)return Y;if(D===!0)return Y.$;X=d({sync:!0},this.options,{},X);var a=X,f=a.sync,p=[],y={},g=!0;D.$&&R(D.$)&&(Y=Y.$,D=D.$,g=!1);var _=this;function C(Z,ie){var he=_.revivers[Z]||[],me=w(he,1),te=me[0];if(!te)throw new Error("Unregistered type: "+Z);return f&&!("revive"in te)?ie:te[f&&te.revive?"revive":!f&&te.reviveAsync?"reviveAsync":"revive"](ie,y)}function A(){var Z=[];if(Object.entries(D).forEach(function(ie){var he=w(ie,2),me=he[0],te=he[1];te!=="#"&&[].concat(te).forEach(function(m){var h=_.revivers[m]||[null,{}],v=w(h,2),T=v[1].plain;T&&(Z.push({keypath:me,type:m}),delete D[me])})}),!!Z.length)return Z.sort(ye).reduce(function ie(he,me){var te=me.keypath,m=me.type;if(k(he))return he.then(function(T){return ie(T,{keypath:te,type:m})});var h=fe(Y,te);if(h=C(m,h),U(h,P))return h.then(function(T){var I=oe(Y,te,T);I===T&&(Y=I)});var v=oe(Y,te,h);v===h&&(Y=v)},void 0)}var F=[];function M(Z,ie,he,me,te){if(!(g&&Z==="$types")){var m=D[Z],h=et(ie);if(h||R(ie)){var v=h?new Array(ie.length):{};for(Ue(ie).forEach(function(Pe){var $e=M(Z+(Z?".":"")+Ae(Pe),ie[Pe],he||v,v,Pe),qe=function(Fe){return U(Fe,Ie)?v[Pe]=void 0:Fe!==void 0&&(v[Pe]=Fe),Fe};U($e,P)?F.push($e.then(function(Re){return qe(Re)})):qe($e)}),ie=v;p.length;){var T=w(p[0],4),I=T[0],Q=T[1],ee=T[2],pe=T[3],se=fe(I,Q);if(se!==void 0)ee[pe]=se;else break;p.splice(0,1)}}if(!m)return ie;if(m==="#"){var Ce=fe(he,ie.slice(1));return Ce===void 0&&p.push([he,ie.slice(1),me,te]),Ce}return[].concat(m).reduce(function Pe($e,qe){return U($e,P)?$e.then(function(Re){return Pe(Re,qe)}):C(qe,$e)},ie)}}function J(Z){return U(Z,Ie)?void 0:Z}var q=A(),G;return U(q,P)?G=q.then(function(){return Y}):(G=M("",Y,null),F.length&&(G=P.resolve(G).then(function(Z){return P.all([Z].concat(F))}).then(function(Z){var ie=w(Z,1),he=ie[0];return he}))),k(G)?f&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():U(G,P)?G.p.then(J):G:!f&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f?J(G):Promise.resolve(J(G))}},{key:"reviveSync",value:function(Y,X){return this.revive(Y,d({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Y,X){return this.revive(Y,d({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Y,X){return X=X||{},[].concat(Y).forEach(function D(a){var f=this;if(et(a))return a.map(function(p){return D.call(f,p)});a&&Ue(a).forEach(function(p){if(p==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(K.JSON_TYPES.includes(p))throw new TypeError("Plain JSON object types are reserved as type names");var y=a[p],g=y&&y.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,_=g.filter(function(he){return he.type===p});if(_.length&&(g.splice(g.indexOf(_[0]),1),delete this.revivers[p],delete this.types[p]),typeof y=="function"){var C=y;y={test:function(me){return me&&me.constructor===C},replace:function(me){return d({},me)},revive:function(me){return Object.assign(Object.create(C.prototype),me)}}}else if(et(y)){var A=y,F=w(A,3),M=F[0],J=F[1],q=F[2];y={test:M,replace:J,revive:q}}if(!(!y||!y.test)){var G={type:p,test:y.test.bind(y)};y.replace&&(G.replace=y.replace.bind(y)),y.replaceAsync&&(G.replaceAsync=y.replaceAsync.bind(y));var Z=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(y.testPlainObjects?this.plainObjectReplacers.splice(Z,0,G):this.nonplainObjectReplacers.splice(Z,0,G),y.revive||y.reviveAsync){var ie={};y.revive&&(ie.revive=y.revive.bind(y)),y.reviveAsync&&(ie.reviveAsync=y.reviveAsync.bind(y)),this.revivers[p]=[ie,{plain:y.testPlainObjects}]}this.types[p]=y}},this)},this),this}}]),K}(),Ie=function K(){s(this,K)};return Ie.__typeson__type__="TypesonUndefined",ue.Undefined=Ie,ue.Promise=P,ue.isThenable=k,ue.toStringTag=b,ue.hasConstructorOf=U,ue.isObject=ae,ue.isPlainObject=R,ue.isUserObject=be,ue.escapeKeyPathComponent=Ae,ue.unescapeKeyPathComponent=ge,ue.getByKeyPath=fe,ue.getJSONType=He,ue.JSON_TYPES=["null","boolean","number","string","array","object"],ue})}),Uy=qo(function(e,t){(function(n,r){e.exports=r()})(co,function(){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function r(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function i(m,h){for(var v=0;v<h.length;v++){var T=h[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}function s(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function o(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(m);h&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,T)}return v}function l(m){return function(v){if(Array.isArray(v))return u(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||function(v,T){if(v){if(typeof v=="string")return u(v,T);var I=Object.prototype.toString.call(v).slice(8,-1);if(I==="Object"&&v.constructor&&(I=v.constructor.name),I==="Map"||I==="Set")return Array.from(v);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return u(v,T)}}(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,T=new Array(h);v<h;v++)T[v]=m[v];return T}function c(m){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}function d(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function w(m,h){for(var v=0;v<h.length;v++){var T=h[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}function x(m,h,v){return h in m?Object.defineProperty(m,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[h]=v,m}function E(m,h){var v=Object.keys(m);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(m);h&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),v.push.apply(v,T)}return v}function N(m){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?E(Object(v),!0).forEach(function(T){x(m,T,v[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(v)):E(Object(v)).forEach(function(T){Object.defineProperty(m,T,Object.getOwnPropertyDescriptor(v,T))})}return m}function S(m,h){return function(T){if(Array.isArray(T))return T}(m)||function(T,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(T)))){var Q=[],ee=!0,pe=!1,se=void 0;try{for(var Ce,Pe=T[Symbol.iterator]();!(ee=(Ce=Pe.next()).done)&&(Q.push(Ce.value),!I||Q.length!==I);ee=!0);}catch($e){pe=!0,se=$e}finally{try{ee||Pe.return==null||Pe.return()}finally{if(pe)throw se}}return Q}}(m,h)||L(m,h)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(m){return function(v){if(Array.isArray(v))return O(v)}(m)||function(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}(m)||L(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(m,h){if(m){if(typeof m=="string")return O(m,h);var v=Object.prototype.toString.call(m).slice(8,-1);return v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set"?Array.from(m):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?O(m,h):void 0}}function O(m,h){(h==null||h>m.length)&&(h=m.length);for(var v=0,T=new Array(h);v<h;v++)T[v]=m[v];return T}var P=function m(h){d(this,m),this.p=new Promise(h)};P.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(P.prototype[Symbol.toStringTag]="TypesonPromise"),P.prototype.then=function(m,h){var v=this;return new P(function(T,I){v.p.then(function(Q){T(m?m(Q):Q)}).catch(function(Q){return h?h(Q):Promise.reject(Q)}).then(T,I)})},P.prototype.catch=function(m){return this.then(null,m)},P.resolve=function(m){return new P(function(h){h(m)})},P.reject=function(m){return new P(function(h,v){v(m)})},["all","race"].forEach(function(m){P[m]=function(h){return new P(function(v,T){Promise[m](h.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(v,T)})}});var $={}.toString,V={}.hasOwnProperty,W=Object.getPrototypeOf,H=V.toString;function re(m,h){return R(m)&&typeof m.then=="function"&&(!h||typeof m.catch=="function")}function k(m){return $.call(m).slice(8,-1)}function b(m,h){if(!m||c(m)!=="object")return!1;var v=W(m);if(!v)return h===null;var T=V.call(v,"constructor")&&v.constructor;return typeof T!="function"?h===null:h===T||h!==null&&H.call(T)===H.call(h)||typeof h=="function"&&typeof T.__typeson__type__=="string"&&T.__typeson__type__===h.__typeson__type__}function U(m){return!(!m||k(m)!=="Object")&&(!W(m)||b(m,Object))}function R(m){return m&&c(m)==="object"}function be(m){return m.replace(/~/g,"~0").replace(/\./g,"~1")}function ae(m){return m.replace(/~1/g,".").replace(/~0/g,"~")}function Ae(m,h){if(h==="")return m;var v=h.indexOf(".");if(v>-1){var T=m[ae(h.slice(0,v))];return T===void 0?void 0:Ae(T,h.slice(v+1))}return m[ae(h)]}function ge(m,h,v){if(h==="")return v;var T=h.indexOf(".");return T>-1?ge(m[ae(h.slice(0,T))],h.slice(T+1),v):(m[ae(h)]=v,m)}function fe(m,h,v){return v?h?h(m):m:(m&&m.then||(m=Promise.resolve(m)),h?m.then(h):m)}var oe=Object.keys,He=Array.isArray,Ue={}.hasOwnProperty,et=["type","replaced","iterateIn","iterateUnsetNumeric"];function je(m){return function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];try{return Promise.resolve(m.apply(this,h))}catch(T){return Promise.reject(T)}}}function Mt(m,h){if(m.keypath==="")return-1;var v=m.keypath.match(/\./g)||0,T=h.keypath.match(/\./g)||0;return v&&(v=v.length),T&&(T=T.length),v>T?-1:v<T?1:m.keypath<h.keypath?-1:m.keypath>h.keypath}var ye=function(){function m(h){d(this,m),this.options=h,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(v,T,I){return T&&w(v.prototype,T),I&&w(v,I),v}(m,[{key:"stringify",value:function(v,T,I,Q){Q=N(N(N({},this.options),Q),{},{stringification:!0});var ee=this.encapsulate(v,null,Q);return He(ee)?JSON.stringify(ee[0],T,I):ee.then(function(pe){return JSON.stringify(pe,T,I)})}},{key:"stringifySync",value:function(v,T,I,Q){return this.stringify(v,T,I,N(N({throwOnBadSyncType:!0},Q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(v,T,I,Q){return this.stringify(v,T,I,N(N({throwOnBadSyncType:!0},Q),{},{sync:!1}))}},{key:"parse",value:function(v,T,I){return I=N(N(N({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(v,T),I)}},{key:"parseSync",value:function(v,T,I){return this.parse(v,T,N(N({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(v,T,I){return this.parse(v,T,N(N({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(v,T){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(v,T,I)}},{key:"rootTypeName",value:function(v,T){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(v,T,I)}},{key:"encapsulate",value:function(v,T,I){var Q=je(function(de,ne){return fe(Promise.all(ne.map(function(xe){return xe[1].p})),function(xe){return fe(Promise.all(xe.map(je(function(_e){var De=!1,Ne=[],Lt=S(ne.splice(0,1),1),at=S(Lt[0],7),Nt=at[0],Kt=at[2],Je=at[3],Ut=at[4],Xe=at[5],Bt=at[6],kt=Ee(Nt,_e,Kt,Je,Ne,!0,Bt),qt=b(kt,P);return function(as,li){var nr=as();return nr&&nr.then?nr.then(li):li(nr)}(function(){if(Nt&&qt)return fe(kt.p,function(Yt){return Ut[Xe]=Yt,De=!0,Q(de,Ne)})},function(Yt){return De?Yt:(Nt?Ut[Xe]=kt:de=qt?kt.p:kt,Q(de,Ne))})}))),function(){return de})})}),ee=(I=N(N({sync:!0},this.options),I)).sync,pe=this,se={},Ce=[],Pe=[],$e=[],qe=!("cyclic"in I)||I.cyclic,Re=I.encapsulateObserver,Fe=Ee("",v,qe,T||{},$e);function ze(de){var ne=Object.values(se);if(I.iterateNone)return ne.length?ne[0]:m.getJSONType(de);if(ne.length){if(I.returnTypeNames)return B(new Set(ne));de&&U(de)&&!Ue.call(de,"$types")?de.$types=se:de={$:de,$types:{$:se}}}else R(de)&&Ue.call(de,"$types")&&(de={$:de,$types:!0});return!I.returnTypeNames&&de}function Ge(de,ne,xe){Object.assign(de,ne);var _e=et.map(function(De){var Ne=de[De];return delete de[De],Ne});xe(),et.forEach(function(De,Ne){de[De]=_e[Ne]})}function Ee(de,ne,xe,_e,De,Ne,Lt){var at,Nt={},Kt=c(ne),Je=Re?function(_n){var Dt=Lt||_e.type||m.getJSONType(ne);Re(Object.assign(_n||Nt,{keypath:de,value:ne,cyclic:xe,stateObj:_e,promisesData:De,resolvingTypesonPromise:Ne,awaitingTypesonPromise:b(ne,P)},{type:Dt}))}:null;if(["string","boolean","number","undefined"].includes(Kt))return ne===void 0||Number.isNaN(ne)||ne===Number.NEGATIVE_INFINITY||ne===Number.POSITIVE_INFINITY?(at=_e.replaced?ne:dt(de,ne,_e,De,!1,Ne,Je))!==ne&&(Nt={replaced:at}):at=ne,Je&&Je(),at;if(ne===null)return Je&&Je(),ne;if(xe&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&ne&&c(ne)==="object"){var Ut=Ce.indexOf(ne);if(!(Ut<0))return se[de]="#",Je&&Je({cyclicKeypath:Pe[Ut]}),"#"+Pe[Ut];xe===!0&&(Ce.push(ne),Pe.push(de))}var Xe,Bt=U(ne),kt=He(ne),qt=(Bt||kt)&&(!pe.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?ne:dt(de,ne,_e,De,Bt||kt,null,Je);if(qt!==ne?(at=qt,Nt={replaced:qt}):de===""&&b(ne,P)?(De.push([de,ne,xe,_e,void 0,void 0,_e.type]),at=ne):kt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(Xe=new Array(ne.length),Nt={clone:Xe}):(["function","symbol"].includes(c(ne))||"toJSON"in ne||b(ne,P)||b(ne,Promise)||b(ne,ArrayBuffer))&&!Bt&&_e.iterateIn!=="object"?at=ne:(Xe={},_e.addLength&&(Xe.length=ne.length),Nt={clone:Xe}),Je&&Je(),I.iterateNone)return Xe||at;if(!Xe)return at;if(_e.iterateIn){var Yt=function(Dt){var ln={ownKeys:Ue.call(ne,Dt)};Ge(_e,ln,function(){var Ln=de+(de?".":"")+be(Dt),ci=Ee(Ln,ne[Dt],!!xe,_e,De,Ne);b(ci,P)?De.push([Ln,ci,!!xe,_e,Xe,Dt,_e.type]):ci!==void 0&&(Xe[Dt]=ci)})};for(var as in ne)Yt(as);Je&&Je({endIterateIn:!0,end:!0})}else oe(ne).forEach(function(_n){var Dt=de+(de?".":"")+be(_n);Ge(_e,{ownKeys:!0},function(){var ln=Ee(Dt,ne[_n],!!xe,_e,De,Ne);b(ln,P)?De.push([Dt,ln,!!xe,_e,Xe,_n,_e.type]):ln!==void 0&&(Xe[_n]=ln)})}),Je&&Je({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var li=ne.length,nr=function(Dt){if(!(Dt in ne)){var ln=de+(de?".":"")+Dt;Ge(_e,{ownKeys:!1},function(){var Ln=Ee(ln,void 0,!!xe,_e,De,Ne);b(Ln,P)?De.push([ln,Ln,!!xe,_e,Xe,Dt,_e.type]):Ln!==void 0&&(Xe[Dt]=Ln)})}},ls=0;ls<li;ls++)nr(ls);Je&&Je({endIterateUnsetNumeric:!0,end:!0})}return Xe}function dt(de,ne,xe,_e,De,Ne,Lt){for(var at=De?pe.plainObjectReplacers:pe.nonplainObjectReplacers,Nt=at.length;Nt--;){var Kt=at[Nt];if(Kt.test(ne,xe)){var Je=Kt.type;if(pe.revivers[Je]){var Ut=se[de];se[de]=Ut?[Je].concat(Ut):Je}return Object.assign(xe,{type:Je,replaced:!0}),!ee&&Kt.replaceAsync||Kt.replace?(Lt&&Lt({replacing:!0}),Ee(de,Kt[ee||!Kt.replaceAsync?"replace":"replaceAsync"](ne,xe),qe&&"readonly",xe,_e,Ne,Je)):(Lt&&Lt({typeDetected:!0}),Ee(de,ne,qe&&"readonly",xe,_e,Ne,Je))}}return ne}return $e.length?ee&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Q(Fe,$e)).then(ze):!ee&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&ee?[ze(Fe)]:ee?ze(Fe):Promise.resolve(ze(Fe))}},{key:"encapsulateSync",value:function(v,T,I){return this.encapsulate(v,T,N(N({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(v,T,I){return this.encapsulate(v,T,N(N({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(v,T){var I=v&&v.$types;if(!I)return v;if(I===!0)return v.$;var Q=(T=N(N({sync:!0},this.options),T)).sync,ee=[],pe={},se=!0;I.$&&U(I.$)&&(v=v.$,I=I.$,se=!1);var Ce=this;function Pe(ze,Ge){var Ee=S(Ce.revivers[ze]||[],1)[0];if(!Ee)throw new Error("Unregistered type: "+ze);return Q&&!("revive"in Ee)?Ge:Ee[Q&&Ee.revive?"revive":!Q&&Ee.reviveAsync?"reviveAsync":"revive"](Ge,pe)}var $e=[];function qe(ze){return b(ze,ue)?void 0:ze}var Re,Fe=function(){var Ge=[];if(Object.entries(I).forEach(function(Ee){var dt=S(Ee,2),de=dt[0],ne=dt[1];ne!=="#"&&[].concat(ne).forEach(function(xe){S(Ce.revivers[xe]||[null,{}],2)[1].plain&&(Ge.push({keypath:de,type:xe}),delete I[de])})}),Ge.length)return Ge.sort(Mt).reduce(function Ee(dt,de){var ne=de.keypath,xe=de.type;if(re(dt))return dt.then(function(Ne){return Ee(Ne,{keypath:ne,type:xe})});var _e=Ae(v,ne);if(b(_e=Pe(xe,_e),P))return _e.then(function(Ne){var Lt=ge(v,ne,Ne);Lt===Ne&&(v=Lt)});var De=ge(v,ne,_e);De===_e&&(v=De)},void 0)}();return b(Fe,P)?Re=Fe.then(function(){return v}):(Re=function ze(Ge,Ee,dt,de,ne){if(!se||Ge!=="$types"){var xe=I[Ge],_e=He(Ee);if(_e||U(Ee)){var De=_e?new Array(Ee.length):{};for(oe(Ee).forEach(function(Xe){var Bt=ze(Ge+(Ge?".":"")+be(Xe),Ee[Xe],dt||De,De,Xe),kt=function(Yt){return b(Yt,ue)?De[Xe]=void 0:Yt!==void 0&&(De[Xe]=Yt),Yt};b(Bt,P)?$e.push(Bt.then(function(qt){return kt(qt)})):kt(Bt)}),Ee=De;ee.length;){var Ne=S(ee[0],4),Lt=Ne[0],at=Ne[1],Nt=Ne[2],Kt=Ne[3],Je=Ae(Lt,at);if(Je===void 0)break;Nt[Kt]=Je,ee.splice(0,1)}}if(!xe)return Ee;if(xe==="#"){var Ut=Ae(dt,Ee.slice(1));return Ut===void 0&&ee.push([dt,Ee.slice(1),de,ne]),Ut}return[].concat(xe).reduce(function Xe(Bt,kt){return b(Bt,P)?Bt.then(function(qt){return Xe(qt,kt)}):Pe(kt,Bt)},Ee)}}("",v,null),$e.length&&(Re=P.resolve(Re).then(function(ze){return P.all([ze].concat($e))}).then(function(ze){return S(ze,1)[0]}))),re(Re)?Q&&T.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():b(Re,P)?Re.p.then(qe):Re:!Q&&T.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?qe(Re):Promise.resolve(qe(Re))}},{key:"reviveSync",value:function(v,T){return this.revive(v,N(N({throwOnBadSyncType:!0},T),{},{sync:!0}))}},{key:"reviveAsync",value:function(v,T){return this.revive(v,N(N({throwOnBadSyncType:!0},T),{},{sync:!1}))}},{key:"register",value:function(v,T){return T=T||{},[].concat(v).forEach(function I(Q){var ee=this;if(He(Q))return Q.map(function(pe){return I.call(ee,pe)});Q&&oe(Q).forEach(function(pe){if(pe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(m.JSON_TYPES.includes(pe))throw new TypeError("Plain JSON object types are reserved as type names");var se=Q[pe],Ce=se&&se.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Pe=Ce.filter(function(Ge){return Ge.type===pe});if(Pe.length&&(Ce.splice(Ce.indexOf(Pe[0]),1),delete this.revivers[pe],delete this.types[pe]),typeof se=="function"){var $e=se;se={test:function(Ee){return Ee&&Ee.constructor===$e},replace:function(Ee){return N({},Ee)},revive:function(Ee){return Object.assign(Object.create($e.prototype),Ee)}}}else if(He(se)){var qe=S(se,3);se={test:qe[0],replace:qe[1],revive:qe[2]}}if(se&&se.test){var Re={type:pe,test:se.test.bind(se)};se.replace&&(Re.replace=se.replace.bind(se)),se.replaceAsync&&(Re.replaceAsync=se.replaceAsync.bind(se));var Fe=typeof T.fallback=="number"?T.fallback:T.fallback?0:Number.POSITIVE_INFINITY;if(se.testPlainObjects?this.plainObjectReplacers.splice(Fe,0,Re):this.nonplainObjectReplacers.splice(Fe,0,Re),se.revive||se.reviveAsync){var ze={};se.revive&&(ze.revive=se.revive.bind(se)),se.reviveAsync&&(ze.reviveAsync=se.reviveAsync.bind(se)),this.revivers[pe]=[ze,{plain:se.testPlainObjects}]}this.types[pe]=se}},this)},this),this}}]),m}(),ue=function m(){d(this,m)};ue.__typeson__type__="TypesonUndefined",ye.Undefined=ue,ye.Promise=P,ye.isThenable=re,ye.toStringTag=k,ye.hasConstructorOf=b,ye.isObject=R,ye.isPlainObject=U,ye.isUserObject=function m(h){if(!h||k(h)!=="Object")return!1;var v=W(h);return!v||b(h,Object)||m(v)},ye.escapeKeyPathComponent=be,ye.unescapeKeyPathComponent=ae,ye.getByKeyPath=Ae,ye.getJSONType=function(h){return h===null?"null":Array.isArray(h)?"array":c(h)},ye.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ie={userObject:{test:function(h,v){return ye.isUserObject(h)},replace:function(h){return function(T){for(var I=1;I<arguments.length;I++){var Q=arguments[I]!=null?arguments[I]:{};I%2?o(Object(Q),!0).forEach(function(ee){s(T,ee,Q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(Q)):o(Object(Q)).forEach(function(ee){Object.defineProperty(T,ee,Object.getOwnPropertyDescriptor(Q,ee))})}return T}({},h)},revive:function(h){return h}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(h,v){return!!Array.isArray(h)&&(Object.keys(h).some(function(T){return String(Number.parseInt(T))!==T})&&(v.iterateIn="object",v.addLength=!0),!0)},replace:function(h,v){return v.iterateUnsetNumeric=!0,h},revive:function(h){if(Array.isArray(h))return h;var v=[];return Object.keys(h).forEach(function(T){var I=h[T];v[T]=I}),v}}},{sparseUndefined:{test:function(h,v){return h===void 0&&v.ownKeys===!1},replace:function(h){return 0},revive:function(h){}}}],z={undef:{test:function(h,v){return h===void 0&&(v.ownKeys||!("ownKeys"in v))},replace:function(h){return 0},revive:function(h){return new ye.Undefined}}},Y={StringObject:{test:function(h){return ye.toStringTag(h)==="String"&&n(h)==="object"},replace:function(h){return String(h)},revive:function(h){return new String(h)}},BooleanObject:{test:function(h){return ye.toStringTag(h)==="Boolean"&&n(h)==="object"},replace:function(h){return!!h},revive:function(h){return new Boolean(h)}},NumberObject:{test:function(h){return ye.toStringTag(h)==="Number"&&n(h)==="object"},replace:function(h){return Number(h)},revive:function(h){return new Number(h)}}},X=[{nan:{test:function(h){return Number.isNaN(h)},replace:function(h){return"NaN"},revive:function(h){return Number.NaN}}},{infinity:{test:function(h){return h===Number.POSITIVE_INFINITY},replace:function(h){return"Infinity"},revive:function(h){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(h){return h===Number.NEGATIVE_INFINITY},replace:function(h){return"-Infinity"},revive:function(h){return Number.NEGATIVE_INFINITY}}}],D={date:{test:function(h){return ye.toStringTag(h)==="Date"},replace:function(h){var v=h.getTime();return Number.isNaN(v)?"NaN":v},revive:function(h){return h==="NaN"?new Date(Number.NaN):new Date(h)}}},a={regexp:{test:function(h){return ye.toStringTag(h)==="RegExp"},replace:function(h){return{source:h.source,flags:(h.global?"g":"")+(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.sticky?"y":"")+(h.unicode?"u":"")}},revive:function(h){var v=h.source,T=h.flags;return new RegExp(v,T)}}},f={map:{test:function(h){return ye.toStringTag(h)==="Map"},replace:function(h){return l(h.entries())},revive:function(h){return new Map(h)}}},p={set:{test:function(h){return ye.toStringTag(h)==="Set"},replace:function(h){return l(h.values())},revive:function(h){return new Set(h)}}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),_=0;_<y.length;_++)g[y.charCodeAt(_)]=_;var C=function(h,v,T){T==null&&(T=h.byteLength);for(var I=new Uint8Array(h,v||0,T),Q=I.length,ee="",pe=0;pe<Q;pe+=3)ee+=y[I[pe]>>2],ee+=y[(3&I[pe])<<4|I[pe+1]>>4],ee+=y[(15&I[pe+1])<<2|I[pe+2]>>6],ee+=y[63&I[pe+2]];return Q%3==2?ee=ee.slice(0,-1)+"=":Q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},A=function(h){var v,T,I,Q,ee=h.length,pe=.75*h.length,se=0;h[h.length-1]==="="&&(pe--,h[h.length-2]==="="&&pe--);for(var Ce=new ArrayBuffer(pe),Pe=new Uint8Array(Ce),$e=0;$e<ee;$e+=4)v=g[h.charCodeAt($e)],T=g[h.charCodeAt($e+1)],I=g[h.charCodeAt($e+2)],Q=g[h.charCodeAt($e+3)],Pe[se++]=v<<2|T>>4,Pe[se++]=(15&T)<<4|I>>2,Pe[se++]=(3&I)<<6|63&Q;return Ce},F={arraybuffer:{test:function(h){return ye.toStringTag(h)==="ArrayBuffer"},replace:function(h,v){v.buffers||(v.buffers=[]);var T=v.buffers.indexOf(h);return T>-1?{index:T}:(v.buffers.push(h),C(h))},revive:function(h,v){if(v.buffers||(v.buffers=[]),n(h)==="object")return v.buffers[h.index];var T=A(h);return v.buffers.push(T),T}}},M=typeof self>"u"?co:self,J={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(m){var h=m,v=M[h];v&&(J[m.toLowerCase()]={test:function(I){return ye.toStringTag(I)===h},replace:function(I,Q){var ee=I.buffer,pe=I.byteOffset,se=I.length;Q.buffers||(Q.buffers=[]);var Ce=Q.buffers.indexOf(ee);return Ce>-1?{index:Ce,byteOffset:pe,length:se}:(Q.buffers.push(ee),{encoded:C(ee),byteOffset:pe,length:se})},revive:function(I,Q){Q.buffers||(Q.buffers=[]);var ee,pe=I.byteOffset,se=I.length,Ce=I.encoded,Pe=I.index;return"index"in I?ee=Q.buffers[Pe]:(ee=A(Ce),Q.buffers.push(ee)),new v(ee,pe,se)}})});var q={dataview:{test:function(h){return ye.toStringTag(h)==="DataView"},replace:function(h,v){var T=h.buffer,I=h.byteOffset,Q=h.byteLength;v.buffers||(v.buffers=[]);var ee=v.buffers.indexOf(T);return ee>-1?{index:ee,byteOffset:I,byteLength:Q}:(v.buffers.push(T),{encoded:C(T),byteOffset:I,byteLength:Q})},revive:function(h,v){v.buffers||(v.buffers=[]);var T,I=h.byteOffset,Q=h.byteLength,ee=h.encoded,pe=h.index;return"index"in h?T=v.buffers[pe]:(T=A(ee),v.buffers.push(T)),new DataView(T,I,Q)}}},G={IntlCollator:{test:function(h){return ye.hasConstructorOf(h,Intl.Collator)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.Collator(h.locale,h)}},IntlDateTimeFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.DateTimeFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.DateTimeFormat(h.locale,h)}},IntlNumberFormat:{test:function(h){return ye.hasConstructorOf(h,Intl.NumberFormat)},replace:function(h){return h.resolvedOptions()},revive:function(h){return new Intl.NumberFormat(h.locale,h)}}};function Z(m){for(var h=new Uint8Array(m.length),v=0;v<m.length;v++)h[v]=m.charCodeAt(v);return h.buffer}var ie={file:{test:function(h){return ye.toStringTag(h)==="File"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad File access: "+v.status);return{type:h.type,stringContents:v.responseText,name:h.name,lastModified:h.lastModified}},revive:function(h){var v=h.name,T=h.type,I=h.stringContents,Q=h.lastModified;return new File([Z(I)],v,{type:T,lastModified:Q})},replaceAsync:function(h){return new ye.Promise(function(v,T){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result,name:h.name,lastModified:h.lastModified})}),I.addEventListener("error",function(){T(I.error)}),I.readAsBinaryString(h)})}}},he={bigint:{test:function(h){return typeof h=="bigint"},replace:function(h){return String(h)},revive:function(h){return BigInt(h)}}},me={bigintObject:{test:function(h){return n(h)==="object"&&ye.hasConstructorOf(h,BigInt)},replace:function(h){return String(h)},revive:function(h){return new Object(BigInt(h))}}},te={cryptokey:{test:function(h){return ye.toStringTag(h)==="CryptoKey"&&h.extractable},replaceAsync:function(h){return new ye.Promise(function(v,T){crypto.subtle.exportKey("jwk",h).catch(function(I){T(I)}).then(function(I){v({jwk:I,algorithm:h.algorithm,usages:h.usages})})})},revive:function(h){var v=h.jwk,T=h.algorithm,I=h.usages;return crypto.subtle.importKey("jwk",v,T,!0,I)}}};return[Ie,z,K,Y,X,D,a,{imagedata:{test:function(h){return ye.toStringTag(h)==="ImageData"},replace:function(h){return{array:l(h.data),width:h.width,height:h.height}},revive:function(h){return new ImageData(new Uint8ClampedArray(h.array),h.width,h.height)}}},{imagebitmap:{test:function(h){return ye.toStringTag(h)==="ImageBitmap"||h&&h.dataset&&h.dataset.toStringTag==="ImageBitmap"},replace:function(h){var v=document.createElement("canvas");return v.getContext("2d").drawImage(h,0,0),v.toDataURL()},revive:function(h){var v=document.createElement("canvas"),T=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){T.drawImage(I,0,0)}),I.src=h,v},reviveAsync:function(h){var v=document.createElement("canvas"),T=v.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){T.drawImage(I,0,0)}),I.src=h,createImageBitmap(v)}}},ie,{file:ie.file,filelist:{test:function(h){return ye.toStringTag(h)==="FileList"},replace:function(h){for(var v=[],T=0;T<h.length;T++)v[T]=h.item(T);return v},revive:function(h){return new(function(){function v(){r(this,v),this._files=arguments[0],this.length=this._files.length}return function(I,Q,ee){return Q&&i(I.prototype,Q),ee&&i(I,ee),I}(v,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),v}())(h)}}},{blob:{test:function(h){return ye.toStringTag(h)==="Blob"},replace:function(h){var v=new XMLHttpRequest;if(v.overrideMimeType("text/plain; charset=x-user-defined"),v.open("GET",URL.createObjectURL(h),!1),v.send(),v.status!==200&&v.status!==0)throw new Error("Bad Blob access: "+v.status);return{type:h.type,stringContents:v.responseText}},revive:function(h){var v=h.type,T=h.stringContents;return new Blob([Z(T)],{type:v})},replaceAsync:function(h){return new ye.Promise(function(v,T){var I=new FileReader;I.addEventListener("load",function(){v({type:h.type,stringContents:I.result})}),I.addEventListener("error",function(){T(I.error)}),I.readAsBinaryString(h)})}}}].concat(typeof Map=="function"?f:[],typeof Set=="function"?p:[],typeof ArrayBuffer=="function"?F:[],typeof Uint8Array=="function"?J:[],typeof DataView=="function"?q:[],typeof Intl<"u"?G:[],typeof crypto<"u"?te:[],typeof BigInt<"u"?[he,me]:[])})}),cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fr=new Uint8Array(256);for(var Ci=0;Ci<cr.length;Ci++)Fr[cr.codePointAt(Ci)]=Ci;var uo=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),s=i.length,o="",l=0;l<s;l+=3)o+=cr[i[l]>>2],o+=cr[(i[l]&3)<<4|i[l+1]>>4],o+=cr[(i[l+1]&15)<<2|i[l+2]>>6],o+=cr[i[l+2]&63];return s%3===2?o=o.slice(0,-1)+"=":s%3===1&&(o=o.slice(0,-2)+"=="),o},Cc=function(t){var n=t.length,r=t.length*.75,i=0,s,o,l,u;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),d=new Uint8Array(c),w=0;w<n;w+=4)s=Fr[t.codePointAt(w)],o=Fr[t.codePointAt(w+1)],l=Fr[t.codePointAt(w+2)],u=Fr[t.codePointAt(w+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|l>>2,d[i++]=(l&3)<<6|u&63;return c},Vy=typeof self>"u"?global:self,kc={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=Vy[t];n&&(kc[e.toLowerCase()+"2"]={test:function(r){return os.toStringTag(r)===t},replace:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return{buffer:i,byteOffset:s,length:o}},revive:function(r){var i=r.buffer,s=r.byteOffset,o=r.length;return new n(i,s,o)}})});var Hy={arraybuffer:{test:function(e){return os.toStringTag(e)==="ArrayBuffer"},replace:function(e){return uo(e,0,e.byteLength)},revive:function(e){var t=Cc(e);return t}}},Ht=new os().register(Uy),qy="FileReaderSync"in self,Wi=[],ks=0;Ht.register([Hy,kc,{blob2:{test:function(e){return os.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(qy){var t=xc(e,"binary"),n=uo(t,0,t.byteLength);return{type:e.type,data:n}}else{Wi.push(e);var r={type:e.type,data:{start:ks,end:ks+e.size}};return ks+=e.size,r}},finalize:function(e,t){e.data=uo(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Cc(n)],{type:t})}}}]);Ht.mustFinalize=function(){return Wi.length>0};Ht.finalize=function(e){return Mn(void 0,void 0,void 0,function(){var t,n,r,i,s,o,l,u,c,d;return Gt(this,function(w){switch(w.label){case 0:return[4,wc(new Blob(Wi),"binary")];case 1:if(t=w.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,o=s.$,o&&(s=s.$);for(l in s)u=s[l],c=Ht.types[u],c&&c.finalize&&(d=lt.getByKeyPath(i,o?"$."+l:l),c.finalize(d,t.slice(d.start,d.end)))}}return Wi=[],[2]}})})};var Yy=2e3;function Dc(e,t){return Mn(this,void 0,void 0,function(){function n(){return Mn(this,void 0,void 0,function(){var c,d,w,x,E,N,S,B,L;return Gt(this,function(O){switch(O.label){case 0:return[4,Promise.all(e.tables.map(function(P){return P.count()}))];case 1:c=O.sent(),c.forEach(function(P,$){return i[$].rowCount=P}),u.totalRows=c.reduce(function(P,$){return P+$}),d=JSON.stringify(o,void 0,s?2:void 0),w=d.lastIndexOf("]"),x=d.substring(0,w),r.push(x),E=t.filter,N=function(P){var $,V,W,H,re,k,b,U,R,be,ae,Ae;return Gt(this,function(ge){switch(ge.label){case 0:$=e.table(P),V=$.schema.primKey,W=!!V.keyPath,H=t.numRowsPerChunk||Yy,re=W?{tableName:$.name,inbound:!0,rows:[]}:{tableName:$.name,inbound:!1,rows:[]},k=JSON.stringify(re,void 0,s?2:void 0),s&&(k=k.split(`
`).join(`
    `)),b=k.lastIndexOf("]"),r.push(k.substring(0,b)),U=null,R=0,be=!0,ae=function(){var fe,oe,He,Ue,ye,et,je,Mt,ye;return Gt(this,function(ue){switch(ue.label){case 0:return l&&lt.ignoreTransaction(function(){return l(u)}),fe=U==null?$.limit(H):$.where(":id").above(U).limit(H),[4,fe.toArray()];case 1:return oe=ue.sent(),oe.length===0?[2,"break"]:(U!=null&&R>0&&(r.push(","),s&&r.push(`
      `)),be=oe.length===H,W?(He=E?oe.filter(function(Ie){return E(P,Ie)}):oe,Ue=He.map(function(Ie){return Ht.encapsulate(Ie)}),Ht.mustFinalize()?[4,lt.waitFor(Ht.finalize(Ue))]:[3,3]):[3,4]);case 2:ue.sent(),ue.label=3;case 3:return ye=JSON.stringify(Ue,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),R=He.length,U=oe.length>0?lt.getByKeyPath(oe[oe.length-1],V.keyPath):null,[3,8];case 4:return[4,fe.primaryKeys()];case 5:return et=ue.sent(),je=et.map(function(Ie,K){return[Ie,oe[K]]}),E&&(je=je.filter(function(Ie){var K=Ie[0],z=Ie[1];return E(P,z,K)})),Mt=je.map(function(Ie){return Ht.encapsulate(Ie)}),Ht.mustFinalize()?[4,lt.waitFor(Ht.finalize(Mt))]:[3,7];case 6:ue.sent(),ue.label=7;case 7:ye=JSON.stringify(Mt,void 0,s?2:void 0),s&&(ye=ye.split(`
`).join(`
      `)),r.push(new Blob([ye.substring(1,ye.length-1)])),R=je.length,U=et.length>0?et[et.length-1]:null,ue.label=8;case 8:return u.completedRows+=oe.length,[2]}})},ge.label=1;case 1:return be?[5,ae()]:[3,3];case 2:return Ae=ge.sent(),Ae==="break"?[3,3]:[3,1];case 3:return r.push(k.substr(b)),u.completedTables+=1,u.completedTables<u.totalTables&&r.push(","),[2]}})},S=0,B=i,O.label=2;case 2:return S<B.length?(L=B[S].name,[5,N(L)]):[3,5];case 3:O.sent(),O.label=4;case 4:return S++,[3,2];case 5:return r.push(d.substr(w)),u.done=!0,l&&lt.ignoreTransaction(function(){return l(u)}),[2]}})})}var r,i,s,o,l,u;return Gt(this,function(c){switch(c.label){case 0:t=t||{},r=[],i=e.tables.map(function(d){return{name:d.name,schema:jy(d),rowCount:0}}),s=t.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},l=t.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return Ht.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var Jy=1,Wy={Stream:function(){}},zy=qo(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(k){return new E(k)},n.CParser=E,n.CStream=S,n.createStream=N,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(k){return k!=="error"&&k!=="end"}),o=0,l;n.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var u in n.STATE)n.STATE[n.STATE[u]]=u;o=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(k){function b(){this.__proto__=k}return b.prototype=k,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(k){return k.__proto__}),Object.keys||(Object.keys=function(k){var b=[];for(var U in k)k.hasOwnProperty(U)&&b.push(U);return b});function d(k){var b=Math.max(n.MAX_BUFFER_LENGTH,10),U=0;for(var R in i){var be=k[R]===void 0?0:k[R].length;if(be>b)switch(R){case"text":closeText(k);break;default:V(k,"Max buffer length exceeded: "+R)}U=Math.max(U,be)}k.bufferCheckPosition=n.MAX_BUFFER_LENGTH-U+k.position}function w(k){for(var b in i)k[b]=i[b]}var x=/[\\"\n]/g;function E(k){if(!(this instanceof E))return new E(k);var b=this;w(b),b.bufferCheckPosition=n.MAX_BUFFER_LENGTH,b.q=b.c=b.p="",b.opt=k||{},b.closed=b.closedRoot=b.sawRoot=!1,b.tag=b.error=null,b.state=o.BEGIN,b.stack=new Array,b.position=b.column=0,b.line=1,b.slashed=!1,b.unicodeI=0,b.unicodeS=null,b.depth=0,B(b,"onready")}E.prototype={end:function(){W(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Wy.Stream}catch{l=function(){}}function N(k){return new S(k)}function S(k){if(!(this instanceof S))return new S(k);this._parser=new E(k),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var b=this;l.apply(b),this._parser.onend=function(){b.emit("end")},this._parser.onerror=function(U){b.emit("error",U),b._parser.error=null},s.forEach(function(U){Object.defineProperty(b,"on"+U,{get:function(){return b._parser["on"+U]},set:function(R){if(!R)return b.removeAllListeners(U),b._parser["on"+U]=R,R;b.on(U,R)},enumerable:!0,configurable:!1})})}S.prototype=Object.create(l.prototype,{constructor:{value:S}}),S.prototype.write=function(k){k=new Buffer(k);for(var b=0;b<k.length;b++){var U=k[b];if(this.bytes_remaining>0){for(var R=0;R<this.bytes_remaining;R++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+R]=k[R];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,b=b+R-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&U>=128)if(U>=194&&U<=223&&(this.bytes_in_sequence=2),U>=224&&U<=239&&(this.bytes_in_sequence=3),U>=240&&U<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+b>k.length){for(var be=0;be<=k.length-1-b;be++)this.temp_buffs[this.bytes_in_sequence][be]=k[b+be];return this.bytes_remaining=b+this.bytes_in_sequence-k.length,!0}else{this.string=k.slice(b,b+this.bytes_in_sequence).toString(),b=b+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ae=b;ae<k.length&&!(k[ae]>=128);ae++);this.string=k.slice(b,ae).toString(),this._parser.write(this.string),this.emit("data",this.string),b=ae-1}},S.prototype.end=function(k){return k&&k.length&&this._parser.write(k.toString()),this._parser.end(),!0},S.prototype.on=function(k,b){var U=this;return!U._parser["on"+k]&&s.indexOf(k)!==-1&&(U._parser["on"+k]=function(){var R=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);R.splice(0,0,k),U.emit.apply(U,R)}),l.prototype.on.call(U,k,b)},S.prototype.destroy=function(){w(this._parser),this.emit("close")};function B(k,b,U){n.INFO&&console.log("-- emit",b,U),k[b]&&k[b](U)}function L(k,b,U){O(k),B(k,b,U)}function O(k,b){k.textNode=$(k.opt,k.textNode),k.textNode!==void 0&&B(k,b||"onvalue",k.textNode),k.textNode=void 0}function P(k){k.numberNode&&B(k,"onvalue",parseFloat(k.numberNode)),k.numberNode=""}function $(k,b){return b===void 0||(k.trim&&(b=b.trim()),k.normalize&&(b=b.replace(/\s+/g," "))),b}function V(k,b){return O(k),b+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c,b=new Error(b),k.error=b,B(k,"onerror",b),k}function W(k){return(k.state!==o.VALUE||k.depth!==0)&&V(k,"Unexpected end"),O(k),k.c="",k.closed=!0,B(k,"onend"),E.call(k,k.opt),k}function H(k){return k===c.carriageReturn||k===c.lineFeed||k===c.space||k===c.tab}function re(k){var b=this;if(this.error)throw this.error;if(b.closed)return V(b,"Cannot write after close. Assign an onready handler.");if(k===null)return W(b);var U=0,R=k.charCodeAt(0),be=b.p;for(n.DEBUG&&console.log("write -> ["+k+"]");R&&(be=R,b.c=R=k.charCodeAt(U++),be!==R?b.p=be:be=b.p,!!R);)switch(n.DEBUG&&console.log(U,R,n.STATE[b.state]),b.position++,R===c.lineFeed?(b.line++,b.column=0):b.column++,b.state){case o.BEGIN:R===c.openBrace?b.state=o.OPEN_OBJECT:R===c.openBracket?b.state=o.OPEN_ARRAY:H(R)||V(b,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(H(R))continue;if(b.state===o.OPEN_KEY)b.stack.push(o.CLOSE_KEY);else if(R===c.closeBrace){B(b,"onopenobject"),this.depth++,B(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_OBJECT);R===c.doubleQuote?b.state=o.STRING:V(b,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(H(R))continue;b.state,o.CLOSE_KEY,R===c.colon?(b.state===o.CLOSE_OBJECT?(b.stack.push(o.CLOSE_OBJECT),O(b,"onopenobject"),this.depth++):O(b,"onkey"),b.state=o.VALUE):R===c.closeBrace?(L(b,"oncloseobject"),this.depth--,b.state=b.stack.pop()||o.VALUE):R===c.comma?(b.state===o.CLOSE_OBJECT&&b.stack.push(o.CLOSE_OBJECT),O(b),b.state=o.OPEN_KEY):V(b,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(H(R))continue;if(b.state===o.OPEN_ARRAY)if(B(b,"onopenarray"),this.depth++,b.state=o.VALUE,R===c.closeBracket){B(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;continue}else b.stack.push(o.CLOSE_ARRAY);R===c.doubleQuote?b.state=o.STRING:R===c.openBrace?b.state=o.OPEN_OBJECT:R===c.openBracket?b.state=o.OPEN_ARRAY:R===c.t?b.state=o.TRUE:R===c.f?b.state=o.FALSE:R===c.n?b.state=o.NULL:R===c.minus?b.numberNode+="-":c._0<=R&&R<=c._9?(b.numberNode+=String.fromCharCode(R),b.state=o.NUMBER_DIGIT):V(b,"Bad value");continue;case o.CLOSE_ARRAY:if(R===c.comma)b.stack.push(o.CLOSE_ARRAY),O(b,"onvalue"),b.state=o.VALUE;else if(R===c.closeBracket)L(b,"onclosearray"),this.depth--,b.state=b.stack.pop()||o.VALUE;else{if(H(R))continue;V(b,"Bad array")}continue;case o.STRING:b.textNode===void 0&&(b.textNode="");var ae=U-1,Ae=b.slashed,ge=b.unicodeI;e:for(;;){for(n.DEBUG&&console.log(U,R,n.STATE[b.state],Ae);ge>0;)if(b.unicodeS+=String.fromCharCode(R),R=k.charCodeAt(U++),b.position++,ge===4?(b.textNode+=String.fromCharCode(parseInt(b.unicodeS,16)),ge=0,ae=U-1):ge++,!R)break e;if(R===c.doubleQuote&&!Ae){b.state=b.stack.pop()||o.VALUE,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}if(R===c.backslash&&!Ae&&(Ae=!0,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae,R=k.charCodeAt(U++),b.position++,!R))break;if(Ae){if(Ae=!1,R===c.n?b.textNode+=`
`:R===c.r?b.textNode+="\r":R===c.t?b.textNode+="	":R===c.f?b.textNode+="\f":R===c.b?b.textNode+="\b":R===c.u?(ge=1,b.unicodeS=""):b.textNode+=String.fromCharCode(R),R=k.charCodeAt(U++),b.position++,ae=U-1,R)continue;break}x.lastIndex=U;var fe=x.exec(k);if(fe===null){U=k.length+1,b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}if(U=fe.index+1,R=k.charCodeAt(fe.index),!R){b.textNode+=k.substring(ae,U-1),b.position+=U-1-ae;break}}b.slashed=Ae,b.unicodeI=ge;continue;case o.TRUE:R===c.r?b.state=o.TRUE2:V(b,"Invalid true started with t"+R);continue;case o.TRUE2:R===c.u?b.state=o.TRUE3:V(b,"Invalid true started with tr"+R);continue;case o.TRUE3:R===c.e?(B(b,"onvalue",!0),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid true started with tru"+R);continue;case o.FALSE:R===c.a?b.state=o.FALSE2:V(b,"Invalid false started with f"+R);continue;case o.FALSE2:R===c.l?b.state=o.FALSE3:V(b,"Invalid false started with fa"+R);continue;case o.FALSE3:R===c.s?b.state=o.FALSE4:V(b,"Invalid false started with fal"+R);continue;case o.FALSE4:R===c.e?(B(b,"onvalue",!1),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid false started with fals"+R);continue;case o.NULL:R===c.u?b.state=o.NULL2:V(b,"Invalid null started with n"+R);continue;case o.NULL2:R===c.l?b.state=o.NULL3:V(b,"Invalid null started with nu"+R);continue;case o.NULL3:R===c.l?(B(b,"onvalue",null),b.state=b.stack.pop()||o.VALUE):V(b,"Invalid null started with nul"+R);continue;case o.NUMBER_DECIMAL_POINT:R===c.period?(b.numberNode+=".",b.state=o.NUMBER_DIGIT):V(b,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:c._0<=R&&R<=c._9?b.numberNode+=String.fromCharCode(R):R===c.period?(b.numberNode.indexOf(".")!==-1&&V(b,"Invalid number has two dots"),b.numberNode+="."):R===c.e||R===c.E?((b.numberNode.indexOf("e")!==-1||b.numberNode.indexOf("E")!==-1)&&V(b,"Invalid number has two exponential"),b.numberNode+="e"):R===c.plus||R===c.minus?(be===c.e||be===c.E||V(b,"Invalid symbol in number"),b.numberNode+=String.fromCharCode(R)):(P(b),U--,b.state=b.stack.pop()||o.VALUE);continue;default:V(b,"Unknown state: "+b.state)}return b.position>=b.bufferCheckPosition&&d(b),b}})(t)});function Gy(e){var t=0,n=Xy(!0),r={pullAsync:function(i){return Mn(this,void 0,void 0,function(){var s,o,l;return Gt(this,function(u){switch(u.label){case 0:return s=e.slice(t,t+i),t+=i,[4,wc(s,"text")];case 1:return o=u.sent(),l=n.write(o),r.result=l||{},[2,l]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=xc(s,"text"),l=n.write(o);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Xy(e){var t=zy.parser(),n=0,r,i=[],s,o,l=!1,u=!1;return t.onopenobject=function(c){var d={};d.incomplete=!0,r||(r=d),s&&(i.push([o,s,u]),e&&(u?s.push(d):s[o]=d)),s=d,o=c,u=!1,++n},t.onkey=function(c){return o=c},t.onvalue=function(c){return u?s.push(c):s[o]=c},t.oncloseobject=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var d=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(d):s[o]=d)}},t.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),s&&(i.push([o,s,u]),e&&(u?s.push(c):s[o]=c)),s=c,u=!0,o=null,++n},t.onclosearray=function(){var c;if(delete s.incomplete,o=null,--n===0)l=!0;else{var d=s;c=i.pop(),o=c[0],s=c[1],u=c[2],e||(u?s.push(d):s[o]=d)}},{write:function(c){return t.write(c),r},done:function(){return l}}}var Sc=1024;function Qy(e,t){return Mn(this,void 0,void 0,function(){var n,r,i,s;return Gt(this,function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||Sc*1024,[4,Ec(e,n)];case 1:return r=o.sent(),i=r.result.data,s=new lt(i.databaseName),s.version(i.databaseVersion).stores(Ky(i)),[4,Tc(s,r,t)];case 2:return o.sent(),[2,s]}})})}function Tc(e,t,n){return Mn(this,void 0,void 0,function(){function r(){return Mn(this,void 0,void 0,function(){var N,S,B,L,O;return Gt(this,function(P){switch(P.label){case 0:N=function($){var V,W,H,re,k,b,U,R,be,ae,Ae,ge;return Gt(this,function(fe){switch(fe.label){case 0:if(!$.rows)return[2,"break"];if(!$.rows.incomplete&&$.rows.length===0)return[2,"continue"];if(c&&lt.ignoreTransaction(function(){return c(d)}),V=$.tableName,W=e.table(V),H=u.tables.filter(function(oe){return oe.name===V})[0].schema,!W){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat($.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&H.split(",")[0]!=W.schema.primKey.src)throw new Error("Primary key differs for table ".concat($.tableName,". "));for(re=$.rows,k=[],b=0;b<re.length&&(U=re[b],!U.incomplete);b++)k.push(Ht.revive(U));return R=n.filter,be=R?$.inbound?k.filter(function(oe){return R(V,oe)}):k.filter(function(oe){var He=oe[0],Ue=oe[1];return R(V,Ue,He)}):k,ae=$.inbound?[void 0,be]:[be.map(function(oe){return oe[0]}),k.map(function(oe){return oe[1]})],Ae=ae[0],ge=ae[1],n.overwriteValues?[4,W.bulkPut(ge,Ae)]:[3,2];case 1:return fe.sent(),[3,4];case 2:return[4,W.bulkAdd(ge,Ae)];case 3:fe.sent(),fe.label=4;case 4:return d.completedRows+=k.length,k.incomplete||(d.completedTables+=1),re.splice(0,k.length),[2]}})},S=0,B=u.data,P.label=1;case 1:return S<B.length?(L=B[S],[5,N(L)]):[3,4];case 2:if(O=P.sent(),O==="break")return[3,4];P.label=3;case 3:return S++,[3,1];case 4:for(;u.data.length>0&&u.data[0].rows&&!u.data[0].rows.incomplete;)u.data.splice(0,1);return!s.done()&&!s.eof()?l?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,lt.waitFor(s.pullAsync(i))];case 6:P.sent(),P.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,l,u,c,d,w,x,E;return Gt(this,function(N){switch(N.label){case 0:return n=n||{},i=n.chunkSizeBytes||Sc*1024,[4,Ec(t,i)];case 1:if(s=N.sent(),o=s.result,l="FileReaderSync"in self,u=o.data,!n.acceptNameDiff&&e.name!==u.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(u.databaseName));if(!n.acceptVersionDiff&&e.verno!==u.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(u.databaseVersion));if(c=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:u.tables.reduce(function(S,B){return S+B.rowCount},0),totalTables:u.tables.length},c&&lt.ignoreTransaction(function(){return c(d)}),!n.clearTablesBeforeImport)return[3,5];w=0,x=e.tables,N.label=2;case 2:return w<x.length?(E=x[w],[4,E.clear()]):[3,5];case 3:N.sent(),N.label=4;case 4:return w++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return N.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:N.sent(),N.label=9;case 9:return d.done=!0,c&&lt.ignoreTransaction(function(){return c(d)}),[2]}})})}function Ec(e,t){return Mn(this,void 0,void 0,function(){var n,r;return Gt(this,function(i){switch(i.label){case 0:n="slice"in e?Gy(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Jy)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}lt.prototype.export=function(e){return Dc(this,e)};lt.prototype.import=function(e,t){return Tc(this,e,t)};lt.import=function(e,t){return Qy(e,t)};const Zy={class:"relative p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},em=j("div",{class:"text-2xl font-bold mb-6"},"База данных",-1),tm={class:"flex flex-wrap items-center gap-5"},nm=j("input",{type:"file",accept:"application/JSON",class:"p-0 m-0 absolute inset-0 z-10 opacity-0 cursor-pointer"},null,-1),rm=j("span",{class:"pointer-events-none"},"Импорт",-1),im={class:"p-5 shadow-xl rounded-xl mb-5 bg-gray-600"},sm=j("div",{class:"text-2xl font-bold mb-6 text-red-400"},"Осторожно!",-1),om={class:"flex flex-wrap items-center gap-5"},am=on({__name:"Settings",setup(e){const t=Sr({dbLoading:!1});jl(()=>!!new URLSearchParams(window.location.search).has("danger"));async function n(){if(window.confirm("Удаляем базу данных ?"))try{await Et.close(),window.indexedDB.deleteDatabase("avito_scraper"),nt.show("error",st.DBDropSuccess),window.location.reload()}catch{nt.show("error",st.DBDropError)}}async function r(){window.confirm("Чистим хранилище ?")&&(await chrome.storage.local.remove(["profileList","parsingResults","filterFields","reviewsFilter"]),window.location.reload())}async function i(){t.dbLoading=!0;try{const l=`avito-scraper-dump----${new Date().toLocaleString().replace(",","----").replace(" ","").replace(/\:/g,"-").replace(/\./g,"-")}.json`,u=await Dc(Et),c=new Blob([u],{type:"text/json"}),d=document.createElement("a");d.href=URL.createObjectURL(c),d.download=l,d.click(),d.remove(),nt.show("success",st.DBExportSuccess)}catch{nt.show("error",st.DBExportError)}finally{t.dbLoading=!1}}return(s,o)=>(le(),ke(rt,null,[j("div",Zy,[t.dbLoading?(le(),yt(_c,{key:0,class:"w-8 h-8 absolute right-5 top-5"})):Ye("",!0),em,j("div",tm,[ot(Pt,{theme:"success",icon:"cloud_upload"},{default:gt(()=>[nm,rm]),_:1}),ot(Pt,{theme:"info",icon:"cloud_download",onClick:i},{default:gt(()=>[Ot("Экспорт")]),_:1})])]),j("div",im,[sm,j("div",om,[ot(Pt,{theme:"danger",icon:"delete_sweep",onClick:At(r,["stop"])},{default:gt(()=>[Ot("Очистить localStorage")]),_:1},8,["onClick"]),ot(Pt,{theme:"danger",icon:"delete_forever",onClick:At(n,["stop"])},{default:gt(()=>[Ot("Очистить IndexedDB")]),_:1},8,["onClick"])])])],64))}}),lm={class:"centered"},cm=on({__name:"App",setup(e){return er(async()=>{Zh(),chrome.runtime.onMessage.addListener(async({message:t,action:n,status:r,currentUrl:i,data:s})=>{if(r&&t&&nt.show(r,t),n==="reviews-parsing-started"){const o=Ve.getProfileLinkByUrl(i);o&&(o.status="wait")}if(n==="reviews-parsing-ended"){if(r==="success"){Le.pushResultsByUrl(i,s),It.pushParsingResult(i);const o=Ve.getProfileLinkByUrl(i);o&&(o.status="success")}if(r==="error"){const o=Ve.getProfileLinkByUrl(i);o&&(o.status="error")}if(Ve.newProfileLink){const o=nt.show("success",st.WaitOpenPage,{duration:1e10});await rd(id(2,10)*1e3),nt.drop(o),Ve.parsingStart()}else sn.changeTab(Tn.ParsingResult),nd()}if(n==="profile-info"){Le.list.value.push(s);let o=`
                ${s.name}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.rating}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.reviewsCount}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.subscribers}&nbsp;&nbsp;/&nbsp;&nbsp; 
                ${s.deliveryInfo}
            `;Ve.setProfileLinkInfo(i,o)}})}),(t,n)=>(le(),ke(rt,null,[ot(ld),j("main",lm,[(le(),yt(Ru,null,[ve(sn).active.value===ve(Tn).ReviewsFilter?(le(),yt(Vd,{key:0,ref:"filterRef"},null,512)):Ye("",!0)],1024)),ve(sn).active.value===ve(Tn).ParsingResult?(le(),yt(Gp,{key:0})):Ye("",!0),ve(sn).active.value===ve(Tn).ProfileSavedList?(le(),yt(Ry,{key:1})):Ye("",!0),ve(sn).active.value===ve(Tn).Settings?(le(),yt(am,{key:2})):Ye("",!0)])],64))}}),um=rh();Zf(cm).use(um).mount("#options");
